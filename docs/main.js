"use strict";var n1=Object.defineProperty,r1=Object.defineProperties,i1=Object.getOwnPropertyDescriptors,gO=Object.getOwnPropertySymbols,s1=Object.prototype.hasOwnProperty,o1=Object.prototype.propertyIsEnumerable,mO=(bt,Pe,N)=>Pe in bt?n1(bt,Pe,{enumerable:!0,configurable:!0,writable:!0,value:N}):bt[Pe]=N,yO=(bt,Pe)=>{for(var N in Pe||(Pe={}))s1.call(Pe,N)&&mO(bt,N,Pe[N]);if(gO)for(var N of gO(Pe))o1.call(Pe,N)&&mO(bt,N,Pe[N]);return bt},vO=(bt,Pe)=>r1(bt,i1(Pe));(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[179,429],{2011:(bt,Pe,N)=>{N.d(Pe,{Dh:()=>_e,GT:()=>Ce,cc:()=>je,hO:()=>Xe,on:()=>W,pX:()=>fe,xv:()=>Te});var h=N(5e3),U=N(127),P=N(5813);bt=N.hmd(bt);const se=["ngOnDestroy"],fe=(ae,gt,pt,Ve={})=>new Proxy(ae,{get:(Ge,ke)=>pt.runOutsideAngular(()=>{var ut;if(ae[ke])return!(null===(ut=null==Ve?void 0:Ve.spy)||void 0===ut)&&ut.get&&Ve.spy.get(ke,ae[ke]),ae[ke];if(se.indexOf(ke)>-1)return()=>{};const ue=gt.toPromise().then(me=>{const Ae=me&&me[ke];return"function"==typeof Ae?Ae.bind(me):Ae&&Ae.then?Ae.then(X=>pt.run(()=>X)):pt.run(()=>Ae)});return new Proxy(()=>{},{get:(me,Ae)=>ue[Ae],apply:(me,Ae,X)=>ue.then(re=>{var Ie;const de=re&&re(...X);return!(null===(Ie=null==Ve?void 0:Ve.spy)||void 0===Ie)&&Ie.apply&&Ve.spy.apply(ke,X,de),de})})})}),Ce=(ae,gt)=>{gt.forEach(pt=>{Object.getOwnPropertyNames(pt.prototype||pt).forEach(Ve=>{Object.defineProperty(ae.prototype,Ve,Object.getOwnPropertyDescriptor(pt.prototype||pt,Ve))})})};class Ee{constructor(gt){return gt}}const _e=new h.OlP("angularfire2.app.options"),Te=new h.OlP("angularfire2.app.name");function W(ae,gt,pt){const Ge="object"==typeof pt&&pt||{};Ge.name=Ge.name||"string"==typeof pt&&pt||"[DEFAULT]";const ut=U.Z.apps.filter(ue=>ue&&ue.name===Ge.name)[0]||gt.runOutsideAngular(()=>U.Z.initializeApp(ae,Ge));try{JSON.stringify(ae)!==JSON.stringify(ut.options)&&q("error",`${ut.name} Firebase App already initialized with different options${bt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(ue){}return new Ee(ut)}const q=(ae,...gt)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[ae](...gt)},te={provide:Ee,useFactory:W,deps:[_e,h.R0b,[new h.FiY,Te]]};let Xe=(()=>{class ae{constructor(pt){U.Z.registerVersion("angularfire",P.q4.full,"core"),U.Z.registerVersion("angularfire",P.q4.full,"app-compat"),U.Z.registerVersion("angular",h.q4F.full,pt.toString())}static initializeApp(pt,Ve){return{ngModule:ae,providers:[{provide:_e,useValue:pt},{provide:Te,useValue:Ve}]}}}return ae.\u0275fac=function(pt){return new(pt||ae)(h.LFG(h.Lbi))},ae.\u0275mod=h.oAB({type:ae}),ae.\u0275inj=h.cJS({providers:[te]}),ae})();function je(ae,gt,pt,Ve,Ge){const[,ke,ut]=globalThis.\u0275AngularfireInstanceCache.find(ue=>ue[0]===ae)||[];if(ke)return function Re(ae,gt){try{return ae.toString()===gt.toString()}catch(pt){return ae===gt}}(Ge,ut)||(Me("error",`${gt} was already initialized on the ${pt} Firebase App with different settings.${Et?" You may need to reload as Firebase is not HMR aware.":""}`),Me("warn",{is:Ge,was:ut})),ke;{const ue=Ve();return globalThis.\u0275AngularfireInstanceCache.push([ae,ue,Ge]),ue}}const Et=!!bt.hot,Me=(ae,...gt)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[ae](...gt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(bt,Pe,N)=>{N.d(Pe,{q4:()=>Ou,iC:()=>Oc,HU:()=>xc,vb:()=>ds,JM:()=>Nu,u3:()=>Rc});var h=N(5e3),U=N(5867),P=N(5861),se=N(9681),fe=N(2090),Ce=N(4859),Ee=N(1877),_e=N(8766);const Te="@firebase/installations",W="0.5.12",te=`w:${W}`,Xe="FIS_v2",gt=new fe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function pt(b){return b instanceof fe.ZR&&b.code.includes("request-failed")}function Ve({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function Ge(b){return{token:b.token,requestStatus:2,expiresIn:re(b.expiresIn),creationTime:Date.now()}}function ke(b,D){return ut.apply(this,arguments)}function ut(){return(ut=(0,P.Z)(function*(b,D){const V=(yield D.json()).error;return gt.create("request-failed",{requestName:b,serverCode:V.code,serverMessage:V.message,serverStatus:V.status})})).apply(this,arguments)}function ue({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function me(b,{refreshToken:D}){const M=ue(b);return M.append("Authorization",function Ie(b){return`${Xe} ${b}`}(D)),M}function Ae(b){return X.apply(this,arguments)}function X(){return(X=(0,P.Z)(function*(b){const D=yield b();return D.status>=500&&D.status<600?b():D})).apply(this,arguments)}function re(b){return Number(b.replace("s","000"))}function de(b,D){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,P.Z)(function*({appConfig:b,heartbeatServiceProvider:D},{fid:M}){const V=Ve(b),ne=ue(b),we=D.getImmediate({optional:!0});if(we){const pn=yield we.getHeartbeatsHeader();pn&&ne.append("x-firebase-client",pn)}const ht={method:"POST",headers:ne,body:JSON.stringify({fid:M,authVersion:Xe,appId:b.appId,sdkVersion:te})},Ot=yield Ae(()=>fetch(V,ht));if(Ot.ok){const pn=yield Ot.json();return{fid:pn.fid||M,registrationStatus:2,refreshToken:pn.refreshToken,authToken:Ge(pn.authToken)}}throw yield ke("Create Installation",Ot)})).apply(this,arguments)}function et(b){return new Promise(D=>{setTimeout(D,b)})}const Tn=/^[cdef][\w-]{21}$/;function ct(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const M=function On(b){return function Tt(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return Tn.test(M)?M:""}catch(b){return""}}function hr(b){return`${b.appName}!${b.appId}`}const Fn=new Map;function Un(b,D){const M=hr(b);Dr(M,D),function Qs(b,D){const M=function ar(){return!Xn&&"BroadcastChannel"in self&&(Xn=new BroadcastChannel("[Firebase] FID Change"),Xn.onmessage=b=>{Dr(b.data.key,b.data.fid)}),Xn}();M&&M.postMessage({key:b,fid:D}),function qi(){0===Fn.size&&Xn&&(Xn.close(),Xn=null)}()}(M,D)}function Dr(b,D){const M=Fn.get(b);if(M)for(const V of M)V(D)}let Xn=null;const mr="firebase-installations-store";let Fi=null;function Zi(){return Fi||(Fi=(0,_e.X3)("firebase-installations-database",1,{upgrade:(b,D)=>{0===D&&b.createObjectStore(mr)}})),Fi}function vt(b,D){return kr.apply(this,arguments)}function kr(){return(kr=(0,P.Z)(function*(b,D){const M=hr(b),ne=(yield Zi()).transaction(mr,"readwrite"),we=ne.objectStore(mr),He=yield we.get(M);return yield we.put(D,M),yield ne.done,(!He||He.fid!==D.fid)&&Un(b,D.fid),D})).apply(this,arguments)}function fr(b){return zn.apply(this,arguments)}function zn(){return(zn=(0,P.Z)(function*(b){const D=hr(b),V=(yield Zi()).transaction(mr,"readwrite");yield V.objectStore(mr).delete(D),yield V.done})).apply(this,arguments)}function Wr(b,D){return bi.apply(this,arguments)}function bi(){return(bi=(0,P.Z)(function*(b,D){const M=hr(b),ne=(yield Zi()).transaction(mr,"readwrite"),we=ne.objectStore(mr),He=yield we.get(M),ht=D(He);return void 0===ht?yield we.delete(M):yield we.put(ht,M),yield ne.done,ht&&(!He||He.fid!==ht.fid)&&Un(b,ht.fid),ht})).apply(this,arguments)}function Qn(b){return ir.apply(this,arguments)}function ir(){return(ir=(0,P.Z)(function*(b){let D;const M=yield Wr(b.appConfig,V=>{const ne=er(V),we=At(b,ne);return D=we.registrationPromise,we.installationEntry});return""===M.fid?{installationEntry:yield D}:{installationEntry:M,registrationPromise:D}})).apply(this,arguments)}function er(b){return Zt(b||{fid:ct(),registrationStatus:0})}function At(b,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(gt.create("app-offline"))};const M={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},V=function Rt(b,D){return rn.apply(this,arguments)}(b,M);return{installationEntry:M,registrationPromise:V}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:Xr(b)}:{installationEntry:D}}function rn(){return(rn=(0,P.Z)(function*(b,D){try{const M=yield de(b,D);return vt(b.appConfig,M)}catch(M){throw pt(M)&&409===M.customData.serverCode?yield fr(b.appConfig):yield vt(b.appConfig,{fid:D.fid,registrationStatus:0}),M}})).apply(this,arguments)}function Xr(b){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,P.Z)(function*(b){let D=yield Fr(b.appConfig);for(;1===D.registrationStatus;)yield et(100),D=yield Fr(b.appConfig);if(0===D.registrationStatus){const{installationEntry:M,registrationPromise:V}=yield Qn(b);return V||M}return D})).apply(this,arguments)}function Fr(b){return Wr(b,D=>{if(!D)throw gt.create("installation-not-found");return Zt(D)})}function Zt(b){return function ei(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function cn(b,D){return pi.apply(this,arguments)}function pi(){return(pi=(0,P.Z)(function*({appConfig:b,heartbeatServiceProvider:D},M){const V=Sn(b,M),ne=me(b,M),we=D.getImmediate({optional:!0});if(we){const pn=yield we.getHeartbeatsHeader();pn&&ne.append("x-firebase-client",pn)}const ht={method:"POST",headers:ne,body:JSON.stringify({installation:{sdkVersion:te,appId:b.appId}})},Ot=yield Ae(()=>fetch(V,ht));if(Ot.ok)return Ge(yield Ot.json());throw yield ke("Generate Auth Token",Ot)})).apply(this,arguments)}function Sn(b,{fid:D}){return`${Ve(b)}/${D}/authTokens:generate`}function Q(b){return $.apply(this,arguments)}function $(){return($=(0,P.Z)(function*(b,D=!1){let M;const V=yield Wr(b.appConfig,we=>{if(!Pt(we))throw gt.create("not-registered");const He=we.authToken;if(!D&&Wn(He))return we;if(1===He.requestStatus)return M=B(b,D),we;{if(!navigator.onLine)throw gt.create("app-offline");const ht=pr(we);return M=Be(b,ht),ht}});return M?yield M:V.authToken})).apply(this,arguments)}function B(b,D){return Z.apply(this,arguments)}function Z(){return(Z=(0,P.Z)(function*(b,D){let M=yield K(b.appConfig);for(;1===M.authToken.requestStatus;)yield et(100),M=yield K(b.appConfig);const V=M.authToken;return 0===V.requestStatus?Q(b,D):V})).apply(this,arguments)}function K(b){return Wr(b,D=>{if(!Pt(D))throw gt.create("not-registered");return function ie(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Be(b,D){return st.apply(this,arguments)}function st(){return(st=(0,P.Z)(function*(b,D){try{const M=yield cn(b,D),V=Object.assign(Object.assign({},D),{authToken:M});return yield vt(b.appConfig,V),M}catch(M){if(!pt(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const V=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield vt(b.appConfig,V)}else yield fr(b.appConfig);throw M}})).apply(this,arguments)}function Pt(b){return void 0!==b&&2===b.registrationStatus}function Wn(b){return 2===b.requestStatus&&!function $n(b){const D=Date.now();return D<b.creationTime||b.creationTime+b.expiresIn<D+36e5}(b)}function pr(b){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:D})}function H(){return(H=(0,P.Z)(function*(b){const D=b,{installationEntry:M,registrationPromise:V}=yield Qn(D);return V?V.catch(console.error):Q(D).catch(console.error),M.fid})).apply(this,arguments)}function R(){return(R=(0,P.Z)(function*(b,D=!1){const M=b;return yield L(M),(yield Q(M,D)).token})).apply(this,arguments)}function L(b){return z.apply(this,arguments)}function z(){return(z=(0,P.Z)(function*(b){const{registrationPromise:D}=yield Qn(b);D&&(yield D)})).apply(this,arguments)}function Ye(b){return gt.create("missing-app-config-values",{valueName:b})}const at="installations",Gt=b=>{const D=b.getProvider("app").getImmediate(),M=function ye(b){if(!b||!b.options)throw Ye("App Configuration");if(!b.name)throw Ye("App Name");const D=["projectId","apiKey","appId"];for(const M of D)if(!b.options[M])throw Ye(M);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(D);return{app:D,appConfig:M,heartbeatServiceProvider:(0,se._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},Bt=b=>{const D=b.getProvider("app").getImmediate(),M=(0,se._getProvider)(D,at).getImmediate();return{getId:()=>function j(b){return H.apply(this,arguments)}(M),getToken:ne=>function xe(b){return R.apply(this,arguments)}(M,ne)}};(function Jn(){(0,se._registerComponent)(new Ce.wA(at,Gt,"PUBLIC")),(0,se._registerComponent)(new Ce.wA("installations-internal",Bt,"PRIVATE"))})(),(0,se.registerVersion)(Te,W),(0,se.registerVersion)(Te,W,"esm2017");const jt="@firebase/remote-config",Nt=new fe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class gi{constructor(D,M,V,ne){this.client=D,this.storage=M,this.storageCache=V,this.logger=ne}isCachedDataFresh(D,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const V=Date.now()-M,ne=V<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${V}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${ne}.`),ne}fetch(D){var M=this;return(0,P.Z)(function*(){const[V,ne]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(ne&&M.isCachedDataFresh(D.cacheMaxAgeMillis,V))return ne;D.eTag=ne&&ne.eTag;const we=yield M.client.fetch(D),He=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===we.status&&He.push(M.storage.setLastSuccessfulFetchResponse(we)),yield Promise.all(He),we})()}}function ze(b=navigator){return b.languages&&b.languages[0]||b.language}class lt{constructor(D,M,V,ne,we,He){this.firebaseInstallations=D,this.sdkVersion=M,this.namespace=V,this.projectId=ne,this.apiKey=we,this.appId=He}fetch(D){var M=this;return(0,P.Z)(function*(){var V,ne,we;const[He,ht]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),pn=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,gn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},kt={sdk_version:M.sdkVersion,app_instance_id:He,app_instance_id_token:ht,app_id:M.appId,language_code:ze()},Rr={method:"POST",headers:gn,body:JSON.stringify(kt)},ai=fetch(pn,Rr),To=new Promise((Ir,Fs)=>{D.signal.addEventListener(()=>{const gp=new Error("The operation was aborted.");gp.name="AbortError",Fs(gp)})});let ao;try{yield Promise.race([ai,To]),ao=yield ai}catch(Ir){let Fs="fetch-client-network";throw"AbortError"===(null===(V=Ir)||void 0===V?void 0:V.name)&&(Fs="fetch-timeout"),Nt.create(Fs,{originalErrorMessage:null===(ne=Ir)||void 0===ne?void 0:ne.message})}let ji=ao.status;const uo=ao.headers.get("ETag")||void 0;let ku,fs;if(200===ao.status){let Ir;try{Ir=yield ao.json()}catch(Fs){throw Nt.create("fetch-client-parse",{originalErrorMessage:null===(we=Fs)||void 0===we?void 0:we.message})}ku=Ir.entries,fs=Ir.state}if("INSTANCE_STATE_UNSPECIFIED"===fs?ji=500:"NO_CHANGE"===fs?ji=304:("NO_TEMPLATE"===fs||"EMPTY_CONFIG"===fs)&&(ku={}),304!==ji&&200!==ji)throw Nt.create("fetch-status",{httpStatus:ji});return{status:ji,eTag:uo,config:ku}})()}}class It{constructor(D,M){this.client=D,this.storage=M}fetch(D){var M=this;return(0,P.Z)(function*(){const V=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(D,V)})()}attemptFetch(D,{throttleEndTimeMillis:M,backoffCount:V}){var ne=this;return(0,P.Z)(function*(){yield function nt(b,D){return new Promise((M,V)=>{const ne=Math.max(D-Date.now(),0),we=setTimeout(M,ne);b.addEventListener(()=>{clearTimeout(we),V(Nt.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,M);try{const we=yield ne.client.fetch(D);return yield ne.storage.deleteThrottleMetadata(),we}catch(we){if(!function qe(b){if(!(b instanceof fe.ZR&&b.customData))return!1;const D=Number(b.customData.httpStatus);return 429===D||500===D||503===D||504===D}(we))throw we;const He={throttleEndTimeMillis:Date.now()+(0,fe.$s)(V),backoffCount:V+1};return yield ne.storage.setThrottleMetadata(He),ne.attemptFetch(D,He)}})()}}class wn{constructor(D,M,V,ne,we){this.app=D,this._client=M,this._storageCache=V,this._storage=ne,this._logger=we,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function on(b,D){var M;const V=b.target.error||void 0;return Nt.create(D,{originalErrorMessage:V&&(null===(M=V)||void 0===M?void 0:M.message)})}const an="app_namespace_store";class Ki{constructor(D,M,V,ne=function qr(){return new Promise((b,D)=>{var M;try{const V=indexedDB.open("firebase_remote_config",1);V.onerror=ne=>{D(on(ne,"storage-open"))},V.onsuccess=ne=>{b(ne.target.result)},V.onupgradeneeded=ne=>{0===ne.oldVersion&&ne.target.result.createObjectStore(an,{keyPath:"compositeKey"})}}catch(V){D(Nt.create("storage-open",{originalErrorMessage:null===(M=V)||void 0===M?void 0:M.message}))}})}()){this.appId=D,this.appName=M,this.namespace=V,this.openDbPromise=ne}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var M=this;return(0,P.Z)(function*(){const V=yield M.openDbPromise;return new Promise((ne,we)=>{var He;const Ot=V.transaction([an],"readonly").objectStore(an),pn=M.createCompositeKey(D);try{const gn=Ot.get(pn);gn.onerror=kt=>{we(on(kt,"storage-get"))},gn.onsuccess=kt=>{const Rr=kt.target.result;ne(Rr?Rr.value:void 0)}}catch(gn){we(Nt.create("storage-get",{originalErrorMessage:null===(He=gn)||void 0===He?void 0:He.message}))}})})()}set(D,M){var V=this;return(0,P.Z)(function*(){const ne=yield V.openDbPromise;return new Promise((we,He)=>{var ht;const pn=ne.transaction([an],"readwrite").objectStore(an),gn=V.createCompositeKey(D);try{const kt=pn.put({compositeKey:gn,value:M});kt.onerror=Rr=>{He(on(Rr,"storage-set"))},kt.onsuccess=()=>{we()}}catch(kt){He(Nt.create("storage-set",{originalErrorMessage:null===(ht=kt)||void 0===ht?void 0:ht.message}))}})})()}delete(D){var M=this;return(0,P.Z)(function*(){const V=yield M.openDbPromise;return new Promise((ne,we)=>{var He;const Ot=V.transaction([an],"readwrite").objectStore(an),pn=M.createCompositeKey(D);try{const gn=Ot.delete(pn);gn.onerror=kt=>{we(on(kt,"storage-delete"))},gn.onsuccess=()=>{ne()}}catch(gn){we(Nt.create("storage-delete",{originalErrorMessage:null===(He=gn)||void 0===He?void 0:He.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class sr{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,P.Z)(function*(){const M=D.storage.getLastFetchStatus(),V=D.storage.getLastSuccessfulFetchTimestampMillis(),ne=D.storage.getActiveConfig(),we=yield M;we&&(D.lastFetchStatus=we);const He=yield V;He&&(D.lastSuccessfulFetchTimestampMillis=He);const ht=yield ne;ht&&(D.activeConfig=ht)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function nh(){return Js.apply(this,arguments)}function Js(){return(Js=(0,P.Z)(function*(){if(!(0,fe.hl)())return!1;try{return yield(0,fe.eu)()}catch(b){return!1}})).apply(this,arguments)}!function Sr(){(0,se._registerComponent)(new Ce.wA("remote-config",function b(D,{instanceIdentifier:M}){const V=D.getProvider("app").getImmediate(),ne=D.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Nt.create("registration-window");if(!(0,fe.hl)())throw Nt.create("indexed-db-unavailable");const{projectId:we,apiKey:He,appId:ht}=V.options;if(!we)throw Nt.create("registration-project-id");if(!He)throw Nt.create("registration-api-key");if(!ht)throw Nt.create("registration-app-id");const Ot=new Ki(ht,V.name,M=M||"firebase"),pn=new sr(Ot),gn=new Ee.Yd(jt);gn.logLevel=Ee.in.ERROR;const kt=new lt(ne,se.SDK_VERSION,M,we,He,ht),Rr=new It(kt,Ot),ai=new gi(Rr,Ot,pn,gn),To=new wn(V,ai,pn,Ot,gn);return function kn(b){const D=(0,fe.m9)(b);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(To),To},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(jt,"0.3.11"),(0,se.registerVersion)(jt,"0.3.11","esm2017")}();const Lr="/firebase-messaging-sw.js",Ci="/firebase-cloud-messaging-push-scope",os="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",yo="google.c.a.c_id",Vo="google.c.a.c_l",Xs="google.c.a.ts",mi="google.c.a.e";var Yi=(()=>{return(b=Yi||(Yi={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",Yi;var b})();function Ms(b){const D=new Uint8Array(b);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Vi(b){const M=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),V=atob(M),ne=new Uint8Array(V.length);for(let we=0;we<V.length;++we)ne[we]=V.charCodeAt(we);return ne}const vo="fcm_token_details_db",Uo="fcm_token_object_Store";function lp(b){return fc.apply(this,arguments)}function fc(){return fc=(0,P.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(we=>we.name).includes(vo))return null;let D=null;return(yield(0,_e.X3)(vo,5,{upgrade:(V=(0,P.Z)(function*(ne,we,He,ht){var Ot;if(we<2||!ne.objectStoreNames.contains(Uo))return;const pn=ht.objectStore(Uo),gn=yield pn.index("fcmSenderId").get(b);if(yield pn.clear(),gn)if(2===we){const kt=gn;if(!kt.auth||!kt.p256dh||!kt.endpoint)return;D={token:kt.fcmToken,createTime:null!==(Ot=kt.createTime)&&void 0!==Ot?Ot:Date.now(),subscriptionOptions:{auth:kt.auth,p256dh:kt.p256dh,endpoint:kt.endpoint,swScope:kt.swScope,vapidKey:"string"==typeof kt.vapidKey?kt.vapidKey:Ms(kt.vapidKey)}}}else if(3===we){const kt=gn;D={token:kt.fcmToken,createTime:kt.createTime,subscriptionOptions:{auth:Ms(kt.auth),p256dh:Ms(kt.p256dh),endpoint:kt.endpoint,swScope:kt.swScope,vapidKey:Ms(kt.vapidKey)}}}else if(4===we){const kt=gn;D={token:kt.fcmToken,createTime:kt.createTime,subscriptionOptions:{auth:Ms(kt.auth),p256dh:Ms(kt.p256dh),endpoint:kt.endpoint,swScope:kt.swScope,vapidKey:Ms(kt.vapidKey)}}}}),function(we,He,ht,Ot){return V.apply(this,arguments)})})).close(),yield(0,_e.Lj)(vo),yield(0,_e.Lj)("fcm_vapid_details_db"),yield(0,_e.Lj)("undefined"),Er(D)?D:null;var V}),fc.apply(this,arguments)}function Er(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:D}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const us="firebase-messaging-store";let si=null;function yu(){return si||(si=(0,_e.X3)("firebase-messaging-database",1,{upgrade:(b,D)=>{0===D&&b.createObjectStore(us)}})),si}function Bo(b){return ms.apply(this,arguments)}function ms(){return(ms=(0,P.Z)(function*(b){const D=Qi(b),V=yield(yield yu()).transaction(us).objectStore(us).get(D);if(V)return V;{const ne=yield lp(b.appConfig.senderId);if(ne)return yield Zn(b,ne),ne}})).apply(this,arguments)}function Zn(b,D){return pc.apply(this,arguments)}function pc(){return(pc=(0,P.Z)(function*(b,D){const M=Qi(b),ne=(yield yu()).transaction(us,"readwrite");return yield ne.objectStore(us).put(D,M),yield ne.done,D})).apply(this,arguments)}function eo(b){return gc.apply(this,arguments)}function gc(){return(gc=(0,P.Z)(function*(b){const D=Qi(b),V=(yield yu()).transaction(us,"readwrite");yield V.objectStore(us).delete(D),yield V.done})).apply(this,arguments)}function Qi({appConfig:b}){return b.appId}const Ar=new fe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ln(b,D){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,P.Z)(function*(b,D){var M;const V=yield Oa(b),ne=We(D),we={method:"POST",headers:V,body:JSON.stringify(ne)};let He;try{He=yield(yield fetch(_o(b.appConfig),we)).json()}catch(ht){throw Ar.create("token-subscribe-failed",{errorInfo:null===(M=ht)||void 0===M?void 0:M.toString()})}if(He.error)throw Ar.create("token-subscribe-failed",{errorInfo:He.error.message});if(!He.token)throw Ar.create("token-subscribe-no-token");return He.token})).apply(this,arguments)}function dp(b,D){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,P.Z)(function*(b,D){var M;const V=yield Oa(b),ne=We(D.subscriptionOptions),we={method:"PATCH",headers:V,body:JSON.stringify(ne)};let He;try{He=yield(yield fetch(`${_o(b.appConfig)}/${D.token}`,we)).json()}catch(ht){throw Ar.create("token-update-failed",{errorInfo:null===(M=ht)||void 0===M?void 0:M.toString()})}if(He.error)throw Ar.create("token-update-failed",{errorInfo:He.error.message});if(!He.token)throw Ar.create("token-update-no-token");return He.token})).apply(this,arguments)}function Dl(b,D){return xa.apply(this,arguments)}function xa(){return(xa=(0,P.Z)(function*(b,D){var M;const ne={method:"DELETE",headers:yield Oa(b)};try{const He=yield(yield fetch(`${_o(b.appConfig)}/${D}`,ne)).json();if(He.error)throw Ar.create("token-unsubscribe-failed",{errorInfo:He.error.message})}catch(we){throw Ar.create("token-unsubscribe-failed",{errorInfo:null===(M=we)||void 0===M?void 0:M.toString()})}})).apply(this,arguments)}function _o({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function Oa(b){return jo.apply(this,arguments)}function jo(){return(jo=(0,P.Z)(function*({appConfig:b,installations:D}){const M=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function We({p256dh:b,auth:D,endpoint:M,vapidKey:V}){const ne={web:{endpoint:M,auth:D,p256dh:b}};return V!==os&&(ne.web.applicationPubKey=V),ne}const Pn=6048e5;function ih(b){return $o.apply(this,arguments)}function $o(){return($o=(0,P.Z)(function*(b){const D=yield sh(b.swRegistration,b.vapidKey),M={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:D.endpoint,auth:Ms(D.getKey("auth")),p256dh:Ms(D.getKey("p256dh"))},V=yield Bo(b.firebaseDependencies);if(V){if(hp(V.subscriptionOptions,M))return Date.now()>=V.createTime+Pn?vu(b,{token:V.token,createTime:Date.now(),subscriptionOptions:M}):V.token;try{yield Dl(b.firebaseDependencies,V.token)}catch(ne){console.warn(ne)}return _u(b.firebaseDependencies,M)}return _u(b.firebaseDependencies,M)})).apply(this,arguments)}function Vr(b){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,P.Z)(function*(b){const D=yield Bo(b.firebaseDependencies);D&&(yield Dl(b.firebaseDependencies,D.token),yield eo(b.firebaseDependencies));const M=yield b.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function vu(b,D){return Di.apply(this,arguments)}function Di(){return(Di=(0,P.Z)(function*(b,D){try{const M=yield dp(b.firebaseDependencies,D),V=Object.assign(Object.assign({},D),{token:M,createTime:Date.now()});return yield Zn(b.firebaseDependencies,V),M}catch(M){throw yield Vr(b),M}})).apply(this,arguments)}function _u(b,D){return Go.apply(this,arguments)}function Go(){return(Go=(0,P.Z)(function*(b,D){const V={token:yield ln(b,D),createTime:Date.now(),subscriptionOptions:D};return yield Zn(b,V),V.token})).apply(this,arguments)}function sh(b,D){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,P.Z)(function*(b,D){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Vi(D)})})).apply(this,arguments)}function hp(b,D){return D.vapidKey===b.vapidKey&&D.endpoint===b.endpoint&&D.auth===b.auth&&D.p256dh===b.p256dh}function wo(b){const D={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function Ur(b,D){if(!D.notification)return;b.notification={};const M=D.notification.title;M&&(b.notification.title=M);const V=D.notification.body;V&&(b.notification.body=V);const ne=D.notification.image;ne&&(b.notification.image=ne)}(D,b),function ys(b,D){!D.data||(b.data=D.data)}(D,b),function Pa(b,D){var M,V,ne,we,He;if(!(D.fcmOptions||null!==(M=D.notification)&&void 0!==M&&M.click_action))return;b.fcmOptions={};const ht=null!==(ne=null===(V=D.fcmOptions)||void 0===V?void 0:V.link)&&void 0!==ne?ne:null===(we=D.notification)||void 0===we?void 0:we.click_action;ht&&(b.fcmOptions.link=ht);const Ot=null===(He=D.fcmOptions)||void 0===He?void 0:He.analytics_label;Ot&&(b.fcmOptions.analyticsLabel=Ot)}(D,b),D}function Na(b){return"object"==typeof b&&!!b&&yo in b}function xs(b,D){const M=[];for(let V=0;V<b.length;V++)M.push(b.charAt(V)),V<D.length&&M.push(D.charAt(V));return M.join("")}function mc(b){return Ar.create("missing-app-config-values",{valueName:b})}xs("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),xs("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Sl{constructor(D,M,V){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ne=function Tl(b){if(!b||!b.options)throw mc("App Configuration Object");if(!b.name)throw mc("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:M}=b;for(const V of D)if(!M[V])throw mc(V);return{appName:b.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:ne,installations:M,analyticsProvider:V}}_delete(){return Promise.resolve()}}function oh(b){return zo.apply(this,arguments)}function zo(){return(zo=(0,P.Z)(function*(b){var D;try{b.swRegistration=yield navigator.serviceWorker.register(Lr,{scope:Ci}),b.swRegistration.update().catch(()=>{})}catch(M){throw Ar.create("failed-service-worker-registration",{browserErrorMessage:null===(D=M)||void 0===D?void 0:D.message})}})).apply(this,arguments)}function yc(b,D){return ka.apply(this,arguments)}function ka(){return(ka=(0,P.Z)(function*(b,D){if(!D&&!b.swRegistration&&(yield oh(b)),D||!b.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw Ar.create("invalid-sw-registration");b.swRegistration=D}})).apply(this,arguments)}function vc(b,D){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,P.Z)(function*(b,D){D?b.vapidKey=D:b.vapidKey||(b.vapidKey=os)})).apply(this,arguments)}function Wo(){return(Wo=(0,P.Z)(function*(b,D){if(!navigator)throw Ar.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Ar.create("permission-blocked");return yield vc(b,null==D?void 0:D.vapidKey),yield yc(b,null==D?void 0:D.serviceWorkerRegistration),ih(b)})).apply(this,arguments)}function ah(b,D,M){return La.apply(this,arguments)}function La(){return(La=(0,P.Z)(function*(b,D,M){const V=uh(D);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(V,{message_id:M[yo],message_name:M[Vo],message_time:M[Xs],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function uh(b){switch(b){case Yi.NOTIFICATION_CLICKED:return"notification_open";case Yi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function to(){return(to=(0,P.Z)(function*(b,D){const M=D.data;if(!M.isFirebaseMessaging)return;b.onMessageHandler&&M.messageType===Yi.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(wo(M)):b.onMessageHandler.next(wo(M)));const V=M.data;Na(V)&&"1"===V[mi]&&(yield ah(b,M.messageType,V))})).apply(this,arguments)}const no="@firebase/messaging",yr=b=>{const D=new Sl(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function Ml(b,D){return to.apply(this,arguments)}(D,M)),D},Os=b=>{const D=b.getProvider("messaging").getImmediate();return{getToken:V=>function Al(b,D){return Wo.apply(this,arguments)}(D,V)}};function Ol(){return _c.apply(this,arguments)}function _c(){return(_c=(0,P.Z)(function*(){try{yield(0,fe.eu)()}catch(b){return!1}return"undefined"!=typeof window&&(0,fe.hl)()&&(0,fe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function vr(){(0,se._registerComponent)(new Ce.wA("messaging",yr,"PUBLIC")),(0,se._registerComponent)(new Ce.wA("messaging-internal",Os,"PRIVATE")),(0,se.registerVersion)(no,"0.9.16"),(0,se.registerVersion)(no,"0.9.16","esm2017")}();const Ko="analytics",Nl="firebase_id",bc="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",kl="https://www.googletagmanager.com/gtag/js",Mr=new Ee.Yd("@firebase/analytics");function wu(b){return Promise.all(b.map(D=>D.catch(M=>M)))}function Eu(b,D){const M=document.createElement("script");M.src=`${kl}?l=${b}&id=${D}`,M.async=!0,document.head.appendChild(M)}function lh(b,D,M,V,ne,we){return bu.apply(this,arguments)}function bu(){return(bu=(0,P.Z)(function*(b,D,M,V,ne,we){const He=V[ne];try{if(He)yield D[He];else{const Ot=(yield wu(M)).find(pn=>pn.measurementId===ne);Ot&&(yield D[Ot.appId])}}catch(ht){Mr.error(ht)}b("config",ne,we)})).apply(this,arguments)}function Rs(b,D,M,V,ne){return Va.apply(this,arguments)}function Va(){return(Va=(0,P.Z)(function*(b,D,M,V,ne){try{let we=[];if(ne&&ne.send_to){let He=ne.send_to;Array.isArray(He)||(He=[He]);const ht=yield wu(M);for(const Ot of He){const pn=ht.find(kt=>kt.measurementId===Ot),gn=pn&&D[pn.appId];if(!gn){we=[];break}we.push(gn)}}0===we.length&&(we=Object.values(D)),yield Promise.all(we),b("event",V,ne||{})}catch(we){Mr.error(we)}})).apply(this,arguments)}function Fl(){const b=window.document.getElementsByTagName("script");for(const D of Object.values(b))if(D.src&&D.src.includes(kl))return D;return null}const Br=new fe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ba=new class Dc{constructor(D={},M=1e3){this.throttleMetadata=D,this.intervalMillis=M}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,M){this.throttleMetadata[D]=M}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function Yo(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function fh(b){return xr.apply(this,arguments)}function xr(){return(xr=(0,P.Z)(function*(b){var D;const{appId:M,apiKey:V}=b,ne={method:"GET",headers:Yo(V)},we=bc.replace("{app-id}",M),He=yield fetch(we,ne);if(200!==He.status&&304!==He.status){let ht="";try{const Ot=yield He.json();null!==(D=Ot.error)&&void 0!==D&&D.message&&(ht=Ot.error.message)}catch(Ot){}throw Br.create("config-fetch-failed",{httpStatus:He.status,responseMessage:ht})}return He.json()})).apply(this,arguments)}function Ll(b){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,P.Z)(function*(b,D=Ba,M){const{appId:V,apiKey:ne,measurementId:we}=b.options;if(!V)throw Br.create("no-app-id");if(!ne){if(we)return{measurementId:we,appId:V};throw Br.create("no-api-key")}const He=D.getThrottleMetadata(V)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ht=new ja;return setTimeout((0,P.Z)(function*(){ht.abort()}),void 0!==M?M:6e4),Vl({appId:V,apiKey:ne,measurementId:we},He,ht,D)})).apply(this,arguments)}function Vl(b,D,M){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,P.Z)(function*(b,{throttleEndTimeMillis:D,backoffCount:M},V,ne=Ba){var we,He;const{appId:ht,measurementId:Ot}=b;try{yield Tc(V,D)}catch(pn){if(Ot)return Mr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ot} provided in the "measurementId" field in the local Firebase config. [${null===(we=pn)||void 0===we?void 0:we.message}]`),{appId:ht,measurementId:Ot};throw pn}try{const pn=yield fh(b);return ne.deleteThrottleMetadata(ht),pn}catch(pn){const gn=pn;if(!Cu(gn)){if(ne.deleteThrottleMetadata(ht),Ot)return Mr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ot} provided in the "measurementId" field in the local Firebase config. [${null==gn?void 0:gn.message}]`),{appId:ht,measurementId:Ot};throw pn}const kt=503===Number(null===(He=null==gn?void 0:gn.customData)||void 0===He?void 0:He.httpStatus)?(0,fe.$s)(M,ne.intervalMillis,30):(0,fe.$s)(M,ne.intervalMillis),Rr={throttleEndTimeMillis:Date.now()+kt,backoffCount:M+1};return ne.setThrottleMetadata(ht,Rr),Mr.debug(`Calling attemptFetch again in ${kt} millis`),Vl(b,Rr,V,ne)}})).apply(this,arguments)}function Tc(b,D){return new Promise((M,V)=>{const ne=Math.max(D-Date.now(),0),we=setTimeout(M,ne);b.addEventListener(()=>{clearTimeout(we),V(Br.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function Cu(b){if(!(b instanceof fe.ZR&&b.customData))return!1;const D=Number(b.customData.httpStatus);return 429===D||500===D||503===D||504===D}class ja{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let Eo,Tu;function Qo(){return(Qo=(0,P.Z)(function*(b,D,M,V,ne){if(ne&&ne.global)b("event",M,V);else{const we=yield D;b("event",M,Object.assign(Object.assign({},V),{send_to:we}))}})).apply(this,arguments)}function ta(b){Tu=b}function Sc(b){Eo=b}function io(){return na.apply(this,arguments)}function na(){return(na=(0,P.Z)(function*(){var b;if(!(0,fe.hl)())return Mr.warn(Br.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,fe.eu)()}catch(D){return Mr.warn(Br.create("indexeddb-unavailable",{errorInfo:null===(b=D)||void 0===b?void 0:b.toString()}).message),!1}return!0})).apply(this,arguments)}function ra(){return(ra=(0,P.Z)(function*(b,D,M,V,ne,we,He){var ht;const Ot=Ll(b);Ot.then(ai=>{M[ai.measurementId]=ai.appId,b.options.measurementId&&ai.measurementId!==b.options.measurementId&&Mr.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${ai.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ai=>Mr.error(ai)),D.push(Ot);const pn=io().then(ai=>{if(ai)return V.getId()}),[gn,kt]=yield Promise.all([Ot,pn]);Fl()||Eu(we,gn.measurementId),Tu&&(ne("consent","default",Tu),ta(void 0)),ne("js",new Date);const Rr=null!==(ht=null==He?void 0:He.config)&&void 0!==ht?ht:{};return Rr.origin="firebase",Rr.update=!0,null!=kt&&(Rr[Nl]=kt),ne("config",gn.measurementId,Rr),Eo&&(ne("set",Eo),Sc(void 0)),gn.measurementId})).apply(this,arguments)}class Su{constructor(D){this.app=D}_delete(){return delete yi[this.app.options.appId],Promise.resolve()}}let yi={},ia=[];const Io={};let oa,_s,sa="dataLayer",Bl=!1;function mh(b,D,M){!function fp(){const b=[];if((0,fe.ru)()&&b.push("This is a browser extension environment."),(0,fe.zI)()||b.push("Cookies are not available."),b.length>0){const D=b.map((V,ne)=>`(${ne+1}) ${V}`).join(" "),M=Br.create("invalid-analytics-context",{errorInfo:D});Mr.warn(M.message)}}();const V=b.options.appId;if(!V)throw Br.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw Br.create("no-api-key");Mr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=yi[V])throw Br.create("already-exists",{id:V});if(!Bl){!function Iu(b){let D=[];Array.isArray(window[b])?D=window[b]:window[b]=D}(sa);const{wrappedGtag:we,gtagCore:He}=function Ua(b,D,M,V,ne){let we=function(...He){window[V].push(arguments)};return window[ne]&&"function"==typeof window[ne]&&(we=window[ne]),window[ne]=function Cc(b,D,M,V){function we(){return(we=(0,P.Z)(function*(He,ht,Ot){try{"event"===He?yield Rs(b,D,M,ht,Ot):"config"===He?yield lh(b,D,M,V,ht,Ot):"consent"===He?b("consent","update",Ot):b("set",ht)}catch(pn){Mr.error(pn)}})).apply(this,arguments)}return function ne(He,ht,Ot){return we.apply(this,arguments)}}(we,b,D,M),{gtagCore:we,wrappedGtag:window[ne]}}(yi,ia,Io,sa,"gtag");_s=we,oa=He,Bl=!0}return yi[V]=function gh(b,D,M,V,ne,we,He){return ra.apply(this,arguments)}(b,ia,Io,D,oa,sa,M),new Su(b)}function Mm(){return yh.apply(this,arguments)}function yh(){return(yh=(0,P.Z)(function*(){if((0,fe.ru)()||!(0,fe.zI)()||!(0,fe.hl)())return!1;try{return yield(0,fe.eu)()}catch(b){return!1}})).apply(this,arguments)}const ls="@firebase/analytics";!function vi(){(0,se._registerComponent)(new Ce.wA(Ko,(D,{options:M})=>mh(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,se._registerComponent)(new Ce.wA("analytics-internal",function b(D){try{const M=D.getProvider(Ko).getImmediate();return{logEvent:(V,ne,we)=>function Mu(b,D,M,V){b=(0,fe.m9)(b),function $a(b,D,M,V,ne){return Qo.apply(this,arguments)}(_s,yi[b.app.options.appId],D,M,V).catch(ne=>Mr.error(ne))}(M,V,ne,we)}}catch(M){throw Br.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,se.registerVersion)(ls,"0.8.0"),(0,se.registerVersion)(ls,"0.8.0","esm2017")}();var Ns=N(4408),so=N(7565);const Ga=new class bo extends so.v{}(class xu extends Ns.o{constructor(D,M){super(D,M),this.scheduler=D,this.work=M}schedule(D,M=0){return M>0?super.schedule(D,M):(this.delay=M,this.state=D,this.scheduler.flush(this),this)}execute(D,M){return M>0||this.closed?super.execute(D,M):this._execute(D,M)}requestAsyncId(D,M,V=0){return null!=V&&V>0||null==V&&this.delay>0?super.requestAsyncId(D,M,V):D.flush(this)}});var oi=N(4986),Wt=N(9751),$l=N(8505),Mc=N(9468),_i=N(5363);const Ou=new h.GfV("7.4.1"),ws="__angularfire_symbol__analyticsIsSupportedValue",Ru="__angularfire_symbol__analyticsIsSupported",Es="__angularfire_symbol__remoteConfigIsSupportedValue",Xi="__angularfire_symbol__remoteConfigIsSupported",za="__angularfire_symbol__messagingIsSupportedValue",Pu="__angularfire_symbol__messagingIsSupported";function Nu(b,D,M){if(D){if(1===D.length)return D[0];const we=D.filter(He=>He.app===M);if(1===we.length)return we[0]}return M.container.getProvider(b).getImmediate({optional:!0})}globalThis[Ru]||(globalThis[Ru]=Mm().then(b=>globalThis[ws]=b).catch(()=>globalThis[ws]=!1)),globalThis[Pu]||(globalThis[Pu]=Ol().then(b=>globalThis[za]=b).catch(()=>globalThis[za]=!1)),globalThis[Xi]||(globalThis[Xi]=nh().then(b=>globalThis[Es]=b).catch(()=>globalThis[Es]=!1));const ds=(b,D)=>{const M=D?[D]:(0,U.C6)(),V=[];return M.forEach(ne=>{ne.container.getProvider(b).instances.forEach(He=>{V.includes(He)||V.push(He)})}),V};function hs(){}class jr{constructor(D,M=Ga){this.zone=D,this.delegate=M}now(){return this.delegate.now()}schedule(D,M,V){const ne=this.zone;return this.delegate.schedule(function(He){ne.runGuarded(()=>{D.apply(this,[He])})},M,V)}}class Bi{constructor(D){this.zone=D,this.task=null}call(D,M){const V=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",hs,{},hs,hs)),M.pipe((0,$l.b)({next:V,complete:V,error:V})).subscribe(D).add(V)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let xc=(()=>{class b{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new jr(Zone.current)),this.insideAngular=M.run(()=>new jr(Zone.current,oi.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(M){return new(M||b)(h.LFG(h.R0b))},b.\u0275prov=h.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function oo(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function Gl(b){return oo().ngZone.runOutsideAngular(()=>b())}function Is(b){return oo().ngZone.run(()=>b())}function Oc(b){return oo(),function Or(b){return function(M){return(M=M.lift(new Bi(b.ngZone))).pipe((0,Mc.R)(b.outsideAngular),(0,_i.Q)(b.insideAngular))}}(oo())(b)}const qa=(b,D)=>function(){const V=arguments;return D&&setTimeout(()=>{"scheduled"===D.state&&D.invoke()},10),Is(()=>b.apply(void 0,V))},Rc=(b,D)=>function(){let M;const V=arguments;for(let we=0;we<arguments.length;we++)"function"==typeof V[we]&&(D&&(M||(M=Is(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",hs,{},hs,hs)))),V[we]=qa(V[we],M));const ne=Gl(()=>b.apply(this,V));if(!D){if(ne instanceof Wt.y){const we=oo();return ne.pipe((0,Mc.R)(we.outsideAngular),(0,_i.Q)(we.insideAngular))}return Is(()=>ne)}return ne instanceof Wt.y?ne.pipe(Oc):ne instanceof Promise?Is(()=>new Promise((we,He)=>ne.then(ht=>Is(()=>we(ht)),ht=>Is(()=>He(ht))))):"function"==typeof ne&&M?function(){return setTimeout(()=>{M&&"scheduled"===M.state&&M.invoke()},10),ne.apply(this,arguments)}:Is(()=>ne)}},7143:(bt,Pe,N)=>{N.d(Pe,{$:()=>_o,A:()=>q,B:()=>je,G:()=>Bt,H:()=>Ze,J:()=>It,L:()=>Wn,M:()=>Js,N:()=>mo,P:()=>oi,Q:()=>yo,R:()=>xm,T:()=>Vo,U:()=>os,V:()=>Yi,W:()=>Ms,X:()=>lp,Y:()=>Sa,Z:()=>ln,_:()=>dp,a:()=>ro,a0:()=>ih,a1:()=>Vr,a2:()=>vu,a3:()=>_u,a4:()=>sh,a5:()=>hp,a6:()=>Ur,a7:()=>ys,a8:()=>Na,a9:()=>xs,aA:()=>Rr,aB:()=>ht,aC:()=>Is,aD:()=>Gl,aE:()=>_t,aI:()=>Yo,aL:()=>mi,aa:()=>oh,ab:()=>yc,ac:()=>vc,af:()=>ah,ag:()=>uh,ah:()=>Ml,ak:()=>us,al:()=>wc,an:()=>kl,ao:()=>bu,ap:()=>De,aq:()=>Ae,ar:()=>le,as:()=>L,at:()=>pt,au:()=>Ao,av:()=>ji,aw:()=>Ve,ax:()=>ue,ay:()=>re,az:()=>$n,b:()=>Br,c:()=>Xi,d:()=>pp,e:()=>Pu,f:()=>Oc,g:()=>M,h:()=>Rc,i:()=>na,j:()=>we,k:()=>ql,l:()=>jl,m:()=>Mo,o:()=>_e,r:()=>Ns,s:()=>rr,u:()=>Ga});var h=N(5861),U=N(2090),P=N(9681),se=N(655),fe=N(1877),Ce=N(4859);const _e={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},q={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const je=function te(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Re=function Xe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Et=new U.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ae=new fe.Yd("@firebase/auth");function gt(_,...p){ae.logLevel<=fe.in.ERROR&&ae.error(`Auth (${P.SDK_VERSION}): ${_}`,...p)}function pt(_,...p){throw ut(_,...p)}function Ve(_,...p){return ut(_,...p)}function Ge(_,p,m){const E=Object.assign(Object.assign({},Re()),{[p]:m});return new U.LL("auth","Firebase",E).create(p,{appName:_.name})}function ke(_,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&pt(_,"argument-error"),Ge(_,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ut(_,...p){if("string"!=typeof _){const m=p[0],E=[...p.slice(1)];return E[0]&&(E[0].appName=_.name),_._errorFactory.create(m,...E)}return Et.create(_,...p)}function ue(_,p,...m){if(!_)throw ut(p,...m)}function me(_){const p="INTERNAL ASSERTION FAILED: "+_;throw gt(p),new Error(p)}function Ae(_,p){_||me(p)}const X=new Map;function re(_){Ae(_ instanceof Function,"Expected a class definition");let p=X.get(_);return p?(Ae(p instanceof _,"Instance stored in cache mismatched with class"),p):(p=new _,X.set(_,p),p)}function Qe(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function et(){return"http:"===Tt()||"https:"===Tt()}function Tt(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class ct{constructor(p,m){this.shortDelay=p,this.longDelay=m,Ae(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,U.uI)()||(0,U.b$)()}get(){return function Tn(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(et()||(0,U.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function On(_,p){Ae(_.emulator,"Emulator should always be set here");const{url:m}=_.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class hr{static initialize(p,m,E){this.fetchImpl=p,m&&(this.headersImpl=m),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void me("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void me("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void me("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Fn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Un=new ct(3e4,6e4);function Cn(_,p){return _.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:_.tenantId}):p}function tn(_,p,m,E){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,h.Z)(function*(_,p,m,E,A={}){return Qs(_,A,(0,h.Z)(function*(){let k={},oe={};E&&("GET"===p?oe=E:k={body:JSON.stringify(E)});const Le=(0,U.xO)(Object.assign({key:_.config.apiKey},oe)).slice(1),wt=yield _._getAdditionalHeaders();return wt["Content-Type"]="application/json",_.languageCode&&(wt["X-Firebase-Locale"]=_.languageCode),hr.fetch()(ki(_,_.config.apiHost,m,Le),Object.assign({method:p,headers:wt,referrerPolicy:"no-referrer"},k))}))})).apply(this,arguments)}function Qs(_,p,m){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,h.Z)(function*(_,p,m){_._canInitEmulator=!1;const E=Object.assign(Object.assign({},Fn),p);try{const A=new ri(_),k=yield Promise.race([m(),A.promise]);A.clearNetworkTimeout();const oe=yield k.json();if("needConfirmation"in oe)throw mr(_,"account-exists-with-different-credential",oe);if(k.ok&&!("errorMessage"in oe))return oe;{const Le=k.ok?oe.errorMessage:oe.error.message,[wt,Vt]=Le.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===wt)throw mr(_,"credential-already-in-use",oe);if("EMAIL_EXISTS"===wt)throw mr(_,"email-already-in-use",oe);if("USER_DISABLED"===wt)throw mr(_,"user-disabled",oe);const Dn=E[wt]||wt.toLowerCase().replace(/[_\s]+/g,"-");if(Vt)throw Ge(_,Dn,Vt);pt(_,Dn)}}catch(A){if(A instanceof U.ZR)throw A;pt(_,"network-request-failed")}})).apply(this,arguments)}function ar(_,p,m,E){return qi.apply(this,arguments)}function qi(){return(qi=(0,h.Z)(function*(_,p,m,E,A={}){const k=yield tn(_,p,m,E,A);return"mfaPendingCredential"in k&&pt(_,"multi-factor-auth-required",{_serverResponse:k}),k})).apply(this,arguments)}function ki(_,p,m,E){const A=`${p}${m}?${E}`;return _.config.emulator?On(_.config,A):`${_.config.apiScheme}://${A}`}class ri{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,E)=>{this.timer=setTimeout(()=>E(Ve(this.auth,"network-request-failed")),Un.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function mr(_,p,m){const E={appName:_.name};m.email&&(E.email=m.email),m.phoneNumber&&(E.phoneNumber=m.phoneNumber);const A=Ve(_,p,E);return A.customData._tokenResponse=m,A}function Zi(){return(Zi=(0,h.Z)(function*(_,p){return tn(_,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function vt(_,p){return kr.apply(this,arguments)}function kr(){return(kr=(0,h.Z)(function*(_,p){return tn(_,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function fr(_,p){return zn.apply(this,arguments)}function zn(){return(zn=(0,h.Z)(function*(_,p){return tn(_,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function Wr(_){if(_)try{const p=new Date(Number(_));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function ir(){return(ir=(0,h.Z)(function*(_,p=!1){const m=(0,U.m9)(_),E=yield m.getIdToken(p),A=At(E);ue(A&&A.exp&&A.auth_time&&A.iat,m.auth,"internal-error");const k="object"==typeof A.firebase?A.firebase:void 0,oe=null==k?void 0:k.sign_in_provider;return{claims:A,token:E,authTime:Wr(er(A.auth_time)),issuedAtTime:Wr(er(A.iat)),expirationTime:Wr(er(A.exp)),signInProvider:oe||null,signInSecondFactor:(null==k?void 0:k.sign_in_second_factor)||null}})).apply(this,arguments)}function er(_){return 1e3*Number(_)}function At(_){var p;const[m,E,A]=_.split(".");if(void 0===m||void 0===E||void 0===A)return gt("JWT malformed, contained fewer than 3 sections"),null;try{const k=(0,U.tV)(E);return k?JSON.parse(k):(gt("Failed to decode base64 JWT payload"),null)}catch(k){return gt("Caught error parsing JWT payload as JSON",null===(p=k)||void 0===p?void 0:p.toString()),null}}function rn(_,p){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,h.Z)(function*(_,p,m=!1){if(m)return p;try{return yield p}catch(E){throw E instanceof U.ZR&&Tr(E)&&_.auth.currentUser===_&&(yield _.auth.signOut()),E}})).apply(this,arguments)}function Tr({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class Fr{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const A=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const E=this.getInterval(p);this.timerId=setTimeout((0,h.Z)(function*(){yield m.iteration()}),E)}iteration(){var p=this;return(0,h.Z)(function*(){var m;try{yield p.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===(null===(m=E)||void 0===m?void 0:m.code)&&p.schedule(!0))}p.schedule()})()}}class Zt{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wr(this.lastLoginAt),this.creationTime=Wr(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ei(_){return cn.apply(this,arguments)}function cn(){return(cn=(0,h.Z)(function*(_){var p;const m=_.auth,E=yield _.getIdToken(),A=yield rn(_,fr(m,{idToken:E}));ue(null==A?void 0:A.users.length,m,"internal-error");const k=A.users[0];_._notifyReloadListener(k);const oe=null!==(p=k.providerUserInfo)&&void 0!==p&&p.length?$(k.providerUserInfo):[],Le=Q(_.providerData,oe),Dn=!!_.isAnonymous&&!(_.email&&k.passwordHash||null!=Le&&Le.length),_r={uid:k.localId,displayName:k.displayName||null,photoURL:k.photoUrl||null,email:k.email||null,emailVerified:k.emailVerified||!1,phoneNumber:k.phoneNumber||null,tenantId:k.tenantId||null,providerData:Le,metadata:new Zt(k.createdAt,k.lastLoginAt),isAnonymous:Dn};Object.assign(_,_r)})).apply(this,arguments)}function Sn(){return(Sn=(0,h.Z)(function*(_){const p=(0,U.m9)(_);yield ei(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Q(_,p){return[..._.filter(E=>!p.some(A=>A.providerId===E.providerId)),...p]}function $(_){return _.map(p=>{var{providerId:m}=p,E=(0,se._T)(p,["providerId"]);return{providerId:m,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function Z(){return(Z=(0,h.Z)(function*(_,p){const m=yield Qs(_,{},(0,h.Z)(function*(){const E=(0,U.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:A,apiKey:k}=_.config,oe=ki(_,A,"/v1/token",`key=${k}`),Le=yield _._getAdditionalHeaders();return Le["Content-Type"]="application/x-www-form-urlencoded",hr.fetch()(oe,{method:"POST",headers:Le,body:E})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class K{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){ue(p.idToken,"internal-error"),ue(void 0!==p.idToken,"internal-error"),ue(void 0!==p.refreshToken,"internal-error");const m="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function Rt(_){const p=At(_);return ue(p,"internal-error"),ue(void 0!==p.exp,"internal-error"),ue(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var E=this;return(0,h.Z)(function*(){return ue(!E.accessToken||E.refreshToken,p,"user-token-expired"),m||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(p,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var E=this;return(0,h.Z)(function*(){const{accessToken:A,refreshToken:k,expiresIn:oe}=yield function B(_,p){return Z.apply(this,arguments)}(p,m);E.updateTokensAndExpiration(A,k,Number(oe))})()}updateTokensAndExpiration(p,m,E){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(p,m){const{refreshToken:E,accessToken:A,expirationTime:k}=m,oe=new K;return E&&(ue("string"==typeof E,"internal-error",{appName:p}),oe.refreshToken=E),A&&(ue("string"==typeof A,"internal-error",{appName:p}),oe.accessToken=A),k&&(ue("number"==typeof k,"internal-error",{appName:p}),oe.expirationTime=k),oe}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new K,this.toJSON())}_performRefresh(){return me("not implemented")}}function Be(_,p){ue("string"==typeof _||void 0===_,"internal-error",{appName:p})}class st{constructor(p){var{uid:m,auth:E,stsTokenManager:A}=p,k=(0,se._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Fr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=E,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=k.displayName||null,this.email=k.email||null,this.emailVerified=k.emailVerified||!1,this.phoneNumber=k.phoneNumber||null,this.photoURL=k.photoURL||null,this.isAnonymous=k.isAnonymous||!1,this.tenantId=k.tenantId||null,this.providerData=k.providerData?[...k.providerData]:[],this.metadata=new Zt(k.createdAt||void 0,k.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,h.Z)(function*(){const E=yield rn(m,m.stsTokenManager.getToken(m.auth,p));return ue(E,m.auth,"internal-error"),m.accessToken!==E&&(m.accessToken=E,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),E})()}getIdTokenResult(p){return function Qn(_){return ir.apply(this,arguments)}(this,p)}reload(){return function pi(_){return Sn.apply(this,arguments)}(this)}_assign(p){this!==p&&(ue(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new st(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var E=this;return(0,h.Z)(function*(){let A=!1;p.idToken&&p.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(p),A=!0),m&&(yield ei(E)),yield E.auth._persistUserIfCurrent(E),A&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var p=this;return(0,h.Z)(function*(){const m=yield p.getIdToken();return yield rn(p,function Fi(_,p){return Zi.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var E,A,k,oe,Le,wt,Vt,Dn;const _r=null!==(E=m.displayName)&&void 0!==E?E:void 0,co=null!==(A=m.email)&&void 0!==A?A:void 0,Ka=null!==(k=m.phoneNumber)&&void 0!==k?k:void 0,Ip=null!==(oe=m.photoURL)&&void 0!==oe?oe:void 0,Zl=null!==(Le=m.tenantId)&&void 0!==Le?Le:void 0,Bu=null!==(wt=m._redirectEventId)&&void 0!==wt?wt:void 0,J_=null!==(Vt=m.createdAt)&&void 0!==Vt?Vt:void 0,Eh=null!==(Dn=m.lastLoginAt)&&void 0!==Dn?Dn:void 0,{uid:Kl,emailVerified:Ih,isAnonymous:Yl,providerData:bh,stsTokenManager:Fm}=m;ue(Kl&&Fm,p,"internal-error");const bp=K.fromJSON(this.name,Fm);ue("string"==typeof Kl,p,"internal-error"),Be(_r,p.name),Be(co,p.name),ue("boolean"==typeof Ih,p,"internal-error"),ue("boolean"==typeof Yl,p,"internal-error"),Be(Ka,p.name),Be(Ip,p.name),Be(Zl,p.name),Be(Bu,p.name),Be(J_,p.name),Be(Eh,p.name);const lo=new st({uid:Kl,auth:p,email:co,emailVerified:Ih,displayName:_r,isAnonymous:Yl,photoURL:Ip,phoneNumber:Ka,tenantId:Zl,stsTokenManager:bp,createdAt:J_,lastLoginAt:Eh});return bh&&Array.isArray(bh)&&(lo.providerData=bh.map(Ch=>Object.assign({},Ch))),Bu&&(lo._redirectEventId=Bu),lo}static _fromIdTokenResponse(p,m,E=!1){return(0,h.Z)(function*(){const A=new K;A.updateFromServerResponse(m);const k=new st({uid:m.localId,auth:p,stsTokenManager:A,isAnonymous:E});return yield ei(k),k})()}}const Wn=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(m,E){var A=this;return(0,h.Z)(function*(){A.storage[m]=E})()}_get(m){var E=this;return(0,h.Z)(function*(){const A=E.storage[m];return void 0===A?null:A})()}_remove(m){var E=this;return(0,h.Z)(function*(){delete E.storage[m]})()}_addListener(m,E){}_removeListener(m,E){}}return _.type="NONE",_})();function $n(_,p,m){return`firebase:${_}:${p}:${m}`}class pr{constructor(p,m,E){this.persistence=p,this.auth=m,this.userKey=E;const{config:A,name:k}=this.auth;this.fullUserKey=$n(this.userKey,A.apiKey,k),this.fullPersistenceKey=$n("persistence",A.apiKey,k),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,h.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?st._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,h.Z)(function*(){if(m.persistence===p)return;const E=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,E?m.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,E="authUser"){return(0,h.Z)(function*(){if(!m.length)return new pr(re(Wn),p,E);const A=(yield Promise.all(m.map(function(){var Vt=(0,h.Z)(function*(Dn){if(yield Dn._isAvailable())return Dn});return function(Dn){return Vt.apply(this,arguments)}}()))).filter(Vt=>Vt);let k=A[0]||re(Wn);const oe=$n(E,p.config.apiKey,p.name);let Le=null;for(const Vt of m)try{const Dn=yield Vt._get(oe);if(Dn){const _r=st._fromJSON(p,Dn);Vt!==k&&(Le=_r),k=Vt;break}}catch(Dn){}const wt=A.filter(Vt=>Vt._shouldAllowMigration);return k._shouldAllowMigration&&wt.length?(k=wt[0],Le&&(yield k._set(oe,Le.toJSON())),yield Promise.all(m.map(function(){var Vt=(0,h.Z)(function*(Dn){if(Dn!==k)try{yield Dn._remove(oe)}catch(_r){}});return function(Dn){return Vt.apply(this,arguments)}}())),new pr(k,p,E)):new pr(k,p,E)})()}}function ie(_){const p=_.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(R(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(j(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(z(p))return"Blackberry";if(J(p))return"Webos";if(H(p))return"Safari";if((p.includes("chrome/")||xe(p))&&!p.includes("edge/"))return"Chrome";if(L(p))return"Android";{const E=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function j(_=(0,U.z$)()){return/firefox\//i.test(_)}function H(_=(0,U.z$)()){const p=_.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function xe(_=(0,U.z$)()){return/crios\//i.test(_)}function R(_=(0,U.z$)()){return/iemobile/i.test(_)}function L(_=(0,U.z$)()){return/android/i.test(_)}function z(_=(0,U.z$)()){return/blackberry/i.test(_)}function J(_=(0,U.z$)()){return/webos/i.test(_)}function le(_=(0,U.z$)()){return/iphone|ipad|ipod/i.test(_)||/macintosh/i.test(_)&&/mobile/i.test(_)}function De(_=(0,U.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}function dt(_=(0,U.z$)()){return le(_)||L(_)||J(_)||z(_)||/windows phone/i.test(_)||R(_)}function ye(_,p=[]){let m;switch(_){case"Browser":m=ie((0,U.z$)());break;case"Worker":m=`${ie((0,U.z$)())}-${_}`;break;default:m=_}const E=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${P.SDK_VERSION}/${E}`}class Ye{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,m){const E=k=>new Promise((oe,Le)=>{try{oe(p(k))}catch(wt){Le(wt)}});E.onAbort=m,this.queue.push(E);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(p){var m=this;return(0,h.Z)(function*(){var E;if(m.auth.currentUser===p)return;const A=[];try{for(const k of m.queue)yield k(p),k.onAbort&&A.push(k.onAbort)}catch(k){A.reverse();for(const oe of A)try{oe()}catch(Le){}throw m.auth._errorFactory.create("login-blocked",{originalMessage:null===(E=k)||void 0===E?void 0:E.message})}})()}}class at{constructor(p,m,E){this.app=p,this.heartbeatServiceProvider=m,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gt(this),this.idTokenSubscription=new Gt(this),this.beforeStateQueue=new Ye(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Et,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(p,m){var E=this;return m&&(this._popupRedirectResolver=re(m)),this._initializationPromise=this.queue((0,h.Z)(function*(){var A,k;if(!E._deleted&&(E.persistenceManager=yield pr.create(E,p),!E._deleted)){if(null!==(A=E._popupRedirectResolver)&&void 0!==A&&A._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(oe){}yield E.initializeCurrentUser(m),E.lastNotifiedUid=(null===(k=E.currentUser)||void 0===k?void 0:k.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,h.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m,!0)}})()}initializeCurrentUser(p){var m=this;return(0,h.Z)(function*(){var E;const A=yield m.assertedPersistence.getCurrentUser();let k=A,oe=!1;if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const Le=null===(E=m.redirectUser)||void 0===E?void 0:E._redirectEventId,wt=null==k?void 0:k._redirectEventId,Vt=yield m.tryRedirectSignIn(p);(!Le||Le===wt)&&(null==Vt?void 0:Vt.user)&&(k=Vt.user,oe=!0)}if(!k)return m.directlySetCurrentUser(null);if(!k._redirectEventId){if(oe)try{yield m.beforeStateQueue.runMiddleware(k)}catch(Le){k=A,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(Le))}return k?m.reloadAndSetCurrentUserOrClear(k):m.directlySetCurrentUser(null)}return ue(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===k._redirectEventId?m.directlySetCurrentUser(k):m.reloadAndSetCurrentUserOrClear(k)})()}tryRedirectSignIn(p){var m=this;return(0,h.Z)(function*(){let E=null;try{E=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch(A){yield m._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,h.Z)(function*(){var E;try{yield ei(p)}catch(A){if("auth/network-request-failed"!==(null===(E=A)||void 0===E?void 0:E.code))return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function en(){if("undefined"==typeof navigator)return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var p=this;return(0,h.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,h.Z)(function*(){const E=p?(0,U.m9)(p):null;return E&&ue(E.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(E&&E._clone(m))})()}_updateCurrentUser(p,m=!1){var E=this;return(0,h.Z)(function*(){if(!E._deleted)return p&&ue(E.tenantId===p.tenantId,E,"tenant-id-mismatch"),m||(yield E.beforeStateQueue.runMiddleware(p)),E.queue((0,h.Z)(function*(){yield E.directlySetCurrentUser(p),E.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,h.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var m=this;return this.queue((0,h.Z)(function*(){yield m.assertedPersistence.setPersistence(re(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new U.LL("auth","Firebase",p())}onAuthStateChanged(p,m,E){return this.registerStateListener(this.authStateSubscription,p,m,E)}beforeAuthStateChanged(p,m){return this.beforeStateQueue.pushCallback(p,m)}onIdTokenChanged(p,m,E){return this.registerStateListener(this.idTokenSubscription,p,m,E)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var E=this;return(0,h.Z)(function*(){const A=yield E.getOrInitRedirectPersistenceManager(m);return null===p?A.removeCurrentUser():A.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,h.Z)(function*(){if(!m.redirectPersistenceManager){const E=p&&re(p)||m._popupRedirectResolver;ue(E,m,"argument-error"),m.redirectPersistenceManager=yield pr.create(m,[re(E._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,h.Z)(function*(){var E,A;return m._isInitialized&&(yield m.queue((0,h.Z)(function*(){}))),(null===(E=m._currentUser)||void 0===E?void 0:E._redirectEventId)===p?m._currentUser:(null===(A=m.redirectUser)||void 0===A?void 0:A._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,h.Z)(function*(){if(p===m.currentUser)return m.queue((0,h.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,E,A){if(this._deleted)return()=>{};const k="function"==typeof m?m:m.next.bind(m),oe=this._isInitialized?Promise.resolve():this._initializationPromise;return ue(oe,this,"internal-error"),oe.then(()=>k(this.currentUser)),"function"==typeof m?p.addObserver(m,E,A):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,h.Z)(function*(){m.currentUser&&m.currentUser!==p&&m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh(),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=ye(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,h.Z)(function*(){var m;const E={"X-Client-Version":p.clientVersion};p.app.options.appId&&(E["X-Firebase-gmpid"]=p.app.options.appId);const A=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return A&&(E["X-Firebase-Client"]=A),E})()}}function _t(_){return(0,U.m9)(_)}class Gt{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,U.ne)(m=>this.observer=m)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Bt(_,p,m){const E=_t(_);ue(E._canInitEmulator,E,"emulator-config-failed"),ue(/^https?:\/\//.test(p),E,"invalid-emulator-scheme");const A=!(null==m||!m.disableWarnings),k=Jn(p),{host:oe,port:Le}=function jt(_){const p=Jn(_),m=/(\/\/)?([^?#/]+)/.exec(_.substr(p.length));if(!m)return{host:"",port:null};const E=m[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(E);if(A){const k=A[1];return{host:k,port:Bn(E.substr(k.length+1))}}{const[k,oe]=E.split(":");return{host:k,port:Bn(oe)}}}(p);E.config.emulator={url:`${k}//${oe}${null===Le?"":`:${Le}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:oe,port:Le,protocol:k.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function hn(){function _(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}function Jn(_){const p=_.indexOf(":");return p<0?"":_.substr(0,p+1)}function Bn(_){if(!_)return null;const p=Number(_);return isNaN(p)?null:p}class Ze{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return me("not implemented")}_getIdTokenResponse(p){return me("not implemented")}_linkToIdToken(p,m){return me("not implemented")}_getReauthenticationResolver(p){return me("not implemented")}}function qn(_,p){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,h.Z)(function*(_,p){return tn(_,"POST","/v1/accounts:resetPassword",Cn(_,p))})).apply(this,arguments)}function Rn(_,p){return mn.apply(this,arguments)}function mn(){return(mn=(0,h.Z)(function*(_,p){return tn(_,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Dt(_,p){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,h.Z)(function*(_,p){return tn(_,"POST","/v1/accounts:update",Cn(_,p))})).apply(this,arguments)}function Mt(){return(Mt=(0,h.Z)(function*(_,p){return ar(_,"POST","/v1/accounts:signInWithPassword",Cn(_,p))})).apply(this,arguments)}function Jt(_,p){return zt.apply(this,arguments)}function zt(){return(zt=(0,h.Z)(function*(_,p){return tn(_,"POST","/v1/accounts:sendOobCode",Cn(_,p))})).apply(this,arguments)}function $t(_,p){return kn.apply(this,arguments)}function kn(){return(kn=(0,h.Z)(function*(_,p){return Jt(_,p)})).apply(this,arguments)}function ii(_,p){return fn.apply(this,arguments)}function fn(){return(fn=(0,h.Z)(function*(_,p){return Jt(_,p)})).apply(this,arguments)}function xn(_,p){return it.apply(this,arguments)}function it(){return(it=(0,h.Z)(function*(_,p){return Jt(_,p)})).apply(this,arguments)}function he(_,p){return pe.apply(this,arguments)}function pe(){return(pe=(0,h.Z)(function*(_,p){return Jt(_,p)})).apply(this,arguments)}function Ht(){return(Ht=(0,h.Z)(function*(_,p){return ar(_,"POST","/v1/accounts:signInWithEmailLink",Cn(_,p))})).apply(this,arguments)}function gi(){return(gi=(0,h.Z)(function*(_,p){return ar(_,"POST","/v1/accounts:signInWithEmailLink",Cn(_,p))})).apply(this,arguments)}class ze extends Ze{constructor(p,m,E,A=null){super("password",E),this._email=p,this._password=m,this._tenantId=A}static _fromEmailAndPassword(p,m){return new ze(p,m,"password")}static _fromEmailAndCode(p,m,E=null){return new ze(p,m,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,h.Z)(function*(){switch(m.signInMethod){case"password":return function Xt(_,p){return Mt.apply(this,arguments)}(p,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function be(_,p){return Ht.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:pt(p,"internal-error")}})()}_linkToIdToken(p,m){var E=this;return(0,h.Z)(function*(){switch(E.signInMethod){case"password":return Rn(p,{idToken:m,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function ur(_,p){return gi.apply(this,arguments)}(p,{idToken:m,email:E._email,oobCode:E._password});default:pt(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function lt(_,p){return nt.apply(this,arguments)}function nt(){return(nt=(0,h.Z)(function*(_,p){return ar(_,"POST","/v1/accounts:signInWithIdp",Cn(_,p))})).apply(this,arguments)}class It extends Ze{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new It(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):pt("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:A}=m,k=(0,se._T)(m,["providerId","signInMethod"]);if(!E||!A)return null;const oe=new It(E,A);return oe.idToken=k.idToken||void 0,oe.accessToken=k.accessToken||void 0,oe.secret=k.secret,oe.nonce=k.nonce,oe.pendingToken=k.pendingToken||null,oe}_getIdTokenResponse(p){return lt(p,this.buildRequest())}_linkToIdToken(p,m){const E=this.buildRequest();return E.idToken=m,lt(p,E)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,lt(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,U.xO)(m)}return p}}function sn(_,p){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,h.Z)(function*(_,p){return tn(_,"POST","/v1/accounts:sendVerificationCode",Cn(_,p))})).apply(this,arguments)}function on(){return(on=(0,h.Z)(function*(_,p){return ar(_,"POST","/v1/accounts:signInWithPhoneNumber",Cn(_,p))})).apply(this,arguments)}function An(){return(An=(0,h.Z)(function*(_,p){const m=yield ar(_,"POST","/v1/accounts:signInWithPhoneNumber",Cn(_,p));if(m.temporaryProof)throw mr(_,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const cr={USER_NOT_FOUND:"user-not-found"};function Ki(){return(Ki=(0,h.Z)(function*(_,p){return ar(_,"POST","/v1/accounts:signInWithPhoneNumber",Cn(_,Object.assign(Object.assign({},p),{operation:"REAUTH"})),cr)})).apply(this,arguments)}class sr extends Ze{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new sr({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new sr({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function wn(_,p){return on.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function an(_,p){return An.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function qr(_,p){return Ki.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:E,verificationCode:A}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:E,code:A}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:E,phoneNumber:A,temporaryProof:k}=p;return E||m||A||k?new sr({verificationId:m,verificationCode:E,phoneNumber:A,temporaryProof:k}):null}}class Li{constructor(p){var m,E,A,k,oe,Le;const wt=(0,U.zd)((0,U.pd)(p)),Vt=null!==(m=wt.apiKey)&&void 0!==m?m:null,Dn=null!==(E=wt.oobCode)&&void 0!==E?E:null,_r=function Sr(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=wt.mode)&&void 0!==A?A:null);ue(Vt&&Dn&&_r,"argument-error"),this.apiKey=Vt,this.operation=_r,this.code=Dn,this.continueUrl=null!==(k=wt.continueUrl)&&void 0!==k?k:null,this.languageCode=null!==(oe=wt.languageCode)&&void 0!==oe?oe:null,this.tenantId=null!==(Le=wt.tenantId)&&void 0!==Le?Le:null}static parseLink(p){const m=function gr(_){const p=(0,U.zd)((0,U.pd)(_)).link,m=p?(0,U.zd)((0,U.pd)(p)).deep_link_id:null,E=(0,U.zd)((0,U.pd)(_)).deep_link_id;return(E?(0,U.zd)((0,U.pd)(E)).link:null)||E||m||p||_}(p);try{return new Li(m)}catch(E){return null}}}let Js=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(m,E){return ze._fromEmailAndPassword(m,E)}static credentialWithLink(m,E){const A=Li.parseLink(E);return ue(A,"argument-error"),ze._fromEmailAndCode(m,A.code,A.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class Lr{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Ci extends Lr{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class os extends Ci{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return ue("providerId"in m&&"signInMethod"in m,"argument-error"),It._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return ue(p.idToken||p.accessToken,"argument-error"),It._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return os.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return os.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:E,oauthTokenSecret:A,pendingToken:k,nonce:oe,providerId:Le}=p;if(!E&&!A&&!m&&!k||!Le)return null;try{return new os(Le)._credential({idToken:m,accessToken:E,nonce:oe,pendingToken:k})}catch(wt){return null}}}let mo=(()=>{class _ extends Ci{constructor(){super("facebook.com")}static credential(m){return It._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return _.credential(m.oauthAccessToken)}catch(E){return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),yo=(()=>{class _ extends Ci{constructor(){super("google.com"),this.addScope("profile")}static credential(m,E){return It._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:E})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:E,oauthAccessToken:A}=m;if(!E&&!A)return null;try{return _.credential(E,A)}catch(k){return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),Vo=(()=>{class _ extends Ci{constructor(){super("github.com")}static credential(m){return It._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return _.credential(m.oauthAccessToken)}catch(E){return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class mi extends Ze{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return lt(p,this.buildRequest())}_linkToIdToken(p,m){const E=this.buildRequest();return E.idToken=m,lt(p,E)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,lt(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:A,pendingToken:k}=m;return E&&A&&k&&E===A?new mi(E,k):null}static _create(p,m){return new mi(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Yi extends Lr{constructor(p){ue(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Yi.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Yi.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=mi.fromJSON(p);return ue(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:E}=p;if(!m||!E)return null;try{return mi._create(E,m)}catch(A){return null}}}let Ms=(()=>{class _ extends Ci{constructor(){super("twitter.com")}static credential(m,E){return It._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:E})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:E,oauthTokenSecret:A}=m;if(!E||!A)return null;try{return _.credential(E,A)}catch(k){return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function Vi(_,p){return vo.apply(this,arguments)}function vo(){return(vo=(0,h.Z)(function*(_,p){return ar(_,"POST","/v1/accounts:signUp",Cn(_,p))})).apply(this,arguments)}class as{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,E,A=!1){return(0,h.Z)(function*(){const k=yield st._fromIdTokenResponse(p,E,A),oe=Uo(E);return new as({user:k,providerId:oe,_tokenResponse:E,operationType:m})})()}static _forOperation(p,m,E){return(0,h.Z)(function*(){yield p._updateTokensIfNecessary(E,!0);const A=Uo(E);return new as({user:p,providerId:A,_tokenResponse:E,operationType:m})})()}}function Uo(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function lp(_){return fc.apply(this,arguments)}function fc(){return(fc=(0,h.Z)(function*(_){var p;const m=_t(_);if(yield m._initializationPromise,null!==(p=m.currentUser)&&void 0!==p&&p.isAnonymous)return new as({user:m.currentUser,providerId:null,operationType:"signIn"});const E=yield Vi(m,{returnSecureToken:!0}),A=yield as._fromIdTokenResponse(m,"signIn",E,!0);return yield m._updateCurrentUser(A.user),A})).apply(this,arguments)}class Er extends U.ZR{constructor(p,m,E,A){var k;super(m.code,m.message),this.operationType=E,this.user=A,Object.setPrototypeOf(this,Er.prototype),this.customData={appName:p.name,tenantId:null!==(k=p.tenantId)&&void 0!==k?k:void 0,_serverResponse:m.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(p,m,E,A){return new Er(p,m,E,A)}}function Cl(_,p,m,E){return("reauthenticate"===p?m._getReauthenticationResolver(_):m._getIdTokenResponse(_)).catch(k=>{throw"auth/multi-factor-auth-required"===k.code?Er._fromErrorAndOperation(_,k,p,E):k})}function rh(_){return new Set(_.map(({providerId:p})=>p).filter(p=>!!p))}function us(_,p){return si.apply(this,arguments)}function si(){return(si=(0,h.Z)(function*(_,p){const m=(0,U.m9)(_);yield ms(!0,m,p);const{providerUserInfo:E}=yield vt(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),A=rh(E||[]);return m.providerData=m.providerData.filter(k=>A.has(k.providerId)),A.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function yu(_,p){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,h.Z)(function*(_,p,m=!1){const E=yield rn(_,p._linkToIdToken(_.auth,yield _.getIdToken()),m);return as._forOperation(_,"link",E)})).apply(this,arguments)}function ms(_,p,m){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,h.Z)(function*(_,p,m){yield ei(p);const A=!1===_?"provider-already-linked":"no-such-provider";ue(rh(p.providerData).has(m)===_,p.auth,A)})).apply(this,arguments)}function pc(_,p){return eo.apply(this,arguments)}function eo(){return(eo=(0,h.Z)(function*(_,p,m=!1){var E;const{auth:A}=_,k="reauthenticate";try{const oe=yield rn(_,Cl(A,k,p,_),m);ue(oe.idToken,A,"internal-error");const Le=At(oe.idToken);ue(Le,A,"internal-error");const{sub:wt}=Le;return ue(_.uid===wt,A,"user-mismatch"),as._forOperation(_,k,oe)}catch(oe){throw"auth/user-not-found"===(null===(E=oe)||void 0===E?void 0:E.code)&&pt(A,"user-mismatch"),oe}})).apply(this,arguments)}function gc(_,p){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,h.Z)(function*(_,p,m=!1){const E="signIn",A=yield Cl(_,E,p),k=yield as._fromIdTokenResponse(_,E,A);return m||(yield _._updateCurrentUser(k.user)),k})).apply(this,arguments)}function Sa(_,p){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,h.Z)(function*(_,p){return gc(_t(_),p)})).apply(this,arguments)}function ln(_,p){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,h.Z)(function*(_,p){const m=(0,U.m9)(_);return yield ms(!1,m,p.providerId),yu(m,p)})).apply(this,arguments)}function dp(_,p){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,h.Z)(function*(_,p){return pc((0,U.m9)(_),p)})).apply(this,arguments)}function Dl(_,p){return xa.apply(this,arguments)}function xa(){return(xa=(0,h.Z)(function*(_,p){return ar(_,"POST","/v1/accounts:signInWithCustomToken",Cn(_,p))})).apply(this,arguments)}function _o(_,p){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,h.Z)(function*(_,p){const m=_t(_),E=yield Dl(m,{token:p,returnSecureToken:!0}),A=yield as._fromIdTokenResponse(m,"signIn",E);return yield m._updateCurrentUser(A.user),A})).apply(this,arguments)}class jo{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?We._fromServerResponse(p,m):pt(p,"internal-error")}}class We extends jo{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new We(m)}}function Pn(_,p,m){var E;ue((null===(E=m.url)||void 0===E?void 0:E.length)>0,_,"invalid-continue-uri"),ue(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(ue(m.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(ue(m.android.packageName.length>0,_,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function ih(_,p,m){return $o.apply(this,arguments)}function $o(){return($o=(0,h.Z)(function*(_,p,m){const E=(0,U.m9)(_),A={requestType:"PASSWORD_RESET",email:p};m&&Pn(E,A,m),yield ii(E,A)})).apply(this,arguments)}function Vr(_,p,m){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,h.Z)(function*(_,p,m){yield qn((0,U.m9)(_),{oobCode:p,newPassword:m})})).apply(this,arguments)}function vu(_,p){return Di.apply(this,arguments)}function Di(){return(Di=(0,h.Z)(function*(_,p){yield Dt((0,U.m9)(_),{oobCode:p})})).apply(this,arguments)}function _u(_,p){return Go.apply(this,arguments)}function Go(){return(Go=(0,h.Z)(function*(_,p){const m=(0,U.m9)(_),E=yield qn(m,{oobCode:p}),A=E.requestType;switch(ue(A,m,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ue(E.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ue(E.mfaInfo,m,"internal-error");default:ue(E.email,m,"internal-error")}let k=null;return E.mfaInfo&&(k=jo._fromServerResponse(_t(m),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:k},operation:A}})).apply(this,arguments)}function sh(_,p){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,h.Z)(function*(_,p){const{data:m}=yield _u((0,U.m9)(_),p);return m.email})).apply(this,arguments)}function hp(_,p,m){return wo.apply(this,arguments)}function wo(){return(wo=(0,h.Z)(function*(_,p,m){const E=_t(_),A=yield Vi(E,{returnSecureToken:!0,email:p,password:m}),k=yield as._fromIdTokenResponse(E,"signIn",A);return yield E._updateCurrentUser(k.user),k})).apply(this,arguments)}function Ur(_,p,m){return Sa((0,U.m9)(_),Js.credential(p,m))}function ys(_,p,m){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,h.Z)(function*(_,p,m){const E=(0,U.m9)(_),A={requestType:"EMAIL_SIGNIN",email:p};ue(m.handleCodeInApp,E,"argument-error"),m&&Pn(E,A,m),yield xn(E,A)})).apply(this,arguments)}function Na(_,p){const m=Li.parseLink(p);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}function xs(_,p,m){return Tl.apply(this,arguments)}function Tl(){return(Tl=(0,h.Z)(function*(_,p,m){const E=(0,U.m9)(_),A=Js.credentialWithLink(p,m||Qe());return ue(A._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Sa(E,A)})).apply(this,arguments)}function mc(_,p){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,h.Z)(function*(_,p){return tn(_,"POST","/v1/accounts:createAuthUri",Cn(_,p))})).apply(this,arguments)}function oh(_,p){return zo.apply(this,arguments)}function zo(){return(zo=(0,h.Z)(function*(_,p){const E={identifier:p,continueUri:et()?Qe():"http://localhost"},{signinMethods:A}=yield mc((0,U.m9)(_),E);return A||[]})).apply(this,arguments)}function yc(_,p){return ka.apply(this,arguments)}function ka(){return(ka=(0,h.Z)(function*(_,p){const m=(0,U.m9)(_),A={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};p&&Pn(m.auth,A,p);const{email:k}=yield $t(m.auth,A);k!==_.email&&(yield _.reload())})).apply(this,arguments)}function vc(_,p,m){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,h.Z)(function*(_,p,m){const E=(0,U.m9)(_),k={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:p};m&&Pn(E.auth,k,m);const{email:oe}=yield he(E.auth,k);oe!==_.email&&(yield _.reload())})).apply(this,arguments)}function Al(_,p){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,h.Z)(function*(_,p){return tn(_,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function ah(_,p){return La.apply(this,arguments)}function La(){return(La=(0,h.Z)(function*(_,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const E=(0,U.m9)(_),k={idToken:yield E.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},oe=yield rn(E,Al(E.auth,k));E.displayName=oe.displayName||null,E.photoURL=oe.photoUrl||null;const Le=E.providerData.find(({providerId:wt})=>"password"===wt);Le&&(Le.displayName=E.displayName,Le.photoURL=E.photoURL),yield E._updateTokensIfNecessary(oe)})).apply(this,arguments)}function uh(_,p){return to((0,U.m9)(_),p,null)}function Ml(_,p){return to((0,U.m9)(_),null,p)}function to(_,p,m){return no.apply(this,arguments)}function no(){return(no=(0,h.Z)(function*(_,p,m){const{auth:E}=_,k={idToken:yield _.getIdToken(),returnSecureToken:!0};p&&(k.email=p),m&&(k.password=m);const oe=yield rn(_,Rn(E,k));yield _._updateTokensIfNecessary(oe,!0)})).apply(this,arguments)}class yr{constructor(p,m,E={}){this.isNewUser=p,this.providerId=m,this.profile=E}}class Os extends yr{constructor(p,m,E,A){super(p,m,E),this.username=A}}class vr extends yr{constructor(p,m){super(p,"facebook.com",m)}}class Ol extends Os{constructor(p,m){super(p,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class _c extends yr{constructor(p,m){super(p,"google.com",m)}}class ch extends Os{constructor(p,m,E){super(p,"twitter.com",m,E)}}function wc(_){const{user:p,_tokenResponse:m}=_;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function xl(_){var p,m;if(!_)return null;const{providerId:E}=_,A=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},k=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!E&&(null==_?void 0:_.idToken)){const oe=null===(m=null===(p=At(_.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(oe)return new yr(k,"anonymous"!==oe&&"custom"!==oe?oe:null)}if(!E)return null;switch(E){case"facebook.com":return new vr(k,A);case"github.com":return new Ol(k,A);case"google.com":return new _c(k,A);case"twitter.com":return new ch(k,A,_.screenName||null);case"custom":case"anonymous":return new yr(k,null);default:return new yr(k,E,A)}}(m)}class Ji{constructor(p,m,E){this.type=p,this.credential=m,this.auth=E}static _fromIdtoken(p,m){return new Ji("enroll",p,m)}static _fromMfaPendingCredential(p){return new Ji("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,E;if(null!=p&&p.multiFactorSession){if(null!==(m=p.multiFactorSession)&&void 0!==m&&m.pendingCredential)return Ji._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(E=p.multiFactorSession)&&void 0!==E&&E.idToken)return Ji._fromIdtoken(p.multiFactorSession.idToken)}return null}}class bc{constructor(p,m,E){this.session=p,this.hints=m,this.signInResolver=E}static _fromError(p,m){const E=_t(p),A=m.customData._serverResponse,k=(A.mfaInfo||[]).map(Le=>jo._fromServerResponse(E,Le));ue(A.mfaPendingCredential,E,"internal-error");const oe=Ji._fromMfaPendingCredential(A.mfaPendingCredential);return new bc(oe,k,function(){var Le=(0,h.Z)(function*(wt){const Vt=yield wt._process(E,oe);delete A.mfaInfo,delete A.mfaPendingCredential;const Dn=Object.assign(Object.assign({},A),{idToken:Vt.idToken,refreshToken:Vt.refreshToken});switch(m.operationType){case"signIn":const _r=yield as._fromIdTokenResponse(E,m.operationType,Dn);return yield E._updateCurrentUser(_r.user),_r;case"reauthenticate":return ue(m.user,E,"internal-error"),as._forOperation(m.user,m.operationType,Dn);default:pt(E,"internal-error")}});return function(wt){return Le.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,h.Z)(function*(){return m.signInResolver(p)})()}}function kl(_,p){var m;const E=(0,U.m9)(_),A=p;return ue(p.customData.operationType,E,"argument-error"),ue(null===(m=A.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,E,"argument-error"),bc._fromError(E,A)}function Mr(_,p){return tn(_,"POST","/v2/accounts/mfaEnrollment:start",Cn(_,p))}class Iu{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(E=>jo._fromServerResponse(p.auth,E)))})}static _fromUser(p){return new Iu(p)}getSession(){var p=this;return(0,h.Z)(function*(){return Ji._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,m){var E=this;return(0,h.Z)(function*(){const A=p,k=yield E.getSession(),oe=yield rn(E.user,A._process(E.user.auth,k,m));return yield E.user._updateTokensIfNecessary(oe),E.user.reload()})()}unenroll(p){var m=this;return(0,h.Z)(function*(){var E;const A="string"==typeof p?p:p.uid,k=yield m.user.getIdToken(),oe=yield rn(m.user,function Eu(_,p){return tn(_,"POST","/v2/accounts/mfaEnrollment:withdraw",Cn(_,p))}(m.user.auth,{idToken:k,mfaEnrollmentId:A}));m.enrolledFactors=m.enrolledFactors.filter(({uid:Le})=>Le!==A),yield m.user._updateTokensIfNecessary(oe);try{yield m.user.reload()}catch(Le){if("auth/user-token-expired"!==(null===(E=Le)||void 0===E?void 0:E.code))throw Le}})()}}const lh=new WeakMap;function bu(_){const p=(0,U.m9)(_);return lh.has(p)||lh.set(p,Iu._fromUser(p)),lh.get(p)}const Rs="__sak";class Va{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Rs,"1"),this.storage.removeItem(Rs),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Br=(()=>{class _ extends Va{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,E)=>this.onStorageEvent(m,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Cc(){const _=(0,U.z$)();return H(_)||le(_)}()&&function yt(){try{return!(!window||window===window.top)}catch(_){return!1}}(),this.fallbackToPolling=dt(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const E of Object.keys(this.listeners)){const A=this.storage.getItem(E),k=this.localCache[E];A!==k&&m(E,k,A)}}onStorageEvent(m,E=!1){if(!m.key)return void this.forAllChangedKeys((Le,wt,Vt)=>{this.notifyListeners(Le,Vt)});const A=m.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Le=this.storage.getItem(A);if(m.newValue!==Le)null!==m.newValue?this.storage.setItem(A,m.newValue):this.storage.removeItem(A);else if(this.localCache[A]===m.newValue&&!E)return}const k=()=>{const Le=this.storage.getItem(A);!E&&this.localCache[A]===Le||this.notifyListeners(A,Le)},oe=this.storage.getItem(A);!function Oe(){return(0,U.w1)()&&10===document.documentMode}()||oe===m.newValue||m.newValue===m.oldValue?k():setTimeout(k,10)}notifyListeners(m,E){this.localCache[m]=E;const A=this.listeners[m];if(A)for(const k of Array.from(A))k(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,E,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:E,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,E){var A=()=>super._set,k=this;return(0,h.Z)(function*(){yield A().call(k,m,E),k.localCache[m]=JSON.stringify(E)})()}_get(m){var E=()=>super._get,A=this;return(0,h.Z)(function*(){const k=yield E().call(A,m);return A.localCache[m]=JSON.stringify(k),k})()}_remove(m){var E=()=>super._remove,A=this;return(0,h.Z)(function*(){yield E().call(A,m),delete A.localCache[m]})()}}return _.type="LOCAL",_})(),ro=(()=>{class _ extends Va{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,E){}_removeListener(m,E){}}return _.type="SESSION",_})();let Ba=(()=>{class _{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const E=this.receivers.find(k=>k.isListeningto(m));if(E)return E;const A=new _(m);return this.receivers.push(A),A}isListeningto(m){return this.eventTarget===m}handleEvent(m){var E=this;return(0,h.Z)(function*(){const A=m,{eventId:k,eventType:oe,data:Le}=A.data,wt=E.handlersMap[oe];if(null==wt||!wt.size)return;A.ports[0].postMessage({status:"ack",eventId:k,eventType:oe});const Vt=Array.from(wt).map(function(){var _r=(0,h.Z)(function*(co){return co(A.origin,Le)});return function(co){return _r.apply(this,arguments)}}()),Dn=yield function Dc(_){return Promise.all(_.map(function(){var p=(0,h.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(E){return{fulfilled:!1,reason:E}}});return function(m){return p.apply(this,arguments)}}()))}(Vt);A.ports[0].postMessage({status:"done",eventId:k,eventType:oe,response:Dn})})()}_subscribe(m,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(E)}_unsubscribe(m,E){this.handlersMap[m]&&E&&this.handlersMap[m].delete(E),(!E||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function Yo(_="",p=10){let m="";for(let E=0;E<p;E++)m+=Math.floor(10*Math.random());return _+m}class fh{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,E=50){var A=this;return(0,h.Z)(function*(){const k="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!k)throw new Error("connection_unavailable");let oe,Le;return new Promise((wt,Vt)=>{const Dn=Yo("",20);k.port1.start();const _r=setTimeout(()=>{Vt(new Error("unsupported_event"))},E);Le={messageChannel:k,onMessage(co){const Ka=co;if(Ka.data.eventId===Dn)switch(Ka.data.status){case"ack":clearTimeout(_r),oe=setTimeout(()=>{Vt(new Error("timeout"))},3e3);break;case"done":clearTimeout(oe),wt(Ka.data.response);break;default:clearTimeout(_r),clearTimeout(oe),Vt(new Error("invalid_response"))}}},A.handlers.add(Le),k.port1.addEventListener("message",Le.onMessage),A.target.postMessage({eventType:p,eventId:Dn,data:m},[k.port2])}).finally(()=>{Le&&A.removeMessageHandler(Le)})})()}}function xr(){return window}function Ui(){return void 0!==xr().WorkerGlobalScope&&"function"==typeof xr().importScripts}function Ps(){return(Ps=(0,h.Z)(function*(){if(null==navigator||!navigator.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch(_){return null}})).apply(this,arguments)}const ja="firebaseLocalStorageDb",$a="firebaseLocalStorage",Qo="fbase_key";class Jo{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function Xo(_,p){return _.transaction([$a],p?"readwrite":"readonly").objectStore($a)}function Du(){const _=indexedDB.open(ja,1);return new Promise((p,m)=>{_.addEventListener("error",()=>{m(_.error)}),_.addEventListener("upgradeneeded",()=>{const E=_.result;try{E.createObjectStore($a,{keyPath:Qo})}catch(A){m(A)}}),_.addEventListener("success",(0,h.Z)(function*(){const E=_.result;E.objectStoreNames.contains($a)?p(E):(E.close(),yield function Ul(){const _=indexedDB.deleteDatabase(ja);return new Jo(_).toPromise()}(),p(yield Du()))}))})}function Ha(_,p,m){return vs.apply(this,arguments)}function vs(){return(vs=(0,h.Z)(function*(_,p,m){const E=Xo(_,!0).put({[Qo]:p,value:m});return new Jo(E).toPromise()})).apply(this,arguments)}function ea(){return(ea=(0,h.Z)(function*(_,p){const m=Xo(_,!1).get(p),E=yield new Jo(m).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Tu(_,p){const m=Xo(_,!0).delete(p);return new Jo(m).toPromise()}const na=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,h.Z)(function*(){return m.db||(m.db=yield Du()),m.db})()}_withRetries(m){var E=this;return(0,h.Z)(function*(){let A=0;for(;;)try{const k=yield E._openDb();return yield m(k)}catch(k){if(A++>3)throw k;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,h.Z)(function*(){return Ui()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,h.Z)(function*(){m.receiver=Ba._getInstance(function Cu(){return Ui()?self:null}()),m.receiver._subscribe("keyChanged",function(){var E=(0,h.Z)(function*(A,k){return{keyProcessed:(yield m._poll()).includes(k.key)}});return function(A,k){return E.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var E=(0,h.Z)(function*(A,k){return["keyChanged"]});return function(A,k){return E.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,h.Z)(function*(){var E,A;if(m.activeServiceWorker=yield function Vl(){return Ps.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new fh(m.activeServiceWorker);const k=yield m.sender._send("ping",{},800);!k||(null===(E=k[0])||void 0===E?void 0:E.fulfilled)&&(null===(A=k[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var E=this;return(0,h.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Tc(){var _;return(null===(_=null==navigator?void 0:navigator.serviceWorker)||void 0===_?void 0:_.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:m},E.serviceWorkerReceiverAvailable?800:50)}catch(A){}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Du();return yield Ha(m,Rs,"1"),yield Tu(m,Rs),!0}catch(m){}return!1})()}_withPendingWrite(m){var E=this;return(0,h.Z)(function*(){E.pendingWrites++;try{yield m()}finally{E.pendingWrites--}})()}_set(m,E){var A=this;return(0,h.Z)(function*(){return A._withPendingWrite((0,h.Z)(function*(){return yield A._withRetries(k=>Ha(k,m,E)),A.localCache[m]=E,A.notifyServiceWorker(m)}))})()}_get(m){var E=this;return(0,h.Z)(function*(){const A=yield E._withRetries(k=>function ph(_,p){return ea.apply(this,arguments)}(k,m));return E.localCache[m]=A,A})()}_remove(m){var E=this;return(0,h.Z)(function*(){return E._withPendingWrite((0,h.Z)(function*(){return yield E._withRetries(A=>Tu(A,m)),delete E.localCache[m],E.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,h.Z)(function*(){const E=yield m._withRetries(oe=>{const Le=Xo(oe,!1).getAll();return new Jo(Le).toPromise()});if(!E)return[];if(0!==m.pendingWrites)return[];const A=[],k=new Set;for(const{fbase_key:oe,value:Le}of E)k.add(oe),JSON.stringify(m.localCache[oe])!==JSON.stringify(Le)&&(m.notifyListeners(oe,Le),A.push(oe));for(const oe of Object.keys(m.localCache))m.localCache[oe]&&!k.has(oe)&&(m.notifyListeners(oe,null),A.push(oe));return A})()}notifyListeners(m,E){this.localCache[m]=E;const A=this.listeners[m];if(A)for(const k of Array.from(A))k(E)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function gh(_,p){return tn(_,"POST","/v2/accounts/mfaSignIn:start",Cn(_,p))}function yi(){return(yi=(0,h.Z)(function*(_){return(yield tn(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Io(_){return new Promise((p,m)=>{const E=document.createElement("script");E.setAttribute("src",_),E.onload=p,E.onerror=A=>{const k=Ve("internal-error");k.customData=A,m(k)},E.type="text/javascript",E.charset="UTF-8",function ia(){var _,p;return null!==(p=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==p?p:document}().appendChild(E)})}function sa(_){return`__${_}${Math.floor(1e6*Math.random())}`}const _s=1e12;class Bl{constructor(p){this.auth=p,this.counter=_s,this._widgets=new Map}render(p,m){const E=this.counter;return this._widgets.set(E,new lr(p,this.auth.name,m||{})),this.counter++,E}reset(p){var m;const E=p||_s;null===(m=this._widgets.get(E))||void 0===m||m.delete(),this._widgets.delete(E)}getResponse(p){var m;return(null===(m=this._widgets.get(p||_s))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,h.Z)(function*(){var E;return null===(E=m._widgets.get(p||_s))||void 0===E||E.execute(),""})()}}class lr{constructor(p,m,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof p?document.getElementById(p):p;ue(A,"argument-error",{appName:m}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function fp(_){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<_;E++)p.push(m.charAt(Math.floor(Math.random()*m.length)));return p.join("")}(50);const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const mh=sa("rcb"),W_=new ct(3e4,6e4);class Mm{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=xr().grecaptcha)||void 0===p||!p.render)}load(p,m=""){return ue(function yh(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(m),p,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(xr().grecaptcha):new Promise((E,A)=>{const k=xr().setTimeout(()=>{A(Ve(p,"network-request-failed"))},W_.get());xr()[mh]=()=>{xr().clearTimeout(k),delete xr()[mh];const Le=xr().grecaptcha;if(!Le)return void A(Ve(p,"internal-error"));const wt=Le.render;Le.render=(Vt,Dn)=>{const _r=wt(Vt,Dn);return this.counter++,_r},this.hostLanguage=m,E(Le)},Io(`https://www.google.com/recaptcha/api.js??${(0,U.xO)({onload:mh,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(k),A(Ve(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var m;return!(null===(m=xr().grecaptcha)||void 0===m||!m.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class q_{load(p){return(0,h.Z)(function*(){return new Bl(p)})()}clearedOneInstance(){}}const Au="recaptcha",Z_={theme:"light",type:"image"};class xm{constructor(p,m=Object.assign({},Z_),E){this.parameters=m,this.type=Au,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=_t(E),this.isInvisible="invisible"===this.parameters.size,ue("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof p?document.getElementById(p):p;ue(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new q_:new Mm,this.validateStartingState()}verify(){var p=this;return(0,h.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),E=p.getAssertedRecaptcha();return E.getResponse(m)||new Promise(k=>{const oe=Le=>{!Le||(p.tokenChangeListeners.delete(oe),k(Le))};p.tokenChangeListeners.add(oe),p.isInvisible&&E.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){ue(!this.parameters.sitekey,this.auth,"argument-error"),ue(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ue("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(E=>E(m)),"function"==typeof p)p(m);else if("string"==typeof p){const E=xr()[p];"function"==typeof E&&E(m)}}}assertNotDestroyed(){ue(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,h.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const E=document.createElement("div");m.appendChild(E),m=E}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,h.Z)(function*(){ue(et()&&!Ui(),p.auth,"internal-error"),yield function ti(){let _=null;return new Promise(p=>{"complete"!==document.readyState?(_=()=>p(),window.addEventListener("load",_)):p()}).catch(p=>{throw _&&window.removeEventListener("load",_),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function Su(_){return yi.apply(this,arguments)}(p.auth);ue(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return ue(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Mu{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=sr._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function rr(_,p,m){return ls.apply(this,arguments)}function ls(){return(ls=(0,h.Z)(function*(_,p,m){const E=_t(_),A=yield so(E,p,(0,U.m9)(m));return new Mu(A,k=>Sa(E,k))})).apply(this,arguments)}function jl(_,p,m){return vi.apply(this,arguments)}function vi(){return(vi=(0,h.Z)(function*(_,p,m){const E=(0,U.m9)(_);yield ms(!1,E,"phone");const A=yield so(E.auth,p,(0,U.m9)(m));return new Mu(A,k=>ln(E,k))})).apply(this,arguments)}function Ns(_,p,m){return xu.apply(this,arguments)}function xu(){return(xu=(0,h.Z)(function*(_,p,m){const E=(0,U.m9)(_),A=yield so(E.auth,p,(0,U.m9)(m));return new Mu(A,k=>dp(E,k))})).apply(this,arguments)}function so(_,p,m){return bo.apply(this,arguments)}function bo(){return(bo=(0,h.Z)(function*(_,p,m){var E;const A=yield m.verify();try{let k;if(ue("string"==typeof A,_,"argument-error"),ue(m.type===Au,_,"argument-error"),k="string"==typeof p?{phoneNumber:p}:p,"session"in k){const oe=k.session;if("phoneNumber"in k)return ue("enroll"===oe.type,_,"internal-error"),(yield Mr(_,{idToken:oe.credential,phoneEnrollmentInfo:{phoneNumber:k.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{ue("signin"===oe.type,_,"internal-error");const Le=(null===(E=k.multiFactorHint)||void 0===E?void 0:E.uid)||k.multiFactorUid;return ue(Le,_,"missing-multi-factor-info"),(yield gh(_,{mfaPendingCredential:oe.credential,mfaEnrollmentId:Le,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:oe}=yield sn(_,{phoneNumber:k.phoneNumber,recaptchaToken:A});return oe}}finally{m._reset()}})).apply(this,arguments)}function Ga(_,p){return Co.apply(this,arguments)}function Co(){return(Co=(0,h.Z)(function*(_,p){yield yu((0,U.m9)(_),p)})).apply(this,arguments)}let oi=(()=>{class _{constructor(m){this.providerId=_.PROVIDER_ID,this.auth=_t(m)}verifyPhoneNumber(m,E){return so(this.auth,m,(0,U.m9)(E))}static credential(m,E){return sr._fromVerification(m,E)}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:E,temporaryProof:A}=m;return E&&A?sr._fromTokenResponse(E,A):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function Wt(_,p){return p?re(p):(ue(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class $l extends Ze{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return lt(p,this._buildIdpRequest())}_linkToIdToken(p,m){return lt(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return lt(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function Mc(_){return gc(_.auth,new $l(_),_.bypassAuthState)}function _i(_){const{auth:p,user:m}=_;return ue(m,p,"internal-error"),pc(m,new $l(_),_.bypassAuthState)}function Ou(_){return ws.apply(this,arguments)}function ws(){return(ws=(0,h.Z)(function*(_){const{auth:p,user:m}=_;return ue(m,p,"internal-error"),yu(m,new $l(_),_.bypassAuthState)})).apply(this,arguments)}class Ru{constructor(p,m,E,A,k=!1){this.auth=p,this.resolver=E,this.user=A,this.bypassAuthState=k,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,h.Z)(function*(E,A){p.pendingPromise={resolve:E,reject:A};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(k){p.reject(k)}});return function(E,A){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,h.Z)(function*(){const{urlResponse:E,sessionId:A,postBody:k,tenantId:oe,error:Le,type:wt}=p;if(Le)return void m.reject(Le);const Vt={auth:m.auth,requestUri:E,sessionId:A,tenantId:oe||void 0,postBody:k||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(wt)(Vt))}catch(Dn){m.reject(Dn)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Mc;case"linkViaPopup":case"linkViaRedirect":return Ou;case"reauthViaPopup":case"reauthViaRedirect":return _i;default:pt(this.auth,"internal-error")}}resolve(p){Ae(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){Ae(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Es=new ct(2e3,1e4);function Xi(_,p,m){return za.apply(this,arguments)}function za(){return(za=(0,h.Z)(function*(_,p,m){const E=_t(_);ke(_,p,Lr);const A=Wt(E,m);return new ks(E,"signInViaPopup",p,A).executeNotNull()})).apply(this,arguments)}function Pu(_,p,m){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,h.Z)(function*(_,p,m){const E=(0,U.m9)(_);ke(E.auth,p,Lr);const A=Wt(E.auth,m);return new ks(E.auth,"reauthViaPopup",p,A,E).executeNotNull()})).apply(this,arguments)}function pp(_,p,m){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,h.Z)(function*(_,p,m){const E=(0,U.m9)(_);ke(E.auth,p,Lr);const A=Wt(E.auth,m);return new ks(E.auth,"linkViaPopup",p,A,E).executeNotNull()})).apply(this,arguments)}let ks=(()=>{class _ extends Ru{constructor(m,E,A,k,oe){super(m,E,k,oe),this.provider=A,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var m=this;return(0,h.Z)(function*(){const E=yield m.execute();return ue(E,m.auth,"internal-error"),E})()}onExecution(){var m=this;return(0,h.Z)(function*(){Ae(1===m.filter.length,"Popup operations only handle one event");const E=Yo();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],E),m.authWindow.associatedEvent=E,m.resolver._originValidation(m.auth).catch(A=>{m.reject(A)}),m.resolver._isIframeWebStorageSupported(m.auth,A=>{A||m.reject(Ve(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Ve(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const m=()=>{var E,A;this.pollId=null!==(A=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==A&&A.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ve(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,Es.get())};m()}}return _.currentPopupAction=null,_})();const ds=new Map;class hs extends Ru{constructor(p,m,E=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,E),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,h.Z)(function*(){let E=ds.get(m.auth._key());if(!E){try{const k=(yield function jr(_,p){return Bi.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;E=()=>Promise.resolve(k)}catch(A){E=()=>Promise.reject(A)}ds.set(m.auth._key(),E)}return m.bypassAuthState||ds.set(m.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,E=this;return(0,h.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(E,p);if("unknown"!==p.type){if(p.eventId){const A=yield E.auth._redirectUserForId(p.eventId);if(A)return E.user=A,m().call(E,p);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function Bi(){return(Bi=(0,h.Z)(function*(_,p){const m=Do(p),E=aa(_);if(!(yield E._isAvailable()))return!1;const A="true"===(yield E._get(m));return yield E._remove(m),A})).apply(this,arguments)}function xc(_,p){return oo.apply(this,arguments)}function oo(){return(oo=(0,h.Z)(function*(_,p){return aa(_)._set(Do(p),"true")})).apply(this,arguments)}function Gl(){ds.clear()}function Is(_,p){ds.set(_._key(),p)}function aa(_){return re(_._redirectPersistence)}function Do(_){return $n("pendingRedirect",_.config.apiKey,_.name)}function Oc(_,p,m){return function Or(_,p,m){return qa.apply(this,arguments)}(_,p,m)}function qa(){return(qa=(0,h.Z)(function*(_,p,m){const E=_t(_);ke(_,p,Lr);const A=Wt(E,m);return yield xc(A,E),A._openRedirect(E,p,"signInViaRedirect")})).apply(this,arguments)}function Rc(_,p,m){return function b(_,p,m){return D.apply(this,arguments)}(_,p,m)}function D(){return(D=(0,h.Z)(function*(_,p,m){const E=(0,U.m9)(_);ke(E.auth,p,Lr);const A=Wt(E.auth,m);yield xc(A,E.auth);const k=yield pn(E);return A._openRedirect(E.auth,p,"reauthViaRedirect",k)})).apply(this,arguments)}function M(_,p,m){return function V(_,p,m){return ne.apply(this,arguments)}(_,p,m)}function ne(){return(ne=(0,h.Z)(function*(_,p,m){const E=(0,U.m9)(_);ke(E.auth,p,Lr);const A=Wt(E.auth,m);yield ms(!1,E,p.providerId),yield xc(A,E.auth);const k=yield pn(E);return A._openRedirect(E.auth,p,"linkViaRedirect",k)})).apply(this,arguments)}function we(_,p){return He.apply(this,arguments)}function He(){return(He=(0,h.Z)(function*(_,p){return yield _t(_)._initializationPromise,ht(_,p,!1)})).apply(this,arguments)}function ht(_,p){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,h.Z)(function*(_,p,m=!1){const E=_t(_),A=Wt(E,p),oe=yield new hs(E,A,m).execute();return oe&&!m&&(delete oe.user._redirectEventId,yield E._persistUserIfCurrent(oe.user),yield E._setRedirectUser(null,p)),oe})).apply(this,arguments)}function pn(_){return gn.apply(this,arguments)}function gn(){return(gn=(0,h.Z)(function*(_){const p=Yo(`${_.uid}:::`);return _._redirectEventId=p,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),p})).apply(this,arguments)}class Rr{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(p,E)&&(m=!0,this.sendToConsumer(p,E),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function ao(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return To(_);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var E;if(p.error&&!To(p)){const A=(null===(E=p.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";m.onError(Ve(this.auth,A))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const E=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&E}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ai(p))}saveEventToCache(p){this.cachedEventUids.add(ai(p)),this.lastProcessedEventTime=Date.now()}}function ai(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(p=>p).join("-")}function To({type:_,error:p}){return"unknown"===_&&"auth/no-auth-event"===(null==p?void 0:p.code)}function ji(_){return uo.apply(this,arguments)}function uo(){return(uo=(0,h.Z)(function*(_,p={}){return tn(_,"GET","/v1/projects",p)})).apply(this,arguments)}const ku=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fs=/^https?/;function Fs(){return(Fs=(0,h.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:p}=yield ji(_);for(const m of p)try{if(gp(m))return}catch(E){}pt(_,"unauthorized-domain")})).apply(this,arguments)}function gp(_){const p=Qe(),{protocol:m,hostname:E}=new URL(p);if(_.startsWith("chrome-extension://")){const oe=new URL(_);return""===oe.hostname&&""===E?"chrome-extension:"===m&&_.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&oe.hostname===E}if(!fs.test(m))return!1;if(ku.test(_))return E===_;const A=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(E)}const K_=new ct(3e4,6e4);function Pc(){const _=xr().___jsl;if(null!=_&&_.H)for(const p of Object.keys(_.H))if(_.H[p].r=_.H[p].r||[],_.H[p].L=_.H[p].L||[],_.H[p].r=[..._.H[p].L],_.CP)for(let m=0;m<_.CP.length;m++)_.CP[m]=null}let So=null;function Nc(_){return So=So||function Om(_){return new Promise((p,m)=>{var E,A,k;function oe(){Pc(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Pc(),m(Ve(_,"network-request-failed"))},timeout:K_.get()})}if(null!==(A=null===(E=xr().gapi)||void 0===E?void 0:E.iframes)&&void 0!==A&&A.Iframe)p(gapi.iframes.getContext());else{if(null===(k=xr().gapi)||void 0===k||!k.load){const Le=sa("iframefcb");return xr()[Le]=()=>{gapi.load?oe():m(Ve(_,"network-request-failed"))},Io(`https://apis.google.com/js/api.js?onload=${Le}`).catch(wt=>m(wt))}oe()}}).catch(p=>{throw So=null,p})}(_),So}const Rm=new ct(5e3,15e3),Pm={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ZI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mp(_){const p=_.config;ue(p.authDomain,_,"auth-domain-config-required");const m=p.emulator?On(p,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,E={apiKey:p.apiKey,appName:_.name,v:P.SDK_VERSION},A=ZI.get(_.config.apiHost);A&&(E.eid=A);const k=_._getFrameworks();return k.length&&(E.fw=k.join(",")),`${m}?${(0,U.xO)(E).slice(1)}`}function vh(){return vh=(0,h.Z)(function*(_){const p=yield Nc(_),m=xr().gapi;return ue(m,_,"internal-error"),p.open({where:document.body,url:mp(_),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Pm,dontclear:!0},E=>new Promise(function(){var A=(0,h.Z)(function*(k,oe){yield E.restyle({setHideOnLeave:!1});const Le=Ve(_,"network-request-failed"),wt=xr().setTimeout(()=>{oe(Le)},Rm.get());function Vt(){xr().clearTimeout(wt),k(E)}E.ping(Vt).then(Vt,()=>{oe(Le)})});return function(k,oe){return A.apply(this,arguments)}}()))}),vh.apply(this,arguments)}const _h={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class km{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function Ao(_,p,m,E,A,k){ue(_.config.authDomain,_,"auth-domain-config-required"),ue(_.config.apiKey,_,"invalid-api-key");const oe={apiKey:_.config.apiKey,appName:_.name,authType:m,redirectUrl:E,v:P.SDK_VERSION,eventId:A};if(p instanceof Lr){p.setDefaultLanguage(_.languageCode),oe.providerId=p.providerId||"",(0,U.xb)(p.getCustomParameters())||(oe.customParameters=JSON.stringify(p.getCustomParameters()));for(const[wt,Vt]of Object.entries(k||{}))oe[wt]=Vt}if(p instanceof Ci){const wt=p.getScopes().filter(Vt=>""!==Vt);wt.length>0&&(oe.scopes=wt.join(","))}_.tenantId&&(oe.tid=_.tenantId);const Le=oe;for(const wt of Object.keys(Le))void 0===Le[wt]&&delete Le[wt];return`${function Vu({config:_}){return _.emulator?On(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,U.xO)(Le).slice(1)}`}const Lc="webStorageSupport",ql=class _p{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ro,this._completeRedirectFn=ht,this._overrideRedirectResult=Is}_openPopup(p,m,E,A){var k=this;return(0,h.Z)(function*(){var oe;Ae(null===(oe=k.eventManagers[p._key()])||void 0===oe?void 0:oe.manager,"_initialize() not called before _openPopup()");const Le=Ao(p,m,E,Qe(),A);return function Wl(_,p,m,E=500,A=600){const k=Math.max((window.screen.availHeight-A)/2,0).toString(),oe=Math.max((window.screen.availWidth-E)/2,0).toString();let Le="";const wt=Object.assign(Object.assign({},_h),{width:E.toString(),height:A.toString(),top:k,left:oe}),Vt=(0,U.z$)().toLowerCase();m&&(Le=xe(Vt)?"_blank":m),j(Vt)&&(p=p||"http://localhost",wt.scrollbars="yes");const Dn=Object.entries(wt).reduce((co,[Ka,Ip])=>`${co}${Ka}=${Ip},`,"");if(function $e(_=(0,U.z$)()){var p;return le(_)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(Vt)&&"_self"!==Le)return function kc(_,p){const m=document.createElement("a");m.href=_,m.target=p;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(E)}(p||"",Le),new km(null);const _r=window.open(p||"",Le,Dn);ue(_r,_,"popup-blocked");try{_r.focus()}catch(co){}return new km(_r)}(p,Le,Yo())})()}_openRedirect(p,m,E,A){var k=this;return(0,h.Z)(function*(){return yield k._originValidation(p),function Ll(_){xr().location.href=_}(Ao(p,m,E,Qe(),A)),new Promise(()=>{})})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:A,promise:k}=this.eventManagers[m];return A?Promise.resolve(A):(Ae(k,"If manager is not set, promise should be"),k)}const E=this.initAndGetManager(p);return this.eventManagers[m]={promise:E},E.catch(()=>{delete this.eventManagers[m]}),E}initAndGetManager(p){var m=this;return(0,h.Z)(function*(){const E=yield function Q_(_){return vh.apply(this,arguments)}(p),A=new Rr(p);return E.register("authEvent",k=>(ue(null==k?void 0:k.authEvent,p,"invalid-auth-event"),{status:A.onEvent(k.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:A},m.iframes[p._key()]=E,A})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(Lc,{type:Lc},A=>{var k;const oe=null===(k=null==A?void 0:A[0])||void 0===k?void 0:k[Lc];void 0!==oe&&m(!!oe),pt(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Ir(_){return Fs.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return dt()||H()||le()}};class Uu extends class wp{constructor(p){this.factorId=p}_process(p,m,E){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,E);case"signin":return this._finalizeSignIn(p,m.credential);default:return me("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Uu(p)}_finalizeEnroll(p,m,E){return function wu(_,p){return tn(_,"POST","/v2/accounts/mfaEnrollment:finalize",Cn(_,p))}(p,{idToken:m,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function ra(_,p){return tn(_,"POST","/v2/accounts/mfaSignIn:finalize",Cn(_,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Mo=(()=>{class _{constructor(){}static assertion(m){return Uu._fromCredential(m)}}return _.FACTOR_ID="phone",_})();var Za="@firebase/auth";class Ep{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,h.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(E=>{var A;p((null===(A=E)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);!m||(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}!function YI(_){(0,P._registerComponent)(new Ce.wA("auth",(p,{options:m})=>{const E=p.getProvider("app").getImmediate(),A=p.getProvider("heartbeat"),{apiKey:k,authDomain:oe}=E.options;return((Le,wt)=>{ue(k&&!k.includes(":"),"invalid-api-key",{appName:Le.name}),ue(!(null!=oe&&oe.includes(":")),"argument-error",{appName:Le.name});const Vt={apiKey:k,authDomain:oe,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ye(_)},Dn=new at(Le,wt,Vt);return function de(_,p){const m=(null==p?void 0:p.persistence)||[],E=(Array.isArray(m)?m:[m]).map(re);null!=p&&p.errorMap&&_._updateErrorMap(p.errorMap),_._initializeWithPersistence(E,null==p?void 0:p.popupRedirectResolver)}(Dn,m),Dn})(E,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,E)=>{p.getProvider("auth-internal").initialize()})),(0,P._registerComponent)(new Ce.wA("auth-internal",p=>{const m=_t(p.getProvider("auth").getImmediate());return new Ep(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,P.registerVersion)(Za,"0.20.7",function KI(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_)),(0,P.registerVersion)(Za,"0.20.7","esm2017")}("Browser")},2090:(bt,Pe,N)=>{N.d(Pe,{$s:()=>ei,BH:()=>Xe,G6:()=>ue,L:()=>_e,LL:()=>Qe,Sg:()=>je,UG:()=>Me,US:()=>Ce,ZB:()=>q,ZR:()=>de,b$:()=>pt,eu:()=>Ae,hl:()=>me,jU:()=>ae,m9:()=>Sn,ne:()=>Zi,pd:()=>mr,r3:()=>Cn,ru:()=>gt,tV:()=>Te,uI:()=>Et,vZ:()=>Xn,w1:()=>Ge,xO:()=>ki,xb:()=>Dr,z$:()=>Re,zI:()=>X,zd:()=>ri});const se=function(Q){const $=[];let B=0;for(let Z=0;Z<Q.length;Z++){let K=Q.charCodeAt(Z);K<128?$[B++]=K:K<2048?($[B++]=K>>6|192,$[B++]=63&K|128):55296==(64512&K)&&Z+1<Q.length&&56320==(64512&Q.charCodeAt(Z+1))?(K=65536+((1023&K)<<10)+(1023&Q.charCodeAt(++Z)),$[B++]=K>>18|240,$[B++]=K>>12&63|128,$[B++]=K>>6&63|128,$[B++]=63&K|128):($[B++]=K>>12|224,$[B++]=K>>6&63|128,$[B++]=63&K|128)}return $},Ce={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Q,$){if(!Array.isArray(Q))throw Error("encodeByteArray takes an array as a parameter");this.init_();const B=$?this.byteToCharMapWebSafe_:this.byteToCharMap_,Z=[];for(let K=0;K<Q.length;K+=3){const Be=Q[K],st=K+1<Q.length,Pt=st?Q[K+1]:0,Wn=K+2<Q.length,$n=Wn?Q[K+2]:0;let j=(15&Pt)<<2|$n>>6,H=63&$n;Wn||(H=64,st||(j=64)),Z.push(B[Be>>2],B[(3&Be)<<4|Pt>>4],B[j],B[H])}return Z.join("")},encodeString(Q,$){return this.HAS_NATIVE_SUPPORT&&!$?btoa(Q):this.encodeByteArray(se(Q),$)},decodeString(Q,$){return this.HAS_NATIVE_SUPPORT&&!$?atob(Q):function(Q){const $=[];let B=0,Z=0;for(;B<Q.length;){const K=Q[B++];if(K<128)$[Z++]=String.fromCharCode(K);else if(K>191&&K<224){const Be=Q[B++];$[Z++]=String.fromCharCode((31&K)<<6|63&Be)}else if(K>239&&K<365){const Wn=((7&K)<<18|(63&Q[B++])<<12|(63&Q[B++])<<6|63&Q[B++])-65536;$[Z++]=String.fromCharCode(55296+(Wn>>10)),$[Z++]=String.fromCharCode(56320+(1023&Wn))}else{const Be=Q[B++],st=Q[B++];$[Z++]=String.fromCharCode((15&K)<<12|(63&Be)<<6|63&st)}}return $.join("")}(this.decodeStringToByteArray(Q,$))},decodeStringToByteArray(Q,$){this.init_();const B=$?this.charToByteMapWebSafe_:this.charToByteMap_,Z=[];for(let K=0;K<Q.length;){const Be=B[Q.charAt(K++)],Pt=K<Q.length?B[Q.charAt(K)]:0;++K;const $n=K<Q.length?B[Q.charAt(K)]:64;++K;const ie=K<Q.length?B[Q.charAt(K)]:64;if(++K,null==Be||null==Pt||null==$n||null==ie)throw Error();Z.push(Be<<2|Pt>>4),64!==$n&&(Z.push(Pt<<4&240|$n>>2),64!==ie&&Z.push($n<<6&192|ie))}return Z},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Q=0;Q<this.ENCODED_VALS.length;Q++)this.byteToCharMap_[Q]=this.ENCODED_VALS.charAt(Q),this.charToByteMap_[this.byteToCharMap_[Q]]=Q,this.byteToCharMapWebSafe_[Q]=this.ENCODED_VALS_WEBSAFE.charAt(Q),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Q]]=Q,Q>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Q)]=Q,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Q)]=Q)}}},_e=function(Q){return function(Q){const $=se(Q);return Ce.encodeByteArray($,!0)}(Q).replace(/\./g,"")},Te=function(Q){try{return Ce.decodeString(Q,!0)}catch($){console.error("base64Decode failed: ",$)}return null};function q(Q,$){if(!($ instanceof Object))return $;switch($.constructor){case Date:return new Date($.getTime());case Object:void 0===Q&&(Q={});break;case Array:Q=[];break;default:return $}for(const B in $)!$.hasOwnProperty(B)||!te(B)||(Q[B]=q(Q[B],$[B]));return Q}function te(Q){return"__proto__"!==Q}class Xe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(($,B)=>{this.resolve=$,this.reject=B})}wrapCallback($){return(B,Z)=>{B?this.reject(B):this.resolve(Z),"function"==typeof $&&(this.promise.catch(()=>{}),1===$.length?$(B):$(B,Z))}}}function je(Q,$){if(Q.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Z=$||"demo-project",K=Q.iat||0,Be=Q.sub||Q.user_id;if(!Be)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const st=Object.assign({iss:`https://securetoken.google.com/${Z}`,aud:Z,iat:K,exp:K+3600,auth_time:K,sub:Be,user_id:Be,firebase:{sign_in_provider:"custom",identities:{}}},Q);return[_e(JSON.stringify({alg:"none",type:"JWT"})),_e(JSON.stringify(st)),""].join(".")}function Re(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Et(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Re())}function Me(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Q){return!1}}function ae(){return"object"==typeof self&&self.self===self}function gt(){const Q="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Q&&void 0!==Q.id}function pt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ge(){const Q=Re();return Q.indexOf("MSIE ")>=0||Q.indexOf("Trident/")>=0}function ue(){return!Me()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function me(){return"object"==typeof indexedDB}function Ae(){return new Promise((Q,$)=>{try{let B=!0;const Z="validate-browser-context-for-indexeddb-analytics-module",K=self.indexedDB.open(Z);K.onsuccess=()=>{K.result.close(),B||self.indexedDB.deleteDatabase(Z),Q(!0)},K.onupgradeneeded=()=>{B=!1},K.onerror=()=>{var Be;$((null===(Be=K.error)||void 0===Be?void 0:Be.message)||"")}}catch(B){$(B)}})}function X(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class de extends Error{constructor($,B,Z){super(B),this.code=$,this.customData=Z,this.name="FirebaseError",Object.setPrototypeOf(this,de.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qe.prototype.create)}}class Qe{constructor($,B,Z){this.service=$,this.serviceName=B,this.errors=Z}create($,...B){const Z=B[0]||{},K=`${this.service}/${$}`,Be=this.errors[$],st=Be?function et(Q,$){return Q.replace(Tt,(B,Z)=>{const K=$[Z];return null!=K?String(K):`<${Z}?>`})}(Be,Z):"Error";return new de(K,`${this.serviceName}: ${st} (${K}).`,Z)}}const Tt=/\{\$([^}]+)}/g;function Cn(Q,$){return Object.prototype.hasOwnProperty.call(Q,$)}function Dr(Q){for(const $ in Q)if(Object.prototype.hasOwnProperty.call(Q,$))return!1;return!0}function Xn(Q,$){if(Q===$)return!0;const B=Object.keys(Q),Z=Object.keys($);for(const K of B){if(!Z.includes(K))return!1;const Be=Q[K],st=$[K];if(ar(Be)&&ar(st)){if(!Xn(Be,st))return!1}else if(Be!==st)return!1}for(const K of Z)if(!B.includes(K))return!1;return!0}function ar(Q){return null!==Q&&"object"==typeof Q}function ki(Q){const $=[];for(const[B,Z]of Object.entries(Q))Array.isArray(Z)?Z.forEach(K=>{$.push(encodeURIComponent(B)+"="+encodeURIComponent(K))}):$.push(encodeURIComponent(B)+"="+encodeURIComponent(Z));return $.length?"&"+$.join("&"):""}function ri(Q){const $={};return Q.replace(/^\?/,"").split("&").forEach(Z=>{if(Z){const[K,Be]=Z.split("=");$[decodeURIComponent(K)]=decodeURIComponent(Be)}}),$}function mr(Q){const $=Q.indexOf("?");if(!$)return"";const B=Q.indexOf("#",$);return Q.substring($,B>0?B:void 0)}function Zi(Q,$){const B=new vt(Q,$);return B.subscribe.bind(B)}class vt{constructor($,B){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=B,this.task.then(()=>{$(this)}).catch(Z=>{this.error(Z)})}next($){this.forEachObserver(B=>{B.next($)})}error($){this.forEachObserver(B=>{B.error($)}),this.close($)}complete(){this.forEachObserver($=>{$.complete()}),this.close()}subscribe($,B,Z){let K;if(void 0===$&&void 0===B&&void 0===Z)throw new Error("Missing Observer.");K=function fr(Q,$){if("object"!=typeof Q||null===Q)return!1;for(const B of $)if(B in Q&&"function"==typeof Q[B])return!0;return!1}($,["next","error","complete"])?$:{next:$,error:B,complete:Z},void 0===K.next&&(K.next=zn),void 0===K.error&&(K.error=zn),void 0===K.complete&&(K.complete=zn);const Be=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?K.error(this.finalError):K.complete()}catch(st){}}),this.observers.push(K),Be}unsubscribeOne($){void 0===this.observers||void 0===this.observers[$]||(delete this.observers[$],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver($){if(!this.finalized)for(let B=0;B<this.observers.length;B++)this.sendOne(B,$)}sendOne($,B){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[$])try{B(this.observers[$])}catch(Z){"undefined"!=typeof console&&console.error&&console.error(Z)}})}close($){this.finalized||(this.finalized=!0,void 0!==$&&(this.finalError=$),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zn(){}function ei(Q,$=1e3,B=2){const Z=$*Math.pow(B,Q),K=Math.round(.5*Z*(Math.random()-.5)*2);return Math.min(144e5,Z+K)}function Sn(Q){return Q&&Q._delegate?Q._delegate:Q}},2354:(bt,Pe,N)=>{var h=N(5e3);let U=null;function P(){return U}const Ee=new h.OlP("DocumentToken");let _e=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Te(){return(0,h.LFG)(q)}()},providedIn:"platform"}),n})();const W=new h.OlP("Location Initialized");let q=(()=>{class n extends _e{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){te()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){te()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ee))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Xe(){return new q((0,h.LFG)(Ee))}()},providedIn:"platform"}),n})();function te(){return!!window.history.pushState}function je(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Re(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Et(n){return n&&"?"!==n[0]?"?"+n:n}let Me=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(gt)},providedIn:"root"}),n})();const ae=new h.OlP("appBaseHref");let gt=(()=>{class n extends Me{constructor(t,r){var o,u,d;super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=null!==(d=null!==(o=null!=r?r:this._platformLocation.getBaseHrefFromDOM())&&void 0!==o?o:null===(u=(0,h.f3M)(Ee).location)||void 0===u?void 0:u.origin)&&void 0!==d?d:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return je(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Et(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const d=this.prepareExternalUrl(o+Et(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){const d=this.prepareExternalUrl(o+Et(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(_e),h.LFG(ae,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),pt=(()=>{class n extends Me{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=je(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let d=this.prepareExternalUrl(o+Et(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){let d=this.prepareExternalUrl(o+Et(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(_e),h.LFG(ae,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Ve=(()=>{class n{constructor(t){this._subject=new h.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Re(ut(r)),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){var t;null===(t=this._urlChangeSubscription)||void 0===t||t.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Et(r))}normalize(t){return n.stripTrailingSlash(function ke(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,ut(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Et(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Et(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._locationStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{var r;const o=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(o,1),0===this._urlChangeListeners.length&&(null===(r=this._urlChangeSubscription)||void 0===r||r.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Et,n.joinWithSlash=je,n.stripTrailingSlash=Re,n.\u0275fac=function(t){return new(t||n)(h.LFG(Me))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Ge(){return new Ve((0,h.LFG)(Me))}()},providedIn:"root"}),n})();function ut(n){return n.replace(/\/index.html$/,"")}var me=(()=>((me=me||{})[me.Decimal=0]="Decimal",me[me.Percent=1]="Percent",me[me.Currency=2]="Currency",me[me.Scientific=3]="Scientific",me))(),de=(()=>((de=de||{})[de.Decimal=0]="Decimal",de[de.Group=1]="Group",de[de.List=2]="List",de[de.PercentSign=3]="PercentSign",de[de.PlusSign=4]="PlusSign",de[de.MinusSign=5]="MinusSign",de[de.Exponential=6]="Exponential",de[de.SuperscriptingExponent=7]="SuperscriptingExponent",de[de.PerMille=8]="PerMille",de[de.Infinity=9]="Infinity",de[de.NaN=10]="NaN",de[de.TimeSeparator=11]="TimeSeparator",de[de.CurrencyDecimal=12]="CurrencyDecimal",de[de.CurrencyGroup=13]="CurrencyGroup",de))();function tn(n,e){const t=(0,h.cg1)(n),r=t[h.wAp.NumberSymbols][e];if(void 0===r){if(e===de.CurrencyDecimal)return t[h.wAp.NumberSymbols][de.Decimal];if(e===de.CurrencyGroup)return t[h.wAp.NumberSymbols][de.Group]}return r}const L=/^(\d+)?\.((\d+)(-(\d+))?)?$/,J=".";function Bn(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}let mn=(()=>{class n{constructor(t,r,o,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=o,this._renderer=u,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,h.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,h.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.ZZ4),h.Y36(h.aQg),h.Y36(h.SBq),h.Y36(h.Qsj))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class Mt{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Jt=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,d)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new Mt(o.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const g=r.get(u);r.move(g,d),zt(g,o)}});for(let o=0,u=r.length;o<u;o++){const g=r.get(o).context;g.index=o,g.count=u,g.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{zt(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function zt(n,e){n.context.$implicit=e.item}let kn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new ii,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){fn("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){fn("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class ii{constructor(){this.$implicit=null,this.ngIf=null}}function fn(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}let Ci=(()=>{class n{constructor(t){this._locale=t}transform(t,r,o){if(!function yo(n){return!(null==n||""===n||n!=n)}(t))return null;o=o||this._locale;try{return function _t(n,e,t){return function ye(n,e,t,r,o,u,d=!1){let g="",v=!1;if(isFinite(n)){let C=function Jn(n){let r,o,u,d,g,e=Math.abs(n)+"",t=0;for((o=e.indexOf(J))>-1&&(e=e.replace(J,"")),(u=e.search(/e/i))>0?(o<0&&(o=u),o+=+e.slice(u+1),e=e.substring(0,u)):o<0&&(o=e.length),u=0;"0"===e.charAt(u);u++);if(u===(g=e.length))r=[0],o=1;else{for(g--;"0"===e.charAt(g);)g--;for(o-=u,r=[],d=0;u<=g;u++,d++)r[d]=Number(e.charAt(u))}return o>22&&(r=r.splice(0,21),t=o-1,o=1),{digits:r,exponent:t,integerLen:o}}(n);d&&(C=function Bt(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(C));let S=e.minInt,O=e.minFrac,G=e.maxFrac;if(u){const vn=u.match(L);if(null===vn)throw new Error(`${u} is not a valid digit info`);const Nn=vn[1],qt=vn[3],bn=vn[5];null!=Nn&&(S=Bn(Nn)),null!=qt&&(O=Bn(qt)),null!=bn?G=Bn(bn):null!=qt&&O>G&&(G=O)}!function jt(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,o=r.length-n.integerLen;const u=Math.min(Math.max(e,o),t);let d=u+n.integerLen,g=r[d];if(d>0){r.splice(Math.max(n.integerLen,d));for(let O=d;O<r.length;O++)r[O]=0}else{o=Math.max(0,o),n.integerLen=1,r.length=Math.max(1,d=u+1),r[0]=0;for(let O=1;O<d;O++)r[O]=0}if(g>=5)if(d-1<0){for(let O=0;O>d;O--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[d-1]++;for(;o<Math.max(0,u);o++)r.push(0);let v=0!==u;const C=e+n.integerLen,S=r.reduceRight(function(O,G,ee,ge){return ge[ee]=(G+=O)<10?G:G-10,v&&(0===ge[ee]&&ee>=C?ge.pop():v=!1),G>=10?1:0},0);S&&(r.unshift(S),n.integerLen++)}(C,O,G);let ee=C.digits,ge=C.integerLen;const Je=C.exponent;let ot=[];for(v=ee.every(vn=>!vn);ge<S;ge++)ee.unshift(0);for(;ge<0;ge++)ee.unshift(0);ge>0?ot=ee.splice(ge,ee.length):(ot=ee,ee=[0]);const Qt=[];for(ee.length>=e.lgSize&&Qt.unshift(ee.splice(-e.lgSize,ee.length).join(""));ee.length>e.gSize;)Qt.unshift(ee.splice(-e.gSize,ee.length).join(""));ee.length&&Qt.unshift(ee.join("")),g=Qt.join(tn(t,r)),ot.length&&(g+=tn(t,o)+ot.join("")),Je&&(g+=tn(t,de.Exponential)+"+"+Je)}else g=tn(t,de.Infinity);return g=n<0&&!v?e.negPre+g+e.negSuf:e.posPre+g+e.posSuf,g}(n,function Gt(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),o=r[0],u=r[1],d=-1!==o.indexOf(J)?o.split(J):[o.substring(0,o.lastIndexOf("0")+1),o.substring(o.lastIndexOf("0")+1)],g=d[0],v=d[1]||"";t.posPre=g.substring(0,g.indexOf("#"));for(let S=0;S<v.length;S++){const O=v.charAt(S);"0"===O?t.minFrac=t.maxFrac=S+1:"#"===O?t.maxFrac=S+1:t.posSuf+=O}const C=g.split(",");if(t.gSize=C[1]?C[1].length:0,t.lgSize=C[2]||C[1]?(C[2]||C[1]).length:0,u){const S=o.length-t.posPre.length-t.posSuf.length,O=u.indexOf("#");t.negPre=u.substring(0,O).replace(/'/g,""),t.negSuf=u.slice(O+S).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function Dr(n,e){return(0,h.cg1)(n)[h.wAp.NumberFormats][e]}(e,me.Decimal),tn(e,de.MinusSign)),e,de.Group,de.Decimal,t)}(function Vo(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),o,r)}catch(u){throw function nt(n,e){return new h.vHH(2100,!1)}()}}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.soG,16))},n.\u0275pipe=h.Yjl({name:"number",type:n,pure:!0,standalone:!0}),n})();let cp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function Uo(n){return"server"===n}let Cl=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new rh((0,h.LFG)(Ee),window)}),n})();class rh{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function si(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=us(this.window.history)||us(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function us(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class to extends class Ml extends class Ce{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function fe(n){U||(U=n)}(new to)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function xl(){return no=no||document.querySelector("base"),no?no.getAttribute("href"):null}();return null==t?null:function Os(n){yr=yr||document.createElement("a"),yr.setAttribute("href",n);const e=yr.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){no=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Rn(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let yr,no=null;const vr=new h.OlP("TRANSITION_ID"),_c=[{provide:h.ip1,useFactory:function Ol(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const r=P(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[vr,Ee,h.zs3],multi:!0}];let wc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Ec=new h.OlP("EventManagerPlugins");let Rl=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const d=o[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ec),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Ic{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=P().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let qo=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Zo=(()=>{class n extends qo{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Pl),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Pl))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ee))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Pl(n){P().remove(n)}const Ko={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Nl=/%COMP%/g;function Eu(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?Eu(n,o,t):(o=o.replace(Nl,n),t.push(o))}return t}function Iu(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let bu=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Rs(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case h.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new Fl(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case h.ifc.ShadowDom:return new dh(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=Eu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Rl),h.LFG(Zo),h.LFG(h.AFp))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Rs{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Ko[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Ua(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Ua(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=Ko[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=Ko[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,o&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Iu(r)):this.eventManager.addEventListener(e,t,Iu(r))}}function Ua(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Fl extends Rs{constructor(e,t,r,o){super(e),this.component=r;const u=Eu(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Mr(n){return"_ngcontent-%COMP%".replace(Nl,n)}(o+"-"+r.id),this.hostAttr=function wu(n){return"_nghost-%COMP%".replace(Nl,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class dh extends Rs{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Eu(o.id,o.styles,[]);for(let d=0;d<u.length;d++){const g=document.createElement("style");g.textContent=u[d],this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Br=(()=>{class n extends Ic{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ee))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const hh=["alt","control","meta","shift"],ro={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Dc={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ba=(()=>{class n extends Ic{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let d="",g=r.indexOf("code");if(g>-1&&(r.splice(g,1),d="code."),hh.forEach(C=>{const S=r.indexOf(C);S>-1&&(r.splice(S,1),d+=C+".")}),d+=u,0!=r.length||0===u.length)return null;const v={};return v.domEventName=o,v.fullKey=d,v}static matchEventFullKeyCode(t,r){let o=ro[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(o=t.code,u="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),hh.forEach(d=>{d!==o&&(0,Dc[d])(t)&&(u+=d+".")}),u+=o,u===r)}static eventCallback(t,r,o){return u=>{n.matchEventFullKeyCode(u,t)&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ee))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const ja=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:"browser"},{provide:h.g9A,useValue:function Vl(){to.makeCurrent()},multi:!0},{provide:Ee,useFactory:function Tc(){return(0,h.RDi)(document),document},deps:[]}]),Eo=new h.OlP(""),$a=[{provide:h.rWj,useClass:class ch{addToWindow(e){h.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const o=h.dqk.getAllAngularTestabilities();let u=o.length,d=!1;const g=function(v){d=d||v,u--,0==u&&r(d)};o.forEach(function(v){v.whenStable(g)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}},deps:[]},{provide:h.lri,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]}],Qo=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function Ps(){return new h.qLn},deps:[]},{provide:Ec,useClass:Br,multi:!0,deps:[Ee,h.R0b,h.Lbi]},{provide:Ec,useClass:Ba,multi:!0,deps:[Ee]},{provide:bu,useClass:bu,deps:[Rl,Zo,h.AFp]},{provide:h.FYo,useExisting:bu},{provide:qo,useExisting:Zo},{provide:Zo,useClass:Zo,deps:[Ee]},{provide:Rl,useClass:Rl,deps:[Ec,h.R0b]},{provide:class Bo{},useClass:wc,deps:[]},[]];let Jo=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:vr,useExisting:h.AFp},_c]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Eo,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[...Qo,...$a],imports:[cp,h.hGG]}),n})(),vs=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ee))},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Ha(){return new vs((0,h.LFG)(Ee))}(),r},providedIn:"root"}),n})();"undefined"!=typeof window&&window,N(7435);var rr=N(8996),ls=N(9751);const{isArray:jl}=Array,{getPrototypeOf:vi,prototype:Ns,keys:xu}=Object;function so(n){if(1===n.length){const e=n[0];if(jl(e))return{args:e,keys:null};if(function bo(n){return n&&"object"==typeof n&&vi(n)===Ns}(e)){const t=xu(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Ga=N(8421),Co=N(7669),oi=N(5403),Wt=N(4004);const{isArray:$l}=Array;function _i(n){return(0,Wt.U)(e=>function Mc(n,e){return $l(e)?n(...e):n(e)}(n,e))}function Ou(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}let Ru=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),Es=(()=>{class n extends Ru{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const Xi=new h.OlP("NgValueAccessor"),Wa={provide:Xi,useExisting:(0,h.Gpc)(()=>ks),multi:!0},Hl=new h.OlP("CompositionEventMode");let ks=(()=>{class n extends Ru{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function pp(){const n=P()?P().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(Hl,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[h._Bn([Wa]),h.qOj]}),n})();const jr=new h.OlP("NgValidators"),Bi=new h.OlP("NgAsyncValidators");function D(n){return null!=n}function M(n){return(0,h.QGY)(n)?(0,rr.D)(n):n}function V(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function ne(n,e){return e.map(t=>t(n))}function He(n){return n.map(e=>function we(n){return!n.validate}(e)?e:t=>e.validate(t))}function Ot(n){return null!=n?function ht(n){if(!n)return null;const e=n.filter(D);return 0==e.length?null:function(t){return V(ne(t,e))}}(He(n)):null}function gn(n){return null!=n?function pn(n){if(!n)return null;const e=n.filter(D);return 0==e.length?null:function(t){return function ws(...n){const e=(0,Co.jO)(n),{args:t,keys:r}=so(n),o=new ls.y(u=>{const{length:d}=t;if(!d)return void u.complete();const g=new Array(d);let v=d,C=d;for(let S=0;S<d;S++){let O=!1;(0,Ga.Xf)(t[S]).subscribe((0,oi.x)(u,G=>{O||(O=!0,C--),g[S]=G},()=>v--,void 0,()=>{(!v||!O)&&(C||u.next(r?Ou(r,g):g),u.complete())}))}});return e?o.pipe(_i(e)):o}(ne(t,e).map(M)).pipe((0,Wt.U)(V))}}(He(n)):null}function kt(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function To(n){return n?Array.isArray(n)?n:[n]:[]}function ao(n,e){return Array.isArray(n)?n.includes(e):n===e}function ji(n,e){const t=To(e);return To(n).forEach(o=>{ao(t,o)||t.push(o)}),t}function uo(n,e){return To(e).filter(t=>!ao(n,t))}class ku{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Ot(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=gn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class fs extends ku{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ir extends ku{get formDirective(){return null}get path(){return null}}let Pc=(()=>{class n extends class Fs{constructor(e){this._cd=e}get isTouched(){var e,t;return!(null===(t=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===t||!t.touched)}get isUntouched(){var e,t;return!(null===(t=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===t||!t.untouched)}get isPristine(){var e,t;return!(null===(t=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===t||!t.pristine)}get isDirty(){var e,t;return!(null===(t=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===t||!t.dirty)}get isValid(){var e,t;return!(null===(t=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===t||!t.valid)}get isInvalid(){var e,t;return!(null===(t=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===t||!t.invalid)}get isPending(){var e,t;return!(null===(t=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===t||!t.pending)}get isSubmitted(){var e;return!(null===(e=this._cd)||void 0===e||!e.submitted)}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(fs,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[h.qOj]}),n})();const Lu="VALID",Fc="INVALID",Ao="PENDING",Vu="DISABLED";function _p(n){return Array.isArray(n)?Ot(n):n||null}function wp(n){return Array.isArray(n)?gn(n):n||null}function Uu(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function m(n,e){var t,r;(function oe(n,e){const t=function Rr(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(kt(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function ai(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(kt(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();A(e._rawValidators,o),A(e._rawAsyncValidators,o)})(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&(null===(r=(t=e.valueAccessor).setDisabledState)||void 0===r||r.call(t,!0)),function wt(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Dn(n,e)})}(n,e),function _r(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Vt(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Dn(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function k(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function A(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Dn(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Cp(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function X_(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const US={provide:fs,useExisting:(0,h.Gpc)(()=>Ya)},tb=(()=>Promise.resolve())();let Ya=(()=>{class n extends fs{constructor(t,r,o,u,d){super(),this._changeDetectorRef=d,this.control=new class extends class wh{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=_p(this._rawValidators),this._composedAsyncValidatorFn=wp(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Lu}get invalid(){return this.status===Fc}get pending(){return this.status==Ao}get disabled(){return this.status===Vu}get enabled(){return this.status!==Vu}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=_p(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=wp(e)}addValidators(e){this.setValidators(ji(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(ji(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(uo(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(uo(e,this._rawAsyncValidators))}hasValidator(e){return ao(this._rawValidators,e)}hasAsyncValidator(e){return ao(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ao,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Vu,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Lu,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Lu||this.status===Ao)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Vu:Lu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ao,this._hasOwnPendingAsyncValidator=!0;const t=M(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,o)=>r&&r._find(o),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?Vu:this.errors?Fc:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ao)?Ao:this._anyControlsHaveStatus(Fc)?Fc:Lu}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Uu(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}{constructor(e=null,t,r){super(function Lc(n){return(Uu(n)?n.validators:n)||null}(t),function ql(n,e){return(Uu(e)?e.asyncValidators:n)||null}(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Uu(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=X_(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Cp(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Cp(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){X_(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},this._registered=!1,this.update=new h.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function Yl(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===ks?t=u:function Kl(n){return Object.getPrototypeOf(n.constructor)===Es}(u)?r=u:o=u}),o||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function Eh(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){m(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){tb.then(()=>{var r;this.control.setValue(t,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=0!==r&&(0,h.D6c)(r);tb.then(()=>{var u;o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),null===(u=this._changeDetectorRef)||void 0===u||u.markForCheck()})}_getPath(t){return this._parent?function p(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Ir,9),h.Y36(jr,10),h.Y36(Bi,10),h.Y36(Xi,10),h.Y36(h.sBO,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[h._Bn([US]),h.qOj,h.TTD]}),n})(),Um=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),zS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Um]}),n})(),Km=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[zS]}),n})();function Ut(...n){const e=(0,Co.yG)(n);return(0,rr.D)(n,e)}var ua=N(7579);class Ls extends ua.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const ed=(0,N(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Qa=N(4671),hb=N(9672);function _0(...n){const e=(0,Co.yG)(n),t=(0,Co.jO)(n),{args:r,keys:o}=so(n);if(0===r.length)return(0,rr.D)([],e);const u=new ls.y(function fb(n,e,t=Qa.y){return r=>{Ym(e,()=>{const{length:o}=n,u=new Array(o);let d=o,g=o;for(let v=0;v<o;v++)Ym(e,()=>{const C=(0,rr.D)(n[v],e);let S=!1;C.subscribe((0,oi.x)(r,O=>{u[v]=O,S||(S=!0,g--),g||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,o?d=>Ou(o,d):Qa.y));return t?u.pipe(_i(t)):u}function Ym(n,e,t){n?(0,hb.f)(t,n,e):e()}var xh=N(8189);function Qm(...n){return function pb(){return(0,xh.J)(1)}()((0,rr.D)(n,(0,Co.yG)(n)))}function w0(n){return new ls.y(e=>{(0,Ga.Xf)(n()).subscribe(e)})}var Jm=N(9635),Xm=N(576);function Oh(n,e){const t=(0,Xm.m)(n)?n:()=>n,r=o=>o.error(t());return new ls.y(e?o=>e.schedule(r,0,o):r)}var Bc=N(515),ey=N(727),ps=N(4482);function ty(){return(0,ps.e)((n,e)=>{let t=null;n._refCount++;const r=(0,oi.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class es extends ls.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,ps.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ey.w0;const t=this.getSubject();e.add(this.source.subscribe((0,oi.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ey.w0.EMPTY)}return e}refCount(){return ty()(this)}}function ui(n,e){return(0,ps.e)((t,r)=>{let o=null,u=0,d=!1;const g=()=>d&&!o&&r.complete();t.subscribe((0,oi.x)(r,v=>{null==o||o.unsubscribe();let C=0;const S=u++;(0,Ga.Xf)(n(v,S)).subscribe(o=(0,oi.x)(r,O=>r.next(e?e(v,O,S,C++):O),()=>{o=null,g()}))},()=>{d=!0,g()}))})}function td(n){return n<=0?()=>Bc.E:(0,ps.e)((e,t)=>{let r=0;e.subscribe((0,oi.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function nd(...n){const e=(0,Co.yG)(n);return(0,ps.e)((t,r)=>{(e?Qm(n,t,e):Qm(n,t)).subscribe(r)})}function br(n,e){return(0,ps.e)((t,r)=>{let o=0;t.subscribe((0,oi.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}var wi=N(5577);function Rh(n){return(0,ps.e)((e,t)=>{let r=!1;e.subscribe((0,oi.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function E0(n=gb){return(0,ps.e)((e,t)=>{let r=!1;e.subscribe((0,oi.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function gb(){return new ed}function ca(n,e){const t=arguments.length>=2;return r=>r.pipe(n?br((o,u)=>n(o,u,r)):Qa.y,td(1),t?Rh(e):E0(()=>new ed))}function jc(n,e){return(0,Xm.m)(e)?(0,wi.z)(n,e,1):(0,wi.z)(n,1)}var $i=N(8505);function $u(n){return(0,ps.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,oi.x)(t,void 0,void 0,d=>{u=(0,Ga.Xf)(n(d,$u(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}function I0(n,e,t,r,o){return(u,d)=>{let g=t,v=e,C=0;u.subscribe((0,oi.x)(d,S=>{const O=C++;v=g?n(v,S,O):(g=!0,S),r&&d.next(v)},o&&(()=>{g&&d.next(v),d.complete()})))}}function Ph(n,e){return(0,ps.e)(I0(n,e,arguments.length>=2,!0))}function ny(n){return n<=0?()=>Bc.E:(0,ps.e)((e,t)=>{let r=[];e.subscribe((0,oi.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function b0(n,e){const t=arguments.length>=2;return r=>r.pipe(n?br((o,u)=>n(o,u,r)):Qa.y,ny(1),t?Rh(e):E0(()=>new ed))}function Hu(n){return(0,ps.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const yn="primary",Nh=Symbol("RouteTitle");class vb{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function kh(n){return new vb(n)}function ZS(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const d=r[u],g=n[u];if(d.startsWith(":"))o[d.substring(1)]=g;else if(d!==g.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Ja(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!xo(n[o],e[o]))return!1;return!0}function xo(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function Mp(n){return Array.prototype.concat.apply([],n)}function xp(n){return n.length>0?n[n.length-1]:null}function Ti(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Gu(n){return(0,h.CqO)(n)?n:(0,h.QGY)(n)?(0,rr.D)(Promise.resolve(n)):Ut(n)}const wb={exact:function Eb(n,e,t){if(!Hc(n.segments,e.segments)||!Np(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Eb(n.children[r],e.children[r],t))return!1;return!0},subset:Pp},Op={exact:function D0(n,e){return Ja(n,e)},subset:function rd(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>xo(n[t],e[t]))},ignored:()=>!0};function Rp(n,e,t){return wb[t.paths](n.root,e.root,t.matrixParams)&&Op[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Pp(n,e,t){return ry(n,e,e.segments,t)}function ry(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!Hc(o,t)||e.hasChildren()||!Np(o,t,r))}if(n.segments.length===t.length){if(!Hc(n.segments,t)||!Np(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!Pp(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Hc(n.segments,o)&&Np(n.segments,o,r)&&n.children[yn])&&ry(n.children[yn],e,u,r)}}function Np(n,e,t){return e.every((r,o)=>Op[t](n[o].parameters,r.parameters))}class Xa{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=kh(this.queryParams)),this._queryParamMap}toString(){return iy.serialize(this)}}class jn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Ti(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Lh(this)}}class Fh{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=kh(this.parameters)),this._parameterMap}toString(){return oy(this)}}function Hc(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let T0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return new kp},providedIn:"root"}),n})();class kp{parse(e){const t=new R0(e);return new Xa(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Gc(e.root,!0)}`,r=function YS(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Fp(t)}=${Fp(o)}`).join("&"):`${Fp(t)}=${Fp(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function A0(n){return encodeURI(n)}(e.fragment)}`:""}`}}const iy=new kp;function Lh(n){return n.segments.map(e=>oy(e)).join("/")}function Gc(n,e){if(!n.hasChildren())return Lh(n);if(e){const t=n.children[yn]?Gc(n.children[yn],!1):"",r=[];return Ti(n.children,(o,u)=>{u!==yn&&r.push(`${u}:${Gc(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function bb(n,e){let t=[];return Ti(n.children,(r,o)=>{o===yn&&(t=t.concat(e(r,o)))}),Ti(n.children,(r,o)=>{o!==yn&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===yn?[Gc(n.children[yn],!1)]:[`${o}:${Gc(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[yn]?`${Lh(n)}/${t[0]}`:`${Lh(n)}/(${t.join("//")})`}}function S0(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Fp(n){return S0(n).replace(/%3B/gi,";")}function Lp(n){return S0(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function la(n){return decodeURIComponent(n)}function sy(n){return la(n.replace(/\+/g,"%20"))}function oy(n){return`${Lp(n.path)}${function Cb(n){return Object.keys(n).map(e=>`;${Lp(e)}=${Lp(n[e])}`).join("")}(n.parameters)}`}const Vp=/^[^\/()?;=#]+/;function Up(n){const e=n.match(Vp);return e?e[0]:""}const M0=/^[^=?&#]+/,O0=/^[^&#]+/;class R0{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new jn([],{}):new jn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[yn]=new jn(e,t)),r}parseSegment(){const e=Up(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new h.vHH(4009,!1);return this.capture(e),new Fh(la(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Up(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=Up(this.remaining);o&&(r=o,this.capture(r))}e[la(t)]=la(r)}parseQueryParam(e){const t=function x0(n){const e=n.match(M0);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function ay(n){const e=n.match(O0);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=sy(t),u=sy(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Up(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new h.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=yn);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[yn]:new jn([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new h.vHH(4011,!1)}}function id(n){return n.segments.length>0?new jn([],{[yn]:n}):n}function zc(n){const e={};for(const r of Object.keys(n.children)){const u=zc(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function P0(n){if(1===n.numberOfChildren&&n.children[yn]){const e=n.children[yn];return new jn(n.segments.concat(e.segments),e.children)}return n}(new jn(n.segments,e))}function eu(n){return n instanceof Xa}function k0(n,e,t,r,o){var u;if(0===t.length)return Wc(e.root,e.root,e.root,r,o);const g=function Tb(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new uy(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const g={};return Ti(u.outlets,(v,C)=>{g[C]="string"==typeof v?v.split("/"):v}),[...o,{outlets:g}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===d?(u.split("/").forEach((g,v)=>{0==v&&"."===g||(0==v&&""===g?t=!0:".."===g?e++:""!=g&&o.push(g))}),o):[...o,u]},[]);return new uy(t,e,r)}(t);return g.toRoot()?Wc(e.root,e.root,new jn([],{}),r,o):function v(S){var O;const G=function F0(n,e,t,r){if(n.isAbsolute)return new qc(e.root,!0,0);if(-1===r)return new qc(t,t===e.root,0);return function L0(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new h.vHH(4005,!1);o=r.segments.length}return new qc(r,!1,o-u)}(t,r+(Uh(n.commands[0])?0:1),n.numberOfDoubleDots)}(g,e,null===(O=n.snapshot)||void 0===O?void 0:O._urlSegment,S),ee=G.processChildren?jh(G.segmentGroup,G.index,g.commands):Vs(G.segmentGroup,G.index,g.commands);return Wc(e.root,G.segmentGroup,ee,r,o)}(null===(u=n.snapshot)||void 0===u?void 0:u._lastPathIndex)}function Uh(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Bh(n){return"object"==typeof n&&null!=n&&n.outlets}function Wc(n,e,t,r,o){let d,u={};r&&Ti(r,(v,C)=>{u[C]=Array.isArray(v)?v.map(S=>`${S}`):`${v}`}),d=n===e?t:jp(n,e,t);const g=id(zc(d));return new Xa(g,u,o)}function jp(n,e,t){const r={};return Ti(n.children,(o,u)=>{r[u]=o===e?t:jp(o,e,t)}),new jn(n.segments,r)}class uy{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Uh(r[0]))throw new h.vHH(4003,!1);const o=r.find(Bh);if(o&&o!==xp(r))throw new h.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class qc{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Vs(n,e,t){if(n||(n=new jn([],{})),0===n.segments.length&&n.hasChildren())return jh(n,e,t);const r=function V0(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const d=n.segments[o],g=t[r];if(Bh(g))break;const v=`${g}`,C=r<t.length-1?t[r+1]:null;if(o>0&&void 0===v)break;if(v&&C&&"object"==typeof C&&void 0===C.outlets){if(!B0(v,C,d))return u;r+=2}else{if(!B0(v,{},d))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new jn(n.segments.slice(0,r.pathIndex),{});return u.children[yn]=new jn(n.segments.slice(r.pathIndex),n.children),jh(u,0,o)}return r.match&&0===o.length?new jn(n.segments,{}):r.match&&!n.hasChildren()?cy(n,e,t):r.match?jh(n,0,o):cy(n,e,t)}function jh(n,e,t){if(0===t.length)return new jn(n.segments,{});{const r=function Ab(n){return Bh(n[0])?n[0].outlets:{[yn]:n}}(t),o={};return Ti(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[d]=Vs(n.children[d],e,u))}),Ti(n.children,(u,d)=>{void 0===r[d]&&(o[d]=u)}),new jn(n.segments,o)}}function cy(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(Bh(u)){const v=Mb(u.outlets);return new jn(r,v)}if(0===o&&Uh(t[0])){r.push(new Fh(n.segments[e].path,U0(t[0]))),o++;continue}const d=Bh(u)?u.outlets[yn]:`${u}`,g=o<t.length-1?t[o+1]:null;d&&g&&Uh(g)?(r.push(new Fh(d,U0(g))),o+=2):(r.push(new Fh(d,{})),o++)}return new jn(r,{})}function Mb(n){const e={};return Ti(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=cy(new jn([],{}),0,t))}),e}function U0(n){const e={};return Ti(n,(t,r)=>e[r]=`${t}`),e}function B0(n,e,t){return n==t.path&&Ja(e,t.parameters)}class da{constructor(e,t){this.id=e,this.url=t}}class ly extends da{constructor(e,t,r="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Zc extends da{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class $p extends da{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class En extends da{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class j0 extends da{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $0 extends da{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class H0 extends da{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class xb extends da{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ob extends da{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class G0{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Rb{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class z0{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Pb{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Nb{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class QS{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dy{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class zu{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=hy(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=hy(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=$h(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return $h(e,this._root).map(t=>t.value)}}function hy(n,e){if(n===e.value)return e;for(const t of e.children){const r=hy(n,t);if(r)return r}return null}function $h(n,e){if(n===e.value)return[e];for(const t of e.children){const r=$h(n,t);if(r.length)return r.unshift(e),r}return[]}class Oo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function sd(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class kb extends zu{constructor(e,t){super(e),this.snapshot=t,py(this,e)}toString(){return this.snapshot.toString()}}function Fb(n,e){const t=function JS(n,e){const d=new Hp([],{},{},"",{},yn,e,null,n.root,-1,{});return new Yc("",new Oo(d,[]))}(n,e),r=new Ls([new Fh("",{})]),o=new Ls({}),u=new Ls({}),d=new Ls({}),g=new Ls(""),v=new Kc(r,o,d,g,u,yn,e,t.root);return v.snapshot=t.root,new kb(new Oo(v,[]),t)}class Kc{constructor(e,t,r,o,u,d,g,v){var C,S;this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=g,this.title=null!==(S=null===(C=this.data)||void 0===C?void 0:C.pipe((0,Wt.U)(O=>O[Nh])))&&void 0!==S?S:Ut(void 0),this._futureSnapshot=v}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Wt.U)(e=>kh(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Wt.U)(e=>kh(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function fy(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function XS(n){return n.reduce((e,t)=>{var r;return{params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign(Object.assign(Object.assign({},t.data),e.resolve),null===(r=t.routeConfig)||void 0===r?void 0:r.data),t._resolvedData)}},{params:{},data:{},resolve:{}})}(t.slice(r))}class Hp{constructor(e,t,r,o,u,d,g,v,C,S,O,G){var ee;this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=g,this.title=null===(ee=this.data)||void 0===ee?void 0:ee[Nh],this.routeConfig=v,this._urlSegment=C,this._lastPathIndex=S,this._correctedLastPathIndex=null!=G?G:S,this._resolve=O}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=kh(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=kh(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Yc extends zu{constructor(e,t){super(t),this.url=e,py(this,t)}toString(){return gy(this._root)}}function py(n,e){e.value._routerState=n,e.children.forEach(t=>py(n,t))}function gy(n){const e=n.children.length>0?` { ${n.children.map(gy).join(", ")} } `:"";return`${n.value}${e}`}function od(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ja(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ja(e.params,t.params)||n.params.next(t.params),function C0(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ja(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ja(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function my(n,e){const t=Ja(n.params,e.params)&&function Ib(n,e){return Hc(n,e)&&n.every((t,r)=>Ja(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||my(n.parent,e.parent))}function Hh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function Lb(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Hh(n,r,o);return Hh(n,r)})}(n,e,t);return new Oo(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(g=>Hh(n,g)),d}}const r=function Vb(n){return new Kc(new Ls(n.url),new Ls(n.params),new Ls(n.queryParams),new Ls(n.fragment),new Ls(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>Hh(n,u));return new Oo(r,o)}}const yy="ngNavigationCancelingError";function Z0(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=eu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=vy(!1,0,e);return o.url=t,o.navigationBehaviorOptions=r,o}function vy(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[yy]=!0,r.cancellationCode=e,t&&(r.url=t),r}function K0(n){return _y(n)&&eu(n.url)}function _y(n){return n&&n[yy]}class Y0{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Qc,this.attachRef=null}}let Qc=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Y0,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const wy=!1;let Gh=(()=>{class n{constructor(t,r,o,u,d){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.name=o||yn,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){var t;(null===(t=this.parentContexts.getContext(this.name))||void 0===t?void 0:t.outlet)===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new h.vHH(4012,wy);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new h.vHH(4012,wy);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new h.vHH(4012,wy);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new h.vHH(4013,wy);this._activatedRoute=t;const o=this.location,d=t._futureSnapshot.component,g=this.parentContexts.getOrCreateContext(this.name).children,v=new Ub(t,g,o.injector);if(r&&function eA(n){return!!n.resolveComponentFactory}(r)){const C=r.resolveComponentFactory(d);this.activated=o.createComponent(C,o.length,v)}else this.activated=o.createComponent(d,{index:o.length,injector:v,environmentInjector:null!=r?r:this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Qc),h.Y36(h.s_b),h.$8M("name"),h.Y36(h.sBO),h.Y36(h.lqb))},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class Ub{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Kc?this.route:e===Qc?this.childContexts:this.parent.get(e,t)}}let Wu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[h.jDz],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},dependencies:[Gh],encapsulation:2}),n})();function Ey(n,e){var t;return n.providers&&!n._injector&&(n._injector=(0,h.MMx)(n.providers,e,`Route: ${n.path}`)),null!==(t=n._injector)&&void 0!==t?t:e}function Gp(n){const e=n.children&&n.children.map(Gp),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==yn&&(t.component=Wu),t}function bs(n){return n.outlet||yn}function $b(n,e){const t=n.filter(r=>bs(r)===e);return t.push(...n.filter(r=>bs(r)!==e)),t}function ad(n){var e;if(!n)return null;if(null!==(e=n.routeConfig)&&void 0!==e&&e._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){const r=t.routeConfig;if(null!=r&&r._loadedInjector)return r._loadedInjector;if(null!=r&&r._injector)return r._injector}return null}class zp{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),od(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=sd(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,o[d],r),delete o[d]}),Ti(o,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=sd(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);if(r&&r.outlet){const d=r.outlet.detach(),g=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:g})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=sd(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=sd(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new QS(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Pb(e.value.snapshot))}activateRoutes(e,t,r){var o;const u=e.value,d=t?t.value:null;if(od(u),u===d)if(u.component){const g=r.getOrCreateContext(u.outlet);this.activateChildRoutes(e,t,g.children)}else this.activateChildRoutes(e,t,r);else if(u.component){const g=r.getOrCreateContext(u.outlet);if(this.routeReuseStrategy.shouldAttach(u.snapshot)){const v=this.routeReuseStrategy.retrieve(u.snapshot);this.routeReuseStrategy.store(u.snapshot,null),g.children.onOutletReAttached(v.contexts),g.attachRef=v.componentRef,g.route=v.route.value,g.outlet&&g.outlet.attach(v.componentRef,v.route.value),od(v.route.value),this.activateChildRoutes(e,null,g.children)}else{const v=ad(u.snapshot),C=null!==(o=null==v?void 0:v.get(h._Vd))&&void 0!==o?o:null;g.attachRef=null,g.route=u,g.resolver=C,g.injector=v,g.outlet&&g.outlet.activateWith(u,g.injector),this.activateChildRoutes(e,null,g.children)}}else this.activateChildRoutes(e,null,r)}}class zh{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class ud{constructor(e,t){this.component=e,this.route=t}}function Ty(n,e,t){const r=n._root;return qh(r,e?e._root:null,t,[r.value])}function Wh(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,h.Z0I)(n)?e.get(n):n:r}function qh(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=sd(e);return n.children.forEach(d=>{(function Hb(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,g=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const v=function Gb(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Hc(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Hc(n.url,e.url)||!Ja(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!my(n,e)||!Ja(n.queryParams,e.queryParams);default:return!my(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);v?o.canActivateChecks.push(new zh(r)):(u.data=d.data,u._resolvedData=d._resolvedData),qh(n,e,u.component?g?g.children:null:t,r,o),v&&g&&g.outlet&&g.outlet.isActivated&&o.canDeactivateChecks.push(new ud(g.outlet.component,d))}else d&&Zh(e,g,o),o.canActivateChecks.push(new zh(r)),qh(n,null,u.component?g?g.children:null:t,r,o)})(d,u[d.value.outlet],t,r.concat([d.value]),o),delete u[d.value.outlet]}),Ti(u,(d,g)=>Zh(d,t.getContext(g),o)),o}function Zh(n,e,t){const r=sd(n),o=n.value;Ti(r,(u,d)=>{Zh(u,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new ud(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function cd(n){return"function"==typeof n}function ew(n){return n instanceof ed||"EmptyError"===(null==n?void 0:n.name)}const Ay=Symbol("INITIAL_VALUE");function Kh(){return ui(n=>_0(n.map(e=>e.pipe(td(1),nd(Ay)))).pipe((0,Wt.U)(e=>{for(const t of e)if(!0!==t){if(t===Ay)return Ay;if(!1===t||t instanceof Xa)return t}return!0}),br(e=>e!==Ay),td(1)))}function xy(n){return(0,Jm.z)((0,$i.b)(e=>{if(eu(e))throw Z0(0,e)}),(0,Wt.U)(e=>!0===e))}const Wp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function qp(n,e,t,r,o){const u=Ry(n,e,t);return u.matched?function Oy(n,e,t,r){const o=e.canMatch;return o&&0!==o.length?Ut(o.map(d=>{const g=Wh(d,n);return Gu(function Wb(n){return n&&cd(n.canMatch)}(g)?g.canMatch(e,t):n.runInContext(()=>g(e,t)))})).pipe(Kh(),xy()):Ut(!0)}(r=Ey(e,r),e,t).pipe((0,Wt.U)(d=>!0===d?u:Object.assign({},Wp))):Ut(u)}function Ry(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Wp):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||ZS)(t,n,e);if(!u)return Object.assign({},Wp);const d={};Ti(u.posParams,(v,C)=>{d[C]=v.path});const g=u.consumed.length>0?Object.assign(Object.assign({},d),u.consumed[u.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:g,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function Ro(n,e,t,r,o="corrected"){if(t.length>0&&function Kb(n,e,t){return t.some(r=>Zp(n,e,r)&&bs(r)!==yn)}(n,t,r)){const d=new jn(e,function Zb(n,e,t,r){const o={};o[yn]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&bs(u)!==yn){const d=new jn([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[bs(u)]=d}return o}(n,e,r,new jn(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function nw(n,e,t){return t.some(r=>Zp(n,e,r))}(n,t,r)){const d=new jn(n.segments,function tw(n,e,t,r,o,u){const d={};for(const g of r)if(Zp(n,t,g)&&!o[bs(g)]){const v=new jn([],{});v._sourceSegment=n,v._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[bs(g)]=v}return Object.assign(Object.assign({},o),d)}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new jn(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Zp(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function rw(n,e,t,r){return!!(bs(n)===r||r!==yn&&Zp(e,t,n))&&("**"===n.path||Ry(e,n,t).matched)}function Yh(n,e,t){return 0===e.length&&!n.children[t]}const nu=!1;class ld{constructor(e){this.segmentGroup=e||null}}class Jc{constructor(e){this.urlTree=e}}function Xc(n){return Oh(new ld(n))}function Qh(n){return Oh(new Jc(n))}class Ny{constructor(e,t,r,o,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0}apply(){const e=Ro(this.urlTree.root,[],[],this.config).segmentGroup,t=new jn(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,yn).pipe((0,Wt.U)(u=>this.createUrlTree(zc(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe($u(u=>{if(u instanceof Jc)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof ld?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,yn).pipe((0,Wt.U)(o=>this.createUrlTree(zc(o),e.queryParams,e.fragment))).pipe($u(o=>{throw o instanceof ld?this.noMatchError(o):o}))}noMatchError(e){return new h.vHH(4002,nu)}createUrlTree(e,t,r){const o=id(e);return new Xa(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Wt.U)(u=>new jn([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,rr.D)(o).pipe(jc(u=>{const d=r.children[u],g=$b(t,u);return this.expandSegmentGroup(e,g,d,u).pipe((0,Wt.U)(v=>({segment:v,outlet:u})))}),Ph((u,d)=>(u[d.outlet]=d.segment,u),{}),b0())}expandSegment(e,t,r,o,u,d){return(0,rr.D)(r).pipe(jc(g=>this.expandSegmentAgainstRoute(e,t,r,g,o,u,d).pipe($u(C=>{if(C instanceof ld)return Ut(null);throw C}))),ca(g=>!!g),$u((g,v)=>{if(ew(g))return Yh(t,o,u)?Ut(new jn([],{})):Xc(t);throw g}))}expandSegmentAgainstRoute(e,t,r,o,u,d,g){return rw(o,t,u,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,d):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d):Xc(t):Xc(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Qh(u):this.lineralizeSegments(r,u).pipe((0,wi.z)(d=>{const g=new jn(d,{});return this.expandSegment(e,g,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){const{matched:g,consumedSegments:v,remainingSegments:C,positionalParamSegments:S}=Ry(t,o,u);if(!g)return Xc(t);const O=this.applyRedirectCommands(v,o.redirectTo,S);return o.redirectTo.startsWith("/")?Qh(O):this.lineralizeSegments(o,O).pipe((0,wi.z)(G=>this.expandSegment(e,t,r,G.concat(C),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){return"**"===r.path?(e=Ey(r,e),r.loadChildren?(r._loadedRoutes?Ut({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,Wt.U)(g=>(r._loadedRoutes=g.routes,r._loadedInjector=g.injector,new jn(o,{})))):Ut(new jn(o,{}))):qp(t,r,o,e).pipe(ui(({matched:d,consumedSegments:g,remainingSegments:v})=>{var C;return d?(e=null!==(C=r._injector)&&void 0!==C?C:e,this.getChildConfig(e,r,o).pipe((0,wi.z)(O=>{var G;const ee=null!==(G=O.injector)&&void 0!==G?G:e,ge=O.routes,{segmentGroup:Je,slicedSegments:ot}=Ro(t,g,v,ge),Qt=new jn(Je.segments,Je.children);if(0===ot.length&&Qt.hasChildren())return this.expandChildren(ee,ge,Qt).pipe((0,Wt.U)(bn=>new jn(g,bn)));if(0===ge.length&&0===ot.length)return Ut(new jn(g,{}));const vn=bs(r)===u;return this.expandSegment(ee,Qt,ge,ot,vn?yn:u,!0).pipe((0,Wt.U)(qt=>new jn(g.concat(qt.segments),qt.children)))}))):Xc(t)}))}getChildConfig(e,t,r){return t.children?Ut({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Ut({routes:t._loadedRoutes,injector:t._loadedInjector}):function qb(n,e,t,r){const o=e.canLoad;return void 0===o||0===o.length?Ut(!0):Ut(o.map(d=>{const g=Wh(d,n);return Gu(function zb(n){return n&&cd(n.canLoad)}(g)?g.canLoad(e,t):n.runInContext(()=>g(e,t)))})).pipe(Kh(),xy())}(e,t,r).pipe((0,wi.z)(o=>o?this.configLoader.loadChildren(e,t).pipe((0,$i.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function sw(n){return Oh(vy(nu,3))}())):Ut({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return Ut(r);if(o.numberOfChildren>1||!o.children[yn])return Oh(new h.vHH(4e3,nu));o=o.children[yn]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new Xa(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Ti(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const g=o.substring(1);r[u]=t[g]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let d={};return Ti(t.children,(g,v)=>{d[v]=this.createSegmentGroup(e,g,r,o)}),new jn(u,d)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new h.vHH(4001,nu);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}class Yb{}class aw{constructor(e,t,r,o,u,d,g,v){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=o,this.url=u,this.paramsInheritanceStrategy=d,this.relativeLinkResolution=g,this.urlSerializer=v}recognize(){const e=Ro(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,yn).pipe((0,Wt.U)(t=>{if(null===t)return null;const r=new Hp([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},yn,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Oo(r,t),u=new Yc(this.url,o);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=fy(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,o)}processChildren(e,t,r){return(0,rr.D)(Object.keys(r.children)).pipe(jc(o=>{const u=r.children[o],d=$b(t,o);return this.processSegmentGroup(e,d,u,o)}),Ph((o,u)=>o&&u?(o.push(...u),o):null),function mb(n,e=!1){return(0,ps.e)((t,r)=>{let o=0;t.subscribe((0,oi.x)(r,u=>{const d=n(u,o++);(d||e)&&r.next(u),!d&&r.complete()}))})}(o=>null!==o),Rh(null),b0(),(0,Wt.U)(o=>{if(null===o)return null;const u=lw(o);return function Jb(n){n.sort((e,t)=>e.value.outlet===yn?-1:t.value.outlet===yn?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,o,u){return(0,rr.D)(t).pipe(jc(d=>{var g;return this.processSegmentAgainstRoute(null!==(g=d._injector)&&void 0!==g?g:e,d,r,o,u)}),ca(d=>!!d),$u(d=>{if(ew(d))return Yh(r,o,u)?Ut([]):Ut(null);throw d}))}processSegmentAgainstRoute(e,t,r,o,u){var d,g;if(t.redirectTo||!rw(t,r,o,u))return Ut(null);let v;if("**"===t.path){const C=o.length>0?xp(o).parameters:{},S=dw(r)+o.length;v=Ut({snapshot:new Hp(o,C,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,hw(t),bs(t),null!==(g=null!==(d=t.component)&&void 0!==d?d:t._loadedComponent)&&void 0!==g?g:null,t,ky(r),S,Kp(t),S),consumedSegments:[],remainingSegments:[]})}else v=qp(r,t,o,e).pipe((0,Wt.U)(({matched:C,consumedSegments:S,remainingSegments:O,parameters:G})=>{var ee,ge;if(!C)return null;const Je=dw(r)+S.length;return{snapshot:new Hp(S,G,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,hw(t),bs(t),null!==(ge=null!==(ee=t.component)&&void 0!==ee?ee:t._loadedComponent)&&void 0!==ge?ge:null,t,ky(r),Je,Kp(t),Je),consumedSegments:S,remainingSegments:O}}));return v.pipe(ui(C=>{var S,O;if(null===C)return Ut(null);const{snapshot:G,consumedSegments:ee,remainingSegments:ge}=C;e=null!==(S=t._injector)&&void 0!==S?S:e;const Je=null!==(O=t._loadedInjector)&&void 0!==O?O:e,ot=function uw(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:Qt,slicedSegments:vn}=Ro(r,ee,ge,ot.filter(qt=>void 0===qt.redirectTo),this.relativeLinkResolution);if(0===vn.length&&Qt.hasChildren())return this.processChildren(Je,ot,Qt).pipe((0,Wt.U)(qt=>null===qt?null:[new Oo(G,qt)]));if(0===ot.length&&0===vn.length)return Ut([new Oo(G,[])]);const Nn=bs(t)===u;return this.processSegment(Je,ot,Qt,vn,Nn?yn:u).pipe((0,Wt.U)(qt=>null===qt?null:[new Oo(G,qt)]))}))}}function cw(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function lw(n){const e=[],t=new Set;for(const r of n){if(!cw(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=lw(r.children);e.push(new Oo(r.value,o))}return e.filter(r=>!t.has(r))}function ky(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function dw(n){var e,t;let r=n,o=null!==(e=r._segmentIndexShift)&&void 0!==e?e:0;for(;r._sourceSegment;)r=r._sourceSegment,o+=null!==(t=r._segmentIndexShift)&&void 0!==t?t:0;return o-1}function hw(n){return n.data||{}}function Kp(n){return n.resolve||{}}function Fy(n){return"string"==typeof n.title||null===n.title}function Ly(n){return ui(e=>{const t=n(e);return t?(0,rr.D)(t).pipe((0,Wt.U)(()=>e)):Ut(e)})}let gw=(()=>{class n{buildTitle(t){var r;let o,u=t.root;for(;void 0!==u;)o=null!==(r=this.getResolvedTitleForRoute(u))&&void 0!==r?r:o,u=u.children.find(d=>d.outlet===yn);return o}getResolvedTitleForRoute(t){return t.data[Nh]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(Vy)},providedIn:"root"}),n})(),Vy=(()=>{class n extends gw{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(vs))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class sC{}class Uy extends class fa{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Yp=new h.OlP("",{providedIn:"root",factory:()=>({})}),Qp=new h.OlP("ROUTES");let By=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Ut(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Gu(t.loadComponent()).pipe((0,$i.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),Hu(()=>{this.componentLoaders.delete(t)})),o=new es(r,()=>new ua.x).pipe(ty());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Ut({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,Wt.U)(g=>{this.onLoadEndListener&&this.onLoadEndListener(r);let v,C,S=!1;Array.isArray(g)?C=g:(v=g.create(t).injector,C=Mp(v.get(Qp,[],h.XFs.Self|h.XFs.Optional)));return{routes:C.map(Gp),injector:v}}),Hu(()=>{this.childrenLoaders.delete(r)})),d=new es(u,()=>new ua.x).pipe(ty());return this.childrenLoaders.set(r,d),d}loadModuleFactoryOrRoutes(t){return Gu(t()).pipe((0,wi.z)(r=>r instanceof h.YKP||Array.isArray(r)?Ut(r):(0,rr.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.zs3),h.LFG(h.Sil))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class uC{}class cC{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function lC(n){throw n}function dC(n,e,t){return e.parse("/")}const Jp={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},jy={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function hC(){var n,e;const t=(0,h.f3M)(T0),r=(0,h.f3M)(Qc),o=(0,h.f3M)(Ve),u=(0,h.f3M)(h.zs3),d=(0,h.f3M)(h.Sil),g=null!==(n=(0,h.f3M)(Qp,{optional:!0}))&&void 0!==n?n:[],v=null!==(e=(0,h.f3M)(Yp,{optional:!0}))&&void 0!==e?e:{},C=(0,h.f3M)(Vy),S=(0,h.f3M)(gw,{optional:!0}),O=(0,h.f3M)(uC,{optional:!0}),G=(0,h.f3M)(sC,{optional:!0}),ee=new $r(null,t,r,o,u,d,Mp(g));return O&&(ee.urlHandlingStrategy=O),G&&(ee.routeReuseStrategy=G),ee.titleStrategy=null!=S?S:C,function Xp(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(v,ee),ee}let $r=(()=>{class n{constructor(t,r,o,u,d,g,v){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=v,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ua.x,this.errorHandler=lC,this.malformedUriErrorHandler=dC,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Ut(void 0),this.urlHandlingStrategy=new cC,this.routeReuseStrategy=new Uy,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=d.get(By),this.configLoader.onLoadEndListener=G=>this.triggerEvent(new Rb(G)),this.configLoader.onLoadStartListener=G=>this.triggerEvent(new G0(G)),this.ngModule=d.get(h.h0i),this.console=d.get(h.c2e);const O=d.get(h.R0b);this.isNgZoneEnabled=O instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(v),this.currentUrlTree=function _b(){return new Xa(new jn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Fb(this.currentUrlTree,this.rootComponentType),this.transitions=new Ls({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(br(o=>0!==o.id),(0,Wt.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),ui(o=>{let u=!1,d=!1;return Ut(o).pipe((0,$i.b)(g=>{this.currentNavigation={id:g.id,initialUrl:g.rawUrl,extractedUrl:g.extractedUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),ui(g=>{const v=this.browserUrlTree.toString(),C=!this.navigated||g.extractedUrl.toString()!==v||v!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return $y(g.source)&&(this.browserUrlTree=g.extractedUrl),Ut(g).pipe(ui(O=>{const G=this.transitions.getValue();return r.next(new ly(O.id,this.serializeUrl(O.extractedUrl),O.source,O.restoredState)),G!==this.transitions.getValue()?Bc.E:Promise.resolve(O)}),function ow(n,e,t,r){return ui(o=>function Py(n,e,t,r,o){return new Ny(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,Wt.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,$i.b)(O=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:O.urlAfterRedirects}),o.urlAfterRedirects=O.urlAfterRedirects}),function fw(n,e,t,r,o,u){return(0,wi.z)(d=>function Qb(n,e,t,r,o,u,d="emptyOnly",g="legacy"){return new aw(n,e,t,r,o,d,g,u).recognize().pipe(ui(v=>null===v?function dA(n){return new ls.y(e=>e.error(n))}(new Yb):Ut(v)))}(n,e,t,d.urlAfterRedirects,r.serialize(d.urlAfterRedirects),r,o,u).pipe((0,Wt.U)(g=>Object.assign(Object.assign({},d),{targetSnapshot:g}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,$i.b)(O=>{if(o.targetSnapshot=O.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!O.extras.skipLocationChange){const ee=this.urlHandlingStrategy.merge(O.urlAfterRedirects,O.rawUrl);this.setBrowserUrl(ee,O)}this.browserUrlTree=O.urlAfterRedirects}const G=new j0(O.id,this.serializeUrl(O.extractedUrl),this.serializeUrl(O.urlAfterRedirects),O.targetSnapshot);r.next(G)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:G,extractedUrl:ee,source:ge,restoredState:Je,extras:ot}=g,Qt=new ly(G,this.serializeUrl(ee),ge,Je);r.next(Qt);const vn=Fb(ee,this.rootComponentType).snapshot;return Ut(o=Object.assign(Object.assign({},g),{targetSnapshot:vn,urlAfterRedirects:ee,extras:Object.assign(Object.assign({},ot),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=g.rawUrl,g.resolve(null),Bc.E}),(0,$i.b)(g=>{const v=new $0(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(v)}),(0,Wt.U)(g=>o=Object.assign(Object.assign({},g),{guards:Ty(g.targetSnapshot,g.currentSnapshot,this.rootContexts)})),function sA(n,e){return(0,wi.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?Ut(Object.assign(Object.assign({},t),{guardsResult:!0})):function oA(n,e,t,r){return(0,rr.D)(n).pipe((0,wi.z)(o=>function My(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?Ut(u.map(g=>{var v;const C=null!==(v=ad(e))&&void 0!==v?v:o,S=Wh(g,C);return Gu(function J0(n){return n&&cd(n.canDeactivate)}(S)?S.canDeactivate(n,e,t,r):C.runInContext(()=>S(n,e,t,r))).pipe(ca())})).pipe(Kh()):Ut(!0)}(o.component,o.route,t,e,r)),ca(o=>!0!==o,!0))}(d,r,o,n).pipe((0,wi.z)(g=>g&&function nA(n){return"boolean"==typeof n}(g)?function aA(n,e,t,r){return(0,rr.D)(e).pipe(jc(o=>Qm(function cA(n,e){return null!==n&&e&&e(new z0(n)),Ut(!0)}(o.route.parent,r),function uA(n,e){return null!==n&&e&&e(new Nb(n)),Ut(!0)}(o.route,r),function qu(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function Sy(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>w0(()=>Ut(d.guards.map(v=>{var C;const S=null!==(C=ad(d.node))&&void 0!==C?C:t,O=Wh(v,S);return Gu(function Q0(n){return n&&cd(n.canActivateChild)}(O)?O.canActivateChild(r,n):S.runInContext(()=>O(r,n))).pipe(ca())})).pipe(Kh())));return Ut(u).pipe(Kh())}(n,o.path,t),function lA(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Ut(!0);const o=r.map(u=>w0(()=>{var d;const g=null!==(d=ad(e))&&void 0!==d?d:t,v=Wh(u,g);return Gu(function rA(n){return n&&cd(n.canActivate)}(v)?v.canActivate(e,n):g.runInContext(()=>v(e,n))).pipe(ca())}));return Ut(o).pipe(Kh())}(n,o.route,t))),ca(o=>!0!==o,!0))}(r,u,n,e):Ut(g)),(0,Wt.U)(g=>Object.assign(Object.assign({},t),{guardsResult:g})))})}(this.ngModule.injector,g=>this.triggerEvent(g)),(0,$i.b)(g=>{if(o.guardsResult=g.guardsResult,eu(g.guardsResult))throw Z0(0,g.guardsResult);const v=new H0(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.triggerEvent(v)}),br(g=>!!g.guardsResult||(this.restoreHistory(g),this.cancelNavigationTransition(g,"",3),!1)),Ly(g=>{if(g.guards.canActivateChecks.length)return Ut(g).pipe((0,$i.b)(v=>{const C=new xb(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(C)}),ui(v=>{let C=!1;return Ut(v).pipe(function eC(n,e){return(0,wi.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return Ut(t);let u=0;return(0,rr.D)(o).pipe(jc(d=>function tC(n,e,t,r){const o=n.routeConfig,u=n._resolve;return void 0!==(null==o?void 0:o.title)&&!Fy(o)&&(u[Nh]=o.title),function nC(n,e,t,r){const o=function pw(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return Ut({});const u={};return(0,rr.D)(o).pipe((0,wi.z)(d=>function rC(n,e,t,r){var o;const u=null!==(o=ad(e))&&void 0!==o?o:r,d=Wh(n,u);return Gu(d.resolve?d.resolve(e,t):u.runInContext(()=>d(e,t)))}(n[d],e,t,r).pipe(ca(),(0,$i.b)(g=>{u[d]=g}))),ny(1),function yb(n){return(0,Wt.U)(()=>n)}(u),$u(d=>ew(d)?Bc.E:Oh(d)))}(u,n,e,r).pipe((0,Wt.U)(d=>(n._resolvedData=d,n.data=fy(n,t).resolve,o&&Fy(o)&&(n.data[Nh]=o.title),null)))}(d.route,r,n,e)),(0,$i.b)(()=>u++),ny(1),(0,wi.z)(d=>u===o.length?Ut(t):Bc.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,$i.b)({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(v),this.cancelNavigationTransition(v,"",2))}}))}),(0,$i.b)(v=>{const C=new Ob(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(C)}))}),Ly(g=>{const v=C=>{var S;const O=[];(null===(S=C.routeConfig)||void 0===S?void 0:S.loadComponent)&&!C.routeConfig._loadedComponent&&O.push(this.configLoader.loadComponent(C.routeConfig).pipe((0,$i.b)(G=>{C.component=G}),(0,Wt.U)(()=>{})));for(const G of C.children)O.push(...v(G));return O};return _0(v(g.targetSnapshot.root)).pipe(Rh(),td(1))}),Ly(()=>this.afterPreactivation()),(0,Wt.U)(g=>{const v=function q0(n,e,t){const r=Hh(n,e._root,t?t._root:void 0);return new kb(r,e)}(this.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return o=Object.assign(Object.assign({},g),{targetRouterState:v})}),(0,$i.b)(g=>{this.currentUrlTree=g.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(g.urlAfterRedirects,g.rawUrl),this.routerState=g.targetRouterState,"deferred"===this.urlUpdateStrategy&&(g.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,g),this.browserUrlTree=g.urlAfterRedirects)}),((n,e,t)=>(0,Wt.U)(r=>(new zp(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,g=>this.triggerEvent(g)),(0,$i.b)({next(){u=!0},complete(){u=!0}}),Hu(()=>{var g;u||d||this.cancelNavigationTransition(o,"",1),(null===(g=this.currentNavigation)||void 0===g?void 0:g.id)===o.id&&(this.currentNavigation=null)}),$u(g=>{var v;if(d=!0,_y(g)){K0(g)||(this.navigated=!0,this.restoreHistory(o,!0));const C=new $p(o.id,this.serializeUrl(o.extractedUrl),g.message,g.cancellationCode);if(r.next(C),K0(g)){const S=this.urlHandlingStrategy.merge(g.url,this.rawUrlTree),O={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||$y(o.source)};this.scheduleNavigation(S,"imperative",null,O,{resolve:o.resolve,reject:o.reject,promise:o.promise})}else o.resolve(!1)}else{this.restoreHistory(o,!0);const C=new En(o.id,this.serializeUrl(o.extractedUrl),g,null!==(v=o.targetSnapshot)&&void 0!==v?v:void 0);r.next(C);try{o.resolve(this.errorHandler(g))}catch(S){o.reject(S)}}return Bc.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const u={replaceUrl:!0},d=null!==(o=t.state)&&void 0!==o&&o.navigationId?t.state:null;if(d){const v=Object.assign({},d);delete v.navigationId,delete v.\u0275routerPageId,0!==Object.keys(v).length&&(u.state=v)}const g=this.parseUrl(t.url);this.scheduleNavigation(g,r,d,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(Gp),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:d,queryParamsHandling:g,preserveFragment:v}=r,C=o||this.routerState.root,S=v?this.currentUrlTree.fragment:d;let O=null;switch(g){case"merge":O=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":O=this.currentUrlTree.queryParams;break;default:O=u||null}return null!==O&&(O=this.removeEmptyProps(O)),k0(C,this.currentUrlTree,t,O,null!=S?S:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=eu(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function hA(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new h.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},Jp):!1===r?Object.assign({},jy):r,eu(t))return Rp(this.currentUrlTree,t,o);const u=this.parseUrl(t);return Rp(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{var r;this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Zc(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,null===(r=this.titleStrategy)||void 0===r||r.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,d){var g,v;if(this.disposed)return Promise.resolve(!1);let C,S,O;d?(C=d.resolve,S=d.reject,O=d.promise):O=new Promise((ge,Je)=>{C=ge,S=Je});const G=++this.navigationId;let ee;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),ee=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(g=this.browserPageId)&&void 0!==g?g:0:(null!==(v=this.browserPageId)&&void 0!==v?v:0)+1):ee=0,this.setTransition({id:G,targetPageId:ee,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:C,reject:S,promise:O,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),O.catch(ge=>Promise.reject(ge))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===d?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===d&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,o){const u=new $p(t.id,this.serializeUrl(t.extractedUrl),r,o);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:function(){return hC()},providedIn:"root"}),n})();function $y(n){return"imperative"!==n}let eg=(()=>{class n{constructor(t,r,o,u,d){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=u,this.el=d,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new ua.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,h.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,h.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,h.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,o=this.el.nativeElement;null!==t?r.setAttribute(o,"tabindex",t):r.removeAttribute(o,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36($r),h.Y36(Kc),h.$8M("tabindex"),h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&h.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[h.TTD]}),n})(),tg=(()=>{class n{constructor(t,r,o){this.router=t,this.route=r,this.locationStrategy=o,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new ua.x,this.subscription=t.events.subscribe(u=>{u instanceof Zc&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=(0,h.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,h.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,h.D6c)(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,o,u,d){return!!(0!==t||r||o||u||d||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36($r),h.Y36(Kc),h.Y36(Me))},n.\u0275dir=h.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&h.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&h.uIk("target",r.target)("href",r.href,h.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[h.TTD]}),n})(),Hy=(()=>{class n{constructor(t,r,o,u,d,g){this.router=t,this.element=r,this.renderer=o,this.cdr=u,this.link=d,this.linkWithHref=g,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new h.vpe,this.routerEventsSubscription=t.events.subscribe(v=>{v instanceof Zc&&this.update()})}ngAfterContentInit(){Ut(this.links.changes,this.linksWithHrefs.changes,Ut(null)).pipe((0,xh.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const r=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(o=>!!o).map(o=>o.onChanges);this.linkInputChangesSubscription=(0,rr.D)(r).pipe((0,xh.J)()).subscribe(o=>{this.isActive!==this.isLinkActive(this.router)(o)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(o=>!!o)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function Gy(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return o=>!!o.urlTree&&t.isActive(o.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36($r),h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(h.sBO),h.Y36(eg,8),h.Y36(tg,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,o){if(1&t&&(h.Suo(o,eg,5),h.Suo(o,tg,5)),2&t){let u;h.iGM(u=h.CRH())&&(r.links=u),h.iGM(u=h.CRH())&&(r.linksWithHrefs=u)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[h.TTD]}),n})();class pa{}let Jh=(()=>{class n{constructor(t,r,o,u,d){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=d}setUpPreloading(){this.subscription=this.router.events.pipe(br(t=>t instanceof Zc),jc(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){var o,u,d;const g=[];for(const v of r){v.providers&&!v._injector&&(v._injector=(0,h.MMx)(v.providers,t,`Route: ${v.path}`));const C=null!==(o=v._injector)&&void 0!==o?o:t,S=null!==(u=v._loadedInjector)&&void 0!==u?u:C;v.loadChildren&&!v._loadedRoutes&&void 0===v.canLoad||v.loadComponent&&!v._loadedComponent?g.push(this.preloadConfig(C,v)):(v.children||v._loadedRoutes)&&g.push(this.processRoutes(S,null!==(d=v.children)&&void 0!==d?d:v._loadedRoutes))}return(0,rr.D)(g).pipe((0,xh.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Ut(null);const u=o.pipe((0,wi.z)(d=>{var g;return null===d?Ut(void 0):(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,this.processRoutes(null!==(g=d.injector)&&void 0!==g?g:t,d.routes))}));if(r.loadComponent&&!r._loadedComponent){const d=this.loader.loadComponent(r);return(0,rr.D)([u,d]).pipe((0,xh.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG($r),h.LFG(h.Sil),h.LFG(h.lqb),h.LFG(pa),h.LFG(By))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const qy=new h.OlP("");let ng=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ly?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Zc&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof dy&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new dy(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function ga(n,e){return{\u0275kind:n,\u0275providers:e}}function Zy(n){return[{provide:Qp,multi:!0,useValue:n}]}function yw(){const n=(0,h.f3M)(h.zs3);return e=>{var t,r;const o=n.get(h.z2F);if(e!==o.components[0])return;const u=n.get($r),d=n.get(fC);1===n.get(Ky)&&u.initialNavigation(),null===(t=n.get(rg,null,h.XFs.Optional))||void 0===t||t.setUpPreloading(),null===(r=n.get(qy,null,h.XFs.Optional))||void 0===r||r.init(),u.resetRootComponentType(o.componentTypes[0]),d.next(),d.complete()}}const fC=new h.OlP("",{factory:()=>new ua.x}),Ky=new h.OlP("",{providedIn:"root",factory:()=>1});const rg=new h.OlP("");function mC(n){return ga(0,[{provide:rg,useExisting:Jh},{provide:pa,useExisting:n}])}const ww=new h.OlP("ROUTER_FORROOT_GUARD"),yC=[Ve,{provide:T0,useClass:kp},{provide:$r,useFactory:hC},Qc,{provide:Kc,useFactory:function mw(n){return n.routerState.root},deps:[$r]},By];function vC(){return new h.PXZ("Router",$r)}let Ew=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[yC,[],Zy(t),{provide:ww,useFactory:ef,deps:[[$r,new h.FiY,new h.tp0]]},{provide:Yp,useValue:r||{}},null!=r&&r.useHash?{provide:Me,useClass:pt}:{provide:Me,useClass:gt},{provide:qy,useFactory:()=>{const n=(0,h.f3M)($r),e=(0,h.f3M)(Cl),t=(0,h.f3M)(Yp);return t.scrollOffset&&e.setOffset(t.scrollOffset),new ng(n,e,t)}},null!=r&&r.preloadingStrategy?mC(r.preloadingStrategy).\u0275providers:[],{provide:h.PXZ,multi:!0,useFactory:vC},null!=r&&r.initialNavigation?_C(r):[],[{provide:Iw,useFactory:yw},{provide:h.tb,multi:!0,useExisting:Iw}]]}}static forChild(t){return{ngModule:n,providers:[Zy(t)]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ww,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Wu]}),n})();function ef(n){return"guarded"}function _C(n){return["disabled"===n.initialNavigation?ga(3,[{provide:h.ip1,multi:!0,useFactory:()=>{const e=(0,h.f3M)($r);return()=>{e.setUpLocationChangeListener()}}},{provide:Ky,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?ga(2,[{provide:Ky,useValue:0},{provide:h.ip1,multi:!0,deps:[h.zs3],useFactory:e=>{const t=e.get(W,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(u=>{const d=e.get($r),g=e.get(fC);(function o(u){e.get($r).events.pipe(br(g=>g instanceof Zc||g instanceof $p||g instanceof En),(0,Wt.U)(g=>g instanceof Zc||g instanceof $p&&(0===g.code||1===g.code)&&null),br(g=>null!==g),td(1)).subscribe(()=>{u()})})(()=>{u(!0),r=!0}),d.afterPreactivation=()=>(u(!0),r||g.closed?Ut(void 0):g),d.initialNavigation()}))}}]).\u0275providers:[]]}const Iw=new h.OlP("");let ma=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["my-app"]],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},dependencies:[Gh],styles:["p[_ngcontent-%COMP%]{font-family:Lato}"]}),n})();var tf=N(4986),Vn=N(5813);function ru(){return(0,ps.e)((n,e)=>{let t,r=!1;n.subscribe((0,oi.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function ho(n,e){return n===e}var Ft,Bs=N(2011),fd=(N(5881),N(3942)),Ne=N(5861),Cs=N(9681),iu=N(4859),js=N(1877),Hn=N(2090),pd="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ds={},ag=ag||{},_n=pd||self;function rf(){}function sf(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function gd(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var ug="closure_uid_"+(1e9*Math.random()>>>0),Cw=0;function wC(n,e,t){return n.call.apply(n.bind,arguments)}function EC(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Hi(n,e,t){return(Hi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?wC:EC).apply(null,arguments)}function cg(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Si(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var d=Array(arguments.length-2),g=2;g<arguments.length;g++)d[g-2]=arguments[g];return e.prototype[o].apply(r,d)}}function ya(){this.s=this.s,this.o=this.o}var IC={};ya.prototype.s=!1,ya.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function bw(n){return Object.prototype.hasOwnProperty.call(n,ug)&&n[ug]||(n[ug]=++Cw)}(this);delete IC[n]}},ya.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const af=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function md(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function lg(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(sf(r)){const o=n.length||0,u=r.length||0;n.length=o+u;for(let d=0;d<u;d++)n[o+d]=r[d]}else n.push(r)}}function ts(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}ts.prototype.h=function(){this.defaultPrevented=!0};var Jy=function(){if(!_n.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{_n.addEventListener("test",rf,e),_n.removeEventListener("test",rf,e)}catch(t){}return n}();function yd(n){return/^[\s\xa0]*$/.test(n)}var Xy=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function dg(n,e){return n<e?-1:n>e?1:0}function vd(){var n=_n.navigator;return n&&(n=n.userAgent)?n:""}function Po(n){return-1!=vd().indexOf(n)}function hg(n){return hg[" "](n),n}hg[" "]=rf;var pg,n,Dw=Po("Opera"),_d=Po("Trident")||Po("MSIE"),tv=Po("Edge"),fg=tv||_d,nv=Po("Gecko")&&!(-1!=vd().toLowerCase().indexOf("webkit")&&!Po("Edge"))&&!(Po("Trident")||Po("MSIE"))&&!Po("Edge"),Tw=-1!=vd().toLowerCase().indexOf("webkit")&&!Po("Edge");function Sw(){var n=_n.document;return n?n.documentMode:void 0}e:{var rv="",gg=(n=vd(),nv?/rv:([^\);]+)(\)|;)/.exec(n):tv?/Edge\/([\d\.]+)/.exec(n):_d?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Tw?/WebKit\/(\S+)/.exec(n):Dw?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(gg&&(rv=gg?gg[1]:""),_d){var uf=Sw();if(null!=uf&&uf>parseFloat(rv)){pg=String(uf);break e}}pg=rv}var Aw={};var xw=_n.document&&_d&&(Sw()||parseInt(pg,10))||void 0;function wd(n,e){if(ts.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(nv){e:{try{hg(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Ow[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&wd.X.h.call(this)}}Si(wd,ts);var Ow={2:"touch",3:"pen",4:"mouse"};wd.prototype.h=function(){wd.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Ed="closure_listenable_"+(1e6*Math.random()|0),yA=0;function bC(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=o,this.key=++yA,this.ba=this.ea=!1}function yg(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function vg(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Rw(n){const e={};for(const t in n)e[t]=n[t];return e}const ci="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function sv(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<ci.length;u++)t=ci[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function _g(n){this.src=n,this.g={},this.h=0}function ov(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=af(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(yg(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function wg(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return o}return-1}_g.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=wg(n,e,r,o);return-1<d?(e=n[d],t||(e.ea=!1)):((e=new bC(e,this.src,u,!!r,o)).ea=t,n.push(e)),e};var av="closure_lm_"+(1e6*Math.random()|0),Eg={};function uv(n,e,t,r,o){if(r&&r.once)return Pw(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)uv(n,e[u],t,r,o);return null}return t=fo(t),n&&n[Ed]?n.N(e,t,gd(r)?!!r.capture:!!r,o):tl(n,e,t,!1,r,o)}function tl(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var d=gd(o)?!!o.capture:!!o,g=Ig(n);if(g||(n[av]=g=new _g(n)),(t=g.add(e,t,r,d,u)).proxy)return t;if(r=function CC(){const e=vA;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Jy||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(dv(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Pw(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)Pw(n,e[u],t,r,o);return null}return t=fo(t),n&&n[Ed]?n.O(e,t,gd(r)?!!r.capture:!!r,o):tl(n,e,t,!0,r,o)}function cv(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)cv(n,e[u],t,r,o);else r=gd(r)?!!r.capture:!!r,t=fo(t),n&&n[Ed]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=wg(u=n.g[e],t,r,o))&&(yg(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Ig(n))&&(e=n.g[e.toString()],n=-1,e&&(n=wg(e,t,r,o)),(t=-1<n?e[n]:null)&&lv(t))}function lv(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Ed])ov(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(dv(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Ig(e))?(ov(t,n),0==t.h&&(t.src=null,e[av]=null)):yg(n)}}}function dv(n){return n in Eg?Eg[n]:Eg[n]="on"+n}function vA(n,e){if(n.ba)n=!0;else{e=new wd(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&lv(n),n=t.call(r,e)}return n}function Ig(n){return(n=n[av])instanceof _g?n:null}var cf="__closure_events_fn_"+(1e9*Math.random()>>>0);function fo(n){return"function"==typeof n?n:(n[cf]||(n[cf]=function(e){return n.handleEvent(e)}),n[cf])}function Ai(){ya.call(this),this.i=new _g(this),this.P=this,this.I=null}function Gi(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ts(e,n);else if(e instanceof ts)e.target=e.target||n;else{var o=e;sv(e=new ts(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];o=$s(d,r,!0,e)&&o}if(o=$s(d=e.g=n,r,!0,e)&&o,o=$s(d,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=$s(d=e.g=t[u],r,!1,e)&&o}function $s(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ba&&d.capture==t){var g=d.listener,v=d.ha||d.src;d.ea&&ov(n.i,d),o=!1!==g.call(v,r)&&o}}return o&&!r.defaultPrevented}Si(Ai,ya),Ai.prototype[Ed]=!0,Ai.prototype.removeEventListener=function(n,e,t,r){cv(this,n,e,t,r)},Ai.prototype.M=function(){if(Ai.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)yg(t[r]);delete n.g[e],n.h--}}this.I=null},Ai.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ai.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Hs=_n.JSON.stringify;function No(){var n=Fw;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var fv,hv=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new DC,n=>n.reset());class DC{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function TC(n){_n.setTimeout(()=>{throw n},0)}function kw(n,e){fv||function pv(){var n=_n.Promise.resolve(void 0);fv=function(){n.then(Lw)}}(),nl||(fv(),nl=!0),Fw.add(n,e)}var nl=!1,Fw=new class Nw{constructor(){this.h=this.g=null}add(e,t){const r=hv.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Lw(){for(var n;n=No();){try{n.h.call(n.g)}catch(t){TC(t)}var e=hv;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}nl=!1}function bg(n,e){Ai.call(this),this.h=n||1,this.g=e||_n,this.j=Hi(this.kb,this),this.l=Date.now()}function Cg(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function Dg(n,e,t){if("function"==typeof n)t&&(n=Hi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Hi(n.handleEvent,n)}return 2147483647<Number(e)?-1:_n.setTimeout(n,e||0)}function lf(n){n.g=Dg(()=>{n.g=null,n.i&&(n.i=!1,lf(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Si(bg,Ai),(Ft=bg.prototype).ca=!1,Ft.R=null,Ft.kb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Gi(this,"tick"),this.ca&&(Cg(this),this.start()))}},Ft.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ft.M=function(){bg.X.M.call(this),Cg(this),delete this.g};class SC extends ya{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:lf(this)}M(){super.M(),this.g&&(_n.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Id(n){ya.call(this),this.h=n,this.g={}}Si(Id,ya);var gv=[];function Tg(n,e,t,r){Array.isArray(t)||(t&&(gv[0]=t.toString()),t=gv);for(var o=0;o<t.length;o++){var u=uv(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function df(n){vg(n.g,function(e,t){this.g.hasOwnProperty(t)&&lv(e)},n),n.g={}}function bd(){this.g=!0}function rl(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function jw(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<o.length;d++)o[d]=""}}}return Hs(t)}catch(g){return e}}(n,t)+(r?" "+r:"")})}Id.prototype.M=function(){Id.X.M.call(this),df(this)},Id.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},bd.prototype.Aa=function(){this.g=!1},bd.prototype.info=function(){};var Zu={},mv=null;function Sg(){return mv=mv||new Ai}function $w(n){ts.call(this,Zu.Oa,n)}function hf(n){const e=Sg();Gi(e,new $w(e,n))}function Hw(n,e){ts.call(this,Zu.STAT_EVENT,n),this.stat=e}function gs(n){const e=Sg();Gi(e,new Hw(e,n))}function Gw(n,e){ts.call(this,Zu.Pa,n),this.size=e}function ff(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return _n.setTimeout(function(){n()},e)}Zu.Oa="serverreachability",Si($w,ts),Zu.STAT_EVENT="statevent",Si(Hw,ts),Zu.Pa="timingevent",Si(Gw,ts);var Ag={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,La:7,TIMEOUT:8,Cb:9},zw={qb:"complete",Mb:"success",Ma:"error",La:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function yv(){}function qw(){}yv.prototype.h=null;var wv,pf={OPEN:"a",pb:"b",Ma:"c",Bb:"d"};function vv(){ts.call(this,"d")}function _v(){ts.call(this,"c")}function Mg(){}function gf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Id(this),this.O=Zw,this.T=new bg(n=fg?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Ev}function Ev(){this.i=null,this.g="",this.h=!1}Si(vv,ts),Si(_v,ts),Si(Mg,yv),Mg.prototype.g=function(){return new XMLHttpRequest},Mg.prototype.i=function(){return{}},wv=new Mg;var Zw=45e3,xg={},mf={};function Og(n,e,t){n.K=1,n.v=Ng(Lt(e)),n.s=t,n.P=!0,Iv(n,null)}function Iv(n,e){n.F=Date.now(),Cd(n),n.A=Lt(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),nE(t.i,"t",r),n.C=0,t=n.l.H,n.h=new Ev,n.g=Uv(n.l,t?e:null,!n.s),0<n.N&&(n.L=new SC(Hi(n.Ka,n,n.g),n.N)),Tg(n.S,n.g,"readystatechange",n.hb),e=n.H?Rw(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),hf(1),function Vw(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var d="",g=u.split("&"),v=0;v<g.length;v++){var C=g[v].split("=");if(1<C.length){var S=C[0];C=C[1];var O=S.split("_");d=2<=O.length&&"type"==O[1]?d+(S+"=")+C+"&":d+(S+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.U,n.s)}function bv(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function Cv(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=Kw(n,t),o==mf){4==e&&(n.o=4,gs(14),r=!1),rl(n.j,n.m,null,"[Incomplete Response]");break}if(o==xg){n.o=4,gs(15),rl(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}rl(n.j,n.m,o,null),Ku(n,o)}bv(n)&&o!=mf&&o!=xg&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,gs(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Lv(e),e.K=!0,gs(11))):(rl(n.j,n.m,t,"[Invalid Chunked Response]"),il(n),yf(n))}function Kw(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?mf:(t=Number(e.substring(t,r)),isNaN(t)?xg:(r+=1)+t>e.length?mf:(e=e.substr(r,t),n.C=r+t,e))}function Cd(n){n.V=Date.now()+n.O,Dv(n,n.O)}function Dv(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=ff(Hi(n.fb,n),e)}function va(n){n.B&&(_n.clearTimeout(n.B),n.B=null)}function yf(n){0==n.l.G||n.I||pE(n.l,n)}function il(n){va(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Cg(n.T),df(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Ku(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||kg(t.h,n)))if(!n.J&&kg(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch(C){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Sf(t),Xu(t)}Tf(t),gs(18)}}else t.Ba=o[1],0<t.Ba-t.T&&37500>o[2]&&t.L&&0==t.A&&!t.v&&(t.v=ff(Hi(t.bb,t),6e3));if(1>=Mv(t.h)&&t.ja){try{t.ja()}catch(C){}t.ja=void 0}}else ol(t,11)}else if((n.J||t.g==n)&&Sf(t),!yd(e))for(o=t.Fa.g.parse(e),e=0;e<o.length;e++){let C=o[e];if(t.T=C[0],C=C[1],2==t.G)if("c"==C[0]){t.I=C[1],t.ka=C[2];const S=C[3];null!=S&&(t.ma=S,t.j.info("VER="+t.ma));const O=C[4];null!=O&&(t.Ca=O,t.j.info("SVER="+t.Ca));const G=C[5];null!=G&&"number"==typeof G&&0<G&&(t.J=r=1.5*G,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const ee=n.g;if(ee){const ge=ee.g?ee.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ge){var u=r.h;u.g||-1==ge.indexOf("spdy")&&-1==ge.indexOf("quic")&&-1==ge.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(Fg(u,u.h),u.h=null))}if(r.D){const Je=ee.g?ee.g.getResponseHeader("X-HTTP-Session-Id"):null;Je&&(r.za=Je,dr(r.F,r.D,Je))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var d=n;if((r=t).sa=mE(r,r.H?r.ka:null,r.V),d.J){iE(r.h,d);var g=d,v=r.J;v&&g.setTimeout(v),g.B&&(va(g),Cd(g)),r.g=d}else fE(r);0<t.i.length&&Cf(t)}else"stop"!=C[0]&&"close"!=C[0]||ol(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?ol(t,7):Nv(t):"noop"!=C[0]&&t.l&&t.l.wa(C),t.A=0)}hf(4)}catch(C){}}function AC(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(sf(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Tv(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if("undefined"!=typeof Map&&n instanceof Map)return Array.from(n.keys());if(!("undefined"!=typeof Set&&n instanceof Set)){if(sf(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function _A(n){if(n.W&&"function"==typeof n.W)return n.W();if("undefined"!=typeof Map&&n instanceof Map||"undefined"!=typeof Set&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(sf(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length,u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}(Ft=gf.prototype).setTimeout=function(n){this.O=n},Ft.hb=function(n){n=n.target;const e=this.L;e&&3==ou(n)?e.l():this.Ka(n)},Ft.Ka=function(n){try{if(n==this.g)e:{const S=ou(this.g);var e=this.g.Ea();const O=this.g.aa();if(!(3>S)&&(3!=S||fg||this.g&&(this.h.h||this.g.fa()||cE(this.g)))){this.I||4!=S||7==e||hf(8==e||0>=O?3:2),va(this);var t=this.g.aa();this.Y=t;t:if(bv(this)){var r=cE(this.g);n="";var o=r.length,u=4==ou(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){il(this),yf(this);var d="";break t}this.h.i=new _n.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.fa();if(this.i=200==t,function Uw(n,e,t,r,o,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.U,S,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var g,v=this.g;if((g=v.g?v.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!yd(g)){var C=g;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,gs(12),il(this),yf(this);break e}rl(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ku(this,t)}this.P?(Cv(this,S,d),fg&&this.i&&3==S&&(Tg(this.S,this.T,"tick",this.gb),this.T.start())):(rl(this.j,this.m,d,null),Ku(this,d)),4==S&&il(this),this.i&&!this.I&&(4==S?pE(this.l,this):(this.i=!1,Cd(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,gs(12)):(this.o=0,gs(13)),il(this),yf(this)}}}catch(S){}},Ft.gb=function(){if(this.g){var n=ou(this.g),e=this.g.fa();this.C<e.length&&(va(this),Cv(this,n,e),this.i&&4!=n&&Cd(this))}},Ft.cancel=function(){this.I=!0,il(this)},Ft.fb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function Bw(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(hf(3),gs(17)),il(this),this.o=2,yf(this)):Dv(this,this.V-n)};var Sv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Dd(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Dd){this.h=void 0!==e?e:n.h,Rg(this,n.j),this.s=n.s,this.g=n.g,Pg(this,n.m),this.l=n.l,e=n.i;var t=new Td;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Qw(this,t),this.o=n.o}else n&&(t=String(n).match(Sv))?(this.h=!!e,Rg(this,t[1]||"",!0),this.s=Yu(t[2]||""),this.g=Yu(t[3]||"",!0),Pg(this,t[4]),this.l=Yu(t[5]||"",!0),Qw(this,t[6]||"",!0),this.o=Yu(t[7]||"")):(this.h=!!e,this.i=new Td(null,this.h))}function Lt(n){return new Dd(n)}function Rg(n,e,t){n.j=t?Yu(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Pg(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Qw(n,e,t){e instanceof Td?(n.i=e,function vf(n,e){e&&!n.j&&(su(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(Av(this,r),nE(this,o,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Qu(e,xC)),n.i=new Td(e,n.h))}function dr(n,e,t){n.i.set(e,t)}function Ng(n){return dr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Yu(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Qu(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Zr),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Zr(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Dd.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Qu(e,MC,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Qu(e,MC,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Qu(t,"/"==t.charAt(0)?Xw:Jw,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Qu(t,eE)),n.join("")};var MC=/[#\/\?@]/g,Jw=/[#\?:]/g,Xw=/[#\?]/g,xC=/[#\?@]/g,eE=/#/g;function Td(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function su(n){n.g||(n.g=new Map,n.h=0,n.i&&function Yw(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Av(n,e){su(n),e=Sd(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function tE(n,e){return su(n),e=Sd(n,e),n.g.has(e)}function nE(n,e,t){Av(n,e),0<t.length&&(n.i=null,n.g.set(Sd(n,e),md(t)),n.h+=t.length)}function Sd(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function rE(n){this.l=n||RC,n=_n.PerformanceNavigationTiming?0<(n=_n.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(_n.g&&_n.g.Ga&&_n.g.Ga()&&_n.g.Ga().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ft=Td.prototype).add=function(n,e){su(this),this.i=null,n=Sd(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ft.forEach=function(n,e){su(this),this.g.forEach(function(t,r){t.forEach(function(o){n.call(e,o,r,this)},this)},this)},Ft.oa=function(){su(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const o=n[r];for(let u=0;u<o.length;u++)t.push(e[r])}return t},Ft.W=function(n){su(this);let e=[];if("string"==typeof n)tE(this,n)&&(e=e.concat(this.g.get(Sd(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Ft.set=function(n,e){return su(this),this.i=null,tE(this,n=Sd(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ft.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},Ft.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),d=this.W(r);for(r=0;r<d.length;r++){var o=u;""!==d[r]&&(o+="="+encodeURIComponent(String(d[r]))),n.push(o)}}return this.i=n.join("&")};var RC=10;function _f(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Mv(n){return n.h?1:n.g?n.g.size:0}function kg(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Fg(n,e){n.g?n.g.add(e):n.h=e}function iE(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Ad(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return md(n.i)}function sl(){}function PC(){this.g=new sl}function NC(n,e,t){const r=t||"";try{AC(n,function(o,u){let d=o;gd(o)&&(d=Hs(o)),e.push(r+u+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function wf(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function Md(n){this.l=n.$b||null,this.j=n.ib||!1}function Ef(n,e){Ai.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=xv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}rE.prototype.cancel=function(){if(this.i=Ad(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},sl.prototype.stringify=function(n){return _n.JSON.stringify(n,void 0)},sl.prototype.parse=function(n){return _n.JSON.parse(n,void 0)},Si(Md,yv),Md.prototype.g=function(){return new Ef(this.l,this.j)},Md.prototype.i=function(n){return function(){return n}}({}),Si(Ef,Ai);var xv=0;function Ov(n){n.j.read().then(n.Sa.bind(n)).catch(n.ga.bind(n))}function If(n){n.readyState=4,n.l=null,n.j=null,n.A=null,bf(n)}function bf(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ft=Ef.prototype).open=function(n,e){if(this.readyState!=xv)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,bf(this)},Ft.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||_n).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ga.bind(this))},Ft.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,If(this)),this.readyState=xv},Ft.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,bf(this)),this.g&&(this.readyState=3,bf(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ga.bind(this));else if(void 0!==_n.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ov(this)}else n.text().then(this.Ua.bind(this),this.ga.bind(this))},Ft.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?If(this):bf(this),3==this.readyState&&Ov(this)}},Ft.Ua=function(n){this.g&&(this.response=this.responseText=n,If(this))},Ft.Ta=function(n){this.g&&(this.response=n,If(this))},Ft.ga=function(){this.g&&If(this)},Ft.setRequestHeader=function(n,e){this.v.append(n,e)},Ft.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ft.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Ef.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var wA=_n.JSON.parse;function Ei(n){Ai.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=FC,this.K=this.L=!1}Si(Ei,Ai);var FC="",EA=/^https?$/i,sE=["POST","PUT"];function oE(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,aE(n),Ju(n)}function aE(n){n.D||(n.D=!0,Gi(n,"complete"),Gi(n,"error"))}function Rv(n){if(n.h&&void 0!==ag&&(!n.C[1]||4!=ou(n)||2!=n.aa()))if(n.v&&4==ou(n))Dg(n.Ha,0,n);else if(Gi(n,"readystatechange"),4==ou(n)){n.h=!1;try{const g=n.aa();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===g){var o=String(n.H).match(Sv)[1]||null;if(!o&&_n.self&&_n.self.location){var u=_n.self.location.protocol;o=u.substr(0,u.length-1)}r=!EA.test(o?o.toLowerCase():"")}t=r}if(t)Gi(n,"complete"),Gi(n,"success");else{n.m=6;try{var d=2<ou(n)?n.g.statusText:""}catch(v){d=""}n.j=d+" ["+n.aa()+"]",aE(n)}}finally{Ju(n)}}}function Ju(n,e){if(n.g){uE(n);const t=n.g,r=n.C[0]?rf:null;n.g=null,n.C=null,e||Gi(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function uE(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(_n.clearTimeout(n.A),n.A=null)}function ou(n){return n.g?n.g.readyState:0}function cE(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case FC:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function lE(n){let e="";return vg(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Pv(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=lE(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):dr(n,e,t))}function xd(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function dE(n){this.Ca=0,this.i=[],this.j=new bd,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.$a=this.U=0,this.Ya=xd("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Wa=xd("baseRetryDelayMs",5e3,n),this.ab=xd("retryDelaySeedMs",1e4,n),this.Za=xd("forwardChannelMaxRetries",2,n),this.ta=xd("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Yb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new rE(n&&n.concurrentRequestLimit),this.Fa=new PC,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Xa=n&&n.Wb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Nv(n){if(hE(n),3==n.G){var e=n.U++,t=Lt(n.F);dr(t,"SID",n.I),dr(t,"RID",e),dr(t,"TYPE","terminate"),Df(n,t),(e=new gf(n,n.j,e,void 0)).K=2,e.v=Ng(Lt(t)),t=!1,_n.navigator&&_n.navigator.sendBeacon&&(t=_n.navigator.sendBeacon(e.v.toString(),"")),!t&&_n.Image&&((new Image).src=e.v,t=!0),t||(e.g=Uv(e.l,null),e.g.da(e.v)),e.F=Date.now(),Cd(e)}Vg(n)}function Xu(n){n.g&&(Lv(n),n.g.cancel(),n.g=null)}function hE(n){Xu(n),n.u&&(_n.clearTimeout(n.u),n.u=null),Sf(n),n.h.cancel(),n.m&&("number"==typeof n.m&&_n.clearTimeout(n.m),n.m=null)}function Cf(n){_f(n.h)||n.m||(n.m=!0,kw(n.Ja,n),n.C=0)}function kv(n,e){var t;t=e?e.m:n.U++;const r=Lt(n.F);dr(r,"SID",n.I),dr(r,"RID",t),dr(r,"AID",n.T),Df(n,r),n.o&&n.s&&Pv(r,n.o,n.s),t=new gf(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=Fv(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),Fg(n.h,t),Og(t,r,e)}function Df(n,e){n.ia&&vg(n.ia,function(t,r){dr(e,r,t)}),n.l&&AC({},function(t,r){dr(e,r,t)})}function Fv(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Hi(n.l.Qa,n.l,n):null;e:{var o=n.i;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=o[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let g=!0;for(let v=0;v<t;v++){let C=o[v].h;const S=o[v].g;if(C-=u,0>C)u=Math.max(0,o[v].h-100),g=!1;else try{NC(S,d,"req"+C+"_")}catch(O){r&&r(S)}}if(g){r=d.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function fE(n){n.g||n.u||(n.Z=1,kw(n.Ia,n),n.A=0)}function Tf(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=ff(Hi(n.Ia,n),gE(n,n.A)),n.A++,0))}function Lv(n){null!=n.B&&(_n.clearTimeout(n.B),n.B=null)}function Vv(n){n.g=new gf(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Lt(n.sa);dr(e,"RID","rpc"),dr(e,"SID",n.I),dr(e,"CI",n.L?"0":"1"),dr(e,"AID",n.T),dr(e,"TYPE","xmlhttp"),Df(n,e),n.o&&n.s&&Pv(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Ng(Lt(e)),t.s=null,t.P=!0,Iv(t,n)}function Sf(n){null!=n.v&&(_n.clearTimeout(n.v),n.v=null)}function pE(n,e){var t=null;if(n.g==e){Sf(n),Lv(n),n.g=null;var r=2}else{if(!kg(n.h,e))return;t=e.D,iE(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Gi(r=Sg(),new Gw(r,t,e,o)),Cf(n)}else fE(n);else if(3==(o=e.o)||0==o&&0<n.pa||!(1==r&&function LC(n,e){return!(Mv(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Ya?0:n.Za)||(n.m=ff(Hi(n.Ja,n,e),gE(n,n.C)),n.C++,0)))}(n,e)||2==r&&Tf(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),o){case 1:ol(n,5);break;case 4:ol(n,10);break;case 3:ol(n,6);break;default:ol(n,2)}}function gE(n,e){let t=n.Wa+Math.floor(Math.random()*n.ab);return n.l||(t*=2),t*e}function ol(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Hi(n.jb,n);t||(t=new Dd("//www.google.com/images/cleardot.gif"),_n.location&&"http"==_n.location.protocol||Rg(t,"https"),Ng(t)),function kC(n,e){const t=new bd;if(_n.Image){const r=new Image;r.onload=cg(wf,t,r,"TestLoadImage: loaded",!0,e),r.onerror=cg(wf,t,r,"TestLoadImage: error",!1,e),r.onabort=cg(wf,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=cg(wf,t,r,"TestLoadImage: timeout",!1,e),_n.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else gs(2);n.G=0,n.l&&n.l.va(e),Vg(n),hE(n)}function Vg(n){if(n.G=0,n.la=[],n.l){const e=Ad(n.h);(0!=e.length||0!=n.i.length)&&(lg(n.la,e),lg(n.la,n.i),n.h.i.length=0,md(n.i),n.i.length=0),n.l.ua()}}function mE(n,e,t){var r=t instanceof Dd?Lt(t):new Dd(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),Pg(r,r.m);else{var o=_n.location;r=o.protocol,e=e?e+"."+o.hostname:o.hostname,o=+o.port;var u=new Dd(null,void 0);r&&Rg(u,r),e&&(u.g=e),o&&Pg(u,o),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&dr(r,t,e),dr(r,"VER",n.ma),Df(n,r),r}function Uv(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ei(t&&n.Da&&!n.ra?new Md({ib:!0}):n.ra)).L=n.H,e}function yE(){}function Ug(){if(_d&&!(10<=Number(xw)))throw Error("Environmental error: no available transport.")}function Gs(n,e){Ai.call(this),this.g=new dE(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Xb)&&!yd(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!yd(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Od(this)}function vE(n){vv.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function _E(){_v.call(this),this.status=1}function Od(n){this.g=n}(Ft=Ei.prototype).da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():wv.g(),this.C=function Ww(n){return n.h||(n.h=n.i())}(this.u?this.u:wv),this.g.onreadystatechange=Hi(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void oE(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)t.set(o,r[o]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),o=_n.FormData&&n instanceof _n.FormData,!(0<=af(sE,e))||r||o||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,d]of t)this.g.setRequestHeader(u,d);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{uE(this),0<this.B&&((this.K=function Lg(n){return _d&&function Mw(){return function ev(n){var e=Aw;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Xy(String(pg)).split("."),t=Xy("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",u=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=dg(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||dg(0==o[2].length,0==u[2].length)||dg(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Hi(this.qa,this)):this.A=Dg(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){oE(this,u)}},Ft.qa=function(){void 0!==ag&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Gi(this,"timeout"),this.abort(8))},Ft.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Gi(this,"complete"),Gi(this,"abort"),Ju(this))},Ft.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ju(this,!0)),Ei.X.M.call(this)},Ft.Ha=function(){this.s||(this.F||this.v||this.l?Rv(this):this.eb())},Ft.eb=function(){Rv(this)},Ft.aa=function(){try{return 2<ou(this)?this.g.status:-1}catch(n){return-1}},Ft.fa=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Ft.Ra=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),wA(e)}},Ft.Ea=function(){return this.m},Ft.Na=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ft=dE.prototype).ma=8,Ft.G=1,Ft.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const o=new gf(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=Rw(u),sv(u,this.S)):u=this.S),null!==this.o||this.N||(o.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Fv(this,o,e),dr(t=Lt(this.F),"RID",n),dr(t,"CVER",22),this.D&&dr(t,"X-HTTP-Session-Id",this.D),Df(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(lE(u)))+"&"+e:this.o&&Pv(t,this.o,u)),Fg(this.h,o),this.Xa&&dr(t,"TYPE","init"),this.O?(dr(t,"$req",e),dr(t,"SID","null"),o.Z=!0,Og(o,t,null)):Og(o,t,e),this.G=2}}else 3==this.G&&(n?kv(this,n):0==this.i.length||_f(this.h)||kv(this))},Ft.Ia=function(){if(this.u=null,Vv(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=ff(Hi(this.cb,this),n)}},Ft.cb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,gs(10),Xu(this),Vv(this))},Ft.bb=function(){null!=this.v&&(this.v=null,Xu(this),Tf(this),gs(19))},Ft.jb=function(n){n?(this.j.info("Successfully pinged google.com"),gs(2)):(this.j.info("Failed to ping google.com"),gs(1))},(Ft=yE.prototype).xa=function(){},Ft.wa=function(){},Ft.va=function(){},Ft.ua=function(){},Ft.Qa=function(){},Ug.prototype.g=function(n,e){return new Gs(n,e)},Si(Gs,Ai),Gs.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;gs(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=mE(n,null,n.V),Cf(n)},Gs.prototype.close=function(){Nv(this.g)},Gs.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Hs(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.$a++,n)),3==e.G&&Cf(e)},Gs.prototype.M=function(){this.g.l=null,delete this.j,Nv(this.g),delete this.g,Gs.X.M.call(this)},Si(vE,vv),Si(_E,_v),Si(Od,yE),Od.prototype.xa=function(){Gi(this.g,"a")},Od.prototype.wa=function(n){Gi(this.g,new vE(n))},Od.prototype.va=function(n){Gi(this.g,new _E(n))},Od.prototype.ua=function(){Gi(this.g,"b")},Ug.prototype.createWebChannel=Ug.prototype.g,Gs.prototype.send=Gs.prototype.u,Gs.prototype.open=Gs.prototype.m,Gs.prototype.close=Gs.prototype.close,Ag.NO_ERROR=0,Ag.TIMEOUT=8,Ag.HTTP_ERROR=6,zw.COMPLETE="complete",qw.EventType=pf,pf.OPEN="a",pf.CLOSE="b",pf.ERROR="c",pf.MESSAGE="d",Ai.prototype.listen=Ai.prototype.N,Ei.prototype.listenOnce=Ei.prototype.O,Ei.prototype.getLastError=Ei.prototype.Na,Ei.prototype.getLastErrorCode=Ei.prototype.Ea,Ei.prototype.getStatus=Ei.prototype.aa,Ei.prototype.getResponseJson=Ei.prototype.Ra,Ei.prototype.getResponseText=Ei.prototype.fa,Ei.prototype.send=Ei.prototype.da;var VC=Ds.createWebChannelTransport=function(){return new Ug},UC=Ds.getStatEventTarget=function(){return Sg()},Bg=Ds.ErrorCode=Ag,wE=Ds.EventType=zw,BC=Ds.Event=Zu,EE=Ds.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},IE=Ds.FetchXmlHttpFactory=Md,jg=Ds.WebChannel=qw,jC=Ds.XhrIo=Ei;const bE="@firebase/firestore";class li{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}li.UNAUTHENTICATED=new li(null),li.GOOGLE_CREDENTIALS=new li("google-credentials-uid"),li.FIRST_PARTY=new li("first-party-uid"),li.MOCK_USER=new li("mock-user");let ec="9.10.0";const au=new js.Yd("@firebase/firestore");function Af(){return au.logLevel}function tt(n,...e){if(au.logLevel<=js.in.DEBUG){const t=e.map($g);au.debug(`Firestore (${ec}): ${n}`,...t)}}function Hr(n,...e){if(au.logLevel<=js.in.ERROR){const t=e.map($g);au.error(`Firestore (${ec}): ${n}`,...t)}}function al(n,...e){if(au.logLevel<=js.in.WARN){const t=e.map($g);au.warn(`Firestore (${ec}): ${n}`,...t)}}function $g(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function St(n="Unexpected state"){const e=`FIRESTORE (${ec}) INTERNAL ASSERTION FAILED: `+n;throw Hr(e),new Error(e)}function dn(n,e){n||St()}function Ct(n,e){return n}const Se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ke extends Hn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Mi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Hg{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class GC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(li.UNAUTHENTICATED))}shutdown(){}}class CE{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Bv{constructor(e){this.t=e,this.currentUser=li.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=C=>this.i!==o?(o=this.i,t(C)):Promise.resolve();let d=new Mi;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Mi,e.enqueueRetryable(()=>u(this.currentUser))};const g=()=>{const C=d;e.enqueueRetryable((0,Ne.Z)(function*(){yield C.promise,yield u(r.currentUser)}))},v=C=>{tt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(C=>v(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?v(C):(tt("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Mi)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(tt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(dn("string"==typeof r.accessToken),new Hg(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return dn(null===e||"string"==typeof e),new li(e)}}class DE{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o,this.type="FirstParty",this.user=li.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(dn(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class TE{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o}getToken(){return Promise.resolve(new DE(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(li.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class SE{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&tt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.A;return this.A=u.token,tt("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{tt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?o(u):tt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(dn("string"==typeof t.token),this.A=t.token,new jv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function zC(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class AE{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=zC(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function In(n,e){return n<e?-1:n>e?1:0}function ul(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function WC(n){return n+"\0"}class Pr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ke(Se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ke(Se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ke(Se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ke(Se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Pr.fromMillis(Date.now())}static fromDate(e){return Pr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Pr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?In(this.nanoseconds,e.nanoseconds):In(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class un{constructor(e){this.timestamp=e}static fromTimestamp(e){return new un(e)}static min(){return new un(new Pr(0,0))}static max(){return new un(new Pr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Mf{constructor(e,t,r){void 0===t?t=0:t>e.length&&St(),void 0===r?r=e.length-t:r>e.length-t&&St(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Mf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Mf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),d=t.get(o);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class tr extends Mf{construct(e,t,r){return new tr(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ke(Se.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new tr(t)}static emptyPath(){return new tr([])}}const bA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kr extends Mf{construct(e,t,r){return new Kr(e,t,r)}static isValidIdentifier(e){return bA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Kr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Ke(Se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const g=e[o];if("\\"===g){if(o+1===e.length)throw new Ke(Se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[o+1];if("\\"!==v&&"."!==v&&"`"!==v)throw new Ke(Se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,o+=2}else"`"===g?(d=!d,o++):"."!==g||d?(r+=g,o++):(u(),o++)}if(u(),d)throw new Ke(Se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kr(t)}static emptyPath(){return new Kr([])}}class mt{constructor(e){this.path=e}static fromPath(e){return new mt(tr.fromString(e))}static fromName(e){return new mt(tr.fromString(e).popFirst(5))}static empty(){return new mt(tr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===tr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return tr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new mt(new tr(e.slice()))}}class xf{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function Gg(n){return n.fields.find(e=>2===e.kind)}function tc(n){return n.fields.filter(e=>2!==e.kind)}xf.UNKNOWN_ID=-1;class zg{constructor(e,t){this.fieldPath=e,this.kind=t}}class Of{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Of(0,zs.min())}}function ME(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=un.fromTimestamp(1e9===r?new Pr(t+1,0):new Pr(t,r));return new zs(o,mt.empty(),e)}function xE(n){return new zs(n.readTime,n.key,-1)}class zs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new zs(un.min(),mt.empty(),-1)}static max(){return new zs(un.max(),mt.empty(),-1)}}function cl(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=mt.comparator(n.documentKey,e.documentKey),0!==t?t:In(n.largestBatchId,e.largestBatchId))}const $v="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Hv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function uu(n){return Wg.apply(this,arguments)}function Wg(){return Wg=(0,Ne.Z)(function*(n){if(n.code!==Se.FAILED_PRECONDITION||n.message!==$v)throw n;tt("LocalStore","Unexpectedly lost primary lease")}),Wg.apply(this,arguments)}class ve{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&St(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ve((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ve?t:ve.resolve(t)}catch(t){return ve.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ve.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ve.reject(t)}static resolve(e){return new ve((t,r)=>{t(e)})}static reject(e){return new ve((t,r)=>{r(e)})}static waitFor(e){return new ve((t,r)=>{let o=0,u=0,d=!1;e.forEach(g=>{++o,g.next(()=>{++u,d&&u===o&&t()},v=>r(v))}),d=!0,u===o&&t()})}static or(e){let t=ve.resolve(!1);for(const r of e)t=t.next(o=>o?ve.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new ve((r,o)=>{const u=e.length,d=new Array(u);let g=0;for(let v=0;v<u;v++){const C=v;t(e[C]).next(S=>{d[C]=S,++g,g===u&&r(d)},S=>o(S))}})}static doWhile(e,t){return new ve((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class Rf{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Mi,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Rd(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const o=dl(r.target.error);this.P.reject(new Rd(e,o))}}static open(e,t,r,o){try{return new Rf(t,e.transaction(o,r))}catch(u){throw new Rd(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(tt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new KC(t)}}class ko{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===ko.D((0,Hn.z$)())&&Hr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return tt("SimpleDb","Removing database:",e),ll(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Hn.hl)())return!1;if(ko.N())return!0;const e=(0,Hn.z$)(),t=ko.D(e),r=0<t&&t<10,o=ko.k(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.M)}static O(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,Ne.Z)(function*(){return t.db||(tt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{o(new Rd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const g=d.target.error;o("VersionError"===g.name?new Ke(Se.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new Ke(Se.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new Rd(e,g))},u.onupgradeneeded=d=>{tt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.S.$(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{tt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,Ne.Z)(function*(){const d="readonly"===t;let g=0;for(;;){++g;try{u.db=yield u.F(e);const v=Rf.open(u.db,e,d?"readonly":"readwrite",r),C=o(v).next(S=>(v.V(),S)).catch(S=>(v.abort(S),ve.reject(S))).toPromise();return C.catch(()=>{}),yield v.v,C}catch(v){const C=v,S="FirebaseError"!==C.name&&g<3;if(tt("SimpleDb","Transaction failed with error:",C.message,"Retrying:",S),u.close(),!S)return Promise.reject(C)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class CA{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return ll(this.U.delete())}}class Rd extends Ke{constructor(e,t){super(Se.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function cu(n){return"IndexedDbTransactionError"===n.name}class KC{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(tt("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(tt("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ll(r)}add(e){return tt("SimpleDb","ADD",this.store.name,e,e),ll(this.store.add(e))}get(e){return ll(this.store.get(e)).next(t=>(void 0===t&&(t=null),tt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return tt("SimpleDb","DELETE",this.store.name,e),ll(this.store.delete(e))}count(){return tt("SimpleDb","COUNT",this.store.name),ll(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.H(o,(d,g)=>{u.push(g)}).next(()=>u)}{const o=this.store.getAll(r.range);return new ve((u,d)=>{o.onerror=g=>{d(g.target.error)},o.onsuccess=g=>{u(g.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ve((o,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}Y(e,t){tt("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const o=this.cursor(r);return this.H(o,(u,d,g)=>g.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.H(o,t)}tt(e){const t=this.cursor({});return new ve((r,o)=>{t.onerror=u=>{const d=dl(u.target.error);o(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(g=>{g?d.continue():r()}):r()}})}H(e,t){const r=[];return new ve((o,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const g=d.target.result;if(!g)return void o();const v=new CA(g),C=t(g.primaryKey,g.value,v);if(C instanceof ve){const S=C.catch(O=>(v.done(),ve.reject(O)));r.push(S)}v.isDone?o():null===v.G?g.continue():g.continue(v.G)}}).next(()=>ve.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ll(n){return new ve((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=dl(r.target.error);t(o)}})}let OE=!1;function dl(n){const e=ko.D((0,Hn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ke("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return OE||(OE=!0,setTimeout(()=>{throw r},0)),r}}return n}class YC{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;tt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ne.Z)(function*(){t.task=null;try{tt("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){cu(r)?tt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield uu(r)}yield t.nt(6e4)}))}}class Gv{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,Ne.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let o=t,u=!0;return ve.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(d=>{if(null!==d&&!r.has(d))return tt("IndexBackiller",`Processing collection: ${d}`),this.rt(e,d,o).next(g=>{o-=g,r.add(d)});u=!1})).next(()=>t-o)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const d=u.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next(()=>this.ot(o,u)).next(g=>(tt("IndexBackiller",`Updating offset: ${g}`),this.localStore.indexManager.updateCollectionGroup(e,t,g))).next(()=>d.size)}))}ot(e,t){let r=e;return t.changes.forEach((o,u)=>{const d=xE(u);cl(d,r)>0&&(r=d)}),new zs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Gr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function RE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function lu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Pd(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Gr.at=-1;class Yr{constructor(e,t){this.comparator=e,this.root=t||zi.EMPTY}insert(e,t){return new Yr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,zi.BLACK,null,null))}remove(e){return new Yr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qg(this.root,e,this.comparator,!1)}getReverseIterator(){return new qg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qg(this.root,e,this.comparator,!0)}}class qg{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zi{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:zi.RED,this.left=null!=o?o:zi.EMPTY,this.right=null!=u?u:zi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new zi(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return zi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return zi.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw St();const e=this.left.check();if(e!==this.right.check())throw St();return e+(this.isRed()?0:1)}}zi.EMPTY=null,zi.RED=!0,zi.BLACK=!1,zi.EMPTY=new class{constructor(){this.size=0}get key(){throw St()}get value(){throw St()}get color(){throw St()}get left(){throw St()}get right(){throw St()}copy(n,e,t,r,o){return this}insert(n,e,t){return new zi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class or{constructor(e){this.comparator=e,this.data=new Yr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Pf(this.data.getIterator())}getIteratorFrom(e){return new Pf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof or)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new or(this.comparator);return t.data=e,t}}class Pf{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Nd(n){return n.hasNext()?n.getNext():void 0}class Ws{constructor(e){this.fields=e,e.sort(Kr.comparator)}static empty(){return new Ws([])}unionWith(e){let t=new or(Kr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ws(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ul(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class di{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new di(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new di(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return In(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}di.EMPTY_BYTE_STRING=new di("");const zv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function du(n){if(dn(!!n),"string"==typeof n){let e=0;const t=zv.exec(n);if(dn(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Qr(n.seconds),nanos:Qr(n.nanos)}}function Qr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function hl(n){return"string"==typeof n?di.fromBase64String(n):di.fromUint8Array(n)}function NE(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Zg(n){const e=n.mapValue.fields.__previous_value__;return NE(e)?Zg(e):e}function fl(n){const e=du(n.mapValue.fields.__local_write_time__.timestampValue);return new Pr(e.seconds,e.nanos)}class kE{constructor(e,t,r,o,u,d,g,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.useFetchStreams=v}}class _a{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new _a("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof _a&&e.projectId===this.projectId&&e.database===this.database}}function pl(n){return null==n}function Nf(n){return 0===n&&1/n==-1/0}function FE(n){return"number"==typeof n&&Number.isInteger(n)&&!Nf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const nc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Kg={nullValue:"NULL_VALUE"};function rc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?NE(n)?4:LE(n)?9007199254740991:10:St()}function po(n,e){if(n===e)return!0;const t=rc(n);if(t!==rc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return fl(n).isEqual(fl(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=du(r.timestampValue),d=du(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,hl(n.bytesValue).isEqual(hl(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Qr(r.geoPointValue.latitude)===Qr(o.geoPointValue.latitude)&&Qr(r.geoPointValue.longitude)===Qr(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Qr(r.integerValue)===Qr(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Qr(r.doubleValue),d=Qr(o.doubleValue);return u===d?Nf(u)===Nf(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return ul(n.arrayValue.values||[],e.arrayValue.values||[],po);case 10:return function(r,o){const u=r.mapValue.fields||{},d=o.mapValue.fields||{};if(RE(u)!==RE(d))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(void 0===d[g]||!po(u[g],d[g])))return!1;return!0}(n,e);default:return St()}var o}function kd(n,e){return void 0!==(n.values||[]).find(t=>po(t,e))}function hu(n,e){if(n===e)return 0;const t=rc(n),r=rc(e);if(t!==r)return In(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return In(n.booleanValue,e.booleanValue);case 2:return function(o,u){const d=Qr(o.integerValue||o.doubleValue),g=Qr(u.integerValue||u.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1}(n,e);case 3:return Wv(n.timestampValue,e.timestampValue);case 4:return Wv(fl(n),fl(e));case 5:return In(n.stringValue,e.stringValue);case 6:return function(o,u){const d=hl(o),g=hl(u);return d.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const d=o.split("/"),g=u.split("/");for(let v=0;v<d.length&&v<g.length;v++){const C=In(d[v],g[v]);if(0!==C)return C}return In(d.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const d=In(Qr(o.latitude),Qr(u.latitude));return 0!==d?d:In(Qr(o.longitude),Qr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const d=o.values||[],g=u.values||[];for(let v=0;v<d.length&&v<g.length;++v){const C=hu(d[v],g[v]);if(C)return C}return In(d.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===nc.mapValue&&u===nc.mapValue)return 0;if(o===nc.mapValue)return 1;if(u===nc.mapValue)return-1;const d=o.fields||{},g=Object.keys(d),v=u.fields||{},C=Object.keys(v);g.sort(),C.sort();for(let S=0;S<g.length&&S<C.length;++S){const O=In(g[S],C[S]);if(0!==O)return O;const G=hu(d[g[S]],v[C[S]]);if(0!==G)return G}return In(g.length,C.length)}(n.mapValue,e.mapValue);default:throw St()}}function Wv(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return In(n,e);const t=du(n),r=du(e),o=In(t.seconds,r.seconds);return 0!==o?o:In(t.nanos,r.nanos)}function gl(n){return qv(n)}function qv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=du(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?hl(n.bytesValue).toBase64():"referenceValue"in n?mt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=qv(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const g of o)d?d=!1:u+=",",u+=`${g}:${qv(r.fields[g])}`;return u+"}"}(n.mapValue):St();var e}function ic(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Yg(n){return!!n&&"integerValue"in n}function kf(n){return!!n&&"arrayValue"in n}function Zv(n){return!!n&&"nullValue"in n}function Kv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function xi(n){return!!n&&"mapValue"in n}function wa(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return lu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=wa(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=wa(n.arrayValue.values[t]);return e}return Object.assign({},n)}function LE(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function QC(n){return"nullValue"in n?Kg:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ic(_a.empty(),mt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:St()}function DA(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ic(_a.empty(),mt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?nc:St()}function JC(n,e){const t=hu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Yv(n,e){const t=hu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Oi{constructor(e){this.value=e}static empty(){return new Oi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!xi(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=wa(t)}setAll(e){let t=Kr.emptyPath(),r={},o=[];e.forEach((d,g)=>{if(!t.isImmediateParentOf(g)){const v=this.getFieldsMap(t);this.applyChanges(v,r,o),r={},o=[],t=g.popLast()}d?r[g.lastSegment()]=wa(d):o.push(g.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());xi(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return po(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];xi(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){lu(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new Oi(wa(this.value))}}function Fd(n){const e=[];return lu(n.fields,(t,r)=>{const o=new Kr([t]);if(xi(r)){const u=Fd(r.mapValue).fields;if(0===u.length)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new Ws(e)}class Cr{constructor(e,t,r,o,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=d}static newInvalidDocument(e){return new Cr(e,0,un.min(),un.min(),Oi.empty(),0)}static newFoundDocument(e,t,r){return new Cr(e,1,t,un.min(),r,0)}static newNoDocument(e,t){return new Cr(e,2,t,un.min(),Oi.empty(),0)}static newUnknownDocument(e,t){return new Cr(e,3,t,un.min(),Oi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Oi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Oi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=un.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Cr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Cr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Qv{constructor(e,t=null,r=[],o=[],u=null,d=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=g,this.ht=null}}function VE(n,e=null,t=[],r=[],o=null,u=null,d=null){return new Qv(n,e,t,r,o,u,d)}function sc(n){const e=Ct(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+gl(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),pl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>gl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>gl(r)).join(",")),e.ht=t}return e.ht}function Ff(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!tD(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!po(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!HE(n.startAt,e.startAt)&&HE(n.endAt,e.endAt)}function Qg(n){return mt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Ld(n,e){return n.filters.filter(t=>t instanceof hi&&t.field.isEqual(e))}function Jv(n,e,t){let r=Kg,o=!0;for(const u of Ld(n,e)){let d=Kg,g=!0;switch(u.op){case"<":case"<=":d=QC(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,g=!1;break;case"!=":case"not-in":d=Kg}JC({value:r,inclusive:o},{value:d,inclusive:g})<0&&(r=d,o=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];JC({value:r,inclusive:o},{value:d,inclusive:t.inclusive})<0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}function Xv(n,e,t){let r=nc,o=!0;for(const u of Ld(n,e)){let d=nc,g=!0;switch(u.op){case">=":case">":d=DA(u.value),g=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,g=!1;break;case"!=":case"not-in":d=nc}Yv({value:r,inclusive:o},{value:d,inclusive:g})>0&&(r=d,o=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];Yv({value:r,inclusive:o},{value:d,inclusive:t.inclusive})>0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}class hi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new e_(e,t,r):"array-contains"===t?new jE(e,r):"in"===t?new Vd(e,r):"not-in"===t?new eD(e,r):"array-contains-any"===t?new $E(e,r):new hi(e,t,r)}static lt(e,t,r){return"in"===t?new TA(e,r):new UE(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(hu(t,this.value)):null!==t&&rc(this.value)===rc(t)&&this.ft(hu(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return St()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class e_ extends hi{constructor(e,t,r){super(e,t,r),this.key=mt.fromName(r.referenceValue)}matches(e){const t=mt.comparator(e.key,this.key);return this.ft(t)}}class TA extends hi{constructor(e,t){super(e,"in",t),this.keys=BE(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class UE extends hi{constructor(e,t){super(e,"not-in",t),this.keys=BE(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function BE(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>mt.fromName(r.referenceValue))}class jE extends hi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return kf(t)&&kd(t.arrayValue,this.value)}}class Vd extends hi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&kd(this.value.arrayValue,t)}}class eD extends hi{constructor(e,t){super(e,"not-in",t)}matches(e){if(kd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!kd(this.value.arrayValue,t)}}class $E extends hi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!kf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>kd(this.value.arrayValue,r))}}class Ea{constructor(e,t){this.position=e,this.inclusive=t}}class Lf{constructor(e,t="asc"){this.field=e,this.dir=t}}function tD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function nD(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],d=n.position[o];if(r=u.field.isKeyField()?mt.comparator(mt.fromName(d.referenceValue),t.key):hu(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function HE(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!po(n.position[t],e.position[t]))return!1;return!0}class fu{constructor(e,t=null,r=[],o=[],u=null,d="F",g=null,v=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=g,this.endAt=v,this._t=null,this.wt=null}}function GE(n,e,t,r,o,u,d,g){return new fu(n,e,t,r,o,u,d,g)}function ml(n){return new fu(n)}function t_(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function n_(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Jg(n){for(const e of n.filters)if(e.dt())return e.field;return null}function Xg(n){return null!==n.collectionGroup}function Ud(n){const e=Ct(n);if(null===e._t){e._t=[];const t=Jg(e),r=n_(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new Lf(t)),e._t.push(new Lf(Kr.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e._t.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Lf(Kr.keyField(),u))}}}return e._t}function Ts(n){const e=Ct(n);if(!e.wt)if("F"===e.limitType)e.wt=VE(e.path,e.collectionGroup,Ud(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Ud(e))t.push(new Lf(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Ea(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new Ea(e.startAt.position,e.startAt.inclusive):null;e.wt=VE(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.wt}function Vf(n,e,t){return new fu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Uf(n,e){return Ff(Ts(n),Ts(e))&&n.limitType===e.limitType}function r_(n){return`${sc(Ts(n))}|lt:${n.limitType}`}function em(n){return`Query(target=${function XC(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${gl(r.value)}`;var r}).join(", ")}]`),pl(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>gl(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>gl(t)).join(",")),`Target(${e})`}(Ts(n))}; limitType=${n.limitType})`}function tm(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):mt.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,d){const g=nD(o,u,d);return o.inclusive?g<=0:g<0}(t.startAt,Ud(t),r)||t.endAt&&!function(o,u,d){const g=nD(o,u,d);return o.inclusive?g>=0:g>0}(t.endAt,Ud(t),r)));var t,r}function i_(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function zE(n){return(e,t)=>{let r=!1;for(const o of Ud(n)){const u=rD(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function rD(n,e,t){const r=n.field.isKeyField()?mt.comparator(e.key,t.key):function(o,u,d){const g=u.data.field(o),v=d.data.field(o);return null!==g&&null!==v?hu(g,v):St()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return St()}}function iD(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nf(e)?"-0":e}}function s_(n){return{integerValue:""+n}}function sD(n,e){return FE(e)?s_(e):iD(n,e)}class o_{constructor(){this._=void 0}}function SA(n,e,t){return n instanceof Bf?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof Bd?aD(n,e):n instanceof Ia?uD(n,e):function(r,o){const u=oD(r,o),d=jf(u)+jf(r.yt);return Yg(u)&&Yg(r.yt)?s_(d):iD(r.It,d)}(n,e)}function AA(n,e,t){return n instanceof Bd?aD(n,e):n instanceof Ia?uD(n,e):t}function oD(n,e){return n instanceof yl?Yg(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Bf extends o_{}class Bd extends o_{constructor(e){super(),this.elements=e}}function aD(n,e){const t=a_(e);for(const r of n.elements)t.some(o=>po(o,r))||t.push(r);return{arrayValue:{values:t}}}class Ia extends o_{constructor(e){super(),this.elements=e}}function uD(n,e){let t=a_(e);for(const r of n.elements)t=t.filter(o=>!po(o,r));return{arrayValue:{values:t}}}class yl extends o_{constructor(e,t){super(),this.It=e,this.yt=t}}function jf(n){return Qr(n.integerValue||n.doubleValue)}function a_(n){return kf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class jd{constructor(e,t){this.field=e,this.transform=t}}class u_{constructor(e,t){this.version=e,this.transformResults=t}}class Nr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Nr}static exists(e){return new Nr(void 0,e)}static updateTime(e){return new Nr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nm(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class $f{}function cD(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Hd(n.key,Nr.none()):new $d(n.key,n.data,Nr.none());{const t=n.data,r=Oi.empty();let o=new or(Kr.comparator);for(let u of e.fields)if(!o.has(u)){let d=t.field(u);null===d&&u.length>1&&(u=u.popLast(),d=t.field(u)),null===d?r.delete(u):r.set(u,d),o=o.add(u)}return new oc(n.key,r,new Ws(o.toArray()),Nr.none())}}function xA(n,e,t){n instanceof $d?function(r,o,u){const d=r.value.clone(),g=hD(r.fieldTransforms,o,u.transformResults);d.setAll(g),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof oc?function(r,o,u){if(!nm(r.precondition,o))return void o.convertToUnknownDocument(u.version);const d=hD(r.fieldTransforms,o,u.transformResults),g=o.data;g.setAll(dD(r)),g.setAll(d),o.convertToFoundDocument(u.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Hf(n,e,t,r){return n instanceof $d?function(o,u,d,g){if(!nm(o.precondition,u))return d;const v=o.value.clone(),C=WE(o.fieldTransforms,g,u);return v.setAll(C),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),null}(n,e,t,r):n instanceof oc?function(o,u,d,g){if(!nm(o.precondition,u))return d;const v=WE(o.fieldTransforms,g,u),C=u.data;return C.setAll(dD(o)),C.setAll(v),u.convertToFoundDocument(u.version,C).setHasLocalMutations(),null===d?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(S=>S.field))}(n,e,t,r):(d=t,nm(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d);var u,d}function lD(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=oD(r.transform,o||null);null!=u&&(null===t&&(t=Oi.empty()),t.set(r.field,u))}return t||null}function Gf(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&ul(t,r,(o,u)=>function MA(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Bd&&r instanceof Bd||t instanceof Ia&&r instanceof Ia?ul(t.elements,r.elements,po):t instanceof yl&&r instanceof yl?po(t.yt,r.yt):t instanceof Bf&&r instanceof Bf);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class $d extends $f{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class oc extends $f{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function dD(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function hD(n,e,t){const r=new Map;dn(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],d=u.transform,g=e.data.field(u.field);r.set(u.field,AA(d,g,t[o]))}return r}function WE(n,e,t){const r=new Map;for(const o of n){const u=o.transform,d=t.data.field(o.field);r.set(o.field,SA(u,d,e))}return r}class Hd extends $f{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class c_ extends $f{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class OA{constructor(e){this.count=e}}var fi,Yn;function l_(n){switch(n){default:return St();case Se.CANCELLED:case Se.UNKNOWN:case Se.DEADLINE_EXCEEDED:case Se.RESOURCE_EXHAUSTED:case Se.INTERNAL:case Se.UNAVAILABLE:case Se.UNAUTHENTICATED:return!1;case Se.INVALID_ARGUMENT:case Se.NOT_FOUND:case Se.ALREADY_EXISTS:case Se.PERMISSION_DENIED:case Se.FAILED_PRECONDITION:case Se.ABORTED:case Se.OUT_OF_RANGE:case Se.UNIMPLEMENTED:case Se.DATA_LOSS:return!0}}function fD(n){if(void 0===n)return Hr("GRPC error has no .code"),Se.UNKNOWN;switch(n){case fi.OK:return Se.OK;case fi.CANCELLED:return Se.CANCELLED;case fi.UNKNOWN:return Se.UNKNOWN;case fi.DEADLINE_EXCEEDED:return Se.DEADLINE_EXCEEDED;case fi.RESOURCE_EXHAUSTED:return Se.RESOURCE_EXHAUSTED;case fi.INTERNAL:return Se.INTERNAL;case fi.UNAVAILABLE:return Se.UNAVAILABLE;case fi.UNAUTHENTICATED:return Se.UNAUTHENTICATED;case fi.INVALID_ARGUMENT:return Se.INVALID_ARGUMENT;case fi.NOT_FOUND:return Se.NOT_FOUND;case fi.ALREADY_EXISTS:return Se.ALREADY_EXISTS;case fi.PERMISSION_DENIED:return Se.PERMISSION_DENIED;case fi.FAILED_PRECONDITION:return Se.FAILED_PRECONDITION;case fi.ABORTED:return Se.ABORTED;case fi.OUT_OF_RANGE:return Se.OUT_OF_RANGE;case fi.UNIMPLEMENTED:return Se.UNIMPLEMENTED;case fi.DATA_LOSS:return Se.DATA_LOSS;default:return St()}}(Yn=fi||(fi={}))[Yn.OK=0]="OK",Yn[Yn.CANCELLED=1]="CANCELLED",Yn[Yn.UNKNOWN=2]="UNKNOWN",Yn[Yn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Yn[Yn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Yn[Yn.NOT_FOUND=5]="NOT_FOUND",Yn[Yn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Yn[Yn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Yn[Yn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Yn[Yn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Yn[Yn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Yn[Yn.ABORTED=10]="ABORTED",Yn[Yn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Yn[Yn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Yn[Yn.INTERNAL=13]="INTERNAL",Yn[Yn.UNAVAILABLE=14]="UNAVAILABLE",Yn[Yn.DATA_LOSS=15]="DATA_LOSS";class Ri{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){lu(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return Pd(this.inner)}size(){return this.innerSize}}const pD=new Yr(mt.comparator);function ns(){return pD}const qE=new Yr(mt.comparator);function rs(...n){let e=qE;for(const t of n)e=e.insert(t.key,t);return e}function ZE(n){let e=qE;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function go(){return zf()}function KE(){return zf()}function zf(){return new Ri(n=>n.toString(),(n,e)=>n.isEqual(e))}const d_=new Yr(mt.comparator),YE=new or(mt.comparator);function Mn(...n){let e=YE;for(const t of n)e=e.add(t);return e}const gD=new or(In);function Wf(){return gD}class Gd{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,qf.createSynthesizedTargetChangeForCurrentChange(e,t)),new Gd(un.min(),r,Wf(),ns(),Mn())}}class qf{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new qf(di.EMPTY_BYTE_STRING,t,Mn(),Mn(),Mn())}}class Zf{constructor(e,t,r,o){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=o}}class QE{constructor(e,t){this.targetId=e,this.At=t}}class zd{constructor(e,t,r=di.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class Fo{constructor(){this.Rt=0,this.bt=ba(),this.Pt=di.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Mn(),t=Mn(),r=Mn();return this.bt.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:St()}}),new qf(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=ba()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Mt(e){this.Vt=!0,this.bt=this.bt.remove(e)}Ot(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class JE{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=ns(),this.qt=rm(),this.Kt=new or(In)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:St()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,o)=>{this.Ht(o)&&t(o)})}Yt(e){const t=e.targetId,r=e.At.count,o=this.Xt(t);if(o){const u=o.target;if(Qg(u))if(0===r){const d=new mt(u.path);this.jt(t,d,Cr.newNoDocument(d,un.min()))}else dn(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((u,d)=>{const g=this.Xt(d);if(g){if(u.current&&Qg(g.target)){const v=new mt(g.target.path);null!==this.Ut.get(v)||this.ee(d,v)||this.jt(d,v,Cr.newNoDocument(v,e))}u.Dt&&(t.set(d,u.xt()),u.Nt())}});let r=Mn();this.qt.forEach((u,d)=>{let g=!0;d.forEachWhile(v=>{const C=this.Xt(v);return!C||2===C.purpose||(g=!1,!1)}),g&&(r=r.add(u))}),this.Ut.forEach((u,d)=>d.setReadTime(e));const o=new Gd(e,t,this.Kt,this.Ut,r);return this.Ut=ns(),this.qt=rm(),this.Kt=new or(In),o}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const o=this.zt(e);this.ee(e,t)?o.kt(t,1):o.Mt(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.zt(e).Ot()}zt(e){let t=this.Lt.get(e);return t||(t=new Fo,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new or(In),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||tt("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new Fo),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function rm(){return new Yr(mt.comparator)}function ba(){return new Yr(mt.comparator)}const mD={asc:"ASCENDING",desc:"DESCENDING"},RA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class yD{constructor(e,t){this.databaseId=e,this.gt=t}}function Kf(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function XE(n,e){return n.gt?e.toBase64():e.toUint8Array()}function vD(n,e){return Kf(n,e.toTimestamp())}function Ii(n){return dn(!!n),un.fromTimestamp(function(e){const t=du(e);return new Pr(t.seconds,t.nanos)}(n))}function eI(n,e){return(t=n,new tr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function h_(n){const e=tr.fromString(n);return dn(ID(e)),e}function Yf(n,e){return eI(n.databaseId,e.path)}function Lo(n,e){const t=h_(e);if(t.get(1)!==n.databaseId.projectId)throw new Ke(Se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ke(Se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new mt(f_(t))}function tI(n,e){return eI(n.databaseId,e)}function im(n){const e=h_(n);return 4===e.length?tr.emptyPath():f_(e)}function Wd(n){return new tr(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function f_(n){return dn(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function p_(n,e,t){return{name:Yf(n,e),fields:t.value.mapValue.fields}}function g_(n,e,t){const r=Lo(n,e.name),o=Ii(e.updateTime),u=new Oi({mapValue:{fields:e.fields}}),d=Cr.newFoundDocument(r,o,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function ac(n,e){let t;if(e instanceof $d)t={update:p_(n,e.key,e.value)};else if(e instanceof Hd)t={delete:Yf(n,e.key)};else if(e instanceof oc)t={update:p_(n,e.key,e.data),updateMask:FA(e.fieldMask)};else{if(!(e instanceof c_))return St();t={verify:Yf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const d=u.transform;if(d instanceof Bf)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Bd)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Ia)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof yl)return{fieldPath:u.field.canonicalString(),increment:d.yt};throw St()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:vD(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:St()),t;var o}function om(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Nr.updateTime(Ii(o.updateTime)):void 0!==o.exists?Nr.exists(o.exists):Nr.none():Nr.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,d){let g=null;"setToServerValue"in d?(dn("REQUEST_TIME"===d.setToServerValue),g=new Bf):"appendMissingElements"in d?g=new Bd(d.appendMissingElements.values||[]):"removeAllFromArray"in d?g=new Ia(d.removeAllFromArray.values||[]):"increment"in d?g=new yl(u,d.increment):St();const v=Kr.fromServerFormat(d.fieldPath);return new jd(v,g)}(n,o)):[];var o;if(e.update){const o=Lo(n,e.update.name),u=new Oi({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new Ws((e.updateMask.fieldPaths||[]).map(C=>Kr.fromServerFormat(C)));return new oc(o,u,d,t,r)}return new $d(o,u,t,r)}if(e.delete){const o=Lo(n,e.delete);return new Hd(o,t)}if(e.verify){const o=Lo(n,e.verify);return new c_(o,t)}return St()}function m_(n,e){return{documents:[tI(n,e.path)]}}function y_(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=tI(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=tI(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(v){if(0===v.length)return;const C=v.map(S=>function(O){if("=="===O.op){if(Kv(O.value))return{unaryFilter:{field:qd(O.field),op:"IS_NAN"}};if(Zv(O.value))return{unaryFilter:{field:qd(O.field),op:"IS_NULL"}}}else if("!="===O.op){if(Kv(O.value))return{unaryFilter:{field:qd(O.field),op:"IS_NOT_NAN"}};if(Zv(O.value))return{unaryFilter:{field:qd(O.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qd(O.field),op:iI(O.op),value:O.value}}}(S));return 1===C.length?C[0]:{compositeFilter:{op:"AND",filters:C}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(v){if(0!==v.length)return v.map(C=>{return{field:qd((S=C).field),direction:NA(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(C=e.limit,n.gt||pl(C)?C:{value:C});var C,g,v;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(v=e.endAt).inclusive,values:v.position}),t}function rI(n){let e=im(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){dn(1===r);const S=t.from[0];S.allDescendants?o=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=wD(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(S=>{return new Lf(Zd((O=S).field),function(G){switch(G){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction));var O}));let g=null;t.limit&&(g=function(S){let O;return O="object"==typeof S?S.value:S,pl(O)?null:O}(t.limit));let v=null;var S;t.startAt&&(v=new Ea((S=t.startAt).values||[],!!S.before));let C=null;return t.endAt&&(C=function(S){return new Ea(S.values||[],!S.before)}(t.endAt)),GE(e,o,d,u,g,"F",v,C)}function wD(n){return n?void 0!==n.unaryFilter?[kA(n)]:void 0!==n.fieldFilter?[ED(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>wD(e)).reduce((e,t)=>e.concat(t)):St():[]}function NA(n){return mD[n]}function iI(n){return RA[n]}function qd(n){return{fieldPath:n.canonicalString()}}function Zd(n){return Kr.fromServerFormat(n.fieldPath)}function ED(n){return hi.create(Zd(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return St()}}(n.fieldFilter.op),n.fieldFilter.value)}function kA(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Zd(n.unaryFilter.field);return hi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Zd(n.unaryFilter.field);return hi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Zd(n.unaryFilter.field);return hi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Zd(n.unaryFilter.field);return hi.create(o,"!=",{nullValue:"NULL_VALUE"});default:return St()}}function FA(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ID(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ss(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=sI(e)),e=LA(n.get(t),e);return sI(e)}function LA(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function sI(n){return n+"\x01\x01"}function qs(n){const e=n.length;if(dn(e>=2),2===e)return dn("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),tr.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&St(),n.charAt(d+1)){case"\x01":const g=n.substring(u,d);let v;0===o.length?v=g:(o+=g,v=o,o=""),r.push(v);break;case"\x10":o+=n.substring(u,d),o+="\0";break;case"\x11":o+=n.substring(u,d+1);break;default:St()}u=d+2}return new tr(r)}const oI=["userId","batchId"];function am(n,e){return[n,Ss(e)]}function v_(n,e,t){return[n,Ss(e),t]}const vl={},aI=["prefixPath","collectionGroup","readTime","documentId"],__=["prefixPath","collectionGroup","documentId"],w_=["collectionGroup","readTime","prefixPath","documentId"],bD=["canonicalId","targetId"],E_=["targetId","path"],I_=["path","targetId"],um=["collectionId","parent"],VA=["indexId","uid"],UA=["uid","sequenceNumber"],BA=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],jA=["indexId","uid","orderedDocumentKey"],uI=["userId","collectionPath","documentId"],CD=["userId","collectionPath","largestBatchId"],DD=["userId","collectionGroup","largestBatchId"],cI=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],TD=[...cI,"documentOverlays"],b_=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],C_=b_,lI=[...C_,"indexConfiguration","indexState","indexEntries"];class D_ extends Hv{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Pi(n,e){const t=Ct(n);return ko.O(t.ie,e)}class cm{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&xA(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Hf(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Hf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=KE();return this.mutations.forEach(o=>{const u=e.get(o.key),d=u.overlayedDocument;let g=this.applyToLocalView(d,u.mutatedFields);g=t.has(o.key)?null:g;const v=cD(d,g);null!==v&&r.set(o.key,v),d.isValidDocument()||d.convertToNoDocument(un.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Mn())}isEqual(e){return this.batchId===e.batchId&&ul(this.mutations,e.mutations,(t,r)=>Gf(t,r))&&ul(this.baseMutations,e.baseMutations,(t,r)=>Gf(t,r))}}class Qf{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){dn(e.mutations.length===r.length);let o=d_;const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new Qf(e,t,r,o)}}class dI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class pu{constructor(e,t,r,o,u=un.min(),d=un.min(),g=di.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g}withSequenceNumber(e){return new pu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new pu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new pu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class lm{constructor(e){this.re=e}}function hI(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:T_(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Yf(o=n.re,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Kf(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Kd(e.version)};else{if(!e.isUnknownDocument())return St();r.unknownDocument={path:t.path.toArray(),version:Kd(e.version)}}var o,u;return r}function T_(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Kd(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function _l(n){const e=new Pr(n.seconds,n.nanoseconds);return un.fromTimestamp(e)}function wl(n,e){const t=(e.baseMutations||[]).map(u=>om(n.re,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>om(n.re,u)),o=Pr.fromMillis(e.localWriteTimeMs);return new cm(e.batchId,o,t,r)}function Jf(n){const e=_l(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?_l(n.lastLimboFreeSnapshotVersion):un.min();let r;var o;return void 0!==n.query.documents?(dn(1===(o=n.query).documents.length),r=Ts(ml(im(o.documents[0])))):r=Ts(rI(n.query)),new pu(r,n.targetId,0,n.lastListenSequenceNumber,e,t,di.fromBase64String(n.resumeToken))}function AD(n,e){const t=Kd(e.snapshotVersion),r=Kd(e.lastLimboFreeSnapshotVersion);let o;o=Qg(e.target)?m_(n.re,e.target):y_(n.re,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:sc(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function fI(n){const e=rI({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Vf(e,e.limit,"L"):e}function pI(n,e){return new dI(e.largestBatchId,om(n.re,e.overlayMutation))}function MD(n,e){const t=e.path.lastSegment();return[n,Ss(e.path.popLast()),t]}function xD(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Kd(r.readTime),documentKey:Ss(r.documentKey.path),largestBatchId:r.largestBatchId}}class OD{getBundleMetadata(e,t){return RD(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:_l(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return RD(e).put({bundleId:(r=t).id,createTime:Kd(Ii(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return PD(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:fI(o.bundledQuery),readTime:_l(o.readTime)};var o})}saveNamedQuery(e,t){return PD(e).put({name:(r=t).name,readTime:Kd(Ii(r.readTime)),bundledQuery:r.bundledQuery});var r}}function RD(n){return Pi(n,"bundles")}function PD(n){return Pi(n,"namedQueries")}class S_{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new S_(e,t.uid||"")}getOverlay(e,t){return dm(e).get(MD(this.userId,t)).next(r=>r?pI(this.It,r):null)}getOverlays(e,t){const r=go();return ve.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,d)=>{const g=new dI(t,d);o.push(this.ue(e,g))}),ve.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(Ss(d.getCollectionPath())));const u=[];return o.forEach(d=>{const g=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(dm(e).Y("collectionPathOverlayIndex",g))}),ve.waitFor(u)}getOverlaysForCollection(e,t,r){const o=go(),u=Ss(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return dm(e).W("collectionPathOverlayIndex",d).next(g=>{for(const v of g){const C=pI(this.It,v);o.set(C.getKey(),C)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=go();let d;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return dm(e).Z({index:"collectionGroupOverlayIndex",range:g},(v,C,S)=>{const O=pI(this.It,C);u.size()<o||O.largestBatchId===d?(u.set(O.getKey(),O),d=O.largestBatchId):S.done()}).next(()=>u)}ue(e,t){return dm(e).put(function(r,o,u){const[d,g,v]=MD(o,u.mutation.key);return{userId:o,collectionPath:g,documentId:v,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:ac(r.re,u.mutation)}}(this.It,this.userId,t))}}function dm(n){return Pi(n,"documentOverlays")}class Yd{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Qr(e.integerValue));else if("doubleValue"in e){const r=Qr(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),Nf(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(hl(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?LE(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):St()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const o of Object.keys(r))this._e(o,t),this.ae(r[o],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const o of r)this.ae(o,t)}ge(e,t){this.le(t,37),mt.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function $A(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function i(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=$A(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Yd.Te=new Yd;class s{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const o=t.codePointAt(0);this.Ae(240|o>>>18),this.Ae(128|63&o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const o=t.codePointAt(0);this.Pe(240|o>>>18),this.Pe(128|63&o>>>12),this.Pe(128|63&o>>>6),this.Pe(128|63&o)}}this.ve()}De(e){const t=this.Ce(e),r=i(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Ne(e){const t=this.Ce(e),r=i(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}ke(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Me(0),this.Me(1)}ve(){this.Fe(0),this.Fe(1)}Me(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class a{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class c{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Oe()}}class l{constructor(){this.Be=new s,this.Le=new a(this.Be),this.Ue=new c(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class f{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new f(this.indexId,this.documentKey,this.arrayValue,r)}}function y(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=w(n.arrayValue,e.arrayValue),0!==t?t:(t=w(n.directionalValue,e.directionalValue),0!==t?t:mt.comparator(n.documentKey,e.documentKey)))}function w(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class I{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=Gg(e);if(void 0!==t&&!this.ze(t))return!1;const r=tc(e);let o=0,u=0;for(;o<r.length&&this.ze(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.je){const d=r[o];if(!this.He(this.je,d)||!this.Je(this.Ge[u++],d))return!1;++o}for(;o<r.length;++o){const d=r[o];if(u>=this.Ge.length||!this.Je(this.Ge[u++],d))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class T{constructor(){this.Ye=new x}addToCollectionParentIndex(e,t){return this.Ye.add(t),ve.resolve()}getCollectionParents(e,t){return ve.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return ve.resolve()}deleteFieldIndex(e,t){return ve.resolve()}getDocumentsMatchingTarget(e,t){return ve.resolve(null)}getIndexType(e,t){return ve.resolve(0)}getFieldIndexes(e,t){return ve.resolve([])}getNextCollectionGroupToUpdate(e){return ve.resolve(null)}getMinOffset(e,t){return ve.resolve(zs.min())}getMinOffsetFromCollectionGroup(e,t){return ve.resolve(zs.min())}updateCollectionGroup(e,t,r){return ve.resolve()}updateIndexEntries(e,t){return ve.resolve()}}class x{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new or(tr.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new or(tr.comparator)).toArray()}}const F=new Uint8Array(0);class Y{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new x,this.Ze=new Ri(r=>sc(r),(r,o)=>Ff(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const u={collectionId:r,parent:Ss(o)};return ce(e).put(u)}return ve.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[WC(t),""],!1,!0);return ce(e).W(o).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(qs(d.parent))}return r})}addFieldIndex(e,t){const r=rt(e),o={indexId:(d=t).indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])};var d;delete o.indexId;const u=r.add(o);if(t.indexState){const d=ft(e);return u.next(g=>{d.put(xD(g,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=rt(e),o=ft(e),u=Fe(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Fe(e);let o=!0;const u=new Map;return ve.forEach(this.tn(t),d=>this.en(e,d).next(g=>{o&&(o=!!g),u.set(d,g)})).next(()=>{if(o){let d=Mn();const g=[];return ve.forEach(u,(v,C)=>{var S;tt("IndexedDbIndexManager",`Using index ${S=v,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(Nn=>`${Nn.fieldPath}:${Nn.kind}`).join(",")}`} to execute ${sc(t)}`);const O=function(Nn,qt){const bn=Gg(qt);if(void 0===bn)return null;for(const Kn of Ld(Nn,bn.fieldPath))switch(Kn.op){case"array-contains-any":return Kn.value.arrayValue.values||[];case"array-contains":return[Kn.value]}return null}(C,v),G=function(Nn,qt){const bn=new Map;for(const Kn of tc(qt))for(const Wi of Ld(Nn,Kn.fieldPath))switch(Wi.op){case"==":case"in":bn.set(Kn.fieldPath.canonicalString(),Wi.value);break;case"not-in":case"!=":return bn.set(Kn.fieldPath.canonicalString(),Wi.value),Array.from(bn.values())}return null}(C,v),ee=function(Nn,qt){const bn=[];let Kn=!0;for(const Wi of tc(qt)){const z_=0===Wi.kind?Jv(Nn,Wi.fieldPath,Nn.startAt):Xv(Nn,Wi.fieldPath,Nn.startAt);bn.push(z_.value),Kn&&(Kn=z_.inclusive)}return new Ea(bn,Kn)}(C,v),ge=function(Nn,qt){const bn=[];let Kn=!0;for(const Wi of tc(qt)){const z_=0===Wi.kind?Xv(Nn,Wi.fieldPath,Nn.endAt):Jv(Nn,Wi.fieldPath,Nn.endAt);bn.push(z_.value),Kn&&(Kn=z_.inclusive)}return new Ea(bn,Kn)}(C,v),Je=this.nn(v,C,ee),ot=this.nn(v,C,ge),Qt=this.sn(v,C,G),vn=this.rn(v.indexId,O,Je,ee.inclusive,ot,ge.inclusive,Qt);return ve.forEach(vn,Nn=>r.J(Nn,t.limit).next(qt=>{qt.forEach(bn=>{const Kn=mt.fromSegments(bn.documentKey);d.has(Kn)||(d=d.add(Kn),g.push(Kn))})}))}).next(()=>g)}return ve.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,o,u,d,g){const v=(null!=t?t.length:1)*Math.max(r.length,u.length),C=v/(null!=t?t.length:1),S=[];for(let O=0;O<v;++O){const G=t?this.on(t[O/C]):F,ee=this.un(e,G,r[O%C],o),ge=this.cn(e,G,u[O%C],d),Je=g.map(ot=>this.un(e,G,ot,!0));S.push(...this.createRange(ee,ge,Je))}return S}un(e,t,r,o){const u=new f(e,mt.empty(),t,r);return o?u:u.Ke()}cn(e,t,r,o){const u=new f(e,mt.empty(),t,r);return o?u.Ke():u}en(e,t){const r=new I(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let d=null;for(const g of u)r.We(g)&&(!d||g.fields.length>d.fields.length)&&(d=g);return d})}getIndexType(e,t){let r=2;return ve.forEach(this.tn(t),o=>this.en(e,o).next(u=>{u?0!==r&&u.fields.length<function(d){let g=new or(Kr.comparator),v=!1;for(const C of d.filters){const S=C;S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?v=!0:g=g.add(S.field))}for(const C of d.orderBy)C.field.isKeyField()||(g=g.add(C.field));return g.size+(v?1:0)}(o)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new l;for(const o of tc(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const d=r.qe(o.kind);Yd.Te.ce(u,d)}return r.$e()}on(e){const t=new l;return Yd.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new l;return Yd.Te.ce(ic(this.databaseId,t),r.qe(function(o){const u=tc(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let o=[];o.push(new l);let u=0;for(const d of tc(e)){const g=r[u++];for(const v of o)if(this.ln(t,d.fieldPath)&&kf(g))o=this.fn(o,d,g);else{const C=v.qe(d.kind);Yd.Te.ce(g,C)}}return this.dn(o)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const o=[...e],u=[];for(const d of r.arrayValue.values||[])for(const g of o){const v=new l;v.seed(g.$e()),Yd.Te.ce(d,v.qe(t.kind)),u.push(v)}return u}ln(e,t){return!!e.filters.find(r=>r instanceof hi&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=rt(e),o=ft(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const d=[];return ve.forEach(u,g=>o.get([g.indexId,this.uid]).next(v=>{d.push(function(C,S){const O=S?new Of(S.sequenceNumber,new zs(_l(S.readTime),new mt(qs(S.documentKey)),S.largestBatchId)):Of.empty(),G=C.fields.map(([ee,ge])=>new zg(Kr.fromServerFormat(ee),ge));return new xf(C.indexId,C.collectionGroup,G,O)}(g,v))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:In(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=rt(e),u=ft(e);return this._n(e).next(d=>o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>ve.forEach(g,v=>u.put(xD(v.indexId,this.user,d,r)))))}updateIndexEntries(e,t){const r=new Map;return ve.forEach(t,(o,u)=>{const d=r.get(o.collectionGroup);return(d?ve.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(g=>(r.set(o.collectionGroup,g),ve.forEach(g,v=>this.wn(e,o,v).next(C=>{const S=this.mn(u,v);return C.isEqual(S)?ve.resolve():this.gn(e,u,v,C,S)}))))})}yn(e,t,r,o){return Fe(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,o){return Fe(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const o=Fe(e);let u=new or(y);return o.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(d,g)=>{u=u.add(new f(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>u)}mn(e,t){let r=new or(y);const o=this.an(t,e);if(null==o)return r;const u=Gg(t);if(null!=u){const d=e.data.field(u.fieldPath);if(kf(d))for(const g of d.arrayValue.values||[])r=r.add(new f(t.indexId,e.key,this.on(g),o))}else r=r.add(new f(t.indexId,e.key,F,o));return r}gn(e,t,r,o,u){tt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(g,v,C,S,O){const G=g.getIterator(),ee=v.getIterator();let ge=Nd(G),Je=Nd(ee);for(;ge||Je;){let ot=!1,Qt=!1;if(ge&&Je){const vn=C(ge,Je);vn<0?Qt=!0:vn>0&&(ot=!0)}else null!=ge?Qt=!0:ot=!0;ot?(S(Je),Je=Nd(ee)):Qt?(O(ge),ge=Nd(G)):(ge=Nd(G),Je=Nd(ee))}}(o,u,y,g=>{d.push(this.yn(e,t,r,g))},g=>{d.push(this.pn(e,t,r,g))}),ve.waitFor(d)}_n(e){let t=1;return ft(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,g)=>y(d,g)).filter((d,g,v)=>!g||0!==y(d,v[g-1]));const o=[];o.push(e);for(const d of r){const g=y(d,e),v=y(d,t);if(0===g)o[0]=e.Ke();else if(g>0&&v<0)o.push(d),o.push(d.Ke());else if(v>0)break}o.push(t);const u=[];for(let d=0;d<o.length;d+=2)u.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,F,[]],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,F,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(xt)}getMinOffset(e,t){return ve.mapArray(this.tn(t),r=>this.en(e,r).next(o=>o||St())).next(xt)}}function ce(n){return Pi(n,"collectionParents")}function Fe(n){return Pi(n,"indexEntries")}function rt(n){return Pi(n,"indexConfiguration")}function ft(n){return Pi(n,"indexState")}function xt(n){dn(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;cl(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new zs(e.readTime,e.documentKey,t)}const Yt={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ue{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ue(e,Ue.DEFAULT_COLLECTION_PERCENTILE,Ue.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function nn(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let g=0;const v=r.Z({range:d},(S,O,G)=>(g++,G.delete()));u.push(v.next(()=>{dn(1===g)}));const C=[];for(const S of t.mutations){const O=v_(e,S.key.path,t.batchId);u.push(o.delete(O)),C.push(S.key)}return ve.waitFor(u).next(()=>C)}function Gn(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw St();e=n.noDocument}return JSON.stringify(e).length}Ue.DEFAULT_COLLECTION_PERCENTILE=10,Ue.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ue.DEFAULT=new Ue(41943040,Ue.DEFAULT_COLLECTION_PERCENTILE,Ue.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ue.DISABLED=new Ue(-1,0,0);class wr{constructor(e,t,r,o){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=o,this.In={}}static oe(e,t,r,o){dn(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new wr(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ca(e).Z({index:"userMutationsIndex",range:r},(o,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=cc(e),d=Ca(e);return d.add({}).next(g=>{dn("number"==typeof g);const v=new cm(g,t,r,o),C=function(G,ee,ge){const Je=ge.baseMutations.map(Qt=>ac(G.re,Qt)),ot=ge.mutations.map(Qt=>ac(G.re,Qt));return{userId:ee,batchId:ge.batchId,localWriteTimeMs:ge.localWriteTime.toMillis(),baseMutations:Je,mutations:ot}}(this.It,this.userId,v),S=[];let O=new or((G,ee)=>In(G.canonicalString(),ee.canonicalString()));for(const G of o){const ee=v_(this.userId,G.key.path,g);O=O.add(G.key.path.popLast()),S.push(d.put(C)),S.push(u.put(ee,vl))}return O.forEach(G=>{S.push(this.indexManager.addToCollectionParentIndex(e,G))}),e.addOnCommittedListener(()=>{this.In[g]=v.keys()}),ve.waitFor(S).next(()=>v)})}lookupMutationBatch(e,t){return Ca(e).get(t).next(r=>r?(dn(r.userId===this.userId),wl(this.It,r)):null)}Tn(e,t){return this.In[t]?ve.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.In[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Ca(e).Z({index:"userMutationsIndex",range:o},(d,g,v)=>{g.userId===this.userId&&(dn(g.batchId>=r),u=wl(this.It,g)),v.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ca(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(o,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ca(e).W("userMutationsIndex",t).next(r=>r.map(o=>wl(this.It,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=am(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return cc(e).Z({range:o},(d,g,v)=>{const[C,S,O]=d,G=qs(S);if(C===this.userId&&t.path.isEqual(G))return Ca(e).get(O).next(ee=>{if(!ee)throw St();dn(ee.userId===this.userId),u.push(wl(this.It,ee))});v.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new or(In);const o=[];return t.forEach(u=>{const d=am(this.userId,u.path),g=IDBKeyRange.lowerBound(d),v=cc(e).Z({range:g},(C,S,O)=>{const[G,ee,ge]=C,Je=qs(ee);G===this.userId&&u.path.isEqual(Je)?r=r.add(ge):O.done()});o.push(v)}),ve.waitFor(o).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=am(this.userId,r),d=IDBKeyRange.lowerBound(u);let g=new or(In);return cc(e).Z({range:d},(v,C,S)=>{const[O,G,ee]=v,ge=qs(G);O===this.userId&&r.isPrefixOf(ge)?ge.length===o&&(g=g.add(ee)):S.done()}).next(()=>this.En(e,g))}En(e,t){const r=[],o=[];return t.forEach(u=>{o.push(Ca(e).get(u).next(d=>{if(null===d)throw St();dn(d.userId===this.userId),r.push(wl(this.It,d))}))}),ve.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return nn(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),ve.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ve.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return cc(e).Z({range:r},(u,d,g)=>{if(u[0]===this.userId){const v=qs(u[1]);o.push(v)}else g.done()}).next(()=>{dn(0===o.length)})})}containsKey(e,t){return uc(e,this.userId,t)}Rn(e){return hm(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function uc(n,e,t){const r=am(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return cc(n).Z({range:u,X:!0},(g,v,C)=>{const[S,O,G]=g;S===e&&O===o&&(d=!0),C.done()}).next(()=>d)}function Ca(n){return Pi(n,"mutations")}function cc(n){return Pi(n,"documentMutations")}function hm(n){return Pi(n,"mutationQueues")}class gu{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new gu(0)}static vn(){return new gu(-1)}}class A_{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new gu(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>un.fromTimestamp(new Pr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Sn(e,o)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>lc(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(dn(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return lc(e).Z((d,g)=>{const v=Jf(g);v.sequenceNumber<=t&&null===r.get(v.targetId)&&(o++,u.push(this.removeTargetData(e,v)))}).next(()=>ve.waitFor(u)).next(()=>o)}forEachTarget(e,t){return lc(e).Z((r,o)=>{const u=Jf(o);t(u)})}Vn(e){return fm(e).get("targetGlobalKey").next(t=>(dn(null!==t),t))}Sn(e,t){return fm(e).put("targetGlobalKey",t)}Dn(e,t){return lc(e).put(AD(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=sc(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return lc(e).Z({range:o,index:"queryTargetsIndex"},(d,g,v)=>{const C=Jf(g);Ff(t,C.target)&&(u=C,v.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=Da(e);return t.forEach(d=>{const g=Ss(d.path);o.push(u.put({targetId:r,path:g})),o.push(this.referenceDelegate.addReference(e,r,d))}),ve.waitFor(o)}removeMatchingKeys(e,t,r){const o=Da(e);return ve.forEach(t,u=>{const d=Ss(u.path);return ve.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Da(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=Da(e);let u=Mn();return o.Z({range:r,X:!0},(d,g,v)=>{const C=qs(d[1]),S=new mt(C);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=Ss(t.path),o=IDBKeyRange.bound([r],[WC(r)],!1,!0);let u=0;return Da(e).Z({index:"documentTargetsIndex",X:!0,range:o},([d,g],v,C)=>{0!==d&&(u++,C.done())}).next(()=>u>0)}se(e,t){return lc(e).get(t).next(r=>r?Jf(r):null)}}function lc(n){return Pi(n,"targets")}function fm(n){return Pi(n,"targetGlobal")}function Da(n){return Pi(n,"targetDocuments")}function pm([n,e],[t,r]){const o=In(n,t);return 0===o?In(e,r):o}class DO{constructor(e){this.xn=e,this.buffer=new or(pm),this.Nn=0}kn(){return++this.Nn}Mn(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();pm(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class TO{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}Fn(e){var t=this;tt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ne.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){cu(r)?tt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield uu(r)}yield t.Fn(3e5)}))}}class SO{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ve.resolve(Gr.at);const r=new DO(t);return this.$n.forEachTarget(e,o=>r.Mn(o.sequenceNumber)).next(()=>this.$n.Ln(e,o=>r.Mn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(tt("LruGarbageCollector","Garbage collection skipped; disabled"),ve.resolve(Yt)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(tt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Yt):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,o,u,d,g,v,C;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(O=>(O>this.params.maximumSequenceNumbersToCollect?(tt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${O}`),o=this.params.maximumSequenceNumbersToCollect):o=O,d=Date.now(),this.nthSequenceNumber(e,o))).next(O=>(r=O,g=Date.now(),this.removeTargets(e,r,t))).next(O=>(u=O,v=Date.now(),this.removeOrphanedDocuments(e,r))).next(O=>(C=Date.now(),Af()<=js.in.DEBUG&&tt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-S}ms\n\tDetermined least recently used ${o} in `+(g-d)+`ms\n\tRemoved ${u} targets in `+(v-g)+`ms\n\tRemoved ${O} documents in `+(C-v)+`ms\nTotal Duration: ${C-S}ms`),ve.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:O})))}}class AO{constructor(e,t){this.db=e,this.garbageCollector=new SO(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,o)=>t(o))}addReference(e,t,r){return gI(e,r)}removeReference(e,t,r){return gI(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return gI(e,t)}Gn(e,t){return function(r,o){let u=!1;return hm(r).tt(d=>uc(r,d,o).next(g=>(g&&(u=!0),ve.resolve(!g)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Kn(e,(d,g)=>{if(g<=t){const v=this.Gn(e,d).next(C=>{if(!C)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,un.min()),Da(e).delete([0,Ss(d.path)])))});o.push(v)}}).next(()=>ve.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return gI(e,t)}Kn(e,t){const r=Da(e);let o,u=Gr.at;return r.Z({index:"documentTargetsIndex"},([d,g],{path:v,sequenceNumber:C})=>{0===d?(u!==Gr.at&&t(new mt(qs(o)),u),u=C,o=v):u=Gr.at}).next(()=>{u!==Gr.at&&t(new mt(qs(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function gI(n,e){return Da(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ss(e.path),sequenceNumber:r}));var r}class HA{constructor(){this.changes=new Ri(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Cr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ve.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class MO{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Xf(e).put(r)}removeEntry(e,t,r){return Xf(e).delete(function(o,u){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],T_(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Cr.newInvalidDocument(t);return Xf(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(M_(t))},(o,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:Cr.newInvalidDocument(t)};return Xf(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(M_(t))},(o,u)=>{r={document:this.jn(t,u),size:Gn(u)}}).next(()=>r)}getEntries(e,t){let r=ns();return this.zn(e,t,(o,u)=>{const d=this.jn(o,u);r=r.insert(o,d)}).next(()=>r)}Hn(e,t){let r=ns(),o=new Yr(mt.comparator);return this.zn(e,t,(u,d)=>{const g=this.jn(u,d);r=r.insert(u,g),o=o.insert(u,Gn(d))}).next(()=>({documents:r,Jn:o}))}zn(e,t,r){if(t.isEmpty())return ve.resolve();let o=new or(qA);t.forEach(v=>o=o.add(v));const u=IDBKeyRange.bound(M_(o.first()),M_(o.last())),d=o.getIterator();let g=d.getNext();return Xf(e).Z({index:"documentKeyIndex",range:u},(v,C,S)=>{const O=mt.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;g&&qA(g,O)<0;)r(g,null),g=d.getNext();g&&g.isEqual(O)&&(r(g,C),g=d.hasNext()?d.getNext():null),g?S.j(M_(g)):S.done()}).next(()=>{for(;g;)r(g,null),g=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),T_(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Xf(e).W(IDBKeyRange.bound(o,u,!0)).next(d=>{let g=ns();for(const v of d){const C=this.jn(mt.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);g=g.insert(C.key,C)}return g})}getAllFromCollectionGroup(e,t,r,o){let u=ns();const d=WA(t,r),g=WA(t,zs.max());return Xf(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,g,!0)},(v,C,S)=>{const O=this.jn(mt.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);u=u.insert(O.key,O),u.size===o&&S.done()}).next(()=>u)}newChangeBuffer(e){return new xO(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return zA(e).get("remoteDocumentGlobalKey").next(t=>(dn(!!t),t))}Qn(e,t){return zA(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function SD(n,e){let t;if(e.document)t=g_(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=mt.fromSegments(e.noDocument.path),o=_l(e.noDocument.readTime);t=Cr.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return St();{const r=mt.fromSegments(e.unknownDocument.path),o=_l(e.unknownDocument.version);t=Cr.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Pr(r[0],r[1]);return un.fromTimestamp(o)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(un.min()))return r}return Cr.newInvalidDocument(e)}}function GA(n){return new MO(n)}class xO extends HA{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Ri(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new or((u,d)=>In(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const g=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,g.readTime)),d.isValidDocument()){const v=hI(this.Yn.It,d);o=o.add(u.path.popLast()),r+=Gn(v)-g.size,t.push(this.Yn.addEntry(e,u,v))}else if(r-=g.size,this.trackRemovals){const v=hI(this.Yn.It,d.convertToNoDocument(un.min()));t.push(this.Yn.addEntry(e,u,v))}}),o.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),ve.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:o})=>(o.forEach((u,d)=>{this.Xn.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function zA(n){return Pi(n,"remoteDocumentGlobal")}function Xf(n){return Pi(n,"remoteDocumentsV14")}function M_(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function WA(n,e){const t=e.documentKey.path.toArray();return[n,T_(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function qA(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=In(t[u],r[u]),o)return o;return o=In(t.length,r.length),o||(o=In(t[t.length-2],r[r.length-2]),o||In(t[t.length-1],r[r.length-1]))}class OO{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ZA{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.getBaseDocument(e,t,r))).next(o=>(null!==r&&Hf(r.mutation,o,Ws.empty(),Pr.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Mn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Mn()){const o=go();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let d=rs();return u.forEach((g,v)=>{d=d.insert(g,v.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const r=go();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Mn()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((d,g)=>{t.set(d,g)})})}computeViews(e,t,r,o){let u=ns();const d=zf(),g=zf();return t.forEach((v,C)=>{const S=r.get(C.key);o.has(C.key)&&(void 0===S||S.mutation instanceof oc)?u=u.insert(C.key,C):void 0!==S&&(d.set(C.key,S.mutation.getFieldMask()),Hf(S.mutation,C,S.mutation.getFieldMask(),Pr.now()))}),this.recalculateAndSaveOverlays(e,u).next(v=>(v.forEach((C,S)=>d.set(C,S)),t.forEach((C,S)=>{var O;return g.set(C,new OO(S,null!==(O=d.get(C))&&void 0!==O?O:null))}),g))}recalculateAndSaveOverlays(e,t){const r=zf();let o=new Yr((d,g)=>d-g),u=Mn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const g of d)g.keys().forEach(v=>{const C=t.get(v);if(null===C)return;let S=r.get(v)||Ws.empty();S=g.applyToLocalView(C,S),r.set(v,S);const O=(o.get(g.batchId)||Mn()).add(v);o=o.insert(g.batchId,O)})}).next(()=>{const d=[],g=o.getReverseIterator();for(;g.hasNext();){const v=g.getNext(),C=v.key,S=v.value,O=KE();S.forEach(G=>{if(!u.has(G)){const ee=cD(t.get(G),r.get(G));null!==ee&&O.set(G,ee),u=u.add(G)}}),d.push(this.documentOverlayCache.saveOverlays(e,C,O))}return ve.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return mt.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Xg(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):ve.resolve(go());let g=-1,v=u;return d.next(C=>ve.forEach(C,(S,O)=>(g<O.largestBatchId&&(g=O.largestBatchId),u.get(S)?ve.resolve():this.getBaseDocument(e,S,O).next(G=>{v=v.insert(S,G)}))).next(()=>this.populateOverlays(e,C,u)).next(()=>this.computeViews(e,v,C,Mn())).next(S=>({batchId:g,changes:ZE(S)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new mt(t)).next(r=>{let o=rs();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=rs();return this.indexManager.getCollectionParents(e,o).next(d=>ve.forEach(d,g=>{const v=(C=t,S=g.child(o),new fu(S,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,S;return this.getDocumentsMatchingCollectionQuery(e,v,r).next(C=>{C.forEach((S,O)=>{u=u.insert(S,O)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((g,v)=>{const C=v.getKey();null===o.get(C)&&(o=o.insert(C,Cr.newInvalidDocument(C)))});let d=rs();return o.forEach((g,v)=>{const C=u.get(g);void 0!==C&&Hf(C.mutation,v,Ws.empty(),Pr.now()),tm(t,v)&&(d=d.insert(g,v))}),d})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):ve.resolve(Cr.newInvalidDocument(t))}}class RO{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return ve.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Ii(r.createTime)}),ve.resolve()}getNamedQuery(e,t){return ve.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:fI(r.bundledQuery),readTime:Ii(r.readTime)}),ve.resolve();var r}}class PO{constructor(){this.overlays=new Yr(mt.comparator),this.es=new Map}getOverlay(e,t){return ve.resolve(this.overlays.get(t))}getOverlays(e,t){const r=go();return ve.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.ue(e,t,u)}),ve.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.es.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),ve.resolve()}getOverlaysForCollection(e,t,r){const o=go(),u=t.length+1,d=new mt(t.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const v=g.getNext().value,C=v.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===u&&v.largestBatchId>r&&o.set(v.getKey(),v)}return ve.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new Yr((C,S)=>C-S);const d=this.overlays.getIterator();for(;d.hasNext();){const C=d.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let S=u.get(C.largestBatchId);null===S&&(S=go(),u=u.insert(C.largestBatchId,S)),S.set(C.getKey(),C)}}const g=go(),v=u.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((C,S)=>g.set(C,S)),!(g.size()>=o)););return ve.resolve(g)}ue(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const d=this.es.get(o.largestBatchId).delete(r.key);this.es.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new dI(t,r));let u=this.es.get(t);void 0===u&&(u=Mn(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class ND{constructor(){this.ns=new or(is.ss),this.rs=new or(is.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new is(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new is(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new mt(new tr([])),r=new is(t,e),o=new is(t,e+1),u=[];return this.rs.forEachInRange([r,o],d=>{this.cs(d),u.push(d.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new mt(new tr([])),r=new is(t,e),o=new is(t,e+1);let u=Mn();return this.rs.forEachInRange([r,o],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new is(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class is{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return mt.comparator(e.key,t.key)||In(e._s,t._s)}static os(e,t){return In(e._s,t._s)||mt.comparator(e.key,t.key)}}class NO{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new or(is.ss)}checkEmpty(e){return ve.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.ws;this.ws++;const d=new cm(u,t,r,o);this.mutationQueue.push(d);for(const g of o)this.gs=this.gs.add(new is(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return ve.resolve(d)}lookupMutationBatch(e,t){return ve.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.ps(t+1),u=o<0?0:o;return ve.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ve.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return ve.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new is(t,0),o=new is(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,o],d=>{const g=this.ys(d._s);u.push(g)}),ve.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new or(In);return t.forEach(o=>{const u=new is(o,0),d=new is(o,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,d],g=>{r=r.add(g._s)})}),ve.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;mt.isDocumentKey(u)||(u=u.child(""));const d=new is(new mt(u),0);let g=new or(In);return this.gs.forEachWhile(v=>{const C=v.key.path;return!!r.isPrefixOf(C)&&(C.length===o&&(g=g.add(v._s)),!0)},d),ve.resolve(this.Is(g))}Is(e){const t=[];return e.forEach(r=>{const o=this.ys(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){dn(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return ve.forEach(t.mutations,o=>{const u=new is(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new is(t,0),o=this.gs.firstAfterOrEqual(r);return ve.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return ve.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class kO{constructor(e){this.Es=e,this.docs=new Yr(mt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,d=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ve.resolve(r?r.document.mutableCopy():Cr.newInvalidDocument(t))}getEntries(e,t){let r=ns();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Cr.newInvalidDocument(o))}),ve.resolve(r)}getAllFromCollection(e,t,r){let o=ns();const u=new mt(t.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:g,value:{document:v}}=d.getNext();if(!t.isPrefixOf(g.path))break;g.path.length>t.length+1||cl(xE(v),r)<=0||(o=o.insert(v.key,v.mutableCopy()))}return ve.resolve(o)}getAllFromCollectionGroup(e,t,r,o){St()}As(e,t){return ve.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new FO(this)}getSize(e){return ve.resolve(this.size)}}class FO extends HA{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Yn.addEntry(e,o)):this.Yn.removeEntry(r)}),ve.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class LO{constructor(e){this.persistence=e,this.Rs=new Ri(t=>sc(t),Ff),this.lastRemoteSnapshotVersion=un.min(),this.highestTargetId=0,this.bs=0,this.Ps=new ND,this.targetCount=0,this.vs=gu.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,o)=>t(o)),ve.resolve()}getLastRemoteSnapshotVersion(e){return ve.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ve.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),ve.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),ve.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new gu(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,ve.resolve()}updateTargetData(e,t){return this.Dn(t),ve.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,ve.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Rs.forEach((d,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.Rs.delete(d),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)}),ve.waitFor(u).next(()=>o)}getTargetCount(e){return ve.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return ve.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),ve.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),ve.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),ve.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return ve.resolve(r)}containsKey(e,t){return ve.resolve(this.Ps.containsKey(t))}}class KA{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Gr(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new LO(this),this.indexManager=new T,this.remoteDocumentCache=new kO(r=>this.referenceDelegate.xs(r)),this.It=new lm(t),this.Ns=new RO(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new PO,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new NO(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){tt("MemoryPersistence","Starting transaction:",e);const o=new VO(this.Ss.next());return this.referenceDelegate.ks(),r(o).next(u=>this.referenceDelegate.Ms(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Os(e,t){return ve.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class VO extends Hv{constructor(e){super(),this.currentSequenceNumber=e}}class mI{constructor(e){this.persistence=e,this.Fs=new ND,this.$s=null}static Bs(e){return new mI(e)}get Ls(){if(this.$s)return this.$s;throw St()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),ve.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),ve.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),ve.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(o=>this.Ls.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Ms(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ve.forEach(this.Ls,r=>{const o=mt.fromPath(r);return this.Us(e,o).next(u=>{u||t.removeEntry(o,un.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return ve.or([()=>ve.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class UO{constructor(e){this.It=e}$(e,t,r,o){const u=new Rf("createOrUpgrade",t);var g;r<1&&o>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",oI,{unique:!0}),g.createObjectStore("documentMutations"),YA(e),function(g){g.createObjectStore("remoteDocuments")}(e));let d=ve.resolve();return r<3&&o>=3&&(0!==r&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),YA(e)),d=d.next(()=>function(g){const v=g.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:un.min().toTimestamp(),targetCount:0};return v.put("targetGlobalKey",C)}(u))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(g,v){return v.store("mutations").W().next(C=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",oI,{unique:!0});const S=v.store("mutations"),O=C.map(G=>S.put(G));return ve.waitFor(O)})}(e,u))),d=d.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.qs(u))),r<6&&o>=6&&(d=d.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&o>=7&&(d=d.next(()=>this.Gs(u))),r<8&&o>=8&&(d=d.next(()=>this.Qs(e,u))),r<9&&o>=9&&(d=d.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.js(u))),r<11&&o>=11&&(d=d.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(g){const v=g.createObjectStore("documentOverlays",{keyPath:uI});v.createIndex("collectionPathOverlayIndex",CD,{unique:!1}),v.createIndex("collectionGroupOverlayIndex",DD,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(g){const v=g.createObjectStore("remoteDocumentsV14",{keyPath:aI});v.createIndex("documentKeyIndex",__),v.createIndex("collectionGroupIndex",w_)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>this.zs(e,u))),r<15&&o>=15&&(d=d.next(()=>function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:VA}).createIndex("sequenceNumberIndex",UA,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:BA}).createIndex("documentKeyIndex",jA,{unique:!1})}(e))),d}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,o)=>{t+=Gn(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(o=>ve.forEach(o,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",d).next(g=>ve.forEach(g,v=>{dn(v.userId===u.userId);const C=wl(this.It,v);return nn(e,u.userId,C).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Z((d,g)=>{const v=new tr(d),C=[0,Ss(v)];u.push(t.get(C).next(S=>S?ve.resolve():t.put({targetId:0,path:Ss(v),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>ve.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:um});const r=t.store("collectionParents"),o=new x,u=d=>{if(o.add(d)){const g=d.lastSegment(),v=d.popLast();return r.put({collectionId:g,parent:Ss(v)})}};return t.store("remoteDocuments").Z({X:!0},(d,g)=>{const v=new tr(d);return u(v.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([d,g,v],C)=>{const S=qs(g);return u(S.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,o)=>{const u=Jf(o),d=AD(this.It,u);return t.put(d)})}Ws(e,t){const r=t.store("remoteDocuments"),o=[];return r.Z((u,d)=>{const g=t.store("remoteDocumentsV14"),v=(C=d,C.document?new mt(tr.fromString(C.document.name).popFirst(5)):C.noDocument?mt.fromSegments(C.noDocument.path):C.unknownDocument?mt.fromSegments(C.unknownDocument.path):St()).path.toArray();var C;const S={prefixPath:v.slice(0,v.length-2),collectionGroup:v[v.length-2],documentId:v[v.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(g.put(S))}).next(()=>ve.waitFor(o))}zs(e,t){const r=t.store("mutations"),o=GA(this.It),u=new KA(mI.Bs,this.It.re);return r.W().next(d=>{const g=new Map;return d.forEach(v=>{var C;let S=null!==(C=g.get(v.userId))&&void 0!==C?C:Mn();wl(this.It,v).keys().forEach(O=>S=S.add(O)),g.set(v.userId,S)}),ve.forEach(g,(v,C)=>{const S=new li(C),O=S_.oe(this.It,S),G=u.getIndexManager(S),ee=wr.oe(S,this.It,G,u.referenceDelegate);return new ZA(o,ee,O,G).recalculateAndSaveOverlaysForDocumentKeys(new D_(t,Gr.at),v).next()})})}}function YA(n){n.createObjectStore("targetDocuments",{keyPath:E_}).createIndex("documentTargetsIndex",I_,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",bD,{unique:!0}),n.createObjectStore("targetGlobal")}const kD="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class FD{constructor(e,t,r,o,u,d,g,v,C,S,O=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=d,this.document=g,this.Js=C,this.Ys=S,this.Xs=O,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=G=>Promise.resolve(),!FD.C())throw new Ke(Se.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new AO(this,o),this.ii=t+"main",this.It=new lm(v),this.ri=new ko(this.ii,this.Xs,new UO(this.It)),this.Cs=new A_(this.referenceDelegate,this.It),this.remoteDocumentCache=GA(this.It),this.Ns=new OD,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===S&&Hr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ke(Se.FAILED_PRECONDITION,kD);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Gr(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,Ne.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,Ne.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,Ne.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>yI(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(cu(e))return tt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return tt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return x_(e).get("owner").next(t=>ve.resolve(this.mi(t)))}gi(e){return yI(e).delete(this.clientId)}yi(){var e=this;return(0,Ne.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Pi(r,"clientMetadata");return o.W().next(u=>{const d=e.Ii(u,18e5),g=u.filter(v=>-1===d.indexOf(v));return ve.forEach(g,v=>o.delete(v.clientId)).next(()=>g)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?ve.resolve(!0):x_(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Ke(Se.FAILED_PRECONDITION,kD);return!1}}return!(!this.networkEnabled||!this.inForeground)||yI(e).W().next(r=>void 0===this.Ii(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,g=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&g)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&tt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ne.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new D_(t,Gr.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>yI(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return wr.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Y(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return S_.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){tt("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(d=this.Xs)?lI:14===d?C_:13===d?b_:12===d?TD:11===d?cI:void St();var d;let g;return this.ri.runTransaction(e,o,u,v=>(g=new D_(v,this.Ss?this.Ss.next():Gr.at),"readwrite-primary"===t?this.fi(g).next(C=>!!C||this.di(g)).next(C=>{if(!C)throw Hr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Ke(Se.FAILED_PRECONDITION,$v);return r(g)}).next(C=>this.wi(g).next(()=>C)):this.Vi(g).next(()=>r(g)))).then(v=>(g.raiseOnCommittedEvent(),v))}Vi(e){return x_(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ke(Se.FAILED_PRECONDITION,kD)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return x_(e).put("owner",t)}static C(){return ko.C()}_i(e){const t=x_(e);return t.get("owner").next(r=>this.mi(r)?(tt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ve.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Hr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Hn.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return tt("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Hr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Hr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function x_(n){return Pi(n,"owner")}function yI(n){return Pi(n,"clientMetadata")}function LD(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class VD{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=o}static Ci(e,t){let r=Mn(),o=Mn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new VD(e,t.fromCache,r,o)}}class QA{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,o){return this.ki(e,t).next(u=>u||this.Mi(e,t,o,r)).next(u=>u||this.Oi(e,t))}ki(e,t){if(t_(t))return ve.resolve(null);let r=Ts(t);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=Vf(t,null,"F"),r=Ts(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const d=Mn(...u);return this.Ni.getDocuments(e,d).next(g=>this.indexManager.getMinOffset(e,r).next(v=>{const C=this.Fi(t,g);return this.$i(t,C,d,v.readTime)?this.ki(e,Vf(t,null,"F")):this.Bi(e,C,t,v)}))})))}Mi(e,t,r,o){return t_(t)||o.isEqual(un.min())?this.Oi(e,t):this.Ni.getDocuments(e,r).next(u=>{const d=this.Fi(t,u);return this.$i(t,d,r,o)?this.Oi(e,t):(Af()<=js.in.DEBUG&&tt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),em(t)),this.Bi(e,d,t,ME(o,-1)))})}Fi(e,t){let r=new or(zE(e));return t.forEach((o,u)=>{tm(e,u)&&(r=r.add(u))}),r}$i(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Oi(e,t){return Af()<=js.in.DEBUG&&tt("QueryEngine","Using full collection scan to execute query:",em(t)),this.Ni.getDocumentsMatchingQuery(e,t,zs.min())}Bi(e,t,r,o){return this.Ni.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(d=>{u=u.insert(d.key,d)}),u))}}class BO{constructor(e,t,r,o){this.persistence=e,this.Li=t,this.It=o,this.Ui=new Yr(In),this.qi=new Ri(u=>sc(u),Ff),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ZA(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function JA(n,e,t,r){return new BO(n,e,t,r)}function XA(n,e){return UD.apply(this,arguments)}function UD(){return UD=(0,Ne.Z)(function*(n,e){const t=Ct(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const d=[],g=[];let v=Mn();for(const C of o){d.push(C.batchId);for(const S of C.mutations)v=v.add(S.key)}for(const C of u){g.push(C.batchId);for(const S of C.mutations)v=v.add(S.key)}return t.localDocuments.getDocuments(r,v).next(C=>({ji:C,removedBatchIds:d,addedBatchIds:g}))})})}),UD.apply(this,arguments)}function jO(n,e){const t=Ct(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(d,g,v,C){const S=v.batch,O=S.keys();let G=ve.resolve();return O.forEach(ee=>{G=G.next(()=>C.getEntry(g,ee)).next(ge=>{const Je=v.docVersions.get(ee);dn(null!==Je),ge.version.compareTo(Je)<0&&(S.applyToRemoteDocument(ge,v),ge.isValidDocument()&&(ge.setReadTime(v.commitVersion),C.addEntry(ge)))})}),G.next(()=>d.mutationQueue.removeMutationBatch(g,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let g=Mn();for(let v=0;v<d.mutationResults.length;++v)d.mutationResults[v].transformResults.length>0&&(g=g.add(d.batch.mutations[v].key));return g}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function eM(n){const e=Ct(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function $O(n,e){const t=Ct(n),r=e.snapshotVersion;let o=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.Gi.newChangeBuffer({trackRemovals:!0});o=t.Ui;const g=[];e.targetChanges.forEach((S,O)=>{const G=o.get(O);if(!G)return;g.push(t.Cs.removeMatchingKeys(u,S.removedDocuments,O).next(()=>t.Cs.addMatchingKeys(u,S.addedDocuments,O)));let ee=G.withSequenceNumber(u.currentSequenceNumber);var ge,Je,ot;e.targetMismatches.has(O)?ee=ee.withResumeToken(di.EMPTY_BYTE_STRING,un.min()).withLastLimboFreeSnapshotVersion(un.min()):S.resumeToken.approximateByteSize()>0&&(ee=ee.withResumeToken(S.resumeToken,r)),o=o.insert(O,ee),Je=ee,ot=S,(0===(ge=G).resumeToken.approximateByteSize()||Je.snapshotVersion.toMicroseconds()-ge.snapshotVersion.toMicroseconds()>=3e8||ot.addedDocuments.size+ot.modifiedDocuments.size+ot.removedDocuments.size>0)&&g.push(t.Cs.updateTargetData(u,ee))});let v=ns(),C=Mn();if(e.documentUpdates.forEach(S=>{e.resolvedLimboDocuments.has(S)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(u,S))}),g.push(tM(u,d,e.documentUpdates).next(S=>{v=S.Wi,C=S.zi})),!r.isEqual(un.min())){const S=t.Cs.getLastRemoteSnapshotVersion(u).next(O=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));g.push(S)}return ve.waitFor(g).next(()=>d.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,v,C)).next(()=>v)}).then(u=>(t.Ui=o,u))}function tM(n,e,t){let r=Mn(),o=Mn();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let d=ns();return t.forEach((g,v)=>{const C=u.get(g);v.isFoundDocument()!==C.isFoundDocument()&&(o=o.add(g)),v.isNoDocument()&&v.version.isEqual(un.min())?(e.removeEntry(g,v.readTime),d=d.insert(g,v)):!C.isValidDocument()||v.version.compareTo(C.version)>0||0===v.version.compareTo(C.version)&&C.hasPendingWrites?(e.addEntry(v),d=d.insert(g,v)):tt("LocalStore","Ignoring outdated watch update for ",g,". Current version:",C.version," Watch version:",v.version)}),{Wi:d,zi:o}})}function HO(n,e){const t=Ct(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function gm(n,e){const t=Ct(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Cs.getTargetData(r,e).next(u=>u?(o=u,ve.resolve(o)):t.Cs.allocateTargetId(r).next(d=>(o=new pu(e,d,0,r.currentSequenceNumber),t.Cs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.Ui.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function mm(n,e,t){return BD.apply(this,arguments)}function BD(){return BD=(0,Ne.Z)(function*(n,e,t){const r=Ct(n),o=r.Ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!cu(d))throw d;tt("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.Ui=r.Ui.remove(e),r.qi.delete(o.target)}),BD.apply(this,arguments)}function vI(n,e,t){const r=Ct(n);let o=un.min(),u=Mn();return r.persistence.runTransaction("Execute query","readonly",d=>function(g,v,C){const S=Ct(g),O=S.qi.get(C);return void 0!==O?ve.resolve(S.Ui.get(O)):S.Cs.getTargetData(v,C)}(r,d,Ts(e)).next(g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(d,g.targetId).next(v=>{u=v})}).next(()=>r.Li.getDocumentsMatchingQuery(d,e,t?o:un.min(),t?u:Mn())).next(g=>(iM(r,i_(e),g),{documents:g,Hi:u})))}function nM(n,e){const t=Ct(n),r=Ct(t.Cs),o=t.Ui.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.se(u,e).next(d=>d?d.target:null))}function rM(n,e){const t=Ct(n),r=t.Ki.get(e)||un.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.Gi.getAllFromCollectionGroup(o,e,ME(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(iM(t,e,o),o))}function iM(n,e,t){let r=un.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function jD(){return jD=(0,Ne.Z)(function*(n,e,t,r){const o=Ct(n);let u=Mn(),d=ns();for(const C of t){const S=e.Ji(C.metadata.name);C.document&&(u=u.add(S));const O=e.Yi(C);O.setReadTime(e.Xi(C.metadata.readTime)),d=d.insert(S,O)}const g=o.Gi.newChangeBuffer({trackRemovals:!0}),v=yield gm(o,(C=r,Ts(ml(tr.fromString(`__bundle__/docs/${C}`)))));var C;return o.persistence.runTransaction("Apply bundle documents","readwrite",C=>tM(C,g,d).next(S=>(g.apply(C),S)).next(S=>o.Cs.removeMatchingKeysForTargetId(C,v.targetId).next(()=>o.Cs.addMatchingKeys(C,u,v.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(C,S.Wi,S.zi)).next(()=>S.Wi)))}),jD.apply(this,arguments)}function zO(n,e){return $D.apply(this,arguments)}function $D(){return $D=(0,Ne.Z)(function*(n,e,t=Mn()){const r=yield gm(n,Ts(fI(e.bundledQuery))),o=Ct(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const d=Ii(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o.Ns.saveNamedQuery(u,e);const g=r.withResumeToken(di.EMPTY_BYTE_STRING,d);return o.Ui=o.Ui.insert(g.targetId,g),o.Cs.updateTargetData(u,g).next(()=>o.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>o.Ns.saveNamedQuery(u,e))})}),$D.apply(this,arguments)}function sM(n,e){return`firestore_clients_${n}_${e}`}function oM(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function HD(n,e){return`firestore_targets_${n}_${e}`}class _I{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Zi(e,t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new Ke(o.error.code,o.error.message))),d?new _I(e,t,o.state,u):(Hr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class O_{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Ke(r.error.code,r.error.message))),u?new O_(e,r.state,o):(Hr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class wI{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=Wf();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=FE(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return o?new wI(e,u):(Hr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class GD{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new GD(t.clientId,t.onlineState):(Hr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class zD{constructor(){this.activeTargetIds=Wf()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class WD{constructor(e,t,r,o,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Yr(In),this.started=!1,this.cr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=sM(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new zD),this.lr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ne.Z)(function*(){const t=yield e.syncEngine.vi();for(const o of t){if(o===e.sr)continue;const u=e.getItem(sM(e.persistenceKey,o));if(u){const d=wI.Zi(o,u);d&&(e.ur=e.ur.insert(d.clientId,d))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const o=e.yr(r);o&&e.pr(o)}for(const o of e.cr)e.rr(o);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(HD(this.persistenceKey,e));if(r){const o=O_.Zi(e,r);o&&(t=o.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(HD(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Er(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return tt("SharedClientState","READ",e,t),t}setItem(e,t){tt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){tt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(tt("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void Hr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,Ne.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const o=t.vr(r.key);return t.Vr(o,null)}{const o=t.Sr(r.key,r.newValue);if(o)return t.Vr(o.clientId,o)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const o=t.Dr(r.key,r.newValue);if(o)return t.Cr(o)}}else if(t._r.test(r.key)){if(null!==r.newValue){const o=t.Nr(r.key,r.newValue);if(o)return t.kr(o)}}else if(r.key===t.wr){if(null!==r.newValue){const o=t.yr(r.newValue);if(o)return t.pr(o)}}else if(r.key===t.hr){const o=function(u){let d=Gr.at;if(null!=u)try{const g=JSON.parse(u);dn("number"==typeof g),d=g}catch(g){Hr("SharedClientState","Failed to read sequence number from WebStorage",g)}return d}(r.newValue);o!==Gr.at&&t.sequenceNumberHandler(o)}else if(r.key===t.mr){const o=t.Mr(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Or(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const o=new _I(this.currentUser,e,t,r),u=oM(this.persistenceKey,this.currentUser,e);this.setItem(u,o.tr())}Er(e){const t=oM(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const o=HD(this.persistenceKey,e),u=new O_(e,t,r);this.setItem(o,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return wI.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),o=Number(r[1]);return _I.Zi(new li(void 0!==r[2]?r[2]:null),o,t)}Nr(e,t){const r=this._r.exec(e),o=Number(r[1]);return O_.Zi(o,t)}yr(e){return GD.Zi(e)}Mr(e){return JSON.parse(e)}Cr(e){var t=this;return(0,Ne.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);tt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),o=this.Ir(this.ur),u=this.Ir(r),d=[],g=[];return u.forEach(v=>{o.has(v)||d.push(v)}),o.forEach(v=>{u.has(v)||g.push(v)}),this.syncEngine.Br(d,g).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Wf();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class aM{constructor(){this.Lr=new zD,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new zD,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class WO{qr(e){}shutdown(){}}class uM{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){tt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){tt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const qO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class ZO{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class KO extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,o,u){const d=this.ao(e,t);tt("RestConnection","Sending: ",d,r);const g={};return this.ho(g,o,u),this.lo(e,d,g,r).then(v=>(tt("RestConnection","Received: ",v),v),v=>{throw al("RestConnection",`${e} failed with error: `,v,"url: ",d,"request:",r),v})}fo(e,t,r,o,u,d){return this.co(e,t,r,o,u)}ho(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+ec,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}ao(e,t){return`${this.oo}/v1/${t}:${qO[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,r,o){return new Promise((u,d)=>{const g=new jC;g.listenOnce(wE.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case Bg.NO_ERROR:const C=g.getResponseJson();tt("Connection","XHR received:",JSON.stringify(C)),u(C);break;case Bg.TIMEOUT:tt("Connection",'RPC "'+e+'" timed out'),d(new Ke(Se.DEADLINE_EXCEEDED,"Request time out"));break;case Bg.HTTP_ERROR:const S=g.getStatus();if(tt("Connection",'RPC "'+e+'" failed with status:',S,"response text:",g.getResponseText()),S>0){const O=g.getResponseJson().error;if(O&&O.status&&O.message){const G=function(ee){const ge=ee.toLowerCase().replace(/_/g,"-");return Object.values(Se).indexOf(ge)>=0?ge:Se.UNKNOWN}(O.status);d(new Ke(G,O.message))}else d(new Ke(Se.UNKNOWN,"Server responded with status "+g.getStatus()))}else d(new Ke(Se.UNAVAILABLE,"Connection failed."));break;default:St()}}finally{tt("Connection",'RPC "'+e+'" completed.')}});const v=JSON.stringify(o);g.send(t,"POST",v,r,15)})}_o(e,t,r){const o=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=VC(),d=UC(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(g.xmlHttpFactory=new IE({})),this.ho(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const v=o.join("");tt("Connection","Creating WebChannel: "+v,g);const C=u.createWebChannel(v,g);let S=!1,O=!1;const G=new ZO({Hr:ge=>{O?tt("Connection","Not sending because WebChannel is closed:",ge):(S||(tt("Connection","Opening WebChannel transport."),C.open(),S=!0),tt("Connection","WebChannel sending:",ge),C.send(ge))},Jr:()=>C.close()}),ee=(ge,Je,ot)=>{ge.listen(Je,Qt=>{try{ot(Qt)}catch(vn){setTimeout(()=>{throw vn},0)}})};return ee(C,jg.EventType.OPEN,()=>{O||tt("Connection","WebChannel transport opened.")}),ee(C,jg.EventType.CLOSE,()=>{O||(O=!0,tt("Connection","WebChannel transport closed"),G.io())}),ee(C,jg.EventType.ERROR,ge=>{O||(O=!0,al("Connection","WebChannel transport errored:",ge),G.io(new Ke(Se.UNAVAILABLE,"The operation could not be completed")))}),ee(C,jg.EventType.MESSAGE,ge=>{var Je;if(!O){const ot=ge.data[0];dn(!!ot);const Qt=ot,vn=Qt.error||(null===(Je=Qt[0])||void 0===Je?void 0:Je.error);if(vn){tt("Connection","WebChannel received error:",vn);const Nn=vn.status;let qt=function(Kn){const Wi=fi[Kn];if(void 0!==Wi)return fD(Wi)}(Nn),bn=vn.message;void 0===qt&&(qt=Se.INTERNAL,bn="Unknown error status: "+Nn+" with message "+vn.message),O=!0,G.io(new Ke(qt,bn)),C.close()}else tt("Connection","WebChannel received:",ot),G.ro(ot)}}),ee(d,BC.STAT_EVENT,ge=>{ge.stat===EE.PROXY?tt("Connection","Detected buffering proxy"):ge.stat===EE.NOPROXY&&tt("Connection","Detected no buffering proxy")}),setTimeout(()=>{G.so()},0),G}}function cM(){return"undefined"!=typeof window?window:null}function EI(){return"undefined"!=typeof document?document:null}function R_(n){return new yD(n,!0)}class qD{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Hs=e,this.timerId=t,this.wo=r,this.mo=o,this.yo=u,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),o=Math.max(0,t-r);o>0&&tt("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Io=this.Hs.enqueueAfterDelay(this.timerId,o,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}bo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class lM{constructor(e,t,r,o,u,d,g,v){this.Hs=e,this.Po=r,this.vo=o,this.Vo=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=v,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new qD(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,Ne.Z)(function*(){e.No()&&(yield e.close(0))})()}Oo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,Ne.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,Ne.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===Se.RESOURCE_EXHAUSTED?(Hr(t.toString()),Hr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Eo()):t&&t.code===Se.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.So===t&&this.Go(r,o)},r=>{e(()=>{const o=new Ke(Se.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(o)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(o=>{r(()=>this.Qo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Mo(){var e=this;this.state=5,this.xo.Ao((0,Ne.Z)(function*(){e.state=0,e.start()}))}Qo(e){return tt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(tt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class YO extends lM{constructor(e,t,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.It=u}jo(e,t){return this.Vo._o("Listen",e,t)}onMessage(e){this.xo.reset();const t=function sm(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(v=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===v?1:"REMOVE"===v?2:"CURRENT"===v?3:"RESET"===v?4:St(),o=e.targetChange.targetIds||[],u=function(v,C){return v.gt?(dn(void 0===C||"string"==typeof C),di.fromBase64String(C||"")):(dn(void 0===C||C instanceof Uint8Array),di.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&function(v){const C=void 0===v.code?Se.UNKNOWN:fD(v.code);return new Ke(C,v.message||"")}(d);t=new zd(r,o,u,g||null)}else if("documentChange"in e){const r=e.documentChange,o=Lo(n,r.document.name),u=Ii(r.document.updateTime),d=new Oi({mapValue:{fields:r.document.fields}}),g=Cr.newFoundDocument(o,u,d);t=new Zf(r.targetIds||[],r.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const r=e.documentDelete,o=Lo(n,r.document),u=r.readTime?Ii(r.readTime):un.min(),d=Cr.newNoDocument(o,u);t=new Zf([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=Lo(n,r.document);t=new Zf([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return St();{const r=e.filter,u=new OA(r.count||0);t=new QE(r.targetId,u)}}var v;return t}(this.It,e),r=function(o){if(!("targetChange"in o))return un.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?un.min():u.readTime?Ii(u.readTime):un.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Wd(this.It),t.addTarget=function(o,u){let d;const g=u.target;return d=Qg(g)?{documents:m_(o,g)}:{query:y_(o,g)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=XE(o,u.resumeToken):u.snapshotVersion.compareTo(un.min())>0&&(d.readTime=Kf(o,u.snapshotVersion.toTimestamp())),d}(this.It,e);const r=function PA(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return St()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Wd(this.It),t.removeTarget=e,this.Bo(t)}}class QO extends lM{constructor(e,t,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.It=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.Vo._o("Write",e,t)}onMessage(e){if(dn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function _D(n,e){return n&&n.length>0?(dn(void 0!==e),n.map(t=>function(r,o){let u=Ii(r.updateTime?r.updateTime:o);return u.isEqual(un.min())&&(u=Ii(o)),new u_(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Ii(e.commitTime);return this.listener.Zo(r,t)}return dn(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Wd(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>ac(this.It,r))};this.Bo(t)}}class JO extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.Vo=r,this.It=o,this.nu=!1}su(){if(this.nu)throw new Ke(Se.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.Vo.co(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===Se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ke(Se.UNKNOWN,o.toString())})}fo(e,t,r,o){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.Vo.fo(e,t,r,u,d,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===Se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ke(Se.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class XO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Hr(t),this.ou=!1):tt("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class eR{constructor(e,t,r,o,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.qr(g=>{r.enqueueAndForget((0,Ne.Z)(function*(){var v;Qd(d)&&(tt("RemoteStore","Restarting streams for network reachability change."),yield(v=(0,Ne.Z)(function*(C){const S=Ct(C);S._u.add(4),yield ym(S),S.gu.set("Unknown"),S._u.delete(4),yield P_(S)}),function(C){return v.apply(this,arguments)})(d))}))}),this.gu=new XO(r,o)}}function P_(n){return ZD.apply(this,arguments)}function ZD(){return ZD=(0,Ne.Z)(function*(n){if(Qd(n))for(const e of n.wu)yield e(!0)}),ZD.apply(this,arguments)}function ym(n){return KD.apply(this,arguments)}function KD(){return KD=(0,Ne.Z)(function*(n){for(const e of n.wu)yield e(!1)}),KD.apply(this,arguments)}function II(n,e){const t=Ct(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),JD(t)?QD(t):_m(t).ko()&&YD(t,e))}function N_(n,e){const t=Ct(n),r=_m(t);t.du.delete(e),r.ko()&&dM(t,e),0===t.du.size&&(r.ko()?r.Fo():Qd(t)&&t.gu.set("Unknown"))}function YD(n,e){n.yu.Ot(e.targetId),_m(n).zo(e)}function dM(n,e){n.yu.Ot(e),_m(n).Ho(e)}function QD(n){n.yu=new JE({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),_m(n).start(),n.gu.uu()}function JD(n){return Qd(n)&&!_m(n).No()&&n.du.size>0}function Qd(n){return 0===Ct(n)._u.size}function hM(n){n.yu=void 0}function tR(n){return XD.apply(this,arguments)}function XD(){return XD=(0,Ne.Z)(function*(n){n.du.forEach((e,t)=>{YD(n,e)})}),XD.apply(this,arguments)}function nR(n,e){return eT.apply(this,arguments)}function eT(){return eT=(0,Ne.Z)(function*(n,e){hM(n),JD(n)?(n.gu.hu(e),QD(n)):n.gu.set("Unknown")}),eT.apply(this,arguments)}function rR(n,e,t){return tT.apply(this,arguments)}function tT(){return tT=(0,Ne.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof zd&&2===e.state&&e.cause)try{yield(r=(0,Ne.Z)(function*(o,u){const d=u.cause;for(const g of u.targetIds)o.du.has(g)&&(yield o.remoteSyncer.rejectListen(g,d),o.du.delete(g),o.yu.removeTarget(g))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){tt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield bI(n,r)}else if(e instanceof Zf?n.yu.Gt(e):e instanceof QE?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(un.min()))try{const r=yield eM(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const d=o.yu.te(u);return d.targetChanges.forEach((g,v)=>{if(g.resumeToken.approximateByteSize()>0){const C=o.du.get(v);C&&o.du.set(v,C.withResumeToken(g.resumeToken,u))}}),d.targetMismatches.forEach(g=>{const v=o.du.get(g);if(!v)return;o.du.set(g,v.withResumeToken(di.EMPTY_BYTE_STRING,v.snapshotVersion)),dM(o,g);const C=new pu(v.target,g,1,v.sequenceNumber);YD(o,C)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){tt("RemoteStore","Failed to raise snapshot:",r),yield bI(n,r)}var r}),tT.apply(this,arguments)}function bI(n,e,t){return nT.apply(this,arguments)}function nT(){return nT=(0,Ne.Z)(function*(n,e,t){if(!cu(e))throw e;n._u.add(1),yield ym(n),n.gu.set("Offline"),t||(t=()=>eM(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ne.Z)(function*(){tt("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield P_(n)}))}),nT.apply(this,arguments)}function fM(n,e){return e().catch(t=>bI(n,t,e))}function vm(n){return rT.apply(this,arguments)}function rT(){return rT=(0,Ne.Z)(function*(n){const e=Ct(n),t=Jd(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;iR(e);)try{const o=yield HO(e.localStore,r);if(null===o){0===e.fu.length&&t.Fo();break}r=o.batchId,sR(e,o)}catch(o){yield bI(e,o)}pM(e)&&gM(e)}),rT.apply(this,arguments)}function iR(n){return Qd(n)&&n.fu.length<10}function sR(n,e){n.fu.push(e);const t=Jd(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function pM(n){return Qd(n)&&!Jd(n).No()&&n.fu.length>0}function gM(n){Jd(n).start()}function oR(n){return iT.apply(this,arguments)}function iT(){return iT=(0,Ne.Z)(function*(n){Jd(n).eu()}),iT.apply(this,arguments)}function aR(n){return sT.apply(this,arguments)}function sT(){return sT=(0,Ne.Z)(function*(n){const e=Jd(n);for(const t of n.fu)e.Xo(t.mutations)}),sT.apply(this,arguments)}function uR(n,e,t){return oT.apply(this,arguments)}function oT(){return oT=(0,Ne.Z)(function*(n,e,t){const r=n.fu.shift(),o=Qf.from(r,e,t);yield fM(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield vm(n)}),oT.apply(this,arguments)}function cR(n,e){return aT.apply(this,arguments)}function aT(){return aT=(0,Ne.Z)(function*(n,e){var t;e&&Jd(n).Yo&&(yield(t=(0,Ne.Z)(function*(r,o){if(l_(u=o.code)&&u!==Se.ABORTED){const d=r.fu.shift();Jd(r).Oo(),yield fM(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield vm(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),pM(n)&&gM(n)}),aT.apply(this,arguments)}function mM(n,e){return uT.apply(this,arguments)}function uT(){return uT=(0,Ne.Z)(function*(n,e){const t=Ct(n);t.asyncQueue.verifyOperationInProgress(),tt("RemoteStore","RemoteStore received new credentials");const r=Qd(t);t._u.add(3),yield ym(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield P_(t)}),uT.apply(this,arguments)}function cT(n,e){return lT.apply(this,arguments)}function lT(){return lT=(0,Ne.Z)(function*(n,e){const t=Ct(n);e?(t._u.delete(2),yield P_(t)):e||(t._u.add(2),yield ym(t),t.gu.set("Unknown"))}),lT.apply(this,arguments)}function _m(n){return n.pu||(n.pu=function(e,t,r){const o=Ct(e);return o.su(),new YO(t,o.Vo,o.authCredentials,o.appCheckCredentials,o.It,r)}(n.datastore,n.asyncQueue,{Yr:tR.bind(null,n),Zr:nR.bind(null,n),Wo:rR.bind(null,n)}),n.wu.push(function(){var e=(0,Ne.Z)(function*(t){t?(n.pu.Oo(),JD(n)?QD(n):n.gu.set("Unknown")):(yield n.pu.stop(),hM(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Jd(n){return n.Iu||(n.Iu=function(e,t,r){const o=Ct(e);return o.su(),new QO(t,o.Vo,o.authCredentials,o.appCheckCredentials,o.It,r)}(n.datastore,n.asyncQueue,{Yr:oR.bind(null,n),Zr:cR.bind(null,n),tu:aR.bind(null,n),Zo:uR.bind(null,n)}),n.wu.push(function(){var e=(0,Ne.Z)(function*(t){t?(n.Iu.Oo(),yield vm(n)):(yield n.Iu.stop(),n.fu.length>0&&(tt("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class dT{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Mi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,u){const d=Date.now()+r,g=new dT(e,t,d,o,u);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ke(Se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wm(n,e){if(Hr("AsyncQueue",`${e}: ${n}`),cu(n))return new Ke(Se.UNAVAILABLE,`${e}: ${n}`);throw n}class Em{constructor(e){this.comparator=e?(t,r)=>e(t,r)||mt.comparator(t.key,r.key):(t,r)=>mt.comparator(t.key,r.key),this.keyedMap=rs(),this.sortedSet=new Yr(this.comparator)}static emptySet(e){return new Em(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Em)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Em;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class yM{constructor(){this.Tu=new Yr(mt.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):St():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Im{constructor(e,t,r,o,u,d,g,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=v}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new Im(e,t,Em.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class lR{constructor(){this.Au=void 0,this.listeners=[]}}class dR{constructor(){this.queries=new Ri(e=>r_(e),Uf),this.onlineState="Unknown",this.Ru=new Set}}function hT(n,e){return fT.apply(this,arguments)}function fT(){return fT=(0,Ne.Z)(function*(n,e){const t=Ct(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new lR),o)try{u.Au=yield t.onListen(r)}catch(d){const g=wm(d,`Initialization of query '${em(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&mT(t)}),fT.apply(this,arguments)}function pT(n,e){return gT.apply(this,arguments)}function gT(){return gT=(0,Ne.Z)(function*(n,e){const t=Ct(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),gT.apply(this,arguments)}function hR(n,e){const t=Ct(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const g of d.listeners)g.Pu(o)&&(r=!0);d.Au=o}}r&&mT(t)}function fR(n,e,t){const r=Ct(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function mT(n){n.Ru.forEach(e=>{e.next()})}class yT{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Im(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||!(this.options.Nu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Im.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}class pR{constructor(e,t){this.payload=e,this.byteLength=t}ku(){return"metadata"in this.payload}}class vM{constructor(e){this.It=e}Ji(e){return Lo(this.It,e)}Yi(e){return e.metadata.exists?g_(this.It,e.document,!1):Cr.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Ii(e)}}class gR{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=_M(e)}Ou(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=tr.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Fu(e){const t=new Map,r=new vM(this.It);for(const o of e)if(o.metadata.queries){const u=r.Ji(o.metadata.name);for(const d of o.metadata.queries){const g=(t.get(d)||Mn()).add(u);t.set(d,g)}}return t}complete(){var e=this;return(0,Ne.Z)(function*(){const t=yield function GO(n,e,t,r){return jD.apply(this,arguments)}(e.localStore,new vM(e.It),e.documents,e.Mu.id),r=e.Fu(e.documents);for(const o of e.queries)yield zO(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,$u:e.collectionGroups,Bu:t}})()}}function _M(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class wM{constructor(e){this.key=e}}class EM{constructor(e){this.key=e}}class IM{constructor(e,t){this.query=e,this.Lu=t,this.Uu=null,this.current=!1,this.qu=Mn(),this.mutatedKeys=Mn(),this.Ku=zE(e),this.Gu=new Em(this.Ku)}get Qu(){return this.Lu}ju(e,t){const r=t?t.Wu:new yM,o=t?t.Gu:this.Gu;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,g=!1;const v="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,C="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((S,O)=>{const G=o.get(S),ee=tm(this.query,O)?O:null,ge=!!G&&this.mutatedKeys.has(G.key),Je=!!ee&&(ee.hasLocalMutations||this.mutatedKeys.has(ee.key)&&ee.hasCommittedMutations);let ot=!1;G&&ee?G.data.isEqual(ee.data)?ge!==Je&&(r.track({type:3,doc:ee}),ot=!0):this.zu(G,ee)||(r.track({type:2,doc:ee}),ot=!0,(v&&this.Ku(ee,v)>0||C&&this.Ku(ee,C)<0)&&(g=!0)):!G&&ee?(r.track({type:0,doc:ee}),ot=!0):G&&!ee&&(r.track({type:1,doc:G}),ot=!0,(v||C)&&(g=!0)),ot&&(ee?(d=d.add(ee),u=Je?u.add(S):u.delete(S)):(d=d.delete(S),u=u.delete(S)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const S="F"===this.query.limitType?d.last():d.first();d=d.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{Gu:d,Wu:r,$i:g,mutatedKeys:u}}zu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const u=e.Wu.Eu();u.sort((C,S)=>function(O,G){const ee=ge=>{switch(ge){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return St()}};return ee(O)-ee(G)}(C.type,S.type)||this.Ku(C.doc,S.doc)),this.Hu(r);const d=t?this.Ju():[],g=0===this.qu.size&&this.current?1:0,v=g!==this.Uu;return this.Uu=g,0!==u.length||v?{snapshot:new Im(this.query,e.Gu,o,u,e.mutatedKeys,0===g,v,!1),Yu:d}:{Yu:d}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new yM,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}Xu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.qu;this.qu=Mn(),this.Gu.forEach(r=>{this.Xu(r.key)&&(this.qu=this.qu.add(r.key))});const t=[];return e.forEach(r=>{this.qu.has(r)||t.push(new EM(r))}),this.qu.forEach(r=>{e.has(r)||t.push(new wM(r))}),t}Zu(e){this.Lu=e.Hi,this.qu=Mn();const t=this.ju(e.documents);return this.applyChanges(t,!0)}tc(){return Im.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}class mR{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class yR{constructor(e){this.key=e,this.ec=!1}}class vR{constructor(e,t,r,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.nc={},this.sc=new Ri(g=>r_(g),Uf),this.ic=new Map,this.rc=new Set,this.oc=new Yr(mt.comparator),this.uc=new Map,this.cc=new ND,this.ac={},this.hc=new Map,this.lc=gu.vn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function _R(n,e){return vT.apply(this,arguments)}function vT(){return vT=(0,Ne.Z)(function*(n,e){const t=jT(n);let r,o;const u=t.sc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.tc();else{const d=yield gm(t.localStore,Ts(e));t.isPrimaryClient&&II(t.remoteStore,d);const g=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield _T(t,e,r,"current"===g)}return o}),vT.apply(this,arguments)}function _T(n,e,t,r){return wT.apply(this,arguments)}function wT(){return wT=(0,Ne.Z)(function*(n,e,t,r){n.dc=(S,O,G)=>{return(ee=(0,Ne.Z)(function*(ge,Je,ot,Qt){let vn=Je.view.ju(ot);vn.$i&&(vn=yield vI(ge.localStore,Je.query,!1).then(({documents:bn})=>Je.view.ju(bn,vn)));const Nn=Qt&&Qt.targetChanges.get(Je.targetId),qt=Je.view.applyChanges(vn,ge.isPrimaryClient,Nn);return xT(ge,Je.targetId,qt.Yu),qt.snapshot}),function(ge,Je,ot,Qt){return ee.apply(this,arguments)})(n,S,O,G);var ee};const o=yield vI(n.localStore,e,!0),u=new IM(e,o.Hi),d=u.ju(o.documents),g=qf.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),v=u.applyChanges(d,n.isPrimaryClient,g);xT(n,t,v.Yu);const C=new mR(e,t,u);return n.sc.set(e,C),n.ic.has(t)?n.ic.get(t).push(e):n.ic.set(t,[e]),v.snapshot}),wT.apply(this,arguments)}function wR(n,e){return ET.apply(this,arguments)}function ET(){return ET=(0,Ne.Z)(function*(n,e){const t=Ct(n),r=t.sc.get(e),o=t.ic.get(r.targetId);if(o.length>1)return t.ic.set(r.targetId,o.filter(u=>!Uf(u,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield mm(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),N_(t.remoteStore,r.targetId),bm(t,r.targetId)}).catch(uu))):(bm(t,r.targetId),yield mm(t.localStore,r.targetId,!0))}),ET.apply(this,arguments)}function IT(){return IT=(0,Ne.Z)(function*(n,e,t){const r=$T(n);try{const o=yield function(u,d){const g=Ct(u),v=Pr.now(),C=d.reduce((G,ee)=>G.add(ee.key),Mn());let S,O;return g.persistence.runTransaction("Locally write mutations","readwrite",G=>{let ee=ns(),ge=Mn();return g.Gi.getEntries(G,C).next(Je=>{ee=Je,ee.forEach((ot,Qt)=>{Qt.isValidDocument()||(ge=ge.add(ot))})}).next(()=>g.localDocuments.getOverlayedDocuments(G,ee)).next(Je=>{S=Je;const ot=[];for(const Qt of d){const vn=lD(Qt,S.get(Qt.key).overlayedDocument);null!=vn&&ot.push(new oc(Qt.key,vn,Fd(vn.value.mapValue),Nr.exists(!0)))}return g.mutationQueue.addMutationBatch(G,v,ot,d)}).next(Je=>{O=Je;const ot=Je.applyToLocalDocumentSet(S,ge);return g.documentOverlayCache.saveOverlays(G,Je.batchId,ot)})}).then(()=>({batchId:O.batchId,changes:ZE(S)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,d,g){let v=u.ac[u.currentUser.toKey()];v||(v=new Yr(In)),v=v.insert(d,g),u.ac[u.currentUser.toKey()]=v}(r,o.batchId,t),yield El(r,o.changes),yield vm(r.remoteStore)}catch(o){const u=wm(o,"Failed to persist write");t.reject(u)}}),IT.apply(this,arguments)}function bM(n,e){return bT.apply(this,arguments)}function bT(){return bT=(0,Ne.Z)(function*(n,e){const t=Ct(n);try{const r=yield $O(t.localStore,e);e.targetChanges.forEach((o,u)=>{const d=t.uc.get(u);d&&(dn(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.ec=!0:o.modifiedDocuments.size>0?dn(d.ec):o.removedDocuments.size>0&&(dn(d.ec),d.ec=!1))}),yield El(t,r,e)}catch(r){yield uu(r)}}),bT.apply(this,arguments)}function CM(n,e,t){const r=Ct(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.sc.forEach((u,d)=>{const g=d.view.bu(e);g.snapshot&&o.push(g.snapshot)}),function(u,d){const g=Ct(u);g.onlineState=d;let v=!1;g.queries.forEach((C,S)=>{for(const O of S.listeners)O.bu(d)&&(v=!0)}),v&&mT(g)}(r.eventManager,e),o.length&&r.nc.Wo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function IR(n,e,t){return CT.apply(this,arguments)}function CT(){return CT=(0,Ne.Z)(function*(n,e,t){const r=Ct(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.uc.get(e),u=o&&o.key;if(u){let d=new Yr(mt.comparator);d=d.insert(u,Cr.newNoDocument(u,un.min()));const g=Mn().add(u),v=new Gd(un.min(),new Map,new or(In),d,g);yield bM(r,v),r.oc=r.oc.remove(u),r.uc.delete(e),OT(r)}else yield mm(r.localStore,e,!1).then(()=>bm(r,e,t)).catch(uu)}),CT.apply(this,arguments)}function bR(n,e){return DT.apply(this,arguments)}function DT(){return DT=(0,Ne.Z)(function*(n,e){const t=Ct(n),r=e.batch.batchId;try{const o=yield jO(t.localStore,e);MT(t,r,null),AT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield El(t,o)}catch(o){yield uu(o)}}),DT.apply(this,arguments)}function CR(n,e,t){return TT.apply(this,arguments)}function TT(){return TT=(0,Ne.Z)(function*(n,e,t){const r=Ct(n);try{const o=yield function(u,d){const g=Ct(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let C;return g.mutationQueue.lookupMutationBatch(v,d).next(S=>(dn(null!==S),C=S.keys(),g.mutationQueue.removeMutationBatch(v,S))).next(()=>g.mutationQueue.performConsistencyCheck(v)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(v,C,d)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,C)).next(()=>g.localDocuments.getDocuments(v,C))})}(r.localStore,e);MT(r,e,t),AT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield El(r,o)}catch(o){yield uu(o)}}),TT.apply(this,arguments)}function ST(){return ST=(0,Ne.Z)(function*(n,e){const t=Ct(n);Qd(t.remoteStore)||tt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=Ct(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>d.mutationQueue.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const o=t.hc.get(r)||[];o.push(e),t.hc.set(r,o)}catch(r){const o=wm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),ST.apply(this,arguments)}function AT(n,e){(n.hc.get(e)||[]).forEach(t=>{t.resolve()}),n.hc.delete(e)}function MT(n,e,t){const r=Ct(n);let o=r.ac[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.ac[r.currentUser.toKey()]=o}}function bm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ic.get(e))n.sc.delete(r),t&&n.nc._c(r,t);n.ic.delete(e),n.isPrimaryClient&&n.cc.ls(e).forEach(r=>{n.cc.containsKey(r)||DM(n,r)})}function DM(n,e){n.rc.delete(e.path.canonicalString());const t=n.oc.get(e);null!==t&&(N_(n.remoteStore,t),n.oc=n.oc.remove(e),n.uc.delete(t),OT(n))}function xT(n,e,t){for(const r of t)r instanceof wM?(n.cc.addReference(r.key,e),TR(n,r)):r instanceof EM?(tt("SyncEngine","Document no longer in limbo: "+r.key),n.cc.removeReference(r.key,e),n.cc.containsKey(r.key)||DM(n,r.key)):St()}function TR(n,e){const t=e.key,r=t.path.canonicalString();n.oc.get(t)||n.rc.has(r)||(tt("SyncEngine","New document in limbo: "+t),n.rc.add(r),OT(n))}function OT(n){for(;n.rc.size>0&&n.oc.size<n.maxConcurrentLimboResolutions;){const e=n.rc.values().next().value;n.rc.delete(e);const t=new mt(tr.fromString(e)),r=n.lc.next();n.uc.set(r,new yR(t)),n.oc=n.oc.insert(t,r),II(n.remoteStore,new pu(Ts(ml(t.path)),r,2,Gr.at))}}function El(n,e,t){return RT.apply(this,arguments)}function RT(){return RT=(0,Ne.Z)(function*(n,e,t){const r=Ct(n),o=[],u=[],d=[];var g;r.sc.isEmpty()||(r.sc.forEach((g,v)=>{d.push(r.dc(v,e,t).then(C=>{if(C){r.isPrimaryClient&&r.sharedClientState.updateQueryState(v.targetId,C.fromCache?"not-current":"current"),o.push(C);const S=VD.Ci(v.targetId,C);u.push(S)}}))}),yield Promise.all(d),r.nc.Wo(o),yield(g=(0,Ne.Z)(function*(v,C){const S=Ct(v);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",O=>ve.forEach(C,G=>ve.forEach(G.Si,ee=>S.persistence.referenceDelegate.addReference(O,G.targetId,ee)).next(()=>ve.forEach(G.Di,ee=>S.persistence.referenceDelegate.removeReference(O,G.targetId,ee)))))}catch(O){if(!cu(O))throw O;tt("LocalStore","Failed to update sequence numbers: "+O)}for(const O of C){const G=O.targetId;if(!O.fromCache){const ee=S.Ui.get(G),Je=ee.withLastLimboFreeSnapshotVersion(ee.snapshotVersion);S.Ui=S.Ui.insert(G,Je)}}}),function(v,C){return g.apply(this,arguments)})(r.localStore,u))}),RT.apply(this,arguments)}function SR(n,e){return PT.apply(this,arguments)}function PT(){return PT=(0,Ne.Z)(function*(n,e){const t=Ct(n);if(!t.currentUser.isEqual(e)){tt("SyncEngine","User change. New user:",e.toKey());const r=yield XA(t.localStore,e);t.currentUser=e,(o=t).hc.forEach(d=>{d.forEach(g=>{g.reject(new Ke(Se.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.hc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield El(t,r.ji)}var o}),PT.apply(this,arguments)}function AR(n,e){const t=Ct(n),r=t.uc.get(e);if(r&&r.ec)return Mn().add(r.key);{let o=Mn();const u=t.ic.get(e);if(!u)return o;for(const d of u){const g=t.sc.get(d);o=o.unionWith(g.view.Qu)}return o}}function MR(n,e){return NT.apply(this,arguments)}function NT(){return NT=(0,Ne.Z)(function*(n,e){const t=Ct(n),r=yield vI(t.localStore,e.query,!0),o=e.view.Zu(r);return t.isPrimaryClient&&xT(t,e.targetId,o.Yu),o}),NT.apply(this,arguments)}function xR(n,e){return kT.apply(this,arguments)}function kT(){return kT=(0,Ne.Z)(function*(n,e){const t=Ct(n);return rM(t.localStore,e).then(r=>El(t,r))}),kT.apply(this,arguments)}function OR(n,e,t,r){return FT.apply(this,arguments)}function FT(){return FT=(0,Ne.Z)(function*(n,e,t,r){const o=Ct(n),u=yield function(d,g){const v=Ct(d),C=Ct(v.mutationQueue);return v.persistence.runTransaction("Lookup mutation documents","readonly",S=>C.Tn(S,g).next(O=>O?v.localDocuments.getDocuments(S,O):ve.resolve(null)))}(o.localStore,e);var g;null!==u?("pending"===t?yield vm(o.remoteStore):"acknowledged"===t||"rejected"===t?(MT(o,e,r||null),AT(o,e),g=e,Ct(Ct(o.localStore).mutationQueue).An(g)):St(),yield El(o,u)):tt("SyncEngine","Cannot apply mutation batch with id: "+e)}),FT.apply(this,arguments)}function LT(){return LT=(0,Ne.Z)(function*(n,e){const t=Ct(n);if(jT(t),$T(t),!0===e&&!0!==t.fc){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield TM(t,r.toArray());t.fc=!0,yield cT(t.remoteStore,!0);for(const u of o)II(t.remoteStore,u)}else if(!1===e&&!1!==t.fc){const r=[];let o=Promise.resolve();t.ic.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(bm(t,d),mm(t.localStore,d,!0))),N_(t.remoteStore,d)}),yield o,yield TM(t,r),function(u){const d=Ct(u);d.uc.forEach((g,v)=>{N_(d.remoteStore,v)}),d.cc.fs(),d.uc=new Map,d.oc=new Yr(mt.comparator)}(t),t.fc=!1,yield cT(t.remoteStore,!1)}}),LT.apply(this,arguments)}function TM(n,e,t){return VT.apply(this,arguments)}function VT(){return VT=(0,Ne.Z)(function*(n,e,t){const r=Ct(n),o=[],u=[];for(const d of e){let g;const v=r.ic.get(d);if(v&&0!==v.length){g=yield gm(r.localStore,Ts(v[0]));for(const C of v){const S=r.sc.get(C),O=yield MR(r,S);O.snapshot&&u.push(O.snapshot)}}else{const C=yield nM(r.localStore,d);g=yield gm(r.localStore,C),yield _T(r,SM(C),d,!1)}o.push(g)}return r.nc.Wo(u),o}),VT.apply(this,arguments)}function SM(n){return GE(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function PR(n){const e=Ct(n);return Ct(Ct(e.localStore).persistence).vi()}function NR(n,e,t,r){return UT.apply(this,arguments)}function UT(){return UT=(0,Ne.Z)(function*(n,e,t,r){const o=Ct(n);if(o.fc)return void tt("SyncEngine","Ignoring unexpected query state notification.");const u=o.ic.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield rM(o.localStore,i_(u[0])),g=Gd.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield El(o,d,g);break}case"rejected":yield mm(o.localStore,e,!0),bm(o,e,r);break;default:St()}}),UT.apply(this,arguments)}function kR(n,e,t){return BT.apply(this,arguments)}function BT(){return BT=(0,Ne.Z)(function*(n,e,t){const r=jT(n);if(r.fc){for(const o of e){if(r.ic.has(o)){tt("SyncEngine","Adding an already active target "+o);continue}const u=yield nM(r.localStore,o),d=yield gm(r.localStore,u);yield _T(r,SM(u),d.targetId,!1),II(r.remoteStore,d)}for(const o of t)r.ic.has(o)&&(yield mm(r.localStore,o,!1).then(()=>{N_(r.remoteStore,o),bm(r,o)}).catch(uu))}}),BT.apply(this,arguments)}function jT(n){const e=Ct(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=bM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=IR.bind(null,e),e.nc.Wo=hR.bind(null,e.eventManager),e.nc._c=fR.bind(null,e.eventManager),e}function $T(n){const e=Ct(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=CR.bind(null,e),e}class AM{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ne.Z)(function*(){t.It=R_(e.databaseInfo.databaseId),t.sharedClientState=t.mc(e),t.persistence=t.gc(e),yield t.persistence.start(),t.localStore=t.yc(e),t.gcScheduler=t.Ic(e,t.localStore),t.indexBackfillerScheduler=t.Tc(e,t.localStore)})()}Ic(e,t){return null}Tc(e,t){return null}yc(e){return JA(this.persistence,new QA,e.initialUser,this.It)}gc(e){return new KA(mI.Bs,this.It)}mc(e){return new aM}terminate(){var e=this;return(0,Ne.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class MM extends AM{constructor(e,t,r){super(),this.Ec=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ne.Z)(function*(){yield t().call(r,e),yield r.Ec.initialize(r,e),yield $T(r.Ec.syncEngine),yield vm(r.Ec.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}yc(e){return JA(this.persistence,new QA,e.initialUser,this.It)}Ic(e,t){return new TO(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Tc(e,t){const r=new Gv(t,this.persistence);return new YC(e.asyncQueue,r)}gc(e){const t=LD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ue.withCacheSize(this.cacheSizeBytes):Ue.DEFAULT;return new FD(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,cM(),EI(),this.It,this.sharedClientState,!!this.forceOwnership)}mc(e){return new aM}}class LR extends MM{constructor(e,t){super(e,t,!1),this.Ec=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ne.Z)(function*(){yield t().call(r,e);const o=r.Ec.syncEngine;r.sharedClientState instanceof WD&&(r.sharedClientState.syncEngine={Fr:OR.bind(null,o),$r:NR.bind(null,o),Br:kR.bind(null,o),vi:PR.bind(null,o),Or:xR.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,Ne.Z)(function*(d){yield function RR(n,e){return LT.apply(this,arguments)}(r.Ec.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start():d||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(d&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():d||r.indexBackfillerScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}mc(e){const t=cM();if(!WD.C(t))throw new Ke(Se.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=LD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new WD(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class HT{initialize(e,t){var r=this;return(0,Ne.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>CM(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=SR.bind(null,r.syncEngine),yield cT(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new dR}createDatastore(e){const t=R_(e.databaseInfo.databaseId),r=new KO(e.databaseInfo);return new JO(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=g=>CM(this.syncEngine,g,0),d=uM.C()?new uM:new WO,new eR(t,r,o,u,d);var t,r,o,u,d}createSyncEngine(e,t){return function(r,o,u,d,g,v,C){const S=new vR(r,o,u,d,g,v);return C&&(S.fc=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ne.Z)(function*(t){const r=Ct(t);tt("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield ym(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function xM(n,e=10240){let t=0;return{read:()=>(0,Ne.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ne.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class CI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ac(this.observer.next,e)}error(e){this.observer.error?this.Ac(this.observer.error,e):Hr("Uncaught Error in snapshot listener:",e)}Rc(){this.muted=!0}Ac(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class VR{constructor(e,t){this.bc=e,this.It=t,this.metadata=new Mi,this.buffer=new Uint8Array,this.Pc=new TextDecoder("utf-8"),this.vc().then(r=>{r&&r.ku()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.bc.cancel()}getMetadata(){var e=this;return(0,Ne.Z)(function*(){return e.metadata.promise})()}wc(){var e=this;return(0,Ne.Z)(function*(){return yield e.getMetadata(),e.vc()})()}vc(){var e=this;return(0,Ne.Z)(function*(){const t=yield e.Vc();if(null===t)return null;const r=e.Pc.decode(t),o=Number(r);isNaN(o)&&e.Sc(`length string (${r}) is not valid number`);const u=yield e.Dc(o);return new pR(JSON.parse(u),t.length+o)})()}Cc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Vc(){var e=this;return(0,Ne.Z)(function*(){for(;e.Cc()<0&&!(yield e.xc()););if(0===e.buffer.length)return null;const t=e.Cc();t<0&&e.Sc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Dc(e){var t=this;return(0,Ne.Z)(function*(){for(;t.buffer.length<e;)(yield t.xc())&&t.Sc("Reached the end of bundle when more is expected.");const r=t.Pc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Sc(e){throw this.bc.cancel(),new Error(`Invalid bundle format: ${e}`)}xc(){var e=this;return(0,Ne.Z)(function*(){const t=yield e.bc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class UR{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ne.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ke(Se.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,Ne.Z)(function*(u,d){const g=Ct(u),v=Wd(g.It)+"/documents",C={documents:d.map(ee=>Yf(g.It,ee))},S=yield g.fo("BatchGetDocuments",v,C,d.length),O=new Map;S.forEach(ee=>{const ge=function nI(n,e){return"found"in e?function(t,r){dn(!!r.found);const o=Lo(t,r.found.name),u=Ii(r.found.updateTime),d=new Oi({mapValue:{fields:r.found.fields}});return Cr.newFoundDocument(o,u,d)}(n,e):"missing"in e?function(t,r){dn(!!r.missing),dn(!!r.readTime);const o=Lo(t,r.missing),u=Ii(r.readTime);return Cr.newNoDocument(o,u)}(n,e):St()}(g.It,ee);O.set(ge.key.toString(),ge)});const G=[];return d.forEach(ee=>{const ge=O.get(ee.toString());dn(!!ge),G.push(ge)}),G}),function(u,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Hd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ne.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=mt.fromPath(o);e.mutations.push(new c_(u,e.precondition(u)))}),yield(r=(0,Ne.Z)(function*(o,u){const d=Ct(o),g=Wd(d.It)+"/documents",v={writes:u.map(C=>ac(d.It,C))};yield d.co("Commit",g,v)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw St();t=un.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ke(Se.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(un.min())?Nr.exists(!1):Nr.updateTime(t):Nr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(un.min()))throw new Ke(Se.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Nr.updateTime(t)}return Nr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class BR{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.Nc=r.maxAttempts,this.xo=new qD(this.asyncQueue,"transaction_retry")}run(){this.Nc-=1,this.kc()}kc(){var e=this;this.xo.Ao((0,Ne.Z)(function*(){const t=new UR(e.datastore),r=e.Mc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Oc(u)}))}).catch(o=>{e.Oc(o)})}))}Mc(e){try{const t=this.updateFunction(e);return!pl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Oc(e){this.Nc>0&&this.Fc(e)?(this.Nc-=1,this.asyncQueue.enqueueAndForget(()=>(this.kc(),Promise.resolve()))):this.deferred.reject(e)}Fc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!l_(t)}return!1}}class jR{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=li.UNAUTHENTICATED,this.clientId=AE.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,Ne.Z)(function*(g){tt("FirestoreClient","Received user=",g.uid),yield u.authCredentialListener(g),u.user=g});return function(g){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(tt("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,Ne.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ke(Se.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Mi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ne.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=wm(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function OM(n,e){return GT.apply(this,arguments)}function GT(){return GT=(0,Ne.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),tt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,Ne.Z)(function*(u){r.isEqual(u)||(yield XA(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),GT.apply(this,arguments)}function RM(n,e){return zT.apply(this,arguments)}function zT(){return zT=(0,Ne.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield WT(n);tt("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>mM(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>mM(e.remoteStore,u)),n.onlineComponents=e}),zT.apply(this,arguments)}function WT(n){return qT.apply(this,arguments)}function qT(){return qT=(0,Ne.Z)(function*(n){return n.offlineComponents||(tt("FirestoreClient","Using default OfflineComponentProvider"),yield OM(n,new AM)),n.offlineComponents}),qT.apply(this,arguments)}function DI(n){return ZT.apply(this,arguments)}function ZT(){return ZT=(0,Ne.Z)(function*(n){return n.onlineComponents||(tt("FirestoreClient","Using default OnlineComponentProvider"),yield RM(n,new HT)),n.onlineComponents}),ZT.apply(this,arguments)}function PM(n){return WT(n).then(e=>e.persistence)}function TI(n){return WT(n).then(e=>e.localStore)}function NM(n){return DI(n).then(e=>e.remoteStore)}function KT(n){return DI(n).then(e=>e.syncEngine)}function Cm(n){return YT.apply(this,arguments)}function YT(){return YT=(0,Ne.Z)(function*(n){const e=yield DI(n),t=e.eventManager;return t.onListen=_R.bind(null,e.syncEngine),t.onUnlisten=wR.bind(null,e.syncEngine),t}),YT.apply(this,arguments)}function kM(n,e,t={}){const r=new Mi;return n.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){return function(o,u,d,g,v){const C=new CI({next:O=>{u.enqueueAndForget(()=>pT(o,S));const G=O.docs.has(d);!G&&O.fromCache?v.reject(new Ke(Se.UNAVAILABLE,"Failed to get document because the client is offline.")):G&&O.fromCache&&g&&"server"===g.source?v.reject(new Ke(Se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(O)},error:O=>v.reject(O)}),S=new yT(ml(d.path),C,{includeMetadataChanges:!0,Nu:!0});return hT(o,S)}(yield Cm(n),n.asyncQueue,e,t,r)})),r.promise}function FM(n,e,t={}){const r=new Mi;return n.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){return function(o,u,d,g,v){const C=new CI({next:O=>{u.enqueueAndForget(()=>pT(o,S)),O.fromCache&&"server"===g.source?v.reject(new Ke(Se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(O)},error:O=>v.reject(O)}),S=new yT(d,C,{includeMetadataChanges:!0,Nu:!0});return hT(o,S)}(yield Cm(n),n.asyncQueue,e,t,r)})),r.promise}const LM=new Map;function QT(n,e,t){if(!t)throw new Ke(Se.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function VM(n,e,t,r){if(!0===e&&!0===r)throw new Ke(Se.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function UM(n){if(!mt.isDocumentKey(n))throw new Ke(Se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function BM(n){if(mt.isDocumentKey(n))throw new Ke(Se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function SI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":St()}function nr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ke(Se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=SI(n);throw new Ke(Se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function jM(n,e){if(e<=0)throw new Ke(Se.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class $M{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ke(Se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ke(Se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,VM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class k_{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $M({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ke(Se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ke(Se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $M(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new GC;switch(t.type){case"gapi":return new TE(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ke(Se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=LM.get(e);t&&(tt("ComponentProvider","Removing Datastore"),LM.delete(e),t.terminate())}(this),Promise.resolve()}}class zr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new dc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zr(this.firestore,e,this._key)}}class As{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new As(this.firestore,e,this._query)}}class dc extends As{constructor(e,t,r){super(e,t,ml(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zr(this.firestore,null,new mt(e))}withConverter(e){return new dc(this.firestore,e,this._path)}}function HM(n,e,...t){if(n=(0,Hn.m9)(n),QT("collection","path",e),n instanceof k_){const r=tr.fromString(e,...t);return BM(r),new dc(n,null,r)}{if(!(n instanceof zr||n instanceof dc))throw new Ke(Se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tr.fromString(e,...t));return BM(r),new dc(n.firestore,null,r)}}function AI(n,e,...t){if(n=(0,Hn.m9)(n),1===arguments.length&&(e=AE.R()),QT("doc","path",e),n instanceof k_){const r=tr.fromString(e,...t);return UM(r),new zr(n,null,new mt(r))}{if(!(n instanceof zr||n instanceof dc))throw new Ke(Se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tr.fromString(e,...t));return UM(r),new zr(n.firestore,n instanceof dc?n.converter:null,new mt(r))}}function GM(n,e){return n=(0,Hn.m9)(n),e=(0,Hn.m9)(e),(n instanceof zr||n instanceof dc)&&(e instanceof zr||e instanceof dc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function zM(n,e){return n=(0,Hn.m9)(n),e=(0,Hn.m9)(e),n instanceof As&&e instanceof As&&n.firestore===e.firestore&&Uf(n._query,e._query)&&n.converter===e.converter}class JR{constructor(){this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new qD(this,"async_queue_retry"),this.jc=()=>{const t=EI();t&&tt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.bo()};const e=EI();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.jc)}get isShuttingDown(){return this.Lc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Wc(),this.zc(e)}enterRestrictedMode(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;const t=EI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.jc)}}enqueue(e){if(this.Wc(),this.Lc)return new Promise(()=>{});const t=new Mi;return this.zc(()=>this.Lc&&this.Gc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Bc.push(e),this.Hc()))}Hc(){var e=this;return(0,Ne.Z)(function*(){if(0!==e.Bc.length){try{yield e.Bc[0](),e.Bc.shift(),e.xo.reset()}catch(t){if(!cu(t))throw t;tt("AsyncQueue","Operation failed with retryable error: "+t)}e.Bc.length>0&&e.xo.Ao(()=>e.Hc())}})()}zc(e){const t=this.$c.then(()=>(this.Kc=!0,e().catch(r=>{throw this.qc=r,this.Kc=!1,Hr("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.Kc=!1,r))));return this.$c=t,t}enqueueAfterDelay(e,t,r){this.Wc(),this.Qc.indexOf(e)>-1&&(t=0);const o=dT.createAndSchedule(this,e,t,r,u=>this.Jc(u));return this.Uc.push(o),o}Wc(){this.qc&&St()}verifyOperationInProgress(){}Yc(){var e=this;return(0,Ne.Z)(function*(){let t;do{t=e.$c,yield t}while(t!==e.$c)})()}Xc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}Zc(e){return this.Yc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Yc()})}ta(e){this.Qc.push(e)}Jc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function JT(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class XR{constructor(){this._progressObserver={},this._taskCompletionResolver=new Mi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Jr extends k_{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new JR,this._persistenceKey=(null==o?void 0:o.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||WM(this),this._firestoreClient.terminate()}}function tP(n,e){const t="object"==typeof n?n:(0,Cs.getApp)(),r="string"==typeof n?n:e||"(default)";return(0,Cs._getProvider)(t,"firestore").getImmediate({identifier:r})}function Ni(n){return n._firestoreClient||WM(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function WM(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new kE(n._databaseId,u,n._persistenceKey,(g=t).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,g.useFetchStreams));var u,g;n._firestoreClient=new jR(n._authCredentials,n._appCheckCredentials,n._queue,r)}function qM(n,e,t){const r=new Mi;return n.asyncQueue.enqueue((0,Ne.Z)(function*(){try{yield OM(n,t),yield RM(n,e),r.resolve()}catch(o){const u=o;if(!("FirebaseError"===(d=u).name?d.code===Se.FAILED_PRECONDITION||d.code===Se.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&d instanceof DOMException)||22===d.code||20===d.code||11===d.code))throw u;al("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var d})).then(()=>r.promise)}function ZM(n){if(n._initialized||n._terminated)throw new Ke(Se.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Il{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ke(Se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class hc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new hc(di.fromBase64String(e))}catch(t){throw new Ke(Se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new hc(di.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ep{constructor(e){this._methodName=e}}class MI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ke(Se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ke(Se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return In(this._lat,e._lat)||In(this._long,e._long)}}const lP=/^__.*__$/;class dP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new oc(e,this.data,this.fieldMask,t,this.fieldTransforms):new $d(e,this.data,t,this.fieldTransforms)}}class KM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new oc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function YM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw St()}}class xI{constructor(e,t,r,o,u,d){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=o,void 0===u&&this.ea(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get na(){return this.settings.na}sa(e){return new xI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.sa({path:r,ra:!1});return o.oa(e),o}ua(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.sa({path:r,ra:!1});return o.ea(),o}ca(e){return this.sa({path:void 0,ra:!0})}aa(e){return PI(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ea(){if(this.path)for(let e=0;e<this.path.length;e++)this.oa(this.path.get(e))}oa(e){if(0===e.length)throw this.aa("Document fields must not be empty");if(YM(this.na)&&lP.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}class hP{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||R_(e)}fa(e,t,r,o=!1){return new xI({na:e,methodName:t,la:r,path:Kr.emptyPath(),ra:!1,ha:o},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function tp(n){const e=n._freezeSettings(),t=R_(n._databaseId);return new hP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function OI(n,e,t,r,o,u={}){const d=n.fa(u.merge||u.mergeFields?2:0,e,t,o);nS("Data must be an object, but it was:",d,r);const g=XM(r,d);let v,C;if(u.merge)v=new Ws(d.fieldMask),C=d.fieldTransforms;else if(u.mergeFields){const S=[];for(const O of u.mergeFields){const G=rS(e,O,t);if(!d.contains(G))throw new Ke(Se.INVALID_ARGUMENT,`Field '${G}' is specified in your field mask but missing from your input data.`);tx(S,G)||S.push(G)}v=new Ws(S),C=d.fieldTransforms.filter(O=>v.covers(O.field))}else v=null,C=d.fieldTransforms;return new dP(new Oi(g),v,C)}class F_ extends ep{_toFieldTransform(e){if(2!==e.na)throw e.aa(1===e.na?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof F_}}function QM(n,e,t){return new xI({na:3,la:e.settings.la,methodName:n._methodName,ra:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class XT extends ep{_toFieldTransform(e){return new jd(e.path,new Bf)}isEqual(e){return e instanceof XT}}class fP extends ep{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=QM(this,e,!0),r=this.da.map(u=>np(u,t)),o=new Bd(r);return new jd(e.path,o)}isEqual(e){return this===e}}class pP extends ep{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=QM(this,e,!0),r=this.da.map(u=>np(u,t)),o=new Ia(r);return new jd(e.path,o)}isEqual(e){return this===e}}class gP extends ep{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=new yl(e.It,sD(e.It,this._a));return new jd(e.path,t)}isEqual(e){return this===e}}function eS(n,e,t,r){const o=n.fa(1,e,t);nS("Data must be an object, but it was:",o,r);const u=[],d=Oi.empty();lu(r,(v,C)=>{const S=RI(e,v,t);C=(0,Hn.m9)(C);const O=o.ua(S);if(C instanceof F_)u.push(S);else{const G=np(C,O);null!=G&&(u.push(S),d.set(S,G))}});const g=new Ws(u);return new KM(d,g,o.fieldTransforms)}function tS(n,e,t,r,o,u){const d=n.fa(1,e,t),g=[rS(e,r,t)],v=[o];if(u.length%2!=0)throw new Ke(Se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let G=0;G<u.length;G+=2)g.push(rS(e,u[G])),v.push(u[G+1]);const C=[],S=Oi.empty();for(let G=g.length-1;G>=0;--G)if(!tx(C,g[G])){const ee=g[G];let ge=v[G];ge=(0,Hn.m9)(ge);const Je=d.ua(ee);if(ge instanceof F_)C.push(ee);else{const ot=np(ge,Je);null!=ot&&(C.push(ee),S.set(ee,ot))}}const O=new Ws(C);return new KM(S,O,d.fieldTransforms)}function JM(n,e,t,r=!1){return np(t,n.fa(r?4:3,e))}function np(n,e){if(ex(n=(0,Hn.m9)(n)))return nS("Unsupported field value:",e,n),XM(n,e);if(n instanceof ep)return function(t,r){if(!YM(r.na))throw r.aa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.aa(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ra&&4!==e.na)throw e.aa("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const d of t){let g=np(d,r.ca(u));null==g&&(g={nullValue:"NULL_VALUE"}),o.push(g),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,Hn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return sD(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Pr.fromDate(t);return{timestampValue:Kf(r.It,o)}}if(t instanceof Pr){const o=new Pr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Kf(r.It,o)}}if(t instanceof MI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof hc)return{bytesValue:XE(r.It,t._byteString)};if(t instanceof zr){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.aa(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:eI(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.aa(`Unsupported field value: ${SI(t)}`)}(n,e)}function XM(n,e){const t={};return Pd(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):lu(n,(r,o)=>{const u=np(o,e.ia(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function ex(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Pr||n instanceof MI||n instanceof hc||n instanceof zr||n instanceof ep)}function nS(n,e,t){if(!ex(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=SI(t);throw e.aa("an object"===r?n+" a custom object":n+" "+r)}var r}function rS(n,e,t){if((e=(0,Hn.m9)(e))instanceof Il)return e._internalPath;if("string"==typeof e)return RI(n,e);throw PI("Field path arguments must be of type string or ",n,!1,void 0,t)}const mP=new RegExp("[~\\*/\\[\\]]");function RI(n,e,t){if(e.search(mP)>=0)throw PI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Il(...e.split("."))._internalPath}catch(r){throw PI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function PI(n,e,t,r,o){const u=r&&!r.isEmpty(),d=void 0!==o;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let v="";return(u||d)&&(v+=" (found",u&&(v+=` in field ${r}`),d&&(v+=` in document ${o}`),v+=")"),new Ke(Se.INVALID_ARGUMENT,g+n+v)}function tx(n,e){return n.some(t=>t.isEqual(e))}class L_{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new zr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new yP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(NI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class yP extends L_{data(){return super.data()}}function NI(n,e){return"string"==typeof e?RI(n,e):e instanceof Il?e._internalPath:e._delegate._internalPath}class rp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class bl extends L_{constructor(e,t,r,o,u,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new V_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(NI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class V_ extends bl{data(e={}){return super.data(e)}}class Xd{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new rp(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new V_(this._firestore,this._userDataWriter,r.key,r,new rp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ke(Se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new V_(r._firestore,r._userDataWriter,d.doc.key,d.doc,new rp(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const g=new V_(r._firestore,r._userDataWriter,d.doc.key,d.doc,new rp(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let v=-1,C=-1;return 0!==d.type&&(v=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),C=u.indexOf(d.doc.key)),{type:vP(d.type),doc:g,oldIndex:v,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function vP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return St()}}function nx(n,e){return n instanceof bl&&e instanceof bl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Xd&&e instanceof Xd&&n._firestore===e._firestore&&zM(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function rx(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ke(Se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class U_{}function eh(n,...e){for(const t of e)n=t._apply(n);return n}class _P extends U_{constructor(e,t,r){super(),this.wa=e,this.ma=t,this.ga=r,this.type="where"}_apply(e){const t=tp(e.firestore),r=function(o,u,d,g,v,C,S){let O;if(v.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new Ke(Se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){cx(S,C);const ee=[];for(const ge of S)ee.push(ux(g,o,ge));O={arrayValue:{values:ee}}}else O=ux(g,o,S)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||cx(S,C),O=JM(d,"where",S,"in"===C||"not-in"===C);const G=hi.create(v,C,O);return function(ee,ge){if(ge.dt()){const ot=Jg(ee);if(null!==ot&&!ot.isEqual(ge.field))throw new Ke(Se.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ot.toString()}' and '${ge.field.toString()}'`);const Qt=n_(ee);null!==Qt&&lx(0,ge.field,Qt)}const Je=function(ot,Qt){for(const vn of ot.filters)if(Qt.indexOf(vn.op)>=0)return vn.op;return null}(ee,function(ot){switch(ot){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ge.op));if(null!==Je)throw new Ke(Se.INVALID_ARGUMENT,Je===ge.op?`Invalid query. You cannot use more than one '${ge.op.toString()}' filter.`:`Invalid query. You cannot use '${ge.op.toString()}' filters with '${Je.toString()}' filters.`)}(o,G),G}(e._query,0,t,e.firestore._databaseId,this.wa,this.ma,this.ga);return new As(e.firestore,e.converter,function(o,u){const d=o.filters.concat([u]);return new fu(o.path,o.collectionGroup,o.explicitOrderBy.slice(),d,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class EP extends U_{constructor(e,t){super(),this.wa=e,this.ya=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Ke(Se.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ke(Se.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Lf(o,u);return function(g,v){if(null===n_(g)){const C=Jg(g);null!==C&&lx(0,C,v.field)}}(r,d),d}(e._query,this.wa,this.ya);return new As(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new fu(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class ix extends U_{constructor(e,t,r){super(),this.type=e,this.pa=t,this.Ia=r}_apply(e){return new As(e.firestore,e.converter,Vf(e._query,this.pa,this.Ia))}}class sx extends U_{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=ax(e,this.type,this.Ta,this.Ea);return new As(e.firestore,e.converter,(o=t,new fu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class ox extends U_{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=ax(e,this.type,this.Ta,this.Ea);return new As(e.firestore,e.converter,(o=t,new fu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function ax(n,e,t,r){if(t[0]=(0,Hn.m9)(t[0]),t[0]instanceof L_)return function(o,u,d,g,v){if(!g)throw new Ke(Se.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const C=[];for(const S of Ud(o))if(S.field.isKeyField())C.push(ic(u,g.key));else{const O=g.data.field(S.field);if(NE(O))throw new Ke(Se.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===O){const G=S.field.canonicalString();throw new Ke(Se.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${G}' (used as the orderBy) does not exist.`)}C.push(O)}return new Ea(C,v)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=tp(n.firestore);return function(u,d,g,v,C,S){const O=u.explicitOrderBy;if(C.length>O.length)throw new Ke(Se.INVALID_ARGUMENT,`Too many arguments provided to ${v}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const G=[];for(let ee=0;ee<C.length;ee++){const ge=C[ee];if(O[ee].field.isKeyField()){if("string"!=typeof ge)throw new Ke(Se.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${v}(), but got a ${typeof ge}`);if(!Xg(u)&&-1!==ge.indexOf("/"))throw new Ke(Se.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${v}() must be a plain document ID, but '${ge}' contains a slash.`);const Je=u.path.child(tr.fromString(ge));if(!mt.isDocumentKey(Je))throw new Ke(Se.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${v}() must result in a valid document path, but '${Je}' is not because it contains an odd number of segments.`);const ot=new mt(Je);G.push(ic(d,ot))}else{const Je=JM(g,v,ge);G.push(Je)}}return new Ea(G,S)}(n._query,n.firestore._databaseId,o,e,t,r)}}function ux(n,e,t){if("string"==typeof(t=(0,Hn.m9)(t))){if(""===t)throw new Ke(Se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Xg(e)&&-1!==t.indexOf("/"))throw new Ke(Se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(tr.fromString(t));if(!mt.isDocumentKey(r))throw new Ke(Se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ic(n,new mt(r))}if(t instanceof zr)return ic(n,t._key);throw new Ke(Se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${SI(t)}.`)}function cx(n,e){if(!Array.isArray(n)||0===n.length)throw new Ke(Se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ke(Se.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function lx(n,e,t){if(!t.isEqual(e))throw new Ke(Se.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const MP={maxAttempts:5};class iS{convertValue(e,t="none"){switch(rc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(hl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw St()}}convertObject(e,t){const r={};return lu(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new MI(Qr(e.latitude),Qr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Zg(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(fl(e));default:return null}}convertTimestamp(e){const t=du(e);return new Pr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=tr.fromString(e);dn(ID(r));const o=new _a(r.get(1),r.get(3)),u=new mt(r.popFirst(5));return o.isEqual(t)||Hr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function kI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class xP extends iS{constructor(e){super(),this.firestore=e}convertBytes(e){return new hc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zr(this.firestore,null,t)}}class dx{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=tp(e)}set(e,t,r){this._verifyNotCommitted();const o=th(e,this._firestore),u=kI(o.converter,t,r),d=OI(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,Nr.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=th(e,this._firestore);let d;return d="string"==typeof(t=(0,Hn.m9)(t))||t instanceof Il?tS(this._dataReader,"WriteBatch.update",u._key,t,r,o):eS(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,Nr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=th(e,this._firestore);return this._mutations=this._mutations.concat(new Hd(t._key,Nr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ke(Se.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function th(n,e){if((n=(0,Hn.m9)(n)).firestore!==e)throw new Ke(Se.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class ip extends iS{constructor(e){super(),this.firestore=e}convertBytes(e){return new hc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zr(this.firestore,null,t)}}function hx(n,e,t){n=nr(n,zr);const r=nr(n.firestore,Jr),o=kI(n.converter,e,t);return Dm(r,[OI(tp(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Nr.none())])}function fx(n,e,t,...r){n=nr(n,zr);const o=nr(n.firestore,Jr),u=tp(o);let d;return d="string"==typeof(e=(0,Hn.m9)(e))||e instanceof Il?tS(u,"updateDoc",n._key,e,t,r):eS(u,"updateDoc",n._key,e),Dm(o,[d.toMutation(n._key,Nr.exists(!0))])}function px(n,...e){var t,r,o;n=(0,Hn.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||JT(e[d])||(u=e[d],d++);const g={includeMetadataChanges:u.includeMetadataChanges};if(JT(e[d])){const O=e[d];e[d]=null===(t=O.next)||void 0===t?void 0:t.bind(O),e[d+1]=null===(r=O.error)||void 0===r?void 0:r.bind(O),e[d+2]=null===(o=O.complete)||void 0===o?void 0:o.bind(O)}let v,C,S;if(n instanceof zr)C=nr(n.firestore,Jr),S=ml(n._key.path),v={next:O=>{e[d]&&e[d](sS(C,n,O))},error:e[d+1],complete:e[d+2]};else{const O=nr(n,As);C=nr(O.firestore,Jr),S=O._query;const G=new ip(C);v={next:ee=>{e[d]&&e[d](new Xd(C,G,O,ee))},error:e[d+1],complete:e[d+2]},rx(n._query)}return function(O,G,ee,ge){const Je=new CI(ge),ot=new yT(G,Je,ee);return O.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){return hT(yield Cm(O),ot)})),()=>{Je.Rc(),O.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){return pT(yield Cm(O),ot)}))}}(Ni(C),S,g,v)}function Dm(n,e){return function(t,r){const o=new Mi;return t.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){return function ER(n,e,t){return IT.apply(this,arguments)}(yield KT(t),r,o)})),o.promise}(Ni(n),e)}function sS(n,e,t){const r=t.docs.get(e._key),o=new ip(n);return new bl(n,o,e._key,r,new rp(t.hasPendingWrites,t.fromCache),e.converter)}class BP extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=tp(e)}get(e){const t=th(e,this._firestore),r=new xP(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return St();const u=o[0];if(u.isFoundDocument())return new L_(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new L_(this._firestore,r,t._key,null,t.converter);throw St()})}set(e,t,r){const o=th(e,this._firestore),u=kI(o.converter,t,r),d=OI(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const u=th(e,this._firestore);let d;return d="string"==typeof(t=(0,Hn.m9)(t))||t instanceof Il?tS(this._dataReader,"Transaction.update",u._key,t,r,o):eS(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=th(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=th(e,this._firestore),r=new ip(this._firestore);return super.get(e).then(o=>new bl(this._firestore,r,t._key,o._document,new rp(!1,!1),t.converter))}}function oS(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ke("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function mx(){if("undefined"==typeof Uint8Array)throw new Ke("unimplemented","Uint8Arrays are not available in this environment.")}function yx(){if(!function PE(){return"undefined"!=typeof atob}())throw new Ke("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){ec=Cs.SDK_VERSION,(0,Cs._registerComponent)(new iu.wA("firestore",(t,{instanceIdentifier:r,options:o})=>{const u=t.getProvider("app").getImmediate(),d=new Jr(new Bv(t.getProvider("auth-internal")),new SE(t.getProvider("app-check-internal")),function(g,v){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new Ke(Se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _a(g.options.projectId,v)}(u,r),u);return o=Object.assign({useFetchStreams:e},o),d._setSettings(o),d},"PUBLIC").setMultipleInstances(!0)),(0,Cs.registerVersion)(bE,"3.5.0",n),(0,Cs.registerVersion)(bE,"3.5.0","esm2017")}();class B_{constructor(e){this._delegate=e}static fromBase64String(e){return yx(),new B_(hc.fromBase64String(e))}static fromUint8Array(e){return mx(),new B_(hc.fromUint8Array(e))}toBase64(){return yx(),this._delegate.toBase64()}toUint8Array(){return mx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function aS(n){return function KP(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class YP{enableIndexedDbPersistence(e,t){return function nP(n,e){ZM(n=nr(n,Jr));const t=Ni(n),r=n._freezeSettings(),o=new HT;return qM(t,o,new MM(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function rP(n){ZM(n=nr(n,Jr));const e=Ni(n),t=n._freezeSettings(),r=new HT;return qM(e,r,new LR(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function iP(n){if(n._initialized&&!n._terminated)throw new Ke(Se.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Mi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ne.Z)(function*(){try{yield(t=(0,Ne.Z)(function*(r){if(!ko.C())return Promise.resolve();const o=r+"main";yield ko.delete(o)}),function(r){return t.apply(this,arguments)})(LD(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class vx{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof _a||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&al("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function YR(n,e,t,r={}){var o;const u=(n=nr(n,k_))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&al("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,g;if("string"==typeof r.mockUserToken)d=r.mockUserToken,g=li.MOCK_USER;else{d=(0,Hn.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new Ke(Se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new li(v)}n._authCredentials=new CE(new Hg(d,g))}}(this._delegate,e,t,r)}enableNetwork(){return function oP(n){return function $R(n){return n.asyncQueue.enqueue((0,Ne.Z)(function*(){const e=yield PM(n),t=yield NM(n);return e.setNetworkEnabled(!0),function(r){const o=Ct(r);return o._u.delete(0),P_(o)}(t)}))}(Ni(n=nr(n,Jr)))}(this._delegate)}disableNetwork(){return function aP(n){return function HR(n){return n.asyncQueue.enqueue((0,Ne.Z)(function*(){const e=yield PM(n),t=yield NM(n);return e.setNetworkEnabled(!1),(r=(0,Ne.Z)(function*(o){const u=Ct(o);u._u.add(0),yield ym(u),u.gu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Ni(n=nr(n,Jr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,VM("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function sP(n){return function(e){const t=new Mi;return e.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){return function DR(n,e){return ST.apply(this,arguments)}(yield KT(e),t)})),t.promise}(Ni(n=nr(n,Jr)))}(this._delegate)}onSnapshotsInSync(e){return function UP(n,e){return function WR(n,e){const t=new CI(e);return n.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){return r=yield Cm(n),o=t,Ct(r).Ru.add(o),void o.next();var r,o})),()=>{t.Rc(),n.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){return r=yield Cm(n),o=t,void Ct(r).Ru.delete(o);var r,o}))}}(Ni(n=nr(n,Jr)),JT(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ke("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Tm(this,HM(this._delegate,e))}catch(t){throw Zs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ta(this,AI(this._delegate,e))}catch(t){throw Zs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ks(this,function QR(n,e){if(n=nr(n,k_),QT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ke(Se.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new As(n,null,(t=e,new fu(tr.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Zs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function jP(n,e,t){n=nr(n,Jr);const r=Object.assign(Object.assign({},MP),t);return function(o){if(o.maxAttempts<1)throw new Ke(Se.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function qR(n,e,t){const r=new Mi;return n.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){const o=yield(u=n,DI(u).then(d=>d.datastore));var u;new BR(n.asyncQueue,o,t,e,r).run()})),r.promise}(Ni(n),o=>e(new BP(n,o)),r)}(this._delegate,t=>e(new _x(this,t)))}batch(){return Ni(this._delegate),new wx(new dx(this._delegate,e=>Dm(this._delegate,e)))}loadBundle(e){return function uP(n,e){const t=Ni(n=nr(n,Jr)),r=new XR;return function ZR(n,e,t,r){const o=function(u,d){let g;return g="string"==typeof u?(new TextEncoder).encode(u):u,v=function(v,C){if(v instanceof Uint8Array)return xM(v,C);if(v instanceof ArrayBuffer)return xM(new Uint8Array(v),C);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new VR(v,d);var v}(t,R_(e));n.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){!function FR(n,e,t){const r=Ct(n);var o;(o=(0,Ne.Z)(function*(u,d,g){try{const v=yield d.getMetadata();if(yield function(G,ee){const ge=Ct(G),Je=Ii(ee.createTime);return ge.persistence.runTransaction("hasNewerBundle","readonly",ot=>ge.Ns.getBundleMetadata(ot,ee.id)).then(ot=>!!ot&&ot.createTime.compareTo(Je)>=0)}(u.localStore,v))return yield d.close(),g._completeWith({taskState:"Success",documentsLoaded:(G=v).totalDocuments,bytesLoaded:G.totalBytes,totalDocuments:G.totalDocuments,totalBytes:G.totalBytes}),Promise.resolve(new Set);g._updateProgress(_M(v));const C=new gR(v,u.localStore,d.It);let S=yield d.wc();for(;S;){const G=yield C.Ou(S);G&&g._updateProgress(G),S=yield d.wc()}const O=yield C.complete();return yield El(u,O.Bu,void 0),yield function(G,ee){const ge=Ct(G);return ge.persistence.runTransaction("Save bundle","readwrite",Je=>ge.Ns.saveBundleMetadata(Je,ee))}(u.localStore,v),g._completeWith(O.progress),Promise.resolve(O.$u)}catch(v){return al("SyncEngine",`Loading bundle failed with ${v}`),g._failWith(v),Promise.resolve(new Set)}var G}),function(u,d,g){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield KT(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function cP(n,e){return function KR(n,e){return n.asyncQueue.enqueue((0,Ne.Z)(function*(){return function(t,r){const o=Ct(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.Ns.getNamedQuery(u,r))}(yield TI(n),e)}))}(Ni(n=nr(n,Jr)),e).then(t=>t?new As(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ks(this,t):null)}}class FI extends iS{constructor(e){super(),this.firestore=e}convertBytes(e){return new B_(new hc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ta.forKey(t,this.firestore,null)}}class _x{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new FI(e)}get(e){const t=op(e);return this._delegate.get(t).then(r=>new j_(this._firestore,new bl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=op(e);return r?(oS("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=op(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=op(e);return this._delegate.delete(t),this}}class wx{constructor(e){this._delegate=e}set(e,t,r){const o=op(e);return r?(oS("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=op(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=op(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class sp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new V_(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new $_(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=sp.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new sp(e,new FI(e),t),o.set(t,u)),u}}sp.INSTANCES=new WeakMap;class Ta{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new FI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ke("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ta(t,new zr(t._delegate,r,new mt(e)))}static forKey(e,t,r){return new Ta(t,new zr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Tm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Tm(this.firestore,HM(this._delegate,e))}catch(t){throw Zs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Hn.m9)(e))instanceof zr&&GM(this._delegate,e)}set(e,t){t=oS("DocumentReference.set",t);try{return t?hx(this._delegate,e,t):hx(this._delegate,e)}catch(r){throw Zs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?fx(this._delegate,e):fx(this._delegate,e,t,...r)}catch(o){throw Zs(o,"updateDoc()","DocumentReference.update()")}}delete(){return function LP(n){return Dm(nr(n.firestore,Jr),[new Hd(n._key,Nr.none())])}(this._delegate)}onSnapshot(...e){const t=Ex(e),r=Ix(e,o=>new j_(this.firestore,new bl(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return px(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function RP(n){n=nr(n,zr);const e=nr(n.firestore,Jr),t=Ni(e),r=new ip(e);return function GR(n,e){const t=new Mi;return n.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){return(r=(0,Ne.Z)(function*(o,u,d){try{const g=yield function(v,C){const S=Ct(v);return S.persistence.runTransaction("read document","readonly",O=>S.localDocuments.getDocument(O,C))}(o,u);g.isFoundDocument()?d.resolve(g):g.isNoDocument()?d.resolve(null):d.reject(new Ke(Se.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const v=wm(g,`Failed to get document '${u} from cache`);d.reject(v)}}),function(o,u,d){return r.apply(this,arguments)})(yield TI(n),e,t);var r})),t.promise}(t,n._key).then(o=>new bl(e,r,n._key,o,new rp(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function PP(n){n=nr(n,zr);const e=nr(n.firestore,Jr);return kM(Ni(e),n._key,{source:"server"}).then(t=>sS(e,n,t))}(this._delegate):function OP(n){n=nr(n,zr);const e=nr(n.firestore,Jr);return kM(Ni(e),n._key).then(t=>sS(e,n,t))}(this._delegate),t.then(r=>new j_(this.firestore,new bl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ta(this.firestore,this._delegate.withConverter(e?sp.getInstance(this.firestore,e):null))}}function Zs(n,e,t){return n.message=n.message.replace(e,t),n}function Ex(n){for(const e of n)if("object"==typeof e&&!aS(e))return e;return{}}function Ix(n,e){var t,r;let o;return o=aS(n[0])?n[0]:aS(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class j_{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ta(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return nx(this._delegate,e._delegate)}}class $_ extends j_{data(e){const t=this._delegate.data(e);return function HC(n,e){n||St()}(void 0!==t),t}}class Ks{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new FI(e)}where(e,t,r){try{return new Ks(this.firestore,eh(this._delegate,function wP(n,e,t){const r=e,o=NI("where",n);return new _P(o,r,t)}(e,t,r)))}catch(o){throw Zs(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ks(this.firestore,eh(this._delegate,function IP(n,e="asc"){const t=e,r=NI("orderBy",n);return new EP(r,t)}(e,t)))}catch(r){throw Zs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ks(this.firestore,eh(this._delegate,function bP(n){return jM("limit",n),new ix("limit",n,"F")}(e)))}catch(t){throw Zs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ks(this.firestore,eh(this._delegate,function CP(n){return jM("limitToLast",n),new ix("limitToLast",n,"L")}(e)))}catch(t){throw Zs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ks(this.firestore,eh(this._delegate,function DP(...n){return new sx("startAt",n,!0)}(...e)))}catch(t){throw Zs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ks(this.firestore,eh(this._delegate,function TP(...n){return new sx("startAfter",n,!1)}(...e)))}catch(t){throw Zs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ks(this.firestore,eh(this._delegate,function SP(...n){return new ox("endBefore",n,!1)}(...e)))}catch(t){throw Zs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ks(this.firestore,eh(this._delegate,function AP(...n){return new ox("endAt",n,!0)}(...e)))}catch(t){throw Zs(t,"endAt()","Query.endAt()")}}isEqual(e){return zM(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function kP(n){n=nr(n,As);const e=nr(n.firestore,Jr),t=Ni(e),r=new ip(e);return function zR(n,e){const t=new Mi;return n.asyncQueue.enqueueAndForget((0,Ne.Z)(function*(){return(r=(0,Ne.Z)(function*(o,u,d){try{const g=yield vI(o,u,!0),v=new IM(u,g.Hi),C=v.ju(g.documents),S=v.applyChanges(C,!1);d.resolve(S.snapshot)}catch(g){const v=wm(g,`Failed to execute query '${u} against cache`);d.reject(v)}}),function(o,u,d){return r.apply(this,arguments)})(yield TI(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Xd(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function FP(n){n=nr(n,As);const e=nr(n.firestore,Jr),t=Ni(e),r=new ip(e);return FM(t,n._query,{source:"server"}).then(o=>new Xd(e,r,n,o))}(this._delegate):function NP(n){n=nr(n,As);const e=nr(n.firestore,Jr),t=Ni(e),r=new ip(e);return rx(n._query),FM(t,n._query).then(o=>new Xd(e,r,n,o))}(this._delegate),t.then(r=>new uS(this.firestore,new Xd(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Ex(e),r=Ix(e,o=>new uS(this.firestore,new Xd(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return px(this._delegate,t,r)}withConverter(e){return new Ks(this.firestore,this._delegate.withConverter(e?sp.getInstance(this.firestore,e):null))}}class JP{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new $_(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class uS{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ks(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new $_(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new JP(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new $_(this._firestore,r))})}isEqual(e){return nx(this._delegate,e._delegate)}}class Tm extends Ks{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ta(this.firestore,e):null}doc(e){try{return new Ta(this.firestore,void 0===e?AI(this._delegate):AI(this._delegate,e))}catch(t){throw Zs(t,"doc()","CollectionReference.doc()")}}add(e){return function VP(n,e){const t=nr(n.firestore,Jr),r=AI(n),o=kI(n.converter,e);return Dm(t,[OI(tp(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Nr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ta(this.firestore,t))}isEqual(e){return GM(this._delegate,e._delegate)}withConverter(e){return new Tm(this.firestore,this._delegate.withConverter(e?sp.getInstance(this.firestore,e):null))}}function op(n){return nr(n,zr)}class cS{constructor(...e){this._delegate=new Il(...e)}static documentId(){return new cS(Kr.keyField().canonicalString())}isEqual(e){return(e=(0,Hn.m9)(e))instanceof Il&&this._delegate._internalPath.isEqual(e._internalPath)}}class ap{constructor(e){this._delegate=e}static serverTimestamp(){const e=function HP(){return new XT("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new ap(e)}static delete(){const e=function $P(){return new F_("deleteField")}();return e._methodName="FieldValue.delete",new ap(e)}static arrayUnion(...e){const t=function GP(...n){return new fP("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new ap(t)}static arrayRemove(...e){const t=function zP(...n){return new pP("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new ap(t)}static increment(e){const t=function WP(n){return new gP("increment",n)}(e);return t._methodName="FieldValue.increment",new ap(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const XP={Firestore:vx,GeoPoint:MI,Timestamp:Pr,Blob:B_,Transaction:_x,WriteBatch:wx,DocumentReference:Ta,DocumentSnapshot:j_,Query:Ks,QueryDocumentSnapshot:$_,QuerySnapshot:uS,CollectionReference:Tm,FieldPath:cS,FieldValue:ap,setLogLevel:function QP(n){!function $C(n){au.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function tN(n){(function eN(n,e){n.INTERNAL.registerComponent(new iu.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},XP)))})(n,(e,t)=>new vx(e,t,new YP)),n.registerVersion("@firebase/firestore-compat","0.1.25")}(fd.Z);var nN=N(6451),LI=N(5363),rN=N(6063);class iN extends ua.x{constructor(e=1/0,t=1/0,r=rN.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!o&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const d=t.now();let g=0;for(let v=1;v<r.length&&r[v]<=d;v+=2)g=v;g&&r.splice(0,g+1)}}}var sN=N(3099);function bx(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,sN.B)({connector:()=>new iN(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function Cx(n,e){return(0,Xm.m)(e)?ui(()=>n,e):ui(()=>n)}var lS=N(9468),dS=N(5867);class Dx{constructor(){return(0,dS.C6)()}}const Tx=new Map,cN={activated:!1,tokenObservers:[]},lN={initialized:!1,enabled:!1};function ss(n){return Tx.get(n)||cN}function mu(n,e){Tx.set(n,e)}function VI(){return lN}class gN{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ne.Z)(function*(){t.stop();try{t.pending=new Hn.BH,yield function mN(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Hn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ys=new Hn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Ax(n){if(!ss(n).activated)throw Ys.create("use-before-activation",{appName:n.name})}function gS(n,e){return mS.apply(this,arguments)}function mS(){return mS=(0,Ne.Z)(function*({url:n,body:e},t){var r,o;const u={"Content-Type":"application/json"},d=t.getImmediate({optional:!0});if(d){const ee=yield d.getHeartbeatsHeader();ee&&(u["X-Firebase-Client"]=ee)}const g={method:"POST",body:JSON.stringify(e),headers:u};let v,C;try{v=yield fetch(n,g)}catch(ee){throw Ys.create("fetch-network-error",{originalErrorMessage:null===(r=ee)||void 0===r?void 0:r.message})}if(200!==v.status)throw Ys.create("fetch-status-error",{httpStatus:v.status});try{C=yield v.json()}catch(ee){throw Ys.create("fetch-parse-error",{originalErrorMessage:null===(o=ee)||void 0===o?void 0:o.message})}const S=C.ttl.match(/^([\d.]+)(s)$/);if(!S||!S[2]||isNaN(Number(S[1])))throw Ys.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${C.ttl}`});const O=1e3*Number(S[1]),G=Date.now();return{token:C.token,expireTimeMillis:G+O,issuedAtTimeMillis:G}}),mS.apply(this,arguments)}function wN(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const H_="firebase-app-check-store";let jI=null;function xx(){return jI||(jI=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=o=>{n(o.target.result)},r.onerror=o=>{var u;e(Ys.create("storage-open",{originalErrorMessage:null===(u=o.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=o=>{0===o.oldVersion&&o.target.result.createObjectStore(H_,{keyPath:"compositeKey"})}}catch(r){e(Ys.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),jI)}function yS(){return yS=(0,Ne.Z)(function*(n,e){const r=(yield xx()).transaction(H_,"readwrite"),u=r.objectStore(H_).put({compositeKey:n,value:e});return new Promise((d,g)=>{u.onsuccess=v=>{d()},r.onerror=v=>{var C;g(Ys.create("storage-set",{originalErrorMessage:null===(C=v.target.error)||void 0===C?void 0:C.message}))}})}),yS.apply(this,arguments)}const G_=new js.Yd("@firebase/app-check");function Nx(n,e){return(0,Hn.hl)()?function CN(n,e){return function Ox(n,e){return yS.apply(this,arguments)}(function Px(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{G_.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function kx(){return VI().enabled}function Fx(){return ES.apply(this,arguments)}function ES(){return ES=(0,Ne.Z)(function*(){const n=VI();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),ES.apply(this,arguments)}const xN={error:"UNKNOWN_ERROR"};function ON(n){return Hn.US.encodeString(JSON.stringify(n),!1)}function $I(n){return IS.apply(this,arguments)}function IS(){return IS=(0,Ne.Z)(function*(n,e=!1){const t=n.app;Ax(t);const r=ss(t);let u,o=r.token;if(!o){const v=yield r.cachedTokenPromise;v&&HI(v)&&(o=v)}if(!e&&o&&HI(o))return{token:o.token};let g,d=!1;if(kx()){r.exchangeTokenPromise||(r.exchangeTokenPromise=gS(wN(t,yield Fx()),n.heartbeatServiceProvider).then(C=>(r.exchangeTokenPromise=void 0,C)),d=!0);const v=yield r.exchangeTokenPromise;return yield Nx(t,v),mu(t,Object.assign(Object.assign({},r),{token:v})),{token:v.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(v=>(r.exchangeTokenPromise=void 0,v)),d=!0),o=yield r.exchangeTokenPromise}catch(v){"appCheck/throttled"===v.code?G_.warn(v.message):G_.error(v),u=v}return o?(g={token:o.token},mu(t,Object.assign(Object.assign({},r),{token:o})),yield Nx(t,o)):g=PN(u),d&&Vx(t,g),g}),IS.apply(this,arguments)}function CS(n,e){const t=ss(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),mu(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function Lx(n){const{app:e}=n,t=ss(e);let r=t.tokenRefresher;r||(r=function RN(n){const{app:e}=n;return new gN((0,Ne.Z)(function*(){let r;if(r=ss(e).token?yield $I(n,!0):yield $I(n),r.error)throw r.error}),()=>!0,()=>{const t=ss(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),mu(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Vx(n,e){const t=ss(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function HI(n){return n.expireTimeMillis-Date.now()>0}function PN(n){return{token:ON(xN),error:n}}class NN{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=ss(this.app);for(const t of e)CS(this.app,t.next);return Promise.resolve()}}const Wx="app-check-internal";!function ZN(){(0,Cs._registerComponent)(new iu.wA("app-check",n=>function kN(n,e){return new NN(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Wx).initialize()})),(0,Cs._registerComponent)(new iu.wA(Wx,n=>function FN(n){return{getToken:e=>$I(n,e),addTokenListener:e=>function bS(n,e,t,r){const{app:o}=n,u=ss(o),d={next:t,error:r,type:e};if(mu(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,d]})),u.token&&HI(u.token)){const g=u.token;Promise.resolve().then(()=>{t({token:g.token}),Lx(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>Lx(n))}(n,"INTERNAL",e),removeTokenListener:e=>CS(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Cs.registerVersion)("@firebase/app-check","0.5.12")}();class zI{constructor(){return(0,Vn.vb)("app-check")}}"undefined"!=typeof window&&window;var XN=N(127);const Zx=new h.OlP("angularfire2.auth.use-emulator"),Kx=new h.OlP("angularfire2.auth.settings"),Yx=new h.OlP("angularfire2.auth.tenant-id"),Qx=new h.OlP("angularfire2.auth.langugage-code"),Jx=new h.OlP("angularfire2.auth.use-device-language"),Xx=new h.OlP("angularfire.auth.persistence"),eO=(n,e,t,r,o,u,d,g)=>(0,Bs.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const v=e.runOutsideAngular(()=>n.auth());if(t&&v.useEmulator(...t),r&&(v.tenantId=r),v.languageCode=o,u&&v.useDeviceLanguage(),d)for(const[C,S]of Object.entries(d))v.settings[C]=S;return g&&v.setPersistence(g),v},[t,r,o,u,d,g]);let tO=(()=>{class n{constructor(t,r,o,u,d,g,v,C,S,O,G,ee){const ge=new ua.x,Je=Ut(void 0).pipe((0,LI.Q)(d.outsideAngular),ui(()=>u.runOutsideAngular(()=>Promise.resolve().then(N.bind(N,5881)))),(0,Wt.U)(()=>(0,Bs.on)(t,u,r)),(0,Wt.U)(ot=>eO(ot,u,g,C,S,O,v,G)),bx({bufferSize:1,refCount:!1}));if(Uo(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Ut(null);else{Je.pipe(ca()).subscribe();const Qt=Je.pipe(ui(qt=>qt.getRedirectResult().then(bn=>bn,()=>null)),Vn.iC,bx({bufferSize:1,refCount:!1})),vn=Je.pipe(ui(qt=>new ls.y(bn=>({unsubscribe:u.runOutsideAngular(()=>qt.onAuthStateChanged(Kn=>bn.next(Kn),Kn=>bn.error(Kn),()=>bn.complete()))})))),Nn=Je.pipe(ui(qt=>new ls.y(bn=>({unsubscribe:u.runOutsideAngular(()=>qt.onIdTokenChanged(Kn=>bn.next(Kn),Kn=>bn.error(Kn),()=>bn.complete()))}))));this.authState=Qt.pipe(Cx(vn),(0,lS.R)(d.outsideAngular),(0,LI.Q)(d.insideAngular)),this.user=Qt.pipe(Cx(Nn),(0,lS.R)(d.outsideAngular),(0,LI.Q)(d.insideAngular)),this.idToken=this.user.pipe(ui(qt=>qt?(0,rr.D)(qt.getIdToken()):Ut(null))),this.idTokenResult=this.user.pipe(ui(qt=>qt?(0,rr.D)(qt.getIdTokenResult()):Ut(null))),this.credential=(0,nN.T)(Qt,ge,this.authState.pipe(br(qt=>!qt))).pipe((0,Wt.U)(qt=>null!=qt&&qt.user?qt:null),(0,lS.R)(d.outsideAngular),(0,LI.Q)(d.insideAngular))}return(0,Bs.pX)(this,Je,u,{spy:{apply:(ot,Qt,vn)=>{(ot.startsWith("signIn")||ot.startsWith("createUser"))&&vn.then(Nn=>ge.next(Nn))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Bs.Dh),h.LFG(Bs.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Vn.HU),h.LFG(Zx,8),h.LFG(Kx,8),h.LFG(Yx,8),h.LFG(Qx,8),h.LFG(Jx,8),h.LFG(Xx,8),h.LFG(zI,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function nO(n,e){return function tk(n,e=tf.z){return new ls.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function MS(n,e){return nO(n,e).pipe((0,Wt.U)(t=>({payload:t,type:"query"})))}function WI(n,e){return MS(n,e).pipe(nd(void 0),ru(),(0,Wt.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,g)=>{const v=o.find(S=>S.doc.ref.isEqual(d.ref)),C=null==t?void 0:t.payload.docs.find(S=>S.ref.isEqual(d.ref));v&&JSON.stringify(v.doc.metadata)===JSON.stringify(d.metadata)||!v&&C&&JSON.stringify(C.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:d}})}),u}))}function rO(n,e,t){return WI(n,t).pipe(Ph((r,o)=>function rk(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function ik(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return xS(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return xS(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return xS(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function og(n,e=Qa.y){return n=null!=n?n:ho,(0,ps.e)((t,r)=>{let o,u=!0;t.subscribe((0,oi.x)(r,d=>{const g=e(d);(u||!n(o,g))&&(u=!1,o=g,r.next(d))}))})}(),(0,Wt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function xS(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function iO(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class sO{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=WI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Wt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(nd(void 0),ru(),br(([r,o])=>o.length>0||!r),(0,Wt.U)(([r,o])=>o),Vn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ph((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=iO(e);return rO(this.query,t,this.afs.schedulers.outsideAngular).pipe(Vn.iC)}valueChanges(e={}){return MS(this.query,this.afs.schedulers.outsideAngular).pipe((0,Wt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Vn.iC)}get(e){return(0,rr.D)(this.query.get(e)).pipe(Vn.iC)}add(e){return this.ref.add(e)}doc(e){return new oO(this.ref.doc(e),this.afs)}}class oO{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=cO(r,t);return new sO(o,u,this.afs)}snapshotChanges(){return function nk(n,e){return nO(n,e).pipe(nd(void 0),ru(),(0,Wt.U)(([t,r])=>r.exists?null!=t&&t.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Vn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Wt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,rr.D)(this.ref.get(e)).pipe(Vn.iC)}}class sk{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?WI(this.query,this.afs.schedulers.outsideAngular).pipe((0,Wt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),br(t=>t.length>0),Vn.iC):WI(this.query,this.afs.schedulers.outsideAngular).pipe(Vn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ph((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=iO(e);return rO(this.query,t,this.afs.schedulers.outsideAngular).pipe(Vn.iC)}valueChanges(e={}){return MS(this.query,this.afs.schedulers.outsideAngular).pipe((0,Wt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Vn.iC)}get(e){return(0,rr.D)(this.query.get(e)).pipe(Vn.iC)}}const aO=new h.OlP("angularfire2.enableFirestorePersistence"),uO=new h.OlP("angularfire2.firestore.persistenceSettings"),ok=new h.OlP("angularfire2.firestore.settings"),ak=new h.OlP("angularfire2.firestore.use-emulator");function cO(n,e=(t=>t)){return{query:e(n),ref:n}}let lO=(()=>{class n{constructor(t,r,o,u,d,g,v,C,S,O,G,ee,ge,Je,ot,Qt,vn){this.schedulers=v;const Nn=(0,Bs.on)(t,g,r),qt=S;O&&eO(Nn,g,G,ge,Je,ot,ee,Qt),[this.firestore,this.persistenceEnabled$]=(0,Bs.cc)(`${Nn.name}.firestore`,"AngularFirestore",Nn.name,()=>{const bn=g.runOutsideAngular(()=>Nn.firestore());if(u&&bn.settings(u),qt&&bn.useEmulator(...qt),o&&!Uo(d)){const Kn=()=>{try{return(0,rr.D)(bn.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(Wi){return"undefined"!=typeof console&&console.warn(Wi),Ut(!1)}};return[bn,g.runOutsideAngular(Kn)]}return[bn,Ut(!1)]},[u,qt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=cO(o,r),g=this.schedulers.ngZone.run(()=>u);return new sO(g,d,this)}collectionGroup(t,r){const o=r||(d=>d),u=this.firestore.collectionGroup(t);return new sk(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new oO(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Bs.Dh),h.LFG(Bs.xv,8),h.LFG(aO,8),h.LFG(ok,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Vn.HU),h.LFG(uO,8),h.LFG(ak,8),h.LFG(tO,8),h.LFG(Zx,8),h.LFG(Kx,8),h.LFG(Yx,8),h.LFG(Qx,8),h.LFG(Jx,8),h.LFG(Xx,8),h.LFG(zI,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),uk=(()=>{class n{constructor(){XN.Z.registerVersion("angularfire",Vn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:aO,useValue:!0},{provide:uO,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[lO]}),n})(),up=(()=>{class n{constructor(t,r){this.router=r,this.afs=t,this.gameSessionsCollection=t.collection("game-sessions"),this.setGameSession()}setGameSession(){if("/planning-poker-app"!==this.router.url&&"/planning-poker-app/new-game"!==this.router.url){console.log("passage ici");const t=this.router.url;this.currentGameSession$=this.gameSessionsCollection.doc(t).valueChanges(),this.currentGameSession$.subscribe(r=>{console.log("game session:",r),this.currentGameSession=r}),this.setPlayersObservable(t),this.watchReset(t)}}watchReset(t){this.gameSessionsCollection.doc(t).valueChanges().subscribe(r=>{!0===r.reset&&this.resetPlayerCard()})}setPlayersObservable(t){this.players$=this.afs.collection("game-sessions").doc(t).collection("players").valueChanges()}setCurrentPlayer(t,r){this.currentPlayer$=this.gameSessionsCollection.doc(t).collection("players").doc(r).valueChanges()}createGameSession(t,r){localStorage.removeItem("userId");const o=this.afs.createId(),u={id:o,name:t,voteSystem:r,reset:!1,showCards:!1};return this.gameSessionsCollection.doc(o).set(u),this.currentGameSession=u,this.currentGameSession$=this.gameSessionsCollection.doc(o).valueChanges(),this.setPlayersObservable(o),this.watchReset(o),o}resetGameSession(){this.resetPlayerCard()}addUser(t){console.log("adduser called",t);const r=this.afs.createId(),o={id:r,name:t,cardValue:null};localStorage.setItem("userId",o.id),this.gameSessionsCollection.doc(this.currentGameSession.id).collection("players").doc(r).set(o),this.setCurrentPlayer(this.currentGameSession.id,r)}updateUserCard(t,r){this.gameSessionsCollection.doc(this.currentGameSession.id).collection("players").doc(t).update({cardValue:r})}deleteUser(t){let r;this.gameSessionsCollection.doc(this.currentGameSession.id).collection("players").doc(t).delete(),this.players$.subscribe(o=>{r=o.length,0===r&&(console.log("suppression de la collection"),this.gameSessionsCollection.doc(this.currentGameSession.id).delete())})}showPlayersCard(){console.log("passe ici"),this.gameSessionsCollection.doc(this.currentGameSession.id).update({showCards:!0})}resetAllPlayers(){this.gameSessionsCollection.doc(this.currentGameSession.id).update({reset:!0,showCards:!1})}resetPlayerCard(){let t,r=this.currentPlayer$.subscribe(o=>{t=o.id,null!==o.cardValue&&this.gameSessionsCollection.doc(this.currentGameSession.id).collection("players").doc(t).update({cardValue:null}),r.unsubscribe(),this.gameSessionsCollection.doc(this.currentGameSession.id).update({reset:!1})})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(lO),h.LFG($r))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),qI=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-button"]],inputs:{message:"message"},decls:2,vars:1,template:function(t,r){1&t&&(h.TgZ(0,"button"),h._uU(1),h.qZA()),2&t&&(h.xp6(1),h.Oqu(r.message))},styles:["button[_ngcontent-%COMP%]{border:solid 2px #3d8ce8;background-color:#fff;color:#3d8ce8;font-weight:700;padding:10px;border-radius:5px;cursor:pointer}"]}),n})();function ck(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",9),h.NdJ("click",function(){const u=h.CHM(t).$implicit,d=h.oxw(2);return h.KtG(d.selectSuggestion(u))}),h._uU(1),h.qZA()}if(2&n){const t=e.$implicit;h.xp6(1),h.AsE("",t.name,": (",t.values,")")}}function lk(n,e){if(1&n&&(h.TgZ(0,"div",7),h.YNc(1,ck,2,2,"div",8),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.Q6J("ngForOf",t.suggestions)}}let dk=(()=>{class n{constructor(t,r){this.usersDbService=t,this.router=r,this.sessionName="",this.message="Create session",this.showModal=!0,this.showSuggestions=!1,this.suggestions=[{id:"classic",name:"classic",values:[1,2,3,5,8,13,20,30]},{id:"oneTen",name:"one to ten scale",values:[1,2,3,4,5,6,7,8,9,10]}],this.systemSelected=this.suggestions[0],this.systemVote=`${this.suggestions[0].name}: (${this.suggestions[0].values})`}ngOnInit(){}createGameSession(t){""!==t?(this.gameUrl=this.usersDbService.createGameSession(t,this.systemSelected),this.router.navigateByUrl(`/planning-poker-app/${this.gameUrl}`)):alert("veuillez remplir tous les champs")}suggest(){this.showSuggestions=!0}selectSuggestion(t){this.systemVote=`${t.name} : (${t.values})`,this.showSuggestions=!1,this.systemSelected=t}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(up),h.Y36($r))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-modal-setup-settings"]],decls:9,vars:4,consts:[[1,"container"],[1,"modal"],[1,"form"],["type","text","placeholder","session name",3,"ngModel","ngModelChange"],["type","button",3,"ngModel","click","ngModelChange"],["class","autocomplete-systems",4,"ngIf"],[3,"message","click"],[1,"autocomplete-systems"],["class","suggestions",3,"click",4,"ngFor","ngForOf"],[1,"suggestions",3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"h3"),h._uU(3,"Create new game session"),h.qZA(),h.TgZ(4,"div",2)(5,"input",3),h.NdJ("ngModelChange",function(u){return r.sessionName=u}),h.qZA(),h.TgZ(6,"input",4),h.NdJ("click",function(){return r.suggest()})("ngModelChange",function(u){return r.systemVote=u}),h.qZA(),h.YNc(7,lk,2,1,"div",5),h.qZA(),h.TgZ(8,"app-button",6),h.NdJ("click",function(){return r.createGameSession(r.sessionName)}),h.qZA()()()),2&t&&(h.xp6(5),h.Q6J("ngModel",r.sessionName),h.xp6(1),h.Q6J("ngModel",r.systemVote),h.xp6(1),h.Q6J("ngIf",r.showSuggestions),h.xp6(1),h.Q6J("message",r.message))},dependencies:[Jt,kn,ks,Pc,Ya,qI],styles:[".container[_ngcontent-%COMP%]{z-index:5;width:100vw;height:100vh;position:absolute;top:0;display:flex;justify-content:center;align-items:center;background-color:#000000b3}.container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{width:100%;max-width:600px;padding:30px;position:relative;display:flex;background-color:#fff;align-items:center;flex-flow:column;border-radius:11px}.container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:5px;border:solid 2px #d3eafb;text-align:center;padding:3px;width:100%;margin:20px 0;font-size:20px}.container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;align-items:center;width:100%}.container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .suggestions[_ngcontent-%COMP%]{cursor:pointer;font-size:18px;width:100%;background-color:#3d8ce8;color:#fff;text-align:center;border:solid 2px #d3eafb;border-radius:11px;padding:12px;margin:15px 0}.container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:30px;text-align:left}.container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#3d8ce8;cursor:pointer;color:#fff}.container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover{border-color:#9cc2f0}.container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline-color:#3d8ce8}"]}),n})();function hk(n,e){if(1&n&&(h.TgZ(0,"div",3),h._uU(1),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.hij(" ",t.player.cardValue," ")}}const fk=function(n,e){return{isSelected:n,isDisplayed:e}};let pk=(()=>{class n{constructor(t){this.usersDbService=t}ngOnInit(){}deleteUser(t){this.usersDbService.deleteUser(t.id)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(up))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-choice-user-card"]],inputs:{player:"player",revealCards:"revealCards"},decls:4,vars:6,consts:[[1,"card",3,"ngClass","dblclick"],["class","value",4,"ngIf"],[1,"name"],[1,"value"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0),h.NdJ("dblclick",function(){return r.deleteUser(r.player)}),h.YNc(1,hk,2,1,"div",1),h.qZA(),h.TgZ(2,"p",2),h._uU(3),h.qZA()),2&t&&(h.Q6J("ngClass",h.WLB(3,fk,null!==r.player.cardValue&&!r.revealCards,null!==r.player.cardValue&&r.revealCards)),h.xp6(1),h.Q6J("ngIf",r.revealCards),h.xp6(2),h.Oqu(r.player.name))},dependencies:[mn,kn],styles:["[_nghost-%COMP%]{font-weight:900;display:flex;flex-flow:column;justify-content:center;align-items:center}.card[_ngcontent-%COMP%]{background-color:#b2967d;opacity:.6;height:60px;width:30px;display:flex;justify-content:center;align-items:center;border-radius:11px;color:#3d8ce8;border:solid 2px #3d8ce8}.card[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#fff}.name[_ngcontent-%COMP%]{min-width:50px;max-width:70px;overflow:hidden;text-overflow:ellipsis;margin:5px 0;text-align:center}.isSelected[_ngcontent-%COMP%]{opacity:1}.isDisplayed[_ngcontent-%COMP%]{background-color:#fff;opacity:1}.isDisplayed[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#3d8ce8;font-size:20px}"]}),n})();function gk(n,e){if(1&n&&h._UZ(0,"app-choice-user-card",11),2&n){const t=e.$implicit,r=h.oxw();h.Q6J("player",t)("revealCards",r.revealCards)}}function mk(n,e){if(1&n&&h._UZ(0,"app-choice-user-card",11),2&n){const t=e.$implicit,r=h.oxw();h.Q6J("player",t)("revealCards",r.revealCards)}}function yk(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"app-button",12),h.NdJ("click",function(){h.CHM(t);const o=h.oxw();return h.KtG(o.resetAll())}),h.qZA()}}function vk(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"app-button",14),h.NdJ("click",function(){h.CHM(t);const o=h.oxw(2);return h.KtG(o.showAnswers())}),h.qZA()}}function _k(n,e){if(1&n&&h.YNc(0,vk,1,0,"app-button",13),2&n){const t=h.oxw(),r=h.MAs(11);h.Q6J("ngIf",t.buttonRevealCard)("ngIfElse",r)}}function wk(n,e){if(1&n&&(h.TgZ(0,"div"),h._uU(1),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.Oqu(t.message)}}function Ek(n,e){if(1&n&&h._UZ(0,"app-choice-user-card",11),2&n){const t=e.$implicit,r=h.oxw();h.Q6J("player",t)("revealCards",r.revealCards)}}function Ik(n,e){if(1&n&&h._UZ(0,"app-choice-user-card",11),2&n){const t=e.$implicit,r=h.oxw();h.Q6J("player",t)("revealCards",r.revealCards)}}let bk=(()=>{class n{constructor(t){this.usersDbService=t,this.playersTop=[],this.playersBottom=[],this.playersLeft=[],this.playersRight=[],this.message="pick your cards !",this.buttonRevealCard=!1}ngOnInit(){this.cardsPlacement(),this.usersDbService.currentGameSession$.subscribe(t=>{!0===t.showCards?this.revealCards=!0:!1===t.showCards&&(this.revealCards=!1)})}ngOnChanges(){this.switchToButton()}getPlayersFilter(t){return t.filter(r=>r)}showAnswers(){this.usersDbService.showPlayersCard()}cardsPlacement(){this.usersDbService.players$.subscribe(t=>{this.playersBottom=[],this.playersBottom.push(t[0],t[2],t[6],t[8],t[10],t[12],t[16],t[18]),this.playersTop=[],this.playersTop.push(t[1],t[3],t[7],t[9],t[11],t[13],t[17],t[19]),this.playersLeft=[],this.playersLeft.push(t[4],t[14]),this.playersRight=[],this.playersRight.push(t[5],t[15])})}switchToButton(){void 0!==this.currentPlayer$&&this.currentPlayer$.subscribe(t=>{this.buttonRevealCard=null!==t.cardValue})}resetAll(){this.revealCards=!1,this.usersDbService.resetAllPlayers()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(up))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-poker-table"]],inputs:{currentPlayer$:"currentPlayer$",gameIsOver:"gameIsOver"},features:[h.TTD],decls:16,vars:6,consts:[[1,"container"],[1,"column","top"],[3,"player","revealCards",4,"ngFor","ngForOf"],[1,"column","mid"],[1,"left"],[1,"table"],["message","Start new voting",3,"click",4,"ngIf","ngIfElse"],["btnReveal",""],["pickCard",""],[1,"right"],[1,"column","bottom"],[3,"player","revealCards"],["message","Start new voting",3,"click"],["message","Reveal answers",3,"click",4,"ngIf","ngIfElse"],["message","Reveal answers",3,"click"]],template:function(t,r){if(1&t&&(h.TgZ(0,"div",0)(1,"div",1),h.YNc(2,gk,1,2,"app-choice-user-card",2),h.qZA(),h.TgZ(3,"div",3)(4,"div",4),h.YNc(5,mk,1,2,"app-choice-user-card",2),h.qZA(),h.TgZ(6,"div",5),h.YNc(7,yk,1,0,"app-button",6),h.YNc(8,_k,1,2,"ng-template",null,7,h.W1O),h.YNc(10,wk,2,1,"ng-template",null,8,h.W1O),h.qZA(),h.TgZ(12,"div",9),h.YNc(13,Ek,1,2,"app-choice-user-card",2),h.qZA()(),h.TgZ(14,"div",10),h.YNc(15,Ik,1,2,"app-choice-user-card",2),h.qZA()()),2&t){const o=h.MAs(9);h.xp6(2),h.Q6J("ngForOf",r.getPlayersFilter(r.playersTop)),h.xp6(3),h.Q6J("ngForOf",r.getPlayersFilter(r.playersLeft)),h.xp6(2),h.Q6J("ngIf",r.gameIsOver)("ngIfElse",o),h.xp6(6),h.Q6J("ngForOf",r.getPlayersFilter(r.playersRight)),h.xp6(2),h.Q6J("ngForOf",r.getPlayersFilter(r.playersBottom))}},dependencies:[Jt,kn,pk,qI],styles:["[_nghost-%COMP%]{width:100%}.column[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-around;align-items:center}.left[_ngcontent-%COMP%]{margin-right:40px}.right[_ngcontent-%COMP%]{margin-left:40px}.mid[_ngcontent-%COMP%]{justify-content:space-around}.mid[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{display:flex;flex:1;border-radius:20px;background-color:#9cc2f0;height:200px;margin:10px 0;justify-content:center;align-items:center}.mid[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-weight:700}"]}),n})();const Ck=function(n){return{selected:n}};let Dk=(()=>{class n{constructor(){this.changeCardValue=new h.vpe}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-vote-card"]],inputs:{card:"card"},outputs:{changeCardValue:"changeCardValue"},decls:3,vars:4,consts:[[1,"card",3,"ngClass"],[1,"value"]],template:function(t,r){1&t&&(h.TgZ(0,"button",0)(1,"div",1),h._uU(2),h.qZA()()),2&t&&(h.Q6J("ngClass",h.VKq(2,Ck,r.card.selected)),h.xp6(2),h.Oqu(r.card.cardValue))},dependencies:[mn],styles:[".card[_ngcontent-%COMP%]{cursor:pointer;width:30px;height:60px;display:flex;justify-content:center;align-items:center;text-align:center;background-color:#d3eafb;border-radius:11px;border:solid 2px #3d8ce8}.card[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#3d8ce8;font-size:20px;text-align:center}.card.selected[_ngcontent-%COMP%]:hover{color:#3d8ce8}.card[_ngcontent-%COMP%]:hover{scale:1.1;background-color:#fff;color:#3d8ce8}.selected[_ngcontent-%COMP%]{background-color:#3d8ce8;translate:0 -10px}.selected[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#fff}"]}),n})();function Tk(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"app-vote-card",4),h.NdJ("click",function(){const u=h.CHM(t).$implicit,d=h.oxw();return h.KtG(d.selectCard(u))}),h.qZA()}2&n&&h.Q6J("card",e.$implicit)}let Sk=(()=>{class n{constructor(t){this.usersDbService=t,this.cardValues=[]}ngOnInit(){if(0===this.cardValues.length){let t,r=this.usersDbService.currentGameSession$.subscribe(o=>{t=o.voteSystem.values;for(let u of t)this.cardValues.push({cardValue:u});r.unsubscribe(),console.log(this.cardValues)})}}unselectCard(t){let r;console.log("unselect card"),this.currentPlayer$.subscribe(o=>r=o.id),this.usersDbService.updateUserCard(r,null),t.selected=!1}selectCard(t){let r=this.currentPlayer$.subscribe(o=>{o.cardValue!==t.cardValue?(this.cardValues.forEach(u=>u.selected=!1),console.log("update card"),t.selected=!0,this.usersDbService.updateUserCard(o.id,t.cardValue)):this.unselectCard(t),r.unsubscribe()})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(up))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-choose-your-card"]],inputs:{currentPlayer$:"currentPlayer$"},decls:5,vars:1,consts:[[1,"container"],[1,"title"],[1,"container-cards"],["class","card",3,"card","click",4,"ngFor","ngForOf"],[1,"card",3,"card","click"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"h3",1),h._uU(2,"Choose your card"),h.qZA(),h.TgZ(3,"div",2),h.YNc(4,Tk,1,1,"app-vote-card",3),h.qZA()()),2&t&&(h.xp6(4),h.Q6J("ngForOf",r.cardValues))},dependencies:[Jt,Dk],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-flow:column}.container[_ngcontent-%COMP%]   .container-cards[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{text-align:center}"]}),n})();function Ak(n,e){1&n&&(h.TgZ(0,"p"),h._uU(1,"URL copied !"),h.qZA())}function Mk(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",1),h.NdJ("click",function(o){h.CHM(t);const u=h.oxw();return h.KtG(u.closeModal(o))}),h.TgZ(1,"div",2),h.NdJ("click",function(o){h.CHM(t);const u=h.oxw();return h.KtG(u.cancelAction(o))}),h.TgZ(2,"h3"),h._uU(3,"Invite players"),h.qZA(),h.TgZ(4,"input",3),h.NdJ("ngModelChange",function(o){h.CHM(t);const u=h.oxw();return h.KtG(u.urlGameSession=o)}),h.qZA(),h.TgZ(5,"button",4),h.NdJ("click",function(){h.CHM(t);const o=h.oxw();return h.KtG(o.copyUrl())}),h._uU(6," Copy invitation link"),h.qZA(),h.YNc(7,Ak,2,0,"p",5),h.qZA()()}if(2&n){const t=h.oxw();h.xp6(4),h.Q6J("ngModel",t.urlGameSession),h.xp6(3),h.Q6J("ngIf",t.isTextCopied)}}let xk=(()=>{class n{constructor(){this.emitModal=new h.vpe,this.urlGameSession=window.location.href,this.isTextCopied=!1}ngOnInit(){this.showModal=!0}closeModal(t){t.stopPropagation(),this.showModal=!1,this.emitModal.emit()}cancelAction(t){t.stopPropagation()}copyUrl(){navigator.clipboard.writeText(this.urlGameSession),this.isTextCopied=!0}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-modal-invite-players"]],outputs:{emitModal:"emitModal"},decls:1,vars:1,consts:[["class","container",3,"click",4,"ngIf"],[1,"container",3,"click"],[1,"modal",3,"click"],["type","text",3,"ngModel","ngModelChange"],[3,"click"],[4,"ngIf"]],template:function(t,r){1&t&&h.YNc(0,Mk,8,2,"div",0),2&t&&h.Q6J("ngIf",r.showModal)},dependencies:[kn,ks,Pc,Ya],styles:[".container[_ngcontent-%COMP%]{z-index:5;width:100vw;height:100vh;position:absolute;top:0;display:flex;justify-content:center;align-items:center;background-color:#000000b3}.container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{width:100%;max-width:400px;padding:30px;position:relative;display:flex;background-color:#fff;align-items:center;flex-flow:column;border-radius:11px}.container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:5px;border:solid 2px #d3eafb;text-align:center;padding:3px;width:100%;margin:20px 0;font-size:20px}.container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:30px;text-align:left}.container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#3d8ce8;cursor:pointer;color:#fff}.container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover{border-color:#9cc2f0}.container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline-color:#3d8ce8}"]}),n})();function Ok(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",4),h.NdJ("click",function(){h.CHM(t);const o=h.oxw();return h.KtG(o.toggleModal())}),h._UZ(1,"app-button",5),h.qZA()}}function Rk(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"app-modal-invite-players",6),h.NdJ("emitModal",function(){h.CHM(t);const o=h.oxw();return h.KtG(o.toggleModal())}),h.qZA()}}const Pk=function(){return{exact:!0}};let dO=(()=>{class n{constructor(t){this.router=t,this.route=this.router.url,this.showModal=!1}ngOnInit(){}toggleModal(){console.log("toogle"),this.showModal=!this.showModal}goToHome(){confirm("voulez vous retournez \xe0 la page d'accueil ? Cela quittera votre partie en cours")&&this.router.navigateByUrl("")}}return n.\u0275fac=function(t){return new(t||n)(h.Y36($r))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-header"]],decls:5,vars:4,consts:[[1,"container"],["routerLinkActive","active",1,"home-btn",3,"routerLinkActiveOptions","click"],["class","invite-btn",3,"click",4,"ngIf"],[3,"emitModal",4,"ngIf"],[1,"invite-btn",3,"click"],["message","Invite players"],[3,"emitModal"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1),h.NdJ("click",function(){return r.goToHome()}),h._uU(2," Home "),h.qZA(),h.YNc(3,Ok,2,0,"div",2),h.qZA(),h.YNc(4,Rk,1,0,"app-modal-invite-players",3)),2&t&&(h.xp6(1),h.Q6J("routerLinkActiveOptions",h.DdM(3,Pk)),h.xp6(2),h.Q6J("ngIf","/"!==r.route),h.xp6(1),h.Q6J("ngIf",r.showModal))},dependencies:[kn,Hy,qI,xk],styles:[".container[_ngcontent-%COMP%]{display:flex;height:10vh;background-color:#d3eafb;justify-content:space-around;align-items:center}.container[_ngcontent-%COMP%]   .home-btn[_ngcontent-%COMP%]{cursor:pointer;color:#3d8ce8;font-weight:700}.container[_ngcontent-%COMP%]   .home-btn[_ngcontent-%COMP%]:hover, .container[_ngcontent-%COMP%]   .invite-btn[_ngcontent-%COMP%]:hover{scale:1.05}"]}),n})();const Nk=["focusInput"];let kk=(()=>{class n{constructor(){this.sendPlayerName=new h.vpe}ngAfterViewInit(){this.focusInput.nativeElement.placeholder="",this.focusInput.nativeElement.focus()}sendName(t){this.sendPlayerName.emit(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-modal-ask-name"]],viewQuery:function(t,r){if(1&t&&h.Gf(Nk,5),2&t){let o;h.iGM(o=h.CRH())&&(r.focusInput=o.first)}},outputs:{sendPlayerName:"sendPlayerName"},decls:8,vars:1,consts:[[1,"container"],[1,"modal"],["type","text",3,"ngModel","ngModelChange","keyup.enter"],["focusInput",""],[3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"h3"),h._uU(3,"Choose your pseudo"),h.qZA(),h.TgZ(4,"input",2,3),h.NdJ("ngModelChange",function(u){return r.playerName=u})("keyup.enter",function(){return r.sendName(r.playerName)}),h.qZA(),h.TgZ(6,"button",4),h.NdJ("click",function(){return r.sendName(r.playerName)}),h._uU(7,"Continue to game"),h.qZA()()()),2&t&&(h.xp6(4),h.Q6J("ngModel",r.playerName))},dependencies:[ks,Pc,Ya],styles:[".container[_ngcontent-%COMP%]{z-index:5;width:100vw;height:100vh;position:absolute;display:flex;justify-content:center;align-items:center;background-color:#000000b3}.container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{width:100%;max-width:400px;padding:30px;position:relative;display:flex;background-color:#fff;align-items:center;flex-flow:column;border-radius:11px}.container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:5px;border:solid 2px #d3eafb;text-align:center;padding:3px;width:100%;margin:20px 0;font-size:20px}.container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:30px;text-align:left}.container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#3d8ce8;cursor:pointer;color:#fff}.container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover{border-color:#9cc2f0}.container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline-color:#3d8ce8}"]}),n})(),Fk=(()=>{class n{constructor(t){this.usersDbService=t}ngOnInit(){console.log("results showed"),this.calculAverageNote(),this.calculPreciseNote()}calculAverageNote(){let t=0,r=[],o=this.usersDbService.players$.subscribe(u=>{u.forEach(d=>{let g=d.cardValue;null!==g&&(r.push(g),t+=g)}),this.noteAverage=t/r.length,console.log("moyenne : ",this.noteAverage),o.unsubscribe()})}calculPreciseNote(){let r,t=0,o=[],u=this.usersDbService.players$.subscribe(d=>{d.forEach(g=>{null!==g.cardValue&&o.push(g.cardValue)}),o.length>=3?(o.sort(function(g,v){return g-v}),o.shift(),o.pop(),o.forEach(g=>{r=t+=g}),this.preciseNote=r/o.length):this.preciseNote=this.noteAverage,u.unsubscribe()})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(up))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-results"]],decls:7,vars:7,consts:[[1,"container"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div"),h._uU(2),h.ALo(3,"number"),h.qZA(),h.TgZ(4,"div"),h._uU(5),h.ALo(6,"number"),h.qZA()()),2&t&&(h.xp6(2),h.hij("moyenne des notes : ",h.lcZ(3,2,r.noteAverage),""),h.xp6(3),h.hij("moyenne ajust\xe9e des notes : ",h.xi3(6,4,r.preciseNote,"1.0-2"),""))},dependencies:[Ci]}),n})();function Lk(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"app-modal-ask-name",6),h.NdJ("sendPlayerName",function(o){h.CHM(t);const u=h.oxw();return h.KtG(u.getPlayerName(o))}),h.qZA()}}function Vk(n,e){if(1&n&&h._UZ(0,"app-choose-your-card",9),2&n){const t=h.oxw(2);h.Q6J("currentPlayer$",t.currentPlayer$)}}function Uk(n,e){if(1&n&&(h.TgZ(0,"div",7),h.YNc(1,Vk,1,1,"app-choose-your-card",8),h.qZA()),2&n){const t=h.oxw(),r=h.MAs(7);h.xp6(1),h.Q6J("ngIf",!t.gameIsOver)("ngIfElse",r)}}function Bk(n,e){1&n&&h._UZ(0,"app-results")}const jk=[{path:"planning-poker-app",component:(()=>{class n{constructor(t,r){this.router=t,this.usersDbService=r,this.message="Start new game"}ngOnInit(){this.usersDbService.currentGameSession={},localStorage.removeItem("user")}goToSettingsView(){console.log("clicked"),this.router.navigateByUrl("/planning-poker-app/new-game")}}return n.\u0275fac=function(t){return new(t||n)(h.Y36($r),h.Y36(up))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-home"]],decls:3,vars:1,consts:[[1,"container"],[1,"btn-start",3,"message","click"]],template:function(t,r){1&t&&(h._UZ(0,"app-header"),h.TgZ(1,"div",0)(2,"app-button",1),h.NdJ("click",function(){return r.goToSettingsView()}),h.qZA()()),2&t&&(h.xp6(2),h.Q6J("message",r.message))},dependencies:[dO,qI],styles:[".container[_ngcontent-%COMP%]{display:flex;height:90vh;justify-content:center;align-items:center}"]}),n})()},{path:"planning-poker-app/new-game",component:dk},{path:"planning-poker-app/:id",component:(()=>{class n{constructor(t){this.usersDbService=t,this.isComponentReady=!1}ngOnInit(){localStorage.getItem("userId")?(this.closeModalAskName=!0,this.isComponentReady=!0,this.setCurrentPlayer()):this.closeModalAskName=!1,this.showResults(),this.resetView()}getPlayerName(t){this.playerName=t,this.closeModalAskName=!0,this.usersDbService.addUser(t),this.setCurrentPlayer(),this.isComponentReady=!0}setCurrentPlayer(){let t=localStorage.getItem("userId");this.usersDbService.currentGameSession$.subscribe(r=>{this.currentPlayer$=this.usersDbService.gameSessionsCollection.doc(r.id).collection("players").doc(t).valueChanges(),this.usersDbService.currentPlayer$=this.currentPlayer$})}showResults(){this.usersDbService.currentGameSession$.subscribe(t=>{!0===t.showCards&&(this.gameIsOver=!0)})}resetView(){this.usersDbService.currentGameSession$.subscribe(t=>{!1===t.showCards&&(this.gameIsOver=!1)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(up))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-poker-room"]],decls:8,vars:4,consts:[["class","modal",3,"sendPlayerName",4,"ngIf"],[1,"container"],[1,"poker-table"],[3,"currentPlayer$","gameIsOver"],["class","choose-card",4,"ngIf"],["results",""],[1,"modal",3,"sendPlayerName"],[1,"choose-card"],["class","pick-card",3,"currentPlayer$",4,"ngIf","ngIfElse"],[1,"pick-card",3,"currentPlayer$"]],template:function(t,r){1&t&&(h._UZ(0,"app-header"),h.YNc(1,Lk,1,0,"app-modal-ask-name",0),h.TgZ(2,"div",1)(3,"div",2),h._UZ(4,"app-poker-table",3),h.qZA(),h.YNc(5,Uk,2,2,"div",4),h.YNc(6,Bk,1,0,"ng-template",null,5,h.W1O),h.qZA()),2&t&&(h.xp6(1),h.Q6J("ngIf",!r.closeModalAskName),h.xp6(3),h.Q6J("currentPlayer$",r.currentPlayer$)("gameIsOver",r.gameIsOver),h.xp6(1),h.Q6J("ngIf",r.isComponentReady))},dependencies:[kn,bk,Sk,dO,kk,Fk],styles:[".container[_ngcontent-%COMP%]{height:90vh;display:flex;flex-flow:column;justify-content:space-around;align-items:center}.poker-table[_ngcontent-%COMP%], .choose-card[_ngcontent-%COMP%]{width:100%;max-width:800px;justify-content:center;display:flex}.pick-card[_ngcontent-%COMP%]{width:90%;max-width:800px}.modal[_ngcontent-%COMP%]{position:absolute;top:0;height:100vh;width:100vw}"]}),n})()},{path:"",redirectTo:"/planning-poker-app"}];let $k=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Ew.forRoot(jk),Ew]}),n})();const Hk_firebaseConfig={apiKey:"AIzaSyA6XFozVBg6KR_gPaHs9hBnDvc_nZuSJjs",authDomain:"poker-planning-database.firebaseapp.com",projectId:"poker-planning-database",storageBucket:"poker-planning-database.appspot.com",messagingSenderId:"1049852565698",appId:"1:1049852565698:web:8f326ee1f70f2a822ac35b",locationId:"europe-west"};N(7143);class fO{constructor(){return(0,Vn.vb)("auth")}}class PS{constructor(e){return e}}const pO="firestore",NS=new h.OlP("angularfire2.firestore-instances");function Kk(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new PS(r)}}const Yk={provide:class qk{constructor(){return(0,Vn.vb)(pO)}},deps:[[new h.FiY,NS]]},Qk={provide:PS,useFactory:function Zk(n,e){const t=(0,Vn.JM)(pO,n,e);return t&&new PS(t)},deps:[[new h.FiY,NS],class Sm{constructor(e){return e}}]};let Jk=(()=>{class n{constructor(){(0,dS.KN)("angularfire",Vn.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[Qk,Yk]}),n})();function Xk(n,...e){return{ngModule:Jk,providers:[{provide:NS,useFactory:Kk(n),multi:!0,deps:[h.R0b,h.zs3,Vn.HU,Dx,[new h.FiY,fO],[new h.FiY,zI],...e]}]}}const e1=(0,Vn.u3)(tP,!0);let t1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[ma]}),n.\u0275inj=h.cJS({imports:[Jo,Km,$k,Bs.hO.initializeApp(Hk_firebaseConfig),Xk(()=>e1()),uk]}),n})();ja().bootstrapModule(t1).then(n=>{window.ngRef&&window.ngRef.destroy(),window.ngRef=n}).catch(n=>console.error(n))},7435:(bt,Pe,N)=>{N(609)},5867:(bt,Pe,N)=>{N.d(Pe,{C6:()=>h.getApps,KN:()=>h.registerVersion,Mq:()=>h.getApp});var h=N(9681);(0,h.registerVersion)("firebase","9.10.0","app")},127:(bt,Pe,N)=>{N.d(Pe,{Z:()=>h.Z});var h=N(3942);h.Z.registerVersion("firebase","9.10.0","app-compat")},5881:(bt,Pe,N)=>{N.r(Pe);var h=N(5861),U=N(3942),P=N(7143),se=N(2090),Ee=(N(9681),N(1877),N(4859));function _e(){return window}function q(){return(q=(0,h.Z)(function*(ie,j,H){var xe;const{BuildInfo:R}=_e();(0,P.aq)(j.sessionId,"AuthEvent did not contain a session ID");const L=yield ae(j.sessionId),z={};return(0,P.ar)()?z.ibi=R.packageName:(0,P.as)()?z.apn=R.packageName:(0,P.at)(ie,"operation-not-supported-in-this-environment"),R.displayName&&(z.appDisplayName=R.displayName),z.sessionId=L,(0,P.au)(ie,H,j.type,void 0,null!==(xe=j.eventId)&&void 0!==xe?xe:void 0,z)})).apply(this,arguments)}function Xe(){return(Xe=(0,h.Z)(function*(ie){const{BuildInfo:j}=_e(),H={};(0,P.ar)()?H.iosBundleId=j.packageName:(0,P.as)()?H.androidPackageName=j.packageName:(0,P.at)(ie,"operation-not-supported-in-this-environment"),yield(0,P.av)(ie,H)})).apply(this,arguments)}function Et(){return(Et=(0,h.Z)(function*(ie,j,H){const{cordova:xe}=_e();let R=()=>{};try{yield new Promise((L,z)=>{let J=null;function le(){var Oe;L();const dt=null===(Oe=xe.plugins.browsertab)||void 0===Oe?void 0:Oe.close;"function"==typeof dt&&dt(),"function"==typeof(null==H?void 0:H.close)&&H.close()}function De(){J||(J=window.setTimeout(()=>{z((0,P.aw)(ie,"redirect-cancelled-by-user"))},2e3))}function $e(){"visible"===(null==document?void 0:document.visibilityState)&&De()}j.addPassiveListener(le),document.addEventListener("resume",De,!1),(0,P.as)()&&document.addEventListener("visibilitychange",$e,!1),R=()=>{j.removePassiveListener(le),document.removeEventListener("resume",De,!1),document.removeEventListener("visibilitychange",$e,!1),J&&window.clearTimeout(J)}})}finally{R()}})).apply(this,arguments)}function ae(ie){return gt.apply(this,arguments)}function gt(){return(gt=(0,h.Z)(function*(ie){const j=pt(ie),H=yield crypto.subtle.digest("SHA-256",j);return Array.from(new Uint8Array(H)).map(R=>R.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function pt(ie){if((0,P.aq)(/[0-9a-zA-Z]+/.test(ie),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(ie);const j=new ArrayBuffer(ie.length),H=new Uint8Array(j);for(let xe=0;xe<ie.length;xe++)H[xe]=ie.charCodeAt(xe);return H}class Ge extends P.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(j=>{this.resolveInialized=j})}addPassiveListener(j){this.passiveListeners.add(j)}removePassiveListener(j){this.passiveListeners.delete(j)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(j){return this.resolveInialized(),this.passiveListeners.forEach(H=>H(j)),super.onEvent(j)}initialized(){var j=this;return(0,h.Z)(function*(){yield j.initPromise})()}}function ue(ie){return me.apply(this,arguments)}function me(){return(me=(0,h.Z)(function*(ie){const j=yield re()._get(Ie(ie));return j&&(yield re()._remove(Ie(ie))),j})).apply(this,arguments)}function X(){const ie=[],j="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let H=0;H<20;H++){const xe=Math.floor(Math.random()*j.length);ie.push(j.charAt(xe))}return ie.join("")}function re(){return(0,P.ay)(P.b)}function Ie(ie){return(0,P.az)("authEvent",ie.config.apiKey,ie.name)}function et(ie){if(null==ie||!ie.includes("?"))return{};const[j,...H]=ie.split("?");return(0,se.zd)(H.join("?"))}function ct(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,P.aw)("no-auth-event")}}function Cn(){var ie;return(null===(ie=null==self?void 0:self.location)||void 0===ie?void 0:ie.protocol)||null}function Dr(ie=(0,se.z$)()){return!("file:"!==Cn()&&"ionic:"!==Cn()&&"capacitor:"!==Cn()||!ie.toLowerCase().match(/iphone|ipad|ipod|android/))}function ki(){try{const ie=self.localStorage,j=P.aI();if(ie)return ie.setItem(j,"1"),ie.removeItem(j),!function qi(ie=(0,se.z$)()){return function Xn(){return(0,se.w1)()&&11===(null==document?void 0:document.documentMode)}()||function ar(ie=(0,se.z$)()){return/Edge\/\d+/.test(ie)}(ie)}()||(0,se.hl)()}catch(ie){return ri()&&(0,se.hl)()}return!1}function ri(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function mr(){return(function tn(){return"http:"===Cn()||"https:"===Cn()}()||(0,se.ru)()||Dr())&&!function Qs(){return(0,se.b$)()||(0,se.UG)()}()&&ki()&&!ri()}function Fi(){return Dr()&&"undefined"!=typeof document}function vt(){return(vt=(0,h.Z)(function*(){return!!Fi()&&new Promise(ie=>{const j=setTimeout(()=>{ie(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(j),ie(!0)})})})).apply(this,arguments)}const fr={LOCAL:"local",NONE:"none",SESSION:"session"},zn=P.ax,Wr="persistence";function Qn(ie){return ir.apply(this,arguments)}function ir(){return(ir=(0,h.Z)(function*(ie){yield ie._initializationPromise;const j=At(),H=P.az(Wr,ie.config.apiKey,ie.name);j&&j.setItem(H,ie._getPersistence())})).apply(this,arguments)}function At(){var ie;try{return(null===(ie=function kr(){return"undefined"!=typeof window?window:null}())||void 0===ie?void 0:ie.sessionStorage)||null}catch(j){return null}}const Rt=P.ax;class rn{constructor(){this.browserResolver=P.ay(P.k),this.cordovaResolver=P.ay(class Tn{constructor(){this._redirectPersistence=P.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=P.aB,this._overrideRedirectResult=P.aC}_initialize(j){var H=this;return(0,h.Z)(function*(){const xe=j._key();let R=H.eventManagers.get(xe);return R||(R=new Ge(j),H.eventManagers.set(xe,R),H.attachCallbackListeners(j,R)),R})()}_openPopup(j){(0,P.at)(j,"operation-not-supported-in-this-environment")}_openRedirect(j,H,xe,R){var L=this;return(0,h.Z)(function*(){!function Me(ie){var j,H,xe,R,L,z,J,le,De,$e;const Oe=_e();(0,P.ax)("function"==typeof(null===(j=null==Oe?void 0:Oe.universalLinks)||void 0===j?void 0:j.subscribe),ie,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,P.ax)(void 0!==(null===(H=null==Oe?void 0:Oe.BuildInfo)||void 0===H?void 0:H.packageName),ie,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,P.ax)("function"==typeof(null===(L=null===(R=null===(xe=null==Oe?void 0:Oe.cordova)||void 0===xe?void 0:xe.plugins)||void 0===R?void 0:R.browsertab)||void 0===L?void 0:L.openUrl),ie,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.ax)("function"==typeof(null===(le=null===(J=null===(z=null==Oe?void 0:Oe.cordova)||void 0===z?void 0:z.plugins)||void 0===J?void 0:J.browsertab)||void 0===le?void 0:le.isAvailable),ie,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.ax)("function"==typeof(null===($e=null===(De=null==Oe?void 0:Oe.cordova)||void 0===De?void 0:De.InAppBrowser)||void 0===$e?void 0:$e.open),ie,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(j);const z=yield L._initialize(j);yield z.initialized(),z.resetRedirect(),(0,P.aD)(),yield L._originValidation(j);const J=function ke(ie,j,H=null){return{type:j,eventId:H,urlResponse:null,sessionId:X(),postBody:null,tenantId:ie.tenantId,error:(0,P.aw)(ie,"no-auth-event")}}(j,xe,R);yield function ut(ie,j){return re()._set(Ie(ie),j)}(j,J);const le=yield function W(ie,j,H){return q.apply(this,arguments)}(j,J,H),De=yield function je(ie){const{cordova:j}=_e();return new Promise(H=>{j.plugins.browsertab.isAvailable(xe=>{let R=null;xe?j.plugins.browsertab.openUrl(ie):R=j.InAppBrowser.open(ie,(0,P.ap)()?"_blank":"_system","location=yes"),H(R)})})}(le);return function Re(ie,j,H){return Et.apply(this,arguments)}(j,z,De)})()}_isIframeWebStorageSupported(j,H){throw new Error("Method not implemented.")}_originValidation(j){const H=j._key();return this.originValidationPromises[H]||(this.originValidationPromises[H]=function te(ie){return Xe.apply(this,arguments)}(j)),this.originValidationPromises[H]}attachCallbackListeners(j,H){const{universalLinks:xe,handleOpenURL:R,BuildInfo:L}=_e(),z=setTimeout((0,h.Z)(function*(){yield ue(j),H.onEvent(ct())}),500),J=function(){var $e=(0,h.Z)(function*(Oe){clearTimeout(z);const dt=yield ue(j);let yt=null;dt&&(null==Oe?void 0:Oe.url)&&(yt=function Ae(ie,j){var H,xe;const R=function Qe(ie){const j=et(ie),H=j.link?decodeURIComponent(j.link):void 0,xe=et(H).link,R=j.deep_link_id?decodeURIComponent(j.deep_link_id):void 0;return et(R).link||R||xe||H||ie}(j);if(R.includes("/__/auth/callback")){const L=et(R),z=L.firebaseError?function de(ie){try{return JSON.parse(ie)}catch(j){return null}}(decodeURIComponent(L.firebaseError)):null,J=null===(xe=null===(H=null==z?void 0:z.code)||void 0===H?void 0:H.split("auth/"))||void 0===xe?void 0:xe[1],le=J?(0,P.aw)(J):null;return le?{type:ie.type,eventId:ie.eventId,tenantId:ie.tenantId,error:le,urlResponse:null,sessionId:null,postBody:null}:{type:ie.type,eventId:ie.eventId,tenantId:ie.tenantId,sessionId:ie.sessionId,urlResponse:R,postBody:null}}return null}(dt,Oe.url)),H.onEvent(yt||ct())});return function(dt){return $e.apply(this,arguments)}}();void 0!==xe&&"function"==typeof xe.subscribe&&xe.subscribe(null,J);const le=R,De=`${L.packageName.toLowerCase()}://`;_e().handleOpenURL=function(){var $e=(0,h.Z)(function*(Oe){if(Oe.toLowerCase().startsWith(De)&&J({url:Oe}),"function"==typeof le)try{le(Oe)}catch(dt){console.error(dt)}});return function(Oe){return $e.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=P.a,this._completeRedirectFn=P.aB,this._overrideRedirectResult=P.aC}_initialize(j){var H=this;return(0,h.Z)(function*(){return yield H.selectUnderlyingResolver(),H.assertedUnderlyingResolver._initialize(j)})()}_openPopup(j,H,xe,R){var L=this;return(0,h.Z)(function*(){return yield L.selectUnderlyingResolver(),L.assertedUnderlyingResolver._openPopup(j,H,xe,R)})()}_openRedirect(j,H,xe,R){var L=this;return(0,h.Z)(function*(){return yield L.selectUnderlyingResolver(),L.assertedUnderlyingResolver._openRedirect(j,H,xe,R)})()}_isIframeWebStorageSupported(j,H){this.assertedUnderlyingResolver._isIframeWebStorageSupported(j,H)}_originValidation(j){return this.assertedUnderlyingResolver._originValidation(j)}get _shouldInitProactively(){return Fi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Rt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var j=this;return(0,h.Z)(function*(){if(j.underlyingResolver)return;const H=yield function Zi(){return vt.apply(this,arguments)}();j.underlyingResolver=H?j.cordovaResolver:j.browserResolver})()}}function Xr(ie){return ie.unwrap()}function Fr(ie){return ei(ie)}function ei(ie){const{_tokenResponse:j}=ie instanceof se.ZR?ie.customData:ie;if(!j)return null;if(!(ie instanceof se.ZR)&&"temporaryProof"in j&&"phoneNumber"in j)return P.P.credentialFromResult(ie);const H=j.providerId;if(!H||H===P.o.PASSWORD)return null;let xe;switch(H){case P.o.GOOGLE:xe=P.Q;break;case P.o.FACEBOOK:xe=P.N;break;case P.o.GITHUB:xe=P.T;break;case P.o.TWITTER:xe=P.W;break;default:const{oauthIdToken:R,oauthAccessToken:L,oauthTokenSecret:z,pendingToken:J,nonce:le}=j;return L||z||R||J?J?H.startsWith("saml.")?P.aL._create(H,J):P.J._fromParams({providerId:H,signInMethod:H,pendingToken:J,idToken:R,accessToken:L}):new P.U(H).credential({idToken:R,accessToken:L,rawNonce:le}):null}return ie instanceof se.ZR?xe.credentialFromError(ie):xe.credentialFromResult(ie)}function cn(ie,j){return j.catch(H=>{throw H instanceof se.ZR&&function Zt(ie,j){var H,xe;const R=null===(H=j.customData)||void 0===H?void 0:H._tokenResponse;if("auth/multi-factor-auth-required"===(null===(xe=j)||void 0===xe?void 0:xe.code))j.resolver=new Q(ie,P.an(ie,j));else if(R){const L=ei(j),z=j;L&&(z.credential=L,z.tenantId=R.tenantId||void 0,z.email=R.email||void 0,z.phoneNumber=R.phoneNumber||void 0)}}(ie,H),H}).then(H=>{const R=H.user;return{operationType:H.operationType,credential:Fr(H),additionalUserInfo:P.al(H),user:$.getOrCreate(R)}})}function pi(ie,j){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,h.Z)(function*(ie,j){const H=yield j;return{verificationId:H.verificationId,confirm:xe=>cn(ie,H.confirm(xe))}})).apply(this,arguments)}class Q{constructor(j,H){this.resolver=H,this.auth=function Tr(ie){return ie.wrapped()}(j)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(j){return cn(Xr(this.auth),this.resolver.resolveSignIn(j))}}class ${constructor(j){this._delegate=j,this.multiFactor=P.ao(j)}static getOrCreate(j){return $.USER_MAP.has(j)||$.USER_MAP.set(j,new $(j)),$.USER_MAP.get(j)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(j){return this._delegate.getIdTokenResult(j)}getIdToken(j){return this._delegate.getIdToken(j)}linkAndRetrieveDataWithCredential(j){return this.linkWithCredential(j)}linkWithCredential(j){var H=this;return(0,h.Z)(function*(){return cn(H.auth,P.Z(H._delegate,j))})()}linkWithPhoneNumber(j,H){var xe=this;return(0,h.Z)(function*(){return pi(xe.auth,P.l(xe._delegate,j,H))})()}linkWithPopup(j){var H=this;return(0,h.Z)(function*(){return cn(H.auth,P.d(H._delegate,j,rn))})()}linkWithRedirect(j){var H=this;return(0,h.Z)(function*(){return yield Qn(P.aE(H.auth)),P.g(H._delegate,j,rn)})()}reauthenticateAndRetrieveDataWithCredential(j){return this.reauthenticateWithCredential(j)}reauthenticateWithCredential(j){var H=this;return(0,h.Z)(function*(){return cn(H.auth,P._(H._delegate,j))})()}reauthenticateWithPhoneNumber(j,H){return pi(this.auth,P.r(this._delegate,j,H))}reauthenticateWithPopup(j){return cn(this.auth,P.e(this._delegate,j,rn))}reauthenticateWithRedirect(j){var H=this;return(0,h.Z)(function*(){return yield Qn(P.aE(H.auth)),P.h(H._delegate,j,rn)})()}sendEmailVerification(j){return P.ab(this._delegate,j)}unlink(j){var H=this;return(0,h.Z)(function*(){return yield P.ak(H._delegate,j),H})()}updateEmail(j){return P.ag(this._delegate,j)}updatePassword(j){return P.ah(this._delegate,j)}updatePhoneNumber(j){return P.u(this._delegate,j)}updateProfile(j){return P.af(this._delegate,j)}verifyBeforeUpdateEmail(j,H){return P.ac(this._delegate,j,H)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}$.USER_MAP=new WeakMap;const B=P.ax;let Z=(()=>{class ie{constructor(H,xe){if(this.app=H,xe.isInitialized())return this._delegate=xe.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:R}=H.options;B(R,"invalid-api-key",{appName:H.name}),B(R,"invalid-api-key",{appName:H.name});const L="undefined"!=typeof window?rn:void 0;this._delegate=xe.initialize({options:{persistence:Be(R,H.name),popupRedirectResolver:L}}),this._delegate._updateErrorMap(P.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?$.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(H){this._delegate.languageCode=H}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(H){this._delegate.tenantId=H}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(H,xe){P.G(this._delegate,H,xe)}applyActionCode(H){return P.a2(this._delegate,H)}checkActionCode(H){return P.a3(this._delegate,H)}confirmPasswordReset(H,xe){return P.a1(this._delegate,H,xe)}createUserWithEmailAndPassword(H,xe){var R=this;return(0,h.Z)(function*(){return cn(R._delegate,P.a5(R._delegate,H,xe))})()}fetchProvidersForEmail(H){return this.fetchSignInMethodsForEmail(H)}fetchSignInMethodsForEmail(H){return P.aa(this._delegate,H)}isSignInWithEmailLink(H){return P.a8(this._delegate,H)}getRedirectResult(){var H=this;return(0,h.Z)(function*(){B(mr(),H._delegate,"operation-not-supported-in-this-environment");const xe=yield P.j(H._delegate,rn);return xe?cn(H._delegate,Promise.resolve(xe)):{credential:null,user:null}})()}addFrameworkForLogging(H){!function On(ie,j){(0,P.aE)(ie)._logFramework(j)}(this._delegate,H)}onAuthStateChanged(H,xe,R){const{next:L,error:z,complete:J}=K(H,xe,R);return this._delegate.onAuthStateChanged(L,z,J)}onIdTokenChanged(H,xe,R){const{next:L,error:z,complete:J}=K(H,xe,R);return this._delegate.onIdTokenChanged(L,z,J)}sendSignInLinkToEmail(H,xe){return P.a7(this._delegate,H,xe)}sendPasswordResetEmail(H,xe){return P.a0(this._delegate,H,xe||void 0)}setPersistence(H){var xe=this;return(0,h.Z)(function*(){let R;switch(function bi(ie,j){zn(Object.values(fr).includes(j),ie,"invalid-persistence-type"),(0,se.b$)()?zn(j!==fr.SESSION,ie,"unsupported-persistence-type"):(0,se.UG)()?zn(j===fr.NONE,ie,"unsupported-persistence-type"):ri()?zn(j===fr.NONE||j===fr.LOCAL&&(0,se.hl)(),ie,"unsupported-persistence-type"):zn(j===fr.NONE||ki(),ie,"unsupported-persistence-type")}(xe._delegate,H),H){case fr.SESSION:R=P.a;break;case fr.LOCAL:R=(yield P.ay(P.i)._isAvailable())?P.i:P.b;break;case fr.NONE:R=P.L;break;default:return P.at("argument-error",{appName:xe._delegate.name})}return xe._delegate.setPersistence(R)})()}signInAndRetrieveDataWithCredential(H){return this.signInWithCredential(H)}signInAnonymously(){return cn(this._delegate,P.X(this._delegate))}signInWithCredential(H){return cn(this._delegate,P.Y(this._delegate,H))}signInWithCustomToken(H){return cn(this._delegate,P.$(this._delegate,H))}signInWithEmailAndPassword(H,xe){return cn(this._delegate,P.a6(this._delegate,H,xe))}signInWithEmailLink(H,xe){return cn(this._delegate,P.a9(this._delegate,H,xe))}signInWithPhoneNumber(H,xe){return pi(this._delegate,P.s(this._delegate,H,xe))}signInWithPopup(H){var xe=this;return(0,h.Z)(function*(){return B(mr(),xe._delegate,"operation-not-supported-in-this-environment"),cn(xe._delegate,P.c(xe._delegate,H,rn))})()}signInWithRedirect(H){var xe=this;return(0,h.Z)(function*(){return B(mr(),xe._delegate,"operation-not-supported-in-this-environment"),yield Qn(xe._delegate),P.f(xe._delegate,H,rn)})()}updateCurrentUser(H){return this._delegate.updateCurrentUser(H)}verifyPasswordResetCode(H){return P.a4(this._delegate,H)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return ie.Persistence=fr,ie})();function K(ie,j,H){let xe=ie;"function"!=typeof ie&&({next:xe,error:j,complete:H}=ie);const R=xe;return{next:z=>R(z&&$.getOrCreate(z)),error:j,complete:H}}function Be(ie,j){const H=function er(ie,j){const H=At();if(!H)return[];const xe=P.az(Wr,ie,j);switch(H.getItem(xe)){case fr.NONE:return[P.L];case fr.LOCAL:return[P.i,P.a];case fr.SESSION:return[P.a];default:return[]}}(ie,j);if("undefined"!=typeof self&&!H.includes(P.i)&&H.push(P.i),"undefined"!=typeof window)for(const xe of[P.b,P.a])H.includes(xe)||H.push(xe);return H.includes(P.L)||H.push(P.L),H}class st{constructor(){this.providerId="phone",this._delegate=new P.P(Xr(U.Z.auth()))}static credential(j,H){return P.P.credential(j,H)}verifyPhoneNumber(j,H){return this._delegate.verifyPhoneNumber(j,H)}unwrap(){return this._delegate}}st.PHONE_SIGN_IN_METHOD=P.P.PHONE_SIGN_IN_METHOD,st.PROVIDER_ID=P.P.PROVIDER_ID;const Pt=P.ax;class Wn{constructor(j,H,xe=U.Z.app()){var R;Pt(null===(R=xe.options)||void 0===R?void 0:R.apiKey,"invalid-api-key",{appName:xe.name}),this._delegate=new P.R(j,H,xe.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function pr(ie){ie.INTERNAL.registerComponent(new Ee.wA("auth-compat",j=>{const H=j.getProvider("app-compat").getImmediate(),xe=j.getProvider("auth");return new Z(H,xe)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:P.A.EMAIL_SIGNIN,PASSWORD_RESET:P.A.PASSWORD_RESET,RECOVER_EMAIL:P.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:P.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:P.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:P.A.VERIFY_EMAIL}},EmailAuthProvider:P.M,FacebookAuthProvider:P.N,GithubAuthProvider:P.T,GoogleAuthProvider:P.Q,OAuthProvider:P.U,SAMLAuthProvider:P.V,PhoneAuthProvider:st,PhoneMultiFactorGenerator:P.m,RecaptchaVerifier:Wn,TwitterAuthProvider:P.W,Auth:Z,AuthCredential:P.H,Error:se.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ie.registerVersion("@firebase/auth-compat","0.2.20")}(U.Z)},9751:(bt,Pe,N)=>{N.d(Pe,{y:()=>_e});var h=N(2961),U=N(727),P=N(8822),se=N(9635),fe=N(2416),Ce=N(576),Ee=N(2806);let _e=(()=>{class te{constructor(je){je&&(this._subscribe=je)}lift(je){const Re=new te;return Re.source=this,Re.operator=je,Re}subscribe(je,Re,Et){const Me=function q(te){return te&&te instanceof h.Lv||function W(te){return te&&(0,Ce.m)(te.next)&&(0,Ce.m)(te.error)&&(0,Ce.m)(te.complete)}(te)&&(0,U.Nn)(te)}(je)?je:new h.Hp(je,Re,Et);return(0,Ee.x)(()=>{const{operator:ae,source:gt}=this;Me.add(ae?ae.call(Me,gt):gt?this._subscribe(Me):this._trySubscribe(Me))}),Me}_trySubscribe(je){try{return this._subscribe(je)}catch(Re){je.error(Re)}}forEach(je,Re){return new(Re=Te(Re))((Et,Me)=>{const ae=new h.Hp({next:gt=>{try{je(gt)}catch(pt){Me(pt),ae.unsubscribe()}},error:Me,complete:Et});this.subscribe(ae)})}_subscribe(je){var Re;return null===(Re=this.source)||void 0===Re?void 0:Re.subscribe(je)}[P.L](){return this}pipe(...je){return(0,se.U)(je)(this)}toPromise(je){return new(je=Te(je))((Re,Et)=>{let Me;this.subscribe(ae=>Me=ae,ae=>Et(ae),()=>Re(Me))})}}return te.create=Xe=>new te(Xe),te})();function Te(te){var Xe;return null!==(Xe=null!=te?te:fe.v.Promise)&&void 0!==Xe?Xe:Promise}},7579:(bt,Pe,N)=>{N.d(Pe,{x:()=>Ee});var h=N(9751),U=N(727);const se=(0,N(3888).d)(Te=>function(){Te(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var fe=N(8737),Ce=N(2806);let Ee=(()=>{class Te extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(q){const te=new _e(this,this);return te.operator=q,te}_throwIfClosed(){if(this.closed)throw new se}next(q){(0,Ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const te of this.currentObservers)te.next(q)}})}error(q){(0,Ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=q;const{observers:te}=this;for(;te.length;)te.shift().error(q)}})}complete(){(0,Ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:q}=this;for(;q.length;)q.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var q;return(null===(q=this.observers)||void 0===q?void 0:q.length)>0}_trySubscribe(q){return this._throwIfClosed(),super._trySubscribe(q)}_subscribe(q){return this._throwIfClosed(),this._checkFinalizedStatuses(q),this._innerSubscribe(q)}_innerSubscribe(q){const{hasError:te,isStopped:Xe,observers:je}=this;return te||Xe?U.Lc:(this.currentObservers=null,je.push(q),new U.w0(()=>{this.currentObservers=null,(0,fe.P)(je,q)}))}_checkFinalizedStatuses(q){const{hasError:te,thrownError:Xe,isStopped:je}=this;te?q.error(Xe):je&&q.complete()}asObservable(){const q=new h.y;return q.source=this,q}}return Te.create=(W,q)=>new _e(W,q),Te})();class _e extends Ee{constructor(W,q){super(),this.destination=W,this.source=q}next(W){var q,te;null===(te=null===(q=this.destination)||void 0===q?void 0:q.next)||void 0===te||te.call(q,W)}error(W){var q,te;null===(te=null===(q=this.destination)||void 0===q?void 0:q.error)||void 0===te||te.call(q,W)}complete(){var W,q;null===(q=null===(W=this.destination)||void 0===W?void 0:W.complete)||void 0===q||q.call(W)}_subscribe(W){var q,te;return null!==(te=null===(q=this.source)||void 0===q?void 0:q.subscribe(W))&&void 0!==te?te:U.Lc}}},2961:(bt,Pe,N)=>{N.d(Pe,{Hp:()=>Et,Lv:()=>te});var h=N(576),U=N(727),P=N(2416),se=N(7849);function fe(){}const Ce=Te("C",void 0,void 0);function Te(Ve,Ge,ke){return{kind:Ve,value:Ge,error:ke}}var W=N(3410),q=N(2806);class te extends U.w0{constructor(Ge){super(),this.isStopped=!1,Ge?(this.destination=Ge,(0,U.Nn)(Ge)&&Ge.add(this)):this.destination=pt}static create(Ge,ke,ut){return new Et(Ge,ke,ut)}next(Ge){this.isStopped?gt(function _e(Ve){return Te("N",Ve,void 0)}(Ge),this):this._next(Ge)}error(Ge){this.isStopped?gt(function Ee(Ve){return Te("E",void 0,Ve)}(Ge),this):(this.isStopped=!0,this._error(Ge))}complete(){this.isStopped?gt(Ce,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ge){this.destination.next(Ge)}_error(Ge){try{this.destination.error(Ge)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Xe=Function.prototype.bind;function je(Ve,Ge){return Xe.call(Ve,Ge)}class Re{constructor(Ge){this.partialObserver=Ge}next(Ge){const{partialObserver:ke}=this;if(ke.next)try{ke.next(Ge)}catch(ut){Me(ut)}}error(Ge){const{partialObserver:ke}=this;if(ke.error)try{ke.error(Ge)}catch(ut){Me(ut)}else Me(Ge)}complete(){const{partialObserver:Ge}=this;if(Ge.complete)try{Ge.complete()}catch(ke){Me(ke)}}}class Et extends te{constructor(Ge,ke,ut){let ue;if(super(),(0,h.m)(Ge)||!Ge)ue={next:null!=Ge?Ge:void 0,error:null!=ke?ke:void 0,complete:null!=ut?ut:void 0};else{let me;this&&P.v.useDeprecatedNextContext?(me=Object.create(Ge),me.unsubscribe=()=>this.unsubscribe(),ue={next:Ge.next&&je(Ge.next,me),error:Ge.error&&je(Ge.error,me),complete:Ge.complete&&je(Ge.complete,me)}):ue=Ge}this.destination=new Re(ue)}}function Me(Ve){P.v.useDeprecatedSynchronousErrorHandling?(0,q.O)(Ve):(0,se.h)(Ve)}function gt(Ve,Ge){const{onStoppedNotification:ke}=P.v;ke&&W.z.setTimeout(()=>ke(Ve,Ge))}const pt={closed:!0,next:fe,error:function ae(Ve){throw Ve},complete:fe}},727:(bt,Pe,N)=>{N.d(Pe,{Lc:()=>Ce,w0:()=>fe,Nn:()=>Ee});var h=N(576);const P=(0,N(3888).d)(Te=>function(q){Te(this),this.message=q?`${q.length} errors occurred during unsubscription:\n${q.map((te,Xe)=>`${Xe+1}) ${te.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=q});var se=N(8737);class fe{constructor(W){this.initialTeardown=W,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let W;if(!this.closed){this.closed=!0;const{_parentage:q}=this;if(q)if(this._parentage=null,Array.isArray(q))for(const je of q)je.remove(this);else q.remove(this);const{initialTeardown:te}=this;if((0,h.m)(te))try{te()}catch(je){W=je instanceof P?je.errors:[je]}const{_finalizers:Xe}=this;if(Xe){this._finalizers=null;for(const je of Xe)try{_e(je)}catch(Re){W=null!=W?W:[],Re instanceof P?W=[...W,...Re.errors]:W.push(Re)}}if(W)throw new P(W)}}add(W){var q;if(W&&W!==this)if(this.closed)_e(W);else{if(W instanceof fe){if(W.closed||W._hasParent(this))return;W._addParent(this)}(this._finalizers=null!==(q=this._finalizers)&&void 0!==q?q:[]).push(W)}}_hasParent(W){const{_parentage:q}=this;return q===W||Array.isArray(q)&&q.includes(W)}_addParent(W){const{_parentage:q}=this;this._parentage=Array.isArray(q)?(q.push(W),q):q?[q,W]:W}_removeParent(W){const{_parentage:q}=this;q===W?this._parentage=null:Array.isArray(q)&&(0,se.P)(q,W)}remove(W){const{_finalizers:q}=this;q&&(0,se.P)(q,W),W instanceof fe&&W._removeParent(this)}}fe.EMPTY=(()=>{const Te=new fe;return Te.closed=!0,Te})();const Ce=fe.EMPTY;function Ee(Te){return Te instanceof fe||Te&&"closed"in Te&&(0,h.m)(Te.remove)&&(0,h.m)(Te.add)&&(0,h.m)(Te.unsubscribe)}function _e(Te){(0,h.m)(Te)?Te():Te.unsubscribe()}},2416:(bt,Pe,N)=>{N.d(Pe,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(bt,Pe,N)=>{N.d(Pe,{E:()=>U});const U=new(N(9751).y)(fe=>fe.complete())},8996:(bt,Pe,N)=>{N.d(Pe,{D:()=>Ge});var h=N(8421),U=N(5363),P=N(9468),Ce=N(9751),_e=N(2202),Te=N(576),W=N(9672);function te(ke,ut){if(!ke)throw new Error("Iterable cannot be null");return new Ce.y(ue=>{(0,W.f)(ue,ut,()=>{const me=ke[Symbol.asyncIterator]();(0,W.f)(ue,ut,()=>{me.next().then(Ae=>{Ae.done?ue.complete():ue.next(Ae.value)})},0,!0)})})}var Xe=N(3670),je=N(8239),Re=N(1144),Et=N(6495),Me=N(2206),ae=N(4532),gt=N(3260);function Ge(ke,ut){return ut?function Ve(ke,ut){if(null!=ke){if((0,Xe.c)(ke))return function se(ke,ut){return(0,h.Xf)(ke).pipe((0,P.R)(ut),(0,U.Q)(ut))}(ke,ut);if((0,Re.z)(ke))return function Ee(ke,ut){return new Ce.y(ue=>{let me=0;return ut.schedule(function(){me===ke.length?ue.complete():(ue.next(ke[me++]),ue.closed||this.schedule())})})}(ke,ut);if((0,je.t)(ke))return function fe(ke,ut){return(0,h.Xf)(ke).pipe((0,P.R)(ut),(0,U.Q)(ut))}(ke,ut);if((0,Me.D)(ke))return te(ke,ut);if((0,Et.T)(ke))return function q(ke,ut){return new Ce.y(ue=>{let me;return(0,W.f)(ue,ut,()=>{me=ke[_e.h](),(0,W.f)(ue,ut,()=>{let Ae,X;try{({value:Ae,done:X}=me.next())}catch(re){return void ue.error(re)}X?ue.complete():ue.next(Ae)},0,!0)}),()=>(0,Te.m)(null==me?void 0:me.return)&&me.return()})}(ke,ut);if((0,gt.L)(ke))return function pt(ke,ut){return te((0,gt.Q)(ke),ut)}(ke,ut)}throw(0,ae.z)(ke)}(ke,ut):(0,h.Xf)(ke)}},8421:(bt,Pe,N)=>{N.d(Pe,{Xf:()=>Xe});var h=N(655),U=N(1144),P=N(8239),se=N(9751),fe=N(3670),Ce=N(2206),Ee=N(4532),_e=N(6495),Te=N(3260),W=N(576),q=N(7849),te=N(8822);function Xe(Ve){if(Ve instanceof se.y)return Ve;if(null!=Ve){if((0,fe.c)(Ve))return function je(Ve){return new se.y(Ge=>{const ke=Ve[te.L]();if((0,W.m)(ke.subscribe))return ke.subscribe(Ge);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ve);if((0,U.z)(Ve))return function Re(Ve){return new se.y(Ge=>{for(let ke=0;ke<Ve.length&&!Ge.closed;ke++)Ge.next(Ve[ke]);Ge.complete()})}(Ve);if((0,P.t)(Ve))return function Et(Ve){return new se.y(Ge=>{Ve.then(ke=>{Ge.closed||(Ge.next(ke),Ge.complete())},ke=>Ge.error(ke)).then(null,q.h)})}(Ve);if((0,Ce.D)(Ve))return ae(Ve);if((0,_e.T)(Ve))return function Me(Ve){return new se.y(Ge=>{for(const ke of Ve)if(Ge.next(ke),Ge.closed)return;Ge.complete()})}(Ve);if((0,Te.L)(Ve))return function gt(Ve){return ae((0,Te.Q)(Ve))}(Ve)}throw(0,Ee.z)(Ve)}function ae(Ve){return new se.y(Ge=>{(function pt(Ve,Ge){var ke,ut,ue,me;return(0,h.mG)(this,void 0,void 0,function*(){try{for(ke=(0,h.KL)(Ve);!(ut=yield ke.next()).done;)if(Ge.next(ut.value),Ge.closed)return}catch(Ae){ue={error:Ae}}finally{try{ut&&!ut.done&&(me=ke.return)&&(yield me.call(ke))}finally{if(ue)throw ue.error}}Ge.complete()})})(Ve,Ge).catch(ke=>Ge.error(ke))})}},6451:(bt,Pe,N)=>{N.d(Pe,{T:()=>Ce});var h=N(8189),U=N(8421),P=N(515),se=N(7669),fe=N(8996);function Ce(...Ee){const _e=(0,se.yG)(Ee),Te=(0,se._6)(Ee,1/0),W=Ee;return W.length?1===W.length?(0,U.Xf)(W[0]):(0,h.J)(Te)((0,fe.D)(W,_e)):P.E}},5403:(bt,Pe,N)=>{N.d(Pe,{x:()=>U});var h=N(2961);function U(se,fe,Ce,Ee,_e){return new P(se,fe,Ce,Ee,_e)}class P extends h.Lv{constructor(fe,Ce,Ee,_e,Te,W){super(fe),this.onFinalize=Te,this.shouldUnsubscribe=W,this._next=Ce?function(q){try{Ce(q)}catch(te){fe.error(te)}}:super._next,this._error=_e?function(q){try{_e(q)}catch(te){fe.error(te)}finally{this.unsubscribe()}}:super._error,this._complete=Ee?function(){try{Ee()}catch(q){fe.error(q)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var fe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ce}=this;super.unsubscribe(),!Ce&&(null===(fe=this.onFinalize)||void 0===fe||fe.call(this))}}}},4004:(bt,Pe,N)=>{N.d(Pe,{U:()=>P});var h=N(4482),U=N(5403);function P(se,fe){return(0,h.e)((Ce,Ee)=>{let _e=0;Ce.subscribe((0,U.x)(Ee,Te=>{Ee.next(se.call(fe,Te,_e++))}))})}},8189:(bt,Pe,N)=>{N.d(Pe,{J:()=>P});var h=N(5577),U=N(4671);function P(se=1/0){return(0,h.z)(U.y,se)}},5577:(bt,Pe,N)=>{N.d(Pe,{z:()=>_e});var h=N(4004),U=N(8421),P=N(4482),se=N(9672),fe=N(5403),Ee=N(576);function _e(Te,W,q=1/0){return(0,Ee.m)(W)?_e((te,Xe)=>(0,h.U)((je,Re)=>W(te,je,Xe,Re))((0,U.Xf)(Te(te,Xe))),q):("number"==typeof W&&(q=W),(0,P.e)((te,Xe)=>function Ce(Te,W,q,te,Xe,je,Re,Et){const Me=[];let ae=0,gt=0,pt=!1;const Ve=()=>{pt&&!Me.length&&!ae&&W.complete()},Ge=ut=>ae<te?ke(ut):Me.push(ut),ke=ut=>{je&&W.next(ut),ae++;let ue=!1;(0,U.Xf)(q(ut,gt++)).subscribe((0,fe.x)(W,me=>{null==Xe||Xe(me),je?Ge(me):W.next(me)},()=>{ue=!0},void 0,()=>{if(ue)try{for(ae--;Me.length&&ae<te;){const me=Me.shift();Re?(0,se.f)(W,Re,()=>ke(me)):ke(me)}Ve()}catch(me){W.error(me)}}))};return Te.subscribe((0,fe.x)(W,Ge,()=>{pt=!0,Ve()})),()=>{null==Et||Et()}}(te,Xe,Te,q)))}},5363:(bt,Pe,N)=>{N.d(Pe,{Q:()=>se});var h=N(9672),U=N(4482),P=N(5403);function se(fe,Ce=0){return(0,U.e)((Ee,_e)=>{Ee.subscribe((0,P.x)(_e,Te=>(0,h.f)(_e,fe,()=>_e.next(Te),Ce),()=>(0,h.f)(_e,fe,()=>_e.complete(),Ce),Te=>(0,h.f)(_e,fe,()=>_e.error(Te),Ce)))})}},3099:(bt,Pe,N)=>{N.d(Pe,{B:()=>fe});var h=N(8421),U=N(7579),P=N(2961),se=N(4482);function fe(Ee={}){const{connector:_e=(()=>new U.x),resetOnError:Te=!0,resetOnComplete:W=!0,resetOnRefCountZero:q=!0}=Ee;return te=>{let Xe,je,Re,Et=0,Me=!1,ae=!1;const gt=()=>{null==je||je.unsubscribe(),je=void 0},pt=()=>{gt(),Xe=Re=void 0,Me=ae=!1},Ve=()=>{const Ge=Xe;pt(),null==Ge||Ge.unsubscribe()};return(0,se.e)((Ge,ke)=>{Et++,!ae&&!Me&&gt();const ut=Re=null!=Re?Re:_e();ke.add(()=>{Et--,0===Et&&!ae&&!Me&&(je=Ce(Ve,q))}),ut.subscribe(ke),!Xe&&Et>0&&(Xe=new P.Hp({next:ue=>ut.next(ue),error:ue=>{ae=!0,gt(),je=Ce(pt,Te,ue),ut.error(ue)},complete:()=>{Me=!0,gt(),je=Ce(pt,W),ut.complete()}}),(0,h.Xf)(Ge).subscribe(Xe))})(te)}}function Ce(Ee,_e,...Te){if(!0===_e)return void Ee();if(!1===_e)return;const W=new P.Hp({next:()=>{W.unsubscribe(),Ee()}});return _e(...Te).subscribe(W)}},9468:(bt,Pe,N)=>{N.d(Pe,{R:()=>U});var h=N(4482);function U(P,se=0){return(0,h.e)((fe,Ce)=>{Ce.add(P.schedule(()=>fe.subscribe(Ce),se))})}},8505:(bt,Pe,N)=>{N.d(Pe,{b:()=>fe});var h=N(576),U=N(4482),P=N(5403),se=N(4671);function fe(Ce,Ee,_e){const Te=(0,h.m)(Ce)||Ee||_e?{next:Ce,error:Ee,complete:_e}:Ce;return Te?(0,U.e)((W,q)=>{var te;null===(te=Te.subscribe)||void 0===te||te.call(Te);let Xe=!0;W.subscribe((0,P.x)(q,je=>{var Re;null===(Re=Te.next)||void 0===Re||Re.call(Te,je),q.next(je)},()=>{var je;Xe=!1,null===(je=Te.complete)||void 0===je||je.call(Te),q.complete()},je=>{var Re;Xe=!1,null===(Re=Te.error)||void 0===Re||Re.call(Te,je),q.error(je)},()=>{var je,Re;Xe&&(null===(je=Te.unsubscribe)||void 0===je||je.call(Te)),null===(Re=Te.finalize)||void 0===Re||Re.call(Te)}))}):se.y}},4408:(bt,Pe,N)=>{N.d(Pe,{o:()=>fe});var h=N(727);class U extends h.w0{constructor(Ee,_e){super()}schedule(Ee,_e=0){return this}}const P={setInterval(Ce,Ee,..._e){const{delegate:Te}=P;return null!=Te&&Te.setInterval?Te.setInterval(Ce,Ee,..._e):setInterval(Ce,Ee,..._e)},clearInterval(Ce){const{delegate:Ee}=P;return((null==Ee?void 0:Ee.clearInterval)||clearInterval)(Ce)},delegate:void 0};var se=N(8737);class fe extends U{constructor(Ee,_e){super(Ee,_e),this.scheduler=Ee,this.work=_e,this.pending=!1}schedule(Ee,_e=0){if(this.closed)return this;this.state=Ee;const Te=this.id,W=this.scheduler;return null!=Te&&(this.id=this.recycleAsyncId(W,Te,_e)),this.pending=!0,this.delay=_e,this.id=this.id||this.requestAsyncId(W,this.id,_e),this}requestAsyncId(Ee,_e,Te=0){return P.setInterval(Ee.flush.bind(Ee,this),Te)}recycleAsyncId(Ee,_e,Te=0){if(null!=Te&&this.delay===Te&&!1===this.pending)return _e;P.clearInterval(_e)}execute(Ee,_e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Te=this._execute(Ee,_e);if(Te)return Te;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ee,_e){let W,Te=!1;try{this.work(Ee)}catch(q){Te=!0,W=q||new Error("Scheduled action threw falsy error")}if(Te)return this.unsubscribe(),W}unsubscribe(){if(!this.closed){const{id:Ee,scheduler:_e}=this,{actions:Te}=_e;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(Te,this),null!=Ee&&(this.id=this.recycleAsyncId(_e,Ee,null)),this.delay=null,super.unsubscribe()}}}},7565:(bt,Pe,N)=>{N.d(Pe,{v:()=>P});var h=N(6063);class U{constructor(fe,Ce=U.now){this.schedulerActionCtor=fe,this.now=Ce}schedule(fe,Ce=0,Ee){return new this.schedulerActionCtor(this,fe).schedule(Ee,Ce)}}U.now=h.l.now;class P extends U{constructor(fe,Ce=U.now){super(fe,Ce),this.actions=[],this._active=!1,this._scheduled=void 0}flush(fe){const{actions:Ce}=this;if(this._active)return void Ce.push(fe);let Ee;this._active=!0;do{if(Ee=fe.execute(fe.state,fe.delay))break}while(fe=Ce.shift());if(this._active=!1,Ee){for(;fe=Ce.shift();)fe.unsubscribe();throw Ee}}}},4986:(bt,Pe,N)=>{N.d(Pe,{z:()=>P});var h=N(4408);const P=new(N(7565).v)(h.o)},6063:(bt,Pe,N)=>{N.d(Pe,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(bt,Pe,N)=>{N.d(Pe,{z:()=>h});const h={setTimeout(U,P,...se){const{delegate:fe}=h;return null!=fe&&fe.setTimeout?fe.setTimeout(U,P,...se):setTimeout(U,P,...se)},clearTimeout(U){const{delegate:P}=h;return((null==P?void 0:P.clearTimeout)||clearTimeout)(U)},delegate:void 0}},2202:(bt,Pe,N)=>{N.d(Pe,{h:()=>U});const U=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(bt,Pe,N)=>{N.d(Pe,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(bt,Pe,N)=>{N.d(Pe,{_6:()=>Ce,jO:()=>se,yG:()=>fe});var h=N(576);function P(Ee){return Ee[Ee.length-1]}function se(Ee){return(0,h.m)(P(Ee))?Ee.pop():void 0}function fe(Ee){return function U(Ee){return Ee&&(0,h.m)(Ee.schedule)}(P(Ee))?Ee.pop():void 0}function Ce(Ee,_e){return"number"==typeof P(Ee)?Ee.pop():_e}},8737:(bt,Pe,N)=>{function h(U,P){if(U){const se=U.indexOf(P);0<=se&&U.splice(se,1)}}N.d(Pe,{P:()=>h})},3888:(bt,Pe,N)=>{function h(U){const se=U(fe=>{Error.call(fe),fe.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}N.d(Pe,{d:()=>h})},2806:(bt,Pe,N)=>{N.d(Pe,{O:()=>se,x:()=>P});var h=N(2416);let U=null;function P(fe){if(h.v.useDeprecatedSynchronousErrorHandling){const Ce=!U;if(Ce&&(U={errorThrown:!1,error:null}),fe(),Ce){const{errorThrown:Ee,error:_e}=U;if(U=null,Ee)throw _e}}else fe()}function se(fe){h.v.useDeprecatedSynchronousErrorHandling&&U&&(U.errorThrown=!0,U.error=fe)}},9672:(bt,Pe,N)=>{function h(U,P,se,fe=0,Ce=!1){const Ee=P.schedule(function(){se(),Ce?U.add(this.schedule(null,fe)):this.unsubscribe()},fe);if(U.add(Ee),!Ce)return Ee}N.d(Pe,{f:()=>h})},4671:(bt,Pe,N)=>{function h(U){return U}N.d(Pe,{y:()=>h})},1144:(bt,Pe,N)=>{N.d(Pe,{z:()=>h});const h=U=>U&&"number"==typeof U.length&&"function"!=typeof U},2206:(bt,Pe,N)=>{N.d(Pe,{D:()=>U});var h=N(576);function U(P){return Symbol.asyncIterator&&(0,h.m)(null==P?void 0:P[Symbol.asyncIterator])}},576:(bt,Pe,N)=>{function h(U){return"function"==typeof U}N.d(Pe,{m:()=>h})},3670:(bt,Pe,N)=>{N.d(Pe,{c:()=>P});var h=N(8822),U=N(576);function P(se){return(0,U.m)(se[h.L])}},6495:(bt,Pe,N)=>{N.d(Pe,{T:()=>P});var h=N(2202),U=N(576);function P(se){return(0,U.m)(null==se?void 0:se[h.h])}},8239:(bt,Pe,N)=>{N.d(Pe,{t:()=>U});var h=N(576);function U(P){return(0,h.m)(null==P?void 0:P.then)}},3260:(bt,Pe,N)=>{N.d(Pe,{L:()=>se,Q:()=>P});var h=N(655),U=N(576);function P(fe){return(0,h.FC)(this,arguments,function*(){const Ee=fe.getReader();try{for(;;){const{value:_e,done:Te}=yield(0,h.qq)(Ee.read());if(Te)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(_e)}}finally{Ee.releaseLock()}})}function se(fe){return(0,U.m)(null==fe?void 0:fe.getReader)}},4482:(bt,Pe,N)=>{N.d(Pe,{A:()=>U,e:()=>P});var h=N(576);function U(se){return(0,h.m)(null==se?void 0:se.lift)}function P(se){return fe=>{if(U(fe))return fe.lift(function(Ce){try{return se(Ce,this)}catch(Ee){this.error(Ee)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(bt,Pe,N)=>{N.d(Pe,{U:()=>P,z:()=>U});var h=N(4671);function U(...se){return P(se)}function P(se){return 0===se.length?h.y:1===se.length?se[0]:function(Ce){return se.reduce((Ee,_e)=>_e(Ee),Ce)}}},7849:(bt,Pe,N)=>{N.d(Pe,{h:()=>P});var h=N(2416),U=N(3410);function P(se){U.z.setTimeout(()=>{const{onUnhandledError:fe}=h.v;if(!fe)throw se;fe(se)})}},4532:(bt,Pe,N)=>{function h(U){return new TypeError(`You provided ${null!==U&&"object"==typeof U?"an invalid object":`'${U}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}N.d(Pe,{z:()=>h})},609:function(bt,Pe,N){var h,U,P=this&&this.__spreadArray||function(se,fe,Ce){if(Ce||2===arguments.length)for(var Te,Ee=0,_e=fe.length;Ee<_e;Ee++)(Te||!(Ee in fe))&&(Te||(Te=Array.prototype.slice.call(fe,0,Ee)),Te[Ee]=fe[Ee]);return se.concat(Te||Array.prototype.slice.call(fe))};h=function(){!function(R){var L=R.performance;function z(it){L&&L.mark&&L.mark(it)}function J(it,he){L&&L.measure&&L.measure(it,he)}z("Zone");var le=R.__Zone_symbol_prefix||"__zone_symbol__";function De(it){return le+it}var $e=!0===R[De("forceDuplicateZoneCheck")];if(R.Zone){if($e||"function"!=typeof R.Zone.__symbol__)throw new Error("Zone already loaded.");return R.Zone}var Oe=function(){function it(he,pe){this._parent=he,this._name=pe?pe.name||"unnamed":"<root>",this._properties=pe&&pe.properties||{},this._zoneDelegate=new yt(this,this._parent&&this._parent._zoneDelegate,pe)}return it.assertZonePatched=function(){if(R.Promise!==zt.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")},Object.defineProperty(it,"root",{get:function(){for(var he=it.current;he.parent;)he=he.parent;return he},enumerable:!1,configurable:!0}),Object.defineProperty(it,"current",{get:function(){return kn.zone},enumerable:!1,configurable:!0}),Object.defineProperty(it,"currentTask",{get:function(){return ii},enumerable:!1,configurable:!0}),it.__load_patch=function(he,pe,be){if(void 0===be&&(be=!1),zt.hasOwnProperty(he)){if(!be&&$e)throw Error("Already loaded patch: "+he)}else if(!R["__Zone_disable_"+he]){var Ht="Zone:"+he;z(Ht),zt[he]=pe(R,it,$t),J(Ht,Ht)}},Object.defineProperty(it.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(it.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),it.prototype.get=function(he){var pe=this.getZoneWith(he);if(pe)return pe._properties[he]},it.prototype.getZoneWith=function(he){for(var pe=this;pe;){if(pe._properties.hasOwnProperty(he))return pe;pe=pe._parent}return null},it.prototype.fork=function(he){if(!he)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,he)},it.prototype.wrap=function(he,pe){if("function"!=typeof he)throw new Error("Expecting function got: "+he);var be=this._zoneDelegate.intercept(this,he,pe),Ht=this;return function(){return Ht.runGuarded(be,this,arguments,pe)}},it.prototype.run=function(he,pe,be,Ht){kn={parent:kn,zone:this};try{return this._zoneDelegate.invoke(this,he,pe,be,Ht)}finally{kn=kn.parent}},it.prototype.runGuarded=function(he,pe,be,Ht){void 0===pe&&(pe=null),kn={parent:kn,zone:this};try{try{return this._zoneDelegate.invoke(this,he,pe,be,Ht)}catch(ur){if(this._zoneDelegate.handleError(this,ur))throw ur}}finally{kn=kn.parent}},it.prototype.runTask=function(he,pe,be){if(he.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(he.zone||Ze).name+"; Execution: "+this.name+")");if(he.state!==qn||he.type!==Jt&&he.type!==Mt){var Ht=he.state!=mn;Ht&&he._transitionTo(mn,Rn),he.runCount++;var ur=ii;ii=he,kn={parent:kn,zone:this};try{he.type==Mt&&he.data&&!he.data.isPeriodic&&(he.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,he,pe,be)}catch(gi){if(this._zoneDelegate.handleError(this,gi))throw gi}}finally{he.state!==qn&&he.state!==Ln&&(he.type==Jt||he.data&&he.data.isPeriodic?Ht&&he._transitionTo(Rn,mn):(he.runCount=0,this._updateTaskCount(he,-1),Ht&&he._transitionTo(qn,mn,qn))),kn=kn.parent,ii=ur}}},it.prototype.scheduleTask=function(he){if(he.zone&&he.zone!==this)for(var pe=this;pe;){if(pe===he.zone)throw Error("can not reschedule task to ".concat(this.name," which is descendants of the original zone ").concat(he.zone.name));pe=pe.parent}he._transitionTo(Nt,qn);var be=[];he._zoneDelegates=be,he._zone=this;try{he=this._zoneDelegate.scheduleTask(this,he)}catch(Ht){throw he._transitionTo(Ln,Nt,qn),this._zoneDelegate.handleError(this,Ht),Ht}return he._zoneDelegates===be&&this._updateTaskCount(he,1),he.state==Nt&&he._transitionTo(Rn,Nt),he},it.prototype.scheduleMicroTask=function(he,pe,be,Ht){return this.scheduleTask(new ye(Xt,he,pe,be,Ht,void 0))},it.prototype.scheduleMacroTask=function(he,pe,be,Ht,ur){return this.scheduleTask(new ye(Mt,he,pe,be,Ht,ur))},it.prototype.scheduleEventTask=function(he,pe,be,Ht,ur){return this.scheduleTask(new ye(Jt,he,pe,be,Ht,ur))},it.prototype.cancelTask=function(he){if(he.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(he.zone||Ze).name+"; Execution: "+this.name+")");he._transitionTo(Dt,Rn,mn);try{this._zoneDelegate.cancelTask(this,he)}catch(pe){throw he._transitionTo(Ln,Dt),this._zoneDelegate.handleError(this,pe),pe}return this._updateTaskCount(he,-1),he._transitionTo(qn,Dt),he.runCount=0,he},it.prototype._updateTaskCount=function(he,pe){var be=he._zoneDelegates;-1==pe&&(he._zoneDelegates=null);for(var Ht=0;Ht<be.length;Ht++)be[Ht]._updateTaskCount(he.type,pe)},it}();Oe.__symbol__=De;var Jn,dt={name:"",onHasTask:function(it,he,pe,be){return it.hasTask(pe,be)},onScheduleTask:function(it,he,pe,be){return it.scheduleTask(pe,be)},onInvokeTask:function(it,he,pe,be,Ht,ur){return it.invokeTask(pe,be,Ht,ur)},onCancelTask:function(it,he,pe,be){return it.cancelTask(pe,be)}},yt=function(){function it(he,pe,be){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this.zone=he,this._parentDelegate=pe,this._forkZS=be&&(be&&be.onFork?be:pe._forkZS),this._forkDlgt=be&&(be.onFork?pe:pe._forkDlgt),this._forkCurrZone=be&&(be.onFork?this.zone:pe._forkCurrZone),this._interceptZS=be&&(be.onIntercept?be:pe._interceptZS),this._interceptDlgt=be&&(be.onIntercept?pe:pe._interceptDlgt),this._interceptCurrZone=be&&(be.onIntercept?this.zone:pe._interceptCurrZone),this._invokeZS=be&&(be.onInvoke?be:pe._invokeZS),this._invokeDlgt=be&&(be.onInvoke?pe:pe._invokeDlgt),this._invokeCurrZone=be&&(be.onInvoke?this.zone:pe._invokeCurrZone),this._handleErrorZS=be&&(be.onHandleError?be:pe._handleErrorZS),this._handleErrorDlgt=be&&(be.onHandleError?pe:pe._handleErrorDlgt),this._handleErrorCurrZone=be&&(be.onHandleError?this.zone:pe._handleErrorCurrZone),this._scheduleTaskZS=be&&(be.onScheduleTask?be:pe._scheduleTaskZS),this._scheduleTaskDlgt=be&&(be.onScheduleTask?pe:pe._scheduleTaskDlgt),this._scheduleTaskCurrZone=be&&(be.onScheduleTask?this.zone:pe._scheduleTaskCurrZone),this._invokeTaskZS=be&&(be.onInvokeTask?be:pe._invokeTaskZS),this._invokeTaskDlgt=be&&(be.onInvokeTask?pe:pe._invokeTaskDlgt),this._invokeTaskCurrZone=be&&(be.onInvokeTask?this.zone:pe._invokeTaskCurrZone),this._cancelTaskZS=be&&(be.onCancelTask?be:pe._cancelTaskZS),this._cancelTaskDlgt=be&&(be.onCancelTask?pe:pe._cancelTaskDlgt),this._cancelTaskCurrZone=be&&(be.onCancelTask?this.zone:pe._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;var Ht=be&&be.onHasTask;(Ht||pe&&pe._hasTaskZS)&&(this._hasTaskZS=Ht?be:dt,this._hasTaskDlgt=pe,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=he,be.onScheduleTask||(this._scheduleTaskZS=dt,this._scheduleTaskDlgt=pe,this._scheduleTaskCurrZone=this.zone),be.onInvokeTask||(this._invokeTaskZS=dt,this._invokeTaskDlgt=pe,this._invokeTaskCurrZone=this.zone),be.onCancelTask||(this._cancelTaskZS=dt,this._cancelTaskDlgt=pe,this._cancelTaskCurrZone=this.zone))}return it.prototype.fork=function(he,pe){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,he,pe):new Oe(he,pe)},it.prototype.intercept=function(he,pe,be){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,he,pe,be):pe},it.prototype.invoke=function(he,pe,be,Ht,ur){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,he,pe,be,Ht,ur):pe.apply(be,Ht)},it.prototype.handleError=function(he,pe){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,he,pe)},it.prototype.scheduleTask=function(he,pe){var be=pe;if(this._scheduleTaskZS)this._hasTaskZS&&be._zoneDelegates.push(this._hasTaskDlgtOwner),(be=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,he,pe))||(be=pe);else if(pe.scheduleFn)pe.scheduleFn(pe);else{if(pe.type!=Xt)throw new Error("Task is missing scheduleFn.");Bn(pe)}return be},it.prototype.invokeTask=function(he,pe,be,Ht){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,he,pe,be,Ht):pe.callback.apply(be,Ht)},it.prototype.cancelTask=function(he,pe){var be;if(this._cancelTaskZS)be=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,he,pe);else{if(!pe.cancelFn)throw Error("Task is not cancelable");be=pe.cancelFn(pe)}return be},it.prototype.hasTask=function(he,pe){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,he,pe)}catch(be){this.handleError(he,be)}},it.prototype._updateTaskCount=function(he,pe){var be=this._taskCounts,Ht=be[he],ur=be[he]=Ht+pe;if(ur<0)throw new Error("More tasks executed then were scheduled.");0!=Ht&&0!=ur||this.hasTask(this.zone,{microTask:be.microTask>0,macroTask:be.macroTask>0,eventTask:be.eventTask>0,change:he})},it}(),ye=function(){function it(he,pe,be,Ht,ur,gi){if(this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=he,this.source=pe,this.data=Ht,this.scheduleFn=ur,this.cancelFn=gi,!be)throw new Error("callback is not defined");this.callback=be;var ze=this;this.invoke=he===Jt&&Ht&&Ht.useG?it.invokeTask:function(){return it.invokeTask.call(R,ze,this,arguments)}}return it.invokeTask=function(he,pe,be){he||(he=this),fn++;try{return he.runCount++,he.zone.runTask(he,pe,be)}finally{1==fn&&hn(),fn--}},Object.defineProperty(it.prototype,"zone",{get:function(){return this._zone},enumerable:!1,configurable:!0}),Object.defineProperty(it.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),it.prototype.cancelScheduleRequest=function(){this._transitionTo(qn,Nt)},it.prototype._transitionTo=function(he,pe,be){if(this._state!==pe&&this._state!==be)throw new Error("".concat(this.type," '").concat(this.source,"': can not transition to '").concat(he,"', expecting state '").concat(pe,"'").concat(be?" or '"+be+"'":"",", was '").concat(this._state,"'."));this._state=he,he==qn&&(this._zoneDelegates=null)},it.prototype.toString=function(){return this.data&&void 0!==this.data.handleId?this.data.handleId.toString():Object.prototype.toString.call(this)},it.prototype.toJSON=function(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}},it}(),Ye=De("setTimeout"),at=De("Promise"),_t=De("then"),Gt=[],Bt=!1;function jt(it){if(Jn||R[at]&&(Jn=R[at].resolve(0)),Jn){var he=Jn[_t];he||(he=Jn.then),he.call(Jn,it)}else R[Ye](it,0)}function Bn(it){0===fn&&0===Gt.length&&jt(hn),it&&Gt.push(it)}function hn(){if(!Bt){for(Bt=!0;Gt.length;){var it=Gt;Gt=[];for(var he=0;he<it.length;he++){var pe=it[he];try{pe.zone.runTask(pe,null,null)}catch(be){$t.onUnhandledError(be)}}}$t.microtaskDrainDone(),Bt=!1}}var Ze={name:"NO ZONE"},qn="notScheduled",Nt="scheduling",Rn="scheduled",mn="running",Dt="canceling",Ln="unknown",Xt="microTask",Mt="macroTask",Jt="eventTask",zt={},$t={symbol:De,currentZoneFrame:function(){return kn},onUnhandledError:xn,microtaskDrainDone:xn,scheduleMicroTask:Bn,showUncaughtError:function(){return!Oe[De("ignoreConsoleErrorUncaughtError")]},patchEventTarget:function(){return[]},patchOnProperties:xn,patchMethod:function(){return xn},bindArguments:function(){return[]},patchThen:function(){return xn},patchMacroTask:function(){return xn},patchEventPrototype:function(){return xn},isIEOrEdge:function(){return!1},getGlobalObjects:function(){},ObjectDefineProperty:function(){return xn},ObjectGetOwnPropertyDescriptor:function(){},ObjectCreate:function(){},ArraySlice:function(){return[]},patchClass:function(){return xn},wrapWithCurrentZone:function(){return xn},filterProperties:function(){return[]},attachOriginToPatched:function(){return xn},_redefineProperty:function(){return xn},patchCallbacks:function(){return xn},nativeScheduleMicroTask:jt},kn={parent:null,zone:new Oe(null,null)},ii=null,fn=0;function xn(){}J("Zone","Zone"),R.Zone=Oe}("undefined"!=typeof window&&window||"undefined"!=typeof self&&self||global);var se=Object.getOwnPropertyDescriptor,fe=Object.defineProperty,Ce=Object.getPrototypeOf,Ee=Object.create,_e=Array.prototype.slice,Te="addEventListener",W="removeEventListener",q=Zone.__symbol__(Te),te=Zone.__symbol__(W),Xe="true",je="false",Re=Zone.__symbol__("");function Et(R,L){return Zone.current.wrap(R,L)}function Me(R,L,z,J,le){return Zone.current.scheduleMacroTask(R,L,z,J,le)}var ae=Zone.__symbol__,gt="undefined"!=typeof window,pt=gt?window:void 0,Ve=gt&&pt||"object"==typeof self&&self||global;function ke(R,L){for(var z=R.length-1;z>=0;z--)"function"==typeof R[z]&&(R[z]=Et(R[z],L+"_"+z));return R}function ue(R){return!R||!1!==R.writable&&!("function"==typeof R.get&&void 0===R.set)}var me="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,Ae=!("nw"in Ve)&&void 0!==Ve.process&&"[object process]"==={}.toString.call(Ve.process),X=!Ae&&!me&&!(!gt||!pt.HTMLElement),re=void 0!==Ve.process&&"[object process]"==={}.toString.call(Ve.process)&&!me&&!(!gt||!pt.HTMLElement),Ie={},de=function(R){if(R=R||Ve.event){var L=Ie[R.type];L||(L=Ie[R.type]=ae("ON_PROPERTY"+R.type));var le,z=this||R.target||Ve,J=z[L];return X&&z===pt&&"error"===R.type?!0===(le=J&&J.call(this,R.message,R.filename,R.lineno,R.colno,R.error))&&R.preventDefault():null!=(le=J&&J.apply(this,arguments))&&!le&&R.preventDefault(),le}};function Qe(R,L,z){var J=se(R,L);if(!J&&z&&se(z,L)&&(J={enumerable:!0,configurable:!0}),J&&J.configurable){var De=ae("on"+L+"patched");if(!R.hasOwnProperty(De)||!R[De]){delete J.writable,delete J.value;var $e=J.get,Oe=J.set,dt=L.slice(2),yt=Ie[dt];yt||(yt=Ie[dt]=ae("ON_PROPERTY"+dt)),J.set=function(ye){var Ye=this;!Ye&&R===Ve&&(Ye=Ve),Ye&&("function"==typeof Ye[yt]&&Ye.removeEventListener(dt,de),Oe&&Oe.call(Ye,null),Ye[yt]=ye,"function"==typeof ye&&Ye.addEventListener(dt,de,!1))},J.get=function(){var ye=this;if(!ye&&R===Ve&&(ye=Ve),!ye)return null;var Ye=ye[yt];if(Ye)return Ye;if($e){var at=$e.call(this);if(at)return J.set.call(this,at),"function"==typeof ye.removeAttribute&&ye.removeAttribute(L),at}return null},fe(R,L,J),R[De]=!0}}}function et(R,L,z){if(L)for(var J=0;J<L.length;J++)Qe(R,"on"+L[J],z);else{var le=[];for(var De in R)"on"==De.slice(0,2)&&le.push(De);for(var $e=0;$e<le.length;$e++)Qe(R,le[$e],z)}}var Tt=ae("originalInstance");function Tn(R){var L=Ve[R];if(L){Ve[ae(R)]=L,Ve[R]=function(){var le=ke(arguments,R);switch(le.length){case 0:this[Tt]=new L;break;case 1:this[Tt]=new L(le[0]);break;case 2:this[Tt]=new L(le[0],le[1]);break;case 3:this[Tt]=new L(le[0],le[1],le[2]);break;case 4:this[Tt]=new L(le[0],le[1],le[2],le[3]);break;default:throw new Error("Arg list too long.")}},On(Ve[R],L);var J,z=new L(function(){});for(J in z)"XMLHttpRequest"===R&&"responseBlob"===J||function(le){"function"==typeof z[le]?Ve[R].prototype[le]=function(){return this[Tt][le].apply(this[Tt],arguments)}:fe(Ve[R].prototype,le,{set:function(De){"function"==typeof De?(this[Tt][le]=Et(De,R+"."+le),On(this[Tt][le],De)):this[Tt][le]=De},get:function(){return this[Tt][le]}})}(J);for(J in L)"prototype"!==J&&L.hasOwnProperty(J)&&(Ve[R][J]=L[J])}}function en(R,L,z){for(var J=R;J&&!J.hasOwnProperty(L);)J=Ce(J);!J&&R[L]&&(J=R);var le=ae(L),De=null;if(J&&(!(De=J[le])||!J.hasOwnProperty(le))&&(De=J[le]=J[L],ue(J&&se(J,L)))){var Oe=z(De,le,L);J[L]=function(){return Oe(this,arguments)},On(J[L],De)}return De}function ct(R,L,z){var J=null;function le(De){var $e=De.data;return $e.args[$e.cbIdx]=function(){De.invoke.apply(this,arguments)},J.apply($e.target,$e.args),De}J=en(R,L,function(De){return function($e,Oe){var dt=z($e,Oe);return dt.cbIdx>=0&&"function"==typeof Oe[dt.cbIdx]?Me(dt.name,Oe[dt.cbIdx],dt,le):De.apply($e,Oe)}})}function On(R,L){R[ae("OriginalDelegate")]=L}var hr=!1,Fn=!1;function Cn(){if(hr)return Fn;hr=!0;try{var R=pt.navigator.userAgent;(-1!==R.indexOf("MSIE ")||-1!==R.indexOf("Trident/")||-1!==R.indexOf("Edge/"))&&(Fn=!0)}catch(L){}return Fn}Zone.__load_patch("ZoneAwarePromise",function(R,L,z){var J=Object.getOwnPropertyDescriptor,le=Object.defineProperty;var $e=z.symbol,Oe=[],dt=!0===R[$e("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")],yt=$e("Promise"),ye=$e("then");z.onUnhandledError=function(ze){if(z.showUncaughtError()){var lt=ze&&ze.rejection;lt?console.error("Unhandled Promise rejection:",lt instanceof Error?lt.message:lt,"; Zone:",ze.zone.name,"; Task:",ze.task&&ze.task.source,"; Value:",lt,lt instanceof Error?lt.stack:void 0):console.error(ze)}},z.microtaskDrainDone=function(){for(var ze=function(){var lt=Oe.shift();try{lt.zone.runGuarded(function(){throw lt.throwOriginal?lt.rejection:lt})}catch(nt){!function _t(ze){z.onUnhandledError(ze);try{var lt=L[at];"function"==typeof lt&&lt.call(this,ze)}catch(nt){}}(nt)}};Oe.length;)ze()};var at=$e("unhandledPromiseRejectionHandler");function Gt(ze){return ze&&ze.then}function Bt(ze){return ze}function Jn(ze){return pe.reject(ze)}var jt=$e("state"),Bn=$e("value"),hn=$e("finally"),Ze=$e("parentPromiseValue"),qn=$e("parentPromiseState"),Rn=null,Dt=!1;function Xt(ze,lt){return function(nt){try{$t(ze,lt,nt)}catch(qe){$t(ze,!1,qe)}}}var Mt=function(){var ze=!1;return function(nt){return function(){ze||(ze=!0,nt.apply(null,arguments))}}},zt=$e("currentTaskTrace");function $t(ze,lt,nt){var qe=Mt();if(ze===nt)throw new TypeError("Promise resolved with itself");if(ze[jt]===Rn){var It=null;try{("object"==typeof nt||"function"==typeof nt)&&(It=nt&&nt.then)}catch(an){return qe(function(){$t(ze,!1,an)})(),ze}if(lt!==Dt&&nt instanceof pe&&nt.hasOwnProperty(jt)&&nt.hasOwnProperty(Bn)&&nt[jt]!==Rn)ii(nt),$t(ze,nt[jt],nt[Bn]);else if(lt!==Dt&&"function"==typeof It)try{It.call(nt,qe(Xt(ze,lt)),qe(Xt(ze,!1)))}catch(an){qe(function(){$t(ze,!1,an)})()}else{ze[jt]=lt;var sn=ze[Bn];if(ze[Bn]=nt,ze[hn]===hn&&true===lt&&(ze[jt]=ze[qn],ze[Bn]=ze[Ze]),lt===Dt&&nt instanceof Error){var Kt=L.currentTask&&L.currentTask.data&&L.currentTask.data.__creationTrace__;Kt&&le(nt,zt,{configurable:!0,enumerable:!1,writable:!0,value:Kt})}for(var wn=0;wn<sn.length;)fn(ze,sn[wn++],sn[wn++],sn[wn++],sn[wn++]);if(0==sn.length&&lt==Dt){ze[jt]=0;var on=nt;try{throw new Error("Uncaught (in promise): "+function De(ze){return ze&&ze.toString===Object.prototype.toString?(ze.constructor&&ze.constructor.name||"")+": "+JSON.stringify(ze):ze?ze.toString():Object.prototype.toString.call(ze)}(nt)+(nt&&nt.stack?"\n"+nt.stack:""))}catch(an){on=an}dt&&(on.throwOriginal=!0),on.rejection=nt,on.promise=ze,on.zone=L.current,on.task=L.currentTask,Oe.push(on),z.scheduleMicroTask()}}}return ze}var kn=$e("rejectionHandledHandler");function ii(ze){if(0===ze[jt]){try{var lt=L[kn];lt&&"function"==typeof lt&&lt.call(this,{rejection:ze[Bn],promise:ze})}catch(qe){}ze[jt]=Dt;for(var nt=0;nt<Oe.length;nt++)ze===Oe[nt].promise&&Oe.splice(nt,1)}}function fn(ze,lt,nt,qe,It){ii(ze);var sn=ze[jt],Kt=sn?"function"==typeof qe?qe:Bt:"function"==typeof It?It:Jn;lt.scheduleMicroTask("Promise.then",function(){try{var wn=ze[Bn],on=!!nt&&hn===nt[hn];on&&(nt[Ze]=wn,nt[qn]=sn);var an=lt.run(Kt,void 0,on&&Kt!==Jn&&Kt!==Bt?[]:[wn]);$t(nt,!0,an)}catch(An){$t(nt,!1,An)}},nt)}var it=function(){},he=R.AggregateError,pe=function(){function ze(lt){var nt=this;if(!(nt instanceof ze))throw new Error("Must be an instanceof Promise.");nt[jt]=Rn,nt[Bn]=[];try{var qe=Mt();lt&&lt(qe(Xt(nt,true)),qe(Xt(nt,Dt)))}catch(It){$t(nt,!1,It)}}return ze.toString=function(){return"function ZoneAwarePromise() { [native code] }"},ze.resolve=function(lt){return $t(new this(null),true,lt)},ze.reject=function(lt){return $t(new this(null),Dt,lt)},ze.any=function(lt){if(!lt||"function"!=typeof lt[Symbol.iterator])return Promise.reject(new he([],"All promises were rejected"));var nt=[],qe=0;try{for(var It=0,sn=lt;It<sn.length;It++)qe++,nt.push(ze.resolve(sn[It]))}catch(an){return Promise.reject(new he([],"All promises were rejected"))}if(0===qe)return Promise.reject(new he([],"All promises were rejected"));var wn=!1,on=[];return new ze(function(an,An){for(var cr=0;cr<nt.length;cr++)nt[cr].then(function(qr){wn||(wn=!0,an(qr))},function(qr){on.push(qr),0==--qe&&(wn=!0,An(new he(on,"All promises were rejected")))})})},ze.race=function(lt){var nt,qe,It=new this(function(An,cr){nt=An,qe=cr});function sn(An){nt(An)}function Kt(An){qe(An)}for(var wn=0,on=lt;wn<on.length;wn++){var an=on[wn];Gt(an)||(an=this.resolve(an)),an.then(sn,Kt)}return It},ze.all=function(lt){return ze.allWithCallback(lt)},ze.allSettled=function(lt){return(this&&this.prototype instanceof ze?this:ze).allWithCallback(lt,{thenCallback:function(qe){return{status:"fulfilled",value:qe}},errorCallback:function(qe){return{status:"rejected",reason:qe}}})},ze.allWithCallback=function(lt,nt){for(var qe,It,sn=new this(function(sr,Sr){qe=sr,It=Sr}),Kt=2,wn=0,on=[],an=function(sr){Gt(sr)||(sr=An.resolve(sr));var Sr=wn;try{sr.then(function(gr){on[Sr]=nt?nt.thenCallback(gr):gr,0==--Kt&&qe(on)},function(gr){nt?(on[Sr]=nt.errorCallback(gr),0==--Kt&&qe(on)):It(gr)})}catch(gr){It(gr)}Kt++,wn++},An=this,cr=0,qr=lt;cr<qr.length;cr++)an(qr[cr]);return 0==(Kt-=2)&&qe(on),sn},Object.defineProperty(ze.prototype,Symbol.toStringTag,{get:function(){return"Promise"},enumerable:!1,configurable:!0}),Object.defineProperty(ze.prototype,Symbol.species,{get:function(){return ze},enumerable:!1,configurable:!0}),ze.prototype.then=function(lt,nt){var qe,It=null===(qe=this.constructor)||void 0===qe?void 0:qe[Symbol.species];(!It||"function"!=typeof It)&&(It=this.constructor||ze);var sn=new It(it),Kt=L.current;return this[jt]==Rn?this[Bn].push(Kt,sn,lt,nt):fn(this,Kt,sn,lt,nt),sn},ze.prototype.catch=function(lt){return this.then(null,lt)},ze.prototype.finally=function(lt){var nt,qe=null===(nt=this.constructor)||void 0===nt?void 0:nt[Symbol.species];(!qe||"function"!=typeof qe)&&(qe=ze);var It=new qe(it);It[hn]=hn;var sn=L.current;return this[jt]==Rn?this[Bn].push(sn,It,lt,lt):fn(this,sn,It,lt,lt),It},ze}();pe.resolve=pe.resolve,pe.reject=pe.reject,pe.race=pe.race,pe.all=pe.all;var be=R[yt]=R.Promise;R.Promise=pe;var Ht=$e("thenPatched");function ur(ze){var lt=ze.prototype,nt=J(lt,"then");if(!nt||!1!==nt.writable&&nt.configurable){var qe=lt.then;lt[ye]=qe,ze.prototype.then=function(It,sn){var Kt=this;return new pe(function(on,an){qe.call(Kt,on,an)}).then(It,sn)},ze[Ht]=!0}}return z.patchThen=ur,be&&(ur(be),en(R,"fetch",function(ze){return function gi(ze){return function(lt,nt){var qe=ze.apply(lt,nt);if(qe instanceof pe)return qe;var It=qe.constructor;return It[Ht]||ur(It),qe}}(ze)})),Promise[L.__symbol__("uncaughtPromiseErrors")]=Oe,pe}),Zone.__load_patch("toString",function(R){var L=Function.prototype.toString,z=ae("OriginalDelegate"),J=ae("Promise"),le=ae("Error"),De=function(){if("function"==typeof this){var yt=this[z];if(yt)return"function"==typeof yt?L.call(yt):Object.prototype.toString.call(yt);if(this===Promise){var ye=R[J];if(ye)return L.call(ye)}if(this===Error){var Ye=R[le];if(Ye)return L.call(Ye)}}return L.call(this)};De[z]=L,Function.prototype.toString=De;var $e=Object.prototype.toString;Object.prototype.toString=function(){return"function"==typeof Promise&&this instanceof Promise?"[object Promise]":$e.call(this)}});var tn=!1;if("undefined"!=typeof window)try{var Dr=Object.defineProperty({},"passive",{get:function(){tn=!0}});window.addEventListener("test",Dr,Dr),window.removeEventListener("test",Dr,Dr)}catch(R){tn=!1}var bi,Qn,ir,er,At,Qs={useG:!0},Xn={},ar={},qi=new RegExp("^"+Re+"(\\w+)(true|false)$"),ki=ae("propagationStopped");function ri(R,L){var z=(L?L(R):R)+je,J=(L?L(R):R)+Xe,le=Re+z,De=Re+J;Xn[R]={},Xn[R][je]=le,Xn[R][Xe]=De}function mr(R,L,z,J){var le=J&&J.add||Te,De=J&&J.rm||W,$e=J&&J.listeners||"eventListeners",Oe=J&&J.rmAll||"removeAllListeners",dt=ae(le),yt="."+le+":",ye="prependListener",at=function(hn,Ze,qn){if(!hn.isRemoved){var Rn,Nt=hn.callback;"object"==typeof Nt&&Nt.handleEvent&&(hn.callback=function(Ln){return Nt.handleEvent(Ln)},hn.originalDelegate=Nt);try{hn.invoke(hn,Ze,[qn])}catch(Ln){Rn=Ln}var mn=hn.options;return mn&&"object"==typeof mn&&mn.once&&Ze[De].call(Ze,qn.type,hn.originalDelegate?hn.originalDelegate:hn.callback,mn),Rn}};function _t(hn,Ze,qn){if(Ze=Ze||R.event){var Nt=hn||Ze.target||R,Rn=Nt[Xn[Ze.type][qn?Xe:je]];if(Rn){var mn=[];if(1===Rn.length)(Dt=at(Rn[0],Nt,Ze))&&mn.push(Dt);else for(var Ln=Rn.slice(),Xt=0;Xt<Ln.length&&(!Ze||!0!==Ze[ki]);Xt++){var Dt;(Dt=at(Ln[Xt],Nt,Ze))&&mn.push(Dt)}if(1===mn.length)throw mn[0];var Mt=function(Jt){var zt=mn[Jt];L.nativeScheduleMicroTask(function(){throw zt})};for(Xt=0;Xt<mn.length;Xt++)Mt(Xt)}}}var Gt=function(hn){return _t(this,hn,!1)},Bt=function(hn){return _t(this,hn,!0)};function Jn(hn,Ze){if(!hn)return!1;var qn=!0;Ze&&void 0!==Ze.useG&&(qn=Ze.useG);var Nt=Ze&&Ze.vh,Rn=!0;Ze&&void 0!==Ze.chkDup&&(Rn=Ze.chkDup);var mn=!1;Ze&&void 0!==Ze.rt&&(mn=Ze.rt);for(var Dt=hn;Dt&&!Dt.hasOwnProperty(le);)Dt=Ce(Dt);if(!Dt&&hn[le]&&(Dt=hn),!Dt||Dt[dt])return!1;var kn,Ln=Ze&&Ze.eventNameToString,Xt={},Mt=Dt[dt]=Dt[le],Jt=Dt[ae(De)]=Dt[De],zt=Dt[ae($e)]=Dt[$e],$t=Dt[ae(Oe)]=Dt[Oe];function ii(qe,It){return!tn&&"object"==typeof qe&&qe?!!qe.capture:tn&&It?"boolean"==typeof qe?{capture:qe,passive:!0}:qe?"object"==typeof qe&&!1!==qe.passive?Object.assign(Object.assign({},qe),{passive:!0}):qe:{passive:!0}:qe}Ze&&Ze.prepend&&(kn=Dt[ae(Ze.prepend)]=Dt[Ze.prepend]);var be=qn?function(qe){if(!Xt.isExisting)return Mt.call(Xt.target,Xt.eventName,Xt.capture?Bt:Gt,Xt.options)}:function(qe){return Mt.call(Xt.target,Xt.eventName,qe.invoke,Xt.options)},Ht=qn?function(qe){if(!qe.isRemoved){var It=Xn[qe.eventName],sn=void 0;It&&(sn=It[qe.capture?Xe:je]);var Kt=sn&&qe.target[sn];if(Kt)for(var wn=0;wn<Kt.length;wn++)if(Kt[wn]===qe){Kt.splice(wn,1),qe.isRemoved=!0,0===Kt.length&&(qe.allRemoved=!0,qe.target[sn]=null);break}}if(qe.allRemoved)return Jt.call(qe.target,qe.eventName,qe.capture?Bt:Gt,qe.options)}:function(qe){return Jt.call(qe.target,qe.eventName,qe.invoke,qe.options)},gi=Ze&&Ze.diff?Ze.diff:function(qe,It){var sn=typeof It;return"function"===sn&&qe.callback===It||"object"===sn&&qe.originalDelegate===It},ze=Zone[ae("UNPATCHED_EVENTS")],lt=R[ae("PASSIVE_EVENTS")],nt=function(qe,It,sn,Kt,wn,on){return void 0===wn&&(wn=!1),void 0===on&&(on=!1),function(){var an=this||R,An=arguments[0];Ze&&Ze.transferEventName&&(An=Ze.transferEventName(An));var cr=arguments[1];if(!cr)return qe.apply(this,arguments);if(Ae&&"uncaughtException"===An)return qe.apply(this,arguments);var qr=!1;if("function"!=typeof cr){if(!cr.handleEvent)return qe.apply(this,arguments);qr=!0}if(!Nt||Nt(qe,cr,an,arguments)){var Ki=tn&&!!lt&&-1!==lt.indexOf(An),sr=ii(arguments[2],Ki);if(ze)for(var Sr=0;Sr<ze.length;Sr++)if(An===ze[Sr])return Ki?qe.call(an,An,cr,sr):qe.apply(this,arguments);var gr=!!sr&&("boolean"==typeof sr||sr.capture),Li=!(!sr||"object"!=typeof sr)&&sr.once,nh=Zone.current,Js=Xn[An];Js||(ri(An,Ln),Js=Xn[An]);var Lr=Js[gr?Xe:je],Ci=an[Lr],os=!1;if(Ci){if(os=!0,Rn)for(Sr=0;Sr<Ci.length;Sr++)if(gi(Ci[Sr],cr))return}else Ci=an[Lr]=[];var mo,yo=an.constructor.name,Vo=ar[yo];Vo&&(mo=Vo[An]),mo||(mo=yo+It+(Ln?Ln(An):An)),Xt.options=sr,Li&&(Xt.options.once=!1),Xt.target=an,Xt.capture=gr,Xt.eventName=An,Xt.isExisting=os;var Xs=qn?Qs:void 0;Xs&&(Xs.taskData=Xt);var mi=nh.scheduleEventTask(mo,cr,Xs,sn,Kt);if(Xt.target=null,Xs&&(Xs.taskData=null),Li&&(sr.once=!0),!tn&&"boolean"==typeof mi.options||(mi.options=sr),mi.target=an,mi.capture=gr,mi.eventName=An,qr&&(mi.originalDelegate=cr),on?Ci.unshift(mi):Ci.push(mi),wn)return an}}};return Dt[le]=nt(Mt,yt,be,Ht,mn),kn&&(Dt[ye]=nt(kn,".prependListener:",function(qe){return kn.call(Xt.target,Xt.eventName,qe.invoke,Xt.options)},Ht,mn,!0)),Dt[De]=function(){var qe=this||R,It=arguments[0];Ze&&Ze.transferEventName&&(It=Ze.transferEventName(It));var sn=arguments[2],Kt=!!sn&&("boolean"==typeof sn||sn.capture),wn=arguments[1];if(!wn)return Jt.apply(this,arguments);if(!Nt||Nt(Jt,wn,qe,arguments)){var an,on=Xn[It];on&&(an=on[Kt?Xe:je]);var An=an&&qe[an];if(An)for(var cr=0;cr<An.length;cr++){var qr=An[cr];if(gi(qr,wn))return An.splice(cr,1),qr.isRemoved=!0,0===An.length&&(qr.allRemoved=!0,qe[an]=null,"string"==typeof It)&&(qe[Re+"ON_PROPERTY"+It]=null),qr.zone.cancelTask(qr),mn?qe:void 0}return Jt.apply(this,arguments)}},Dt[$e]=function(){var qe=this||R,It=arguments[0];Ze&&Ze.transferEventName&&(It=Ze.transferEventName(It));for(var sn=[],Kt=Fi(qe,Ln?Ln(It):It),wn=0;wn<Kt.length;wn++){var on=Kt[wn];sn.push(on.originalDelegate?on.originalDelegate:on.callback)}return sn},Dt[Oe]=function(){var qe=this||R,It=arguments[0];if(It){Ze&&Ze.transferEventName&&(It=Ze.transferEventName(It));var An=Xn[It];if(An){var Ki=qe[An[je]],sr=qe[An[Xe]];if(Ki)for(var Sr=Ki.slice(),Kt=0;Kt<Sr.length;Kt++)this[De].call(this,It,(gr=Sr[Kt]).originalDelegate?gr.originalDelegate:gr.callback,gr.options);if(sr)for(Sr=sr.slice(),Kt=0;Kt<Sr.length;Kt++){var gr;this[De].call(this,It,(gr=Sr[Kt]).originalDelegate?gr.originalDelegate:gr.callback,gr.options)}}}else{var sn=Object.keys(qe);for(Kt=0;Kt<sn.length;Kt++){var on=qi.exec(sn[Kt]),an=on&&on[1];an&&"removeListener"!==an&&this[Oe].call(this,an)}this[Oe].call(this,"removeListener")}if(mn)return this},On(Dt[le],Mt),On(Dt[De],Jt),$t&&On(Dt[Oe],$t),zt&&On(Dt[$e],zt),!0}for(var jt=[],Bn=0;Bn<z.length;Bn++)jt[Bn]=Jn(z[Bn],J);return jt}function Fi(R,L){if(!L){var z=[];for(var J in R){var le=qi.exec(J),De=le&&le[1];if(De&&(!L||De===L)){var $e=R[J];if($e)for(var Oe=0;Oe<$e.length;Oe++)z.push($e[Oe])}}return z}var dt=Xn[L];dt||(ri(L),dt=Xn[L]);var yt=R[dt[je]],ye=R[dt[Xe]];return yt?ye?yt.concat(ye):yt.slice():ye?ye.slice():[]}function Zi(R,L){var z=R.Event;z&&z.prototype&&L.patchMethod(z.prototype,"stopImmediatePropagation",function(J){return function(le,De){le[ki]=!0,J&&J.apply(le,De)}})}function vt(R,L,z,J,le){var De=Zone.__symbol__(J);if(!L[De]){var $e=L[De]=L[J];L[J]=function(Oe,dt,yt){return dt&&dt.prototype&&le.forEach(function(ye){var Ye="".concat(z,".").concat(J,"::")+ye,at=dt.prototype;try{if(at.hasOwnProperty(ye)){var _t=R.ObjectGetOwnPropertyDescriptor(at,ye);_t&&_t.value?(_t.value=R.wrapWithCurrentZone(_t.value,Ye),R._redefineProperty(dt.prototype,ye,_t)):at[ye]&&(at[ye]=R.wrapWithCurrentZone(at[ye],Ye))}else at[ye]&&(at[ye]=R.wrapWithCurrentZone(at[ye],Ye))}catch(Gt){}}),$e.call(L,Oe,dt,yt)},R.attachOriginToPatched(L[J],$e)}}function kr(R,L,z){if(!z||0===z.length)return L;var J=z.filter(function(De){return De.target===R});if(!J||0===J.length)return L;var le=J[0].ignoreProperties;return L.filter(function(De){return-1===le.indexOf(De)})}function fr(R,L,z,J){R&&et(R,kr(R,L,z),J)}function zn(R){return Object.getOwnPropertyNames(R).filter(function(L){return L.startsWith("on")&&L.length>2}).map(function(L){return L.substring(2)})}function Wr(R,L){if((!Ae||re)&&!Zone[R.symbol("patchEvents")]){var z=L.__Zone_ignore_on_properties,J=[];if(X){var le=window;J=J.concat(["Document","SVGElement","Element","HTMLElement","HTMLBodyElement","HTMLMediaElement","HTMLFrameSetElement","HTMLFrameElement","HTMLIFrameElement","HTMLMarqueeElement","Worker"]);var De=function Un(){try{var R=pt.navigator.userAgent;if(-1!==R.indexOf("MSIE ")||-1!==R.indexOf("Trident/"))return!0}catch(L){}return!1}()?[{target:le,ignoreProperties:["error"]}]:[];fr(le,zn(le),z&&z.concat(De),Ce(le))}J=J.concat(["XMLHttpRequest","XMLHttpRequestEventTarget","IDBIndex","IDBRequest","IDBOpenDBRequest","IDBDatabase","IDBTransaction","IDBCursor","WebSocket"]);for(var $e=0;$e<J.length;$e++){var Oe=L[J[$e]];Oe&&Oe.prototype&&fr(Oe.prototype,zn(Oe.prototype),z)}}}function rn(R,L,z){var J=z.configurable;return Fr(R,L,z=Tr(R,L,z),J)}function Xr(R,L){return R&&R[At]&&R[At][L]}function Tr(R,L,z){return Object.isFrozen(z)||(z.configurable=!0),z.configurable||(!R[At]&&!Object.isFrozen(R)&&Qn(R,At,{writable:!0,value:{}}),R[At]&&(R[At][L]=!0)),z}function Fr(R,L,z,J){try{return Qn(R,L,z)}catch($e){if(!z.configurable)throw $e;void 0===J?delete z.configurable:z.configurable=J;try{return Qn(R,L,z)}catch(Oe){var le=!1;if(("createdCallback"===L||"attachedCallback"===L||"detachedCallback"===L||"attributeChangedCallback"===L)&&(le=!0),!le)throw Oe;var De=null;try{De=JSON.stringify(z)}catch(dt){De=z.toString()}console.log("Attempting to configure '".concat(L,"' with descriptor '").concat(De,"' on object '").concat(R,"' and got error, giving up: ").concat(Oe))}}}function cn(R,L){var z=R.getGlobalObjects();if((!z.isNode||z.isMix)&&!function pi(R,L){var z=R.getGlobalObjects();if((z.isBrowser||z.isMix)&&!R.ObjectGetOwnPropertyDescriptor(HTMLElement.prototype,"onclick")&&"undefined"!=typeof Element){var De=R.ObjectGetOwnPropertyDescriptor(Element.prototype,"onclick");if(De&&!De.configurable)return!1;if(De){R.ObjectDefineProperty(Element.prototype,"onclick",{enumerable:!0,configurable:!0,get:function(){return!0}});var Oe=!!document.createElement("div").onclick;return R.ObjectDefineProperty(Element.prototype,"onclick",De),Oe}}var dt=L.XMLHttpRequest;if(!dt)return!1;var yt="onreadystatechange",ye=dt.prototype,Ye=R.ObjectGetOwnPropertyDescriptor(ye,yt);if(Ye)return R.ObjectDefineProperty(ye,yt,{enumerable:!0,configurable:!0,get:function(){return!0}}),Oe=!!(at=new dt).onreadystatechange,R.ObjectDefineProperty(ye,yt,Ye||{}),Oe;var _t=R.symbol("fake");R.ObjectDefineProperty(ye,yt,{enumerable:!0,configurable:!0,get:function(){return this[_t]},set:function(jt){this[_t]=jt}});var at,Gt=function(){};return(at=new dt).onreadystatechange=Gt,Oe=at[_t]===Gt,at.onreadystatechange=null,Oe}(R,L)){var De="undefined"!=typeof WebSocket;(function Wn(R){for(var L=R.symbol("unbound"),z=function(le){var De=Pt[le],$e="on"+De;self.addEventListener(De,function(Oe){var yt,ye,dt=Oe.target;for(ye=dt?dt.constructor.name+"."+$e:"unknown."+$e;dt;)dt[$e]&&!dt[$e][L]&&((yt=R.wrapWithCurrentZone(dt[$e],ye))[L]=dt[$e],dt[$e]=yt),dt=dt.parentElement},!0)},J=0;J<Pt.length;J++)z(J)})(R),R.patchClass("XMLHttpRequest"),De&&function ei(R,L){var z=R.getGlobalObjects(),J=z.ADD_EVENT_LISTENER_STR,le=z.REMOVE_EVENT_LISTENER_STR,De=L.WebSocket;L.EventTarget||R.patchEventTarget(L,R,[De.prototype]),L.WebSocket=function(dt,yt){var Ye,at,ye=arguments.length>1?new De(dt,yt):new De(dt),_t=R.ObjectGetOwnPropertyDescriptor(ye,"onmessage");return _t&&!1===_t.configurable?(Ye=R.ObjectCreate(ye),at=ye,[J,le,"send","close"].forEach(function(Gt){Ye[Gt]=function(){var Bt=R.ArraySlice.call(arguments);if(Gt===J||Gt===le){var Jn=Bt.length>0?Bt[0]:void 0;if(Jn){var jt=Zone.__symbol__("ON_PROPERTY"+Jn);ye[jt]=Ye[jt]}}return ye[Gt].apply(ye,Bt)}})):Ye=ye,R.patchOnProperties(Ye,["close","error","message","open"],at),Ye};var $e=L.WebSocket;for(var Oe in De)$e[Oe]=De[Oe]}(R,L),Zone[R.symbol("patchEvents")]=!0}}Zone.__load_patch("util",function(R,L,z){var J=zn(R);z.patchOnProperties=et,z.patchMethod=en,z.bindArguments=ke,z.patchMacroTask=ct;var le=L.__symbol__("BLACK_LISTED_EVENTS"),De=L.__symbol__("UNPATCHED_EVENTS");R[De]&&(R[le]=R[De]),R[le]&&(L[le]=L[De]=R[le]),z.patchEventPrototype=Zi,z.patchEventTarget=mr,z.isIEOrEdge=Cn,z.ObjectDefineProperty=fe,z.ObjectGetOwnPropertyDescriptor=se,z.ObjectCreate=Ee,z.ArraySlice=_e,z.patchClass=Tn,z.wrapWithCurrentZone=Et,z.filterProperties=kr,z.attachOriginToPatched=On,z._redefineProperty=Object.defineProperty,z.patchCallbacks=vt,z.getGlobalObjects=function(){return{globalSources:ar,zoneSymbolEventNames:Xn,eventNames:J,isBrowser:X,isMix:re,isNode:Ae,TRUE_STR:Xe,FALSE_STR:je,ZONE_SYMBOL_PREFIX:Re,ADD_EVENT_LISTENER_STR:Te,REMOVE_EVENT_LISTENER_STR:W}}});var R,L,Pt=P(P(P(P(P(P(P(P([],["abort","animationcancel","animationend","animationiteration","auxclick","beforeinput","blur","cancel","canplay","canplaythrough","change","compositionstart","compositionupdate","compositionend","cuechange","click","close","contextmenu","curechange","dblclick","drag","dragend","dragenter","dragexit","dragleave","dragover","drop","durationchange","emptied","ended","error","focus","focusin","focusout","gotpointercapture","input","invalid","keydown","keypress","keyup","load","loadstart","loadeddata","loadedmetadata","lostpointercapture","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","mousewheel","orientationchange","pause","play","playing","pointercancel","pointerdown","pointerenter","pointerleave","pointerlockchange","mozpointerlockchange","webkitpointerlockerchange","pointerlockerror","mozpointerlockerror","webkitpointerlockerror","pointermove","pointout","pointerover","pointerup","progress","ratechange","reset","resize","scroll","seeked","seeking","select","selectionchange","selectstart","show","sort","stalled","submit","suspend","timeupdate","volumechange","touchcancel","touchmove","touchstart","touchend","transitioncancel","transitionend","waiting","wheel"],!0),["webglcontextrestored","webglcontextlost","webglcontextcreationerror"],!0),["autocomplete","autocompleteerror"],!0),["toggle"],!0),["afterscriptexecute","beforescriptexecute","DOMContentLoaded","freeze","fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange","fullscreenerror","mozfullscreenerror","webkitfullscreenerror","msfullscreenerror","readystatechange","visibilitychange","resume"],!0),["absolutedeviceorientation","afterinput","afterprint","appinstalled","beforeinstallprompt","beforeprint","beforeunload","devicelight","devicemotion","deviceorientation","deviceorientationabsolute","deviceproximity","hashchange","languagechange","message","mozbeforepaint","offline","online","paint","pageshow","pagehide","popstate","rejectionhandled","storage","unhandledrejection","unload","userproximity","vrdisplayconnected","vrdisplaydisconnected","vrdisplaypresentchange"],!0),["beforecopy","beforecut","beforepaste","copy","cut","paste","dragstart","loadend","animationstart","search","transitionrun","transitionstart","webkitanimationend","webkitanimationiteration","webkitanimationstart","webkittransitionend"],!0),["activate","afterupdate","ariarequest","beforeactivate","beforedeactivate","beforeeditfocus","beforeupdate","cellchange","controlselect","dataavailable","datasetchanged","datasetcomplete","errorupdate","filterchange","layoutcomplete","losecapture","move","moveend","movestart","propertychange","resizeend","resizestart","rowenter","rowexit","rowsdelete","rowsinserted","command","compassneedscalibration","deactivate","help","mscontentzoom","msmanipulationstatechanged","msgesturechange","msgesturedoubletap","msgestureend","msgesturehold","msgesturestart","msgesturetap","msgotpointercapture","msinertiastart","mslostpointercapture","mspointercancel","mspointerdown","mspointerenter","mspointerhover","mspointerleave","mspointermove","mspointerout","mspointerover","mspointerup","pointerout","mssitemodejumplistitemremoved","msthumbnailclick","stop","storagecommit"],!0);R="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},L=R.__Zone_symbol_prefix||"__zone_symbol__",R[function z(J){return L+J}("legacyPatch")]=function(){var J=R.Zone;J.__load_patch("defineProperty",function(le,De,$e){$e._redefineProperty=rn,function Rt(){bi=Zone.__symbol__,Qn=Object[bi("defineProperty")]=Object.defineProperty,ir=Object[bi("getOwnPropertyDescriptor")]=Object.getOwnPropertyDescriptor,er=Object.create,At=bi("unconfigurables"),Object.defineProperty=function(R,L,z){if(Xr(R,L))throw new TypeError("Cannot assign to read only property '"+L+"' of "+R);var J=z.configurable;return"prototype"!==L&&(z=Tr(R,L,z)),Fr(R,L,z,J)},Object.defineProperties=function(R,L){Object.keys(L).forEach(function($e){Object.defineProperty(R,$e,L[$e])});for(var z=0,J=Object.getOwnPropertySymbols(L);z<J.length;z++){var le=J[z],De=Object.getOwnPropertyDescriptor(L,le);null!=De&&De.enumerable&&Object.defineProperty(R,le,L[le])}return R},Object.create=function(R,L){return"object"==typeof L&&!Object.isFrozen(L)&&Object.keys(L).forEach(function(z){L[z]=Tr(R,z,L[z])}),er(R,L)},Object.getOwnPropertyDescriptor=function(R,L){var z=ir(R,L);return z&&Xr(R,L)&&(z.configurable=!1),z}}()}),J.__load_patch("registerElement",function(le,De,$e){!function $n(R,L){var z=L.getGlobalObjects();(z.isBrowser||z.isMix)&&"registerElement"in R.document&&L.patchCallbacks(L,document,"Document","registerElement",["createdCallback","attachedCallback","detachedCallback","attributeChangedCallback"])}(le,$e)}),J.__load_patch("EventTargetLegacy",function(le,De,$e){(function Zt(R,L){var z=L.getGlobalObjects(),J=z.eventNames,le=z.globalSources,De=z.zoneSymbolEventNames,$e=z.TRUE_STR,Oe=z.FALSE_STR,dt=z.ZONE_SYMBOL_PREFIX,ye="ApplicationCache,EventSource,FileReader,InputMethodContext,MediaController,MessagePort,Node,Performance,SVGElementInstance,SharedWorker,TextTrack,TextTrackCue,TextTrackList,WebKitNamedFlow,Window,Worker,WorkerGlobalScope,XMLHttpRequest,XMLHttpRequestEventTarget,XMLHttpRequestUpload,IDBRequest,IDBOpenDBRequest,IDBDatabase,IDBTransaction,IDBCursor,DBIndex,WebSocket".split(","),Ye="EventTarget",at=[],_t=R.wtf,Gt="Anchor,Area,Audio,BR,Base,BaseFont,Body,Button,Canvas,Content,DList,Directory,Div,Embed,FieldSet,Font,Form,Frame,FrameSet,HR,Head,Heading,Html,IFrame,Image,Input,Keygen,LI,Label,Legend,Link,Map,Marquee,Media,Menu,Meta,Meter,Mod,OList,Object,OptGroup,Option,Output,Paragraph,Pre,Progress,Quote,Script,Select,Source,Span,Style,TableCaption,TableCell,TableCol,Table,TableRow,TableSection,TextArea,Title,Track,UList,Unknown,Video".split(",");_t?at=Gt.map(function(fn){return"HTML"+fn+"Element"}).concat(ye):R[Ye]?at.push(Ye):at=ye;for(var Bt=R.__Zone_disable_IE_check||!1,Jn=R.__Zone_enable_cross_context_check||!1,jt=L.isIEOrEdge(),hn="[object FunctionWrapper]",Ze="function __BROWSERTOOLS_CONSOLE_SAFEFUNC() { [native code] }",qn={MSPointerCancel:"pointercancel",MSPointerDown:"pointerdown",MSPointerEnter:"pointerenter",MSPointerHover:"pointerhover",MSPointerLeave:"pointerleave",MSPointerMove:"pointermove",MSPointerOut:"pointerout",MSPointerOver:"pointerover",MSPointerUp:"pointerup"},Nt=0;Nt<J.length;Nt++){var Ln=dt+((Rn=J[Nt])+Oe),Xt=dt+(Rn+$e);De[Rn]={},De[Rn][Oe]=Ln,De[Rn][$e]=Xt}for(Nt=0;Nt<Gt.length;Nt++)for(var Mt=Gt[Nt],Jt=le[Mt]={},zt=0;zt<J.length;zt++){var Rn;Jt[Rn=J[zt]]=Mt+".addEventListener:"+Rn}var kn=[];for(Nt=0;Nt<at.length;Nt++){var ii=R[at[Nt]];kn.push(ii&&ii.prototype)}return L.patchEventTarget(R,L,kn,{vh:function(fn,xn,it,he){if(!Bt&&jt)if(Jn)try{if((pe=xn.toString())===hn||pe==Ze)return fn.apply(it,he),!1}catch(be){return fn.apply(it,he),!1}else{var pe;if((pe=xn.toString())===hn||pe==Ze)return fn.apply(it,he),!1}else if(Jn)try{xn.toString()}catch(be){return fn.apply(it,he),!1}return!0},transferEventName:function(fn){return qn[fn]||fn}}),Zone[L.symbol("patchEventTarget")]=!!R[Ye],!0})(le,$e),cn($e,le)})};var pr=ae("zoneTask");function ie(R,L,z,J){var le=null,De=null;z+=J;var $e={};function Oe(yt){var ye=yt.data;return ye.args[0]=function(){return yt.invoke.apply(this,arguments)},ye.handleId=le.apply(R,ye.args),yt}function dt(yt){return De.call(R,yt.data.handleId)}le=en(R,L+=J,function(yt){return function(ye,Ye){if("function"==typeof Ye[0]){var at={isPeriodic:"Interval"===J,delay:"Timeout"===J||"Interval"===J?Ye[1]||0:void 0,args:Ye},_t=Ye[0];Ye[0]=function(){try{return _t.apply(this,arguments)}finally{at.isPeriodic||("number"==typeof at.handleId?delete $e[at.handleId]:at.handleId&&(at.handleId[pr]=null))}};var Gt=Me(L,Ye[0],at,Oe,dt);if(!Gt)return Gt;var Bt=Gt.data.handleId;return"number"==typeof Bt?$e[Bt]=Gt:Bt&&(Bt[pr]=Gt),Bt&&Bt.ref&&Bt.unref&&"function"==typeof Bt.ref&&"function"==typeof Bt.unref&&(Gt.ref=Bt.ref.bind(Bt),Gt.unref=Bt.unref.bind(Bt)),"number"==typeof Bt||Bt?Bt:Gt}return yt.apply(R,Ye)}}),De=en(R,z,function(yt){return function(ye,Ye){var _t,at=Ye[0];"number"==typeof at?_t=$e[at]:(_t=at&&at[pr])||(_t=at),_t&&"string"==typeof _t.type?"notScheduled"!==_t.state&&(_t.cancelFn&&_t.data.isPeriodic||0===_t.runCount)&&("number"==typeof at?delete $e[at]:at&&(at[pr]=null),_t.zone.cancelTask(_t)):yt.apply(R,Ye)}})}Zone.__load_patch("legacy",function(R){var L=R[Zone.__symbol__("legacyPatch")];L&&L()}),Zone.__load_patch("queueMicrotask",function(R,L,z){z.patchMethod(R,"queueMicrotask",function(J){return function(le,De){L.current.scheduleMicroTask("queueMicrotask",De[0])}})}),Zone.__load_patch("timers",function(R){var L="set",z="clear";ie(R,L,z,"Timeout"),ie(R,L,z,"Interval"),ie(R,L,z,"Immediate")}),Zone.__load_patch("requestAnimationFrame",function(R){ie(R,"request","cancel","AnimationFrame"),ie(R,"mozRequest","mozCancel","AnimationFrame"),ie(R,"webkitRequest","webkitCancel","AnimationFrame")}),Zone.__load_patch("blocking",function(R,L){for(var z=["alert","prompt","confirm"],J=0;J<z.length;J++)en(R,z[J],function(De,$e,Oe){return function(dt,yt){return L.current.run(De,R,yt,Oe)}})}),Zone.__load_patch("EventTarget",function(R,L,z){(function xe(R,L){L.patchEventPrototype(R,L)})(R,z),function H(R,L){if(!Zone[L.symbol("patchEventTarget")]){for(var z=L.getGlobalObjects(),J=z.eventNames,le=z.zoneSymbolEventNames,De=z.TRUE_STR,$e=z.FALSE_STR,Oe=z.ZONE_SYMBOL_PREFIX,dt=0;dt<J.length;dt++){var yt=J[dt],at=Oe+(yt+$e),_t=Oe+(yt+De);le[yt]={},le[yt][$e]=at,le[yt][De]=_t}var Gt=R.EventTarget;if(Gt&&Gt.prototype)return L.patchEventTarget(R,L,[Gt&&Gt.prototype]),!0}}(R,z);var J=R.XMLHttpRequestEventTarget;J&&J.prototype&&z.patchEventTarget(R,z,[J.prototype])}),Zone.__load_patch("MutationObserver",function(R,L,z){Tn("MutationObserver"),Tn("WebKitMutationObserver")}),Zone.__load_patch("IntersectionObserver",function(R,L,z){Tn("IntersectionObserver")}),Zone.__load_patch("FileReader",function(R,L,z){Tn("FileReader")}),Zone.__load_patch("on_property",function(R,L,z){Wr(z,R)}),Zone.__load_patch("customElements",function(R,L,z){!function j(R,L){var z=L.getGlobalObjects();(z.isBrowser||z.isMix)&&R.customElements&&"customElements"in R&&L.patchCallbacks(L,R.customElements,"customElements","define",["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback"])}(R,z)}),Zone.__load_patch("XHR",function(R,L){!function dt(yt){var ye=yt.XMLHttpRequest;if(ye){var Ye=ye.prototype,_t=Ye[q],Gt=Ye[te];if(!_t){var Bt=yt.XMLHttpRequestEventTarget;if(Bt){var Jn=Bt.prototype;_t=Jn[q],Gt=Jn[te]}}var jt="readystatechange",Bn="scheduled",Nt=en(Ye,"open",function(){return function(Mt,Jt){return Mt[J]=0==Jt[2],Mt[$e]=Jt[1],Nt.apply(Mt,Jt)}}),mn=ae("fetchTaskAborting"),Dt=ae("fetchTaskScheduling"),Ln=en(Ye,"send",function(){return function(Mt,Jt){if(!0===L.current[Dt]||Mt[J])return Ln.apply(Mt,Jt);var zt={target:Mt,url:Mt[$e],isPeriodic:!1,args:Jt,aborted:!1},$t=Me("XMLHttpRequest.send",Ze,zt,hn,qn);Mt&&!0===Mt[Oe]&&!zt.aborted&&$t.state===Bn&&$t.invoke()}}),Xt=en(Ye,"abort",function(){return function(Mt,Jt){var zt=function at(Mt){return Mt[z]}(Mt);if(zt&&"string"==typeof zt.type){if(null==zt.cancelFn||zt.data&&zt.data.aborted)return;zt.zone.cancelTask(zt)}else if(!0===L.current[mn])return Xt.apply(Mt,Jt)}})}function hn(Mt){var Jt=Mt.data,zt=Jt.target;zt[De]=!1,zt[Oe]=!1;var $t=zt[le];_t||(_t=zt[q],Gt=zt[te]),$t&&Gt.call(zt,jt,$t);var kn=zt[le]=function(){if(zt.readyState===zt.DONE)if(!Jt.aborted&&zt[De]&&Mt.state===Bn){var fn=zt[L.__symbol__("loadfalse")];if(0!==zt.status&&fn&&fn.length>0){var xn=Mt.invoke;Mt.invoke=function(){for(var it=zt[L.__symbol__("loadfalse")],he=0;he<it.length;he++)it[he]===Mt&&it.splice(he,1);!Jt.aborted&&Mt.state===Bn&&xn.call(Mt)},fn.push(Mt)}else Mt.invoke()}else!Jt.aborted&&!1===zt[De]&&(zt[Oe]=!0)};return _t.call(zt,jt,kn),zt[z]||(zt[z]=Mt),Ln.apply(zt,Jt.args),zt[De]=!0,Mt}function Ze(){}function qn(Mt){var Jt=Mt.data;return Jt.aborted=!0,Xt.apply(Jt.target,Jt.args)}}(R);var z=ae("xhrTask"),J=ae("xhrSync"),le=ae("xhrListener"),De=ae("xhrScheduled"),$e=ae("xhrURL"),Oe=ae("xhrErrorBeforeScheduled")}),Zone.__load_patch("geolocation",function(R){R.navigator&&R.navigator.geolocation&&function ut(R,L){for(var z=R.constructor.name,J=function(De){var yt,ye,$e=L[De],Oe=R[$e];if(Oe){if(!ue(se(R,$e)))return"continue";R[$e]=(ye=function(){return yt.apply(this,ke(arguments,z+"."+$e))},On(ye,yt=Oe),ye)}},le=0;le<L.length;le++)J(le)}(R.navigator.geolocation,["getCurrentPosition","watchPosition"])}),Zone.__load_patch("PromiseRejectionEvent",function(R,L){function z(J){return function(le){Fi(R,J).forEach(function($e){var Oe=R.PromiseRejectionEvent;if(Oe){var dt=new Oe(J,{promise:le.promise,reason:le.rejection});$e.invoke(dt)}})}}R.PromiseRejectionEvent&&(L[ae("unhandledPromiseRejectionHandler")]=z("unhandledrejection"),L[ae("rejectionHandledHandler")]=z("rejectionhandled"))})},void 0!==(U=h.call(Pe,N,Pe,bt))&&(bt.exports=U)},655:(bt,Pe,N)=>{function se(X,re){var Ie={};for(var de in X)Object.prototype.hasOwnProperty.call(X,de)&&re.indexOf(de)<0&&(Ie[de]=X[de]);if(null!=X&&"function"==typeof Object.getOwnPropertySymbols){var Qe=0;for(de=Object.getOwnPropertySymbols(X);Qe<de.length;Qe++)re.indexOf(de[Qe])<0&&Object.prototype.propertyIsEnumerable.call(X,de[Qe])&&(Ie[de[Qe]]=X[de[Qe]])}return Ie}function _e(X,re,Ie,de){return new(Ie||(Ie=Promise))(function(et,Tt){function Tn(On){try{ct(de.next(On))}catch(hr){Tt(hr)}}function en(On){try{ct(de.throw(On))}catch(hr){Tt(hr)}}function ct(On){On.done?et(On.value):function Qe(et){return et instanceof Ie?et:new Ie(function(Tt){Tt(et)})}(On.value).then(Tn,en)}ct((de=de.apply(X,re||[])).next())})}function Me(X){return this instanceof Me?(this.v=X,this):new Me(X)}function ae(X,re,Ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Qe,de=Ie.apply(X,re||[]),et=[];return Qe={},Tt("next"),Tt("throw"),Tt("return"),Qe[Symbol.asyncIterator]=function(){return this},Qe;function Tt(Fn){de[Fn]&&(Qe[Fn]=function(Un){return new Promise(function(Cn,tn){et.push([Fn,Un,Cn,tn])>1||Tn(Fn,Un)})})}function Tn(Fn,Un){try{!function en(Fn){Fn.value instanceof Me?Promise.resolve(Fn.value.v).then(ct,On):hr(et[0][2],Fn)}(de[Fn](Un))}catch(Cn){hr(et[0][3],Cn)}}function ct(Fn){Tn("next",Fn)}function On(Fn){Tn("throw",Fn)}function hr(Fn,Un){Fn(Un),et.shift(),et.length&&Tn(et[0][0],et[0][1])}}function pt(X){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ie,re=X[Symbol.asyncIterator];return re?re.call(X):(X=function te(X){var re="function"==typeof Symbol&&Symbol.iterator,Ie=re&&X[re],de=0;if(Ie)return Ie.call(X);if(X&&"number"==typeof X.length)return{next:function(){return X&&de>=X.length&&(X=void 0),{value:X&&X[de++],done:!X}}};throw new TypeError(re?"Object is not iterable.":"Symbol.iterator is not defined.")}(X),Ie={},de("next"),de("throw"),de("return"),Ie[Symbol.asyncIterator]=function(){return this},Ie);function de(et){Ie[et]=X[et]&&function(Tt){return new Promise(function(Tn,en){!function Qe(et,Tt,Tn,en){Promise.resolve(en).then(function(ct){et({value:ct,done:Tn})},Tt)}(Tn,en,(Tt=X[et](Tt)).done,Tt.value)})}}}N.d(Pe,{FC:()=>ae,KL:()=>pt,_T:()=>se,mG:()=>_e,qq:()=>Me})},5e3:(bt,Pe,N)=>{N.d(Pe,{$8M:()=>Su,$Z:()=>Ey,AFp:()=>a_,ALo:()=>Rf,AaK:()=>_e,AsE:()=>bd,CHM:()=>ih,CRH:()=>gl,CZH:()=>jf,CqO:()=>hg,D6c:()=>Jf,DdM:()=>xf,EJc:()=>$d,EpF:()=>dg,F4k:()=>Po,FYo:()=>h0,FiY:()=>He,Gf:()=>hu,GfV:()=>g0,Gpc:()=>q,JOm:()=>xo,KtG:()=>$o,LFG:()=>Or,LSH:()=>Dp,Lbi:()=>nm,Lck:()=>HC,MAs:()=>Si,MMx:()=>Hg,NdJ:()=>ev,OlP:()=>lr,Oqu:()=>Tg,PXZ:()=>Kf,Q6J:()=>ya,QGY:()=>vd,QP$:()=>R,Qsj:()=>f0,R0b:()=>rs,RDi:()=>Q_,Rgc:()=>Pd,SBq:()=>Mh,Sil:()=>Hd,Suo:()=>Wv,TTD:()=>os,TgZ:()=>af,VKq:()=>Gg,W1O:()=>Kv,WLB:()=>tc,X6Q:()=>rI,XFs:()=>vt,Xpm:()=>Z,Xts:()=>Lm,Y36:()=>Wu,YKP:()=>dn,YNc:()=>Hi,Yjl:()=>ie,Yz7:()=>Un,Z0I:()=>Qs,ZZ4:()=>Qf,_Bn:()=>$g,_UZ:()=>lg,_Vd:()=>Ah,_c5:()=>_l,_uU:()=>gv,aQg:()=>lm,c2e:()=>Hf,cJS:()=>tn,cg1:()=>Tv,dDg:()=>qf,dqk:()=>rn,eFA:()=>h_,ekj:()=>cf,eoX:()=>Zf,f3M:()=>Rc,g9A:()=>Nr,h0i:()=>St,hGG:()=>wl,hij:()=>df,iGM:()=>kd,ifc:()=>Rt,ip1:()=>yl,jDz:()=>CE,kL8:()=>Sv,lG2:()=>pr,lcZ:()=>Rd,lqb:()=>Uc,lri:()=>Wf,n5z:()=>io,oAB:()=>Pt,oxw:()=>Tw,q4F:()=>qm,qLn:()=>Qa,qOj:()=>rg,qZA:()=>md,rWj:()=>Gd,sBO:()=>qd,sIi:()=>ef,s_b:()=>Pf,soG:()=>Gf,tb:()=>$f,tp0:()=>Ot,uIk:()=>Bs,vHH:()=>Re,vpe:()=>Gr,wAp:()=>Lt,xi3:()=>cu,xp6:()=>j0,z2F:()=>sm,zSh:()=>$m,zs3:()=>zu});var h=N(7579),U=N(727),P=N(9751),se=N(6451),fe=N(3099);function Ce(i){for(let s in i)if(i[s]===Ce)return s;throw Error("Could not find renamed property on target object.")}function Ee(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function _e(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(_e).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function Te(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const W=Ce({__forward_ref__:Ce});function q(i){return i.__forward_ref__=q,i.toString=function(){return _e(this())},i}function te(i){return Xe(i)?i():i}function Xe(i){return"function"==typeof i&&i.hasOwnProperty(W)&&i.__forward_ref__===q}class Re extends Error{constructor(s,a){super(function Et(i,s){return`NG0${Math.abs(i)}${s?": "+s.trim():""}`}(s,a)),this.code=s}}function Me(i){return"string"==typeof i?i:null==i?"":String(i)}function Ge(i,s){throw new Re(-201,!1)}function en(i,s){null==i&&function ct(i,s,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${s} <=Actual]`))}(s,i,null,"!=")}function Un(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function tn(i){return{providers:i.providers||[],imports:i.imports||[]}}function Dr(i){return Xn(i,ri)||Xn(i,Fi)}function Qs(i){return null!==Dr(i)}function Xn(i,s){return i.hasOwnProperty(s)?i[s]:null}function ki(i){return i&&(i.hasOwnProperty(mr)||i.hasOwnProperty(Zi))?i[mr]:null}const ri=Ce({\u0275prov:Ce}),mr=Ce({\u0275inj:Ce}),Fi=Ce({ngInjectableDef:Ce}),Zi=Ce({ngInjectorDef:Ce});var vt=(()=>((vt=vt||{})[vt.Default=0]="Default",vt[vt.Host=1]="Host",vt[vt.Self=2]="Self",vt[vt.SkipSelf=4]="SkipSelf",vt[vt.Optional=8]="Optional",vt))();let kr;function zn(i){const s=kr;return kr=i,s}function Wr(i,s,a){const c=Dr(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&vt.Optional?null:void 0!==s?s:void Ge(_e(i))}function Qn(i){return{toString:i}.toString()}var ir=(()=>((ir=ir||{})[ir.OnPush=0]="OnPush",ir[ir.Default=1]="Default",ir))(),Rt=(()=>{return(i=Rt||(Rt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Rt;var i})();const rn=(()=>"undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof global&&global||"undefined"!=typeof window&&window||"undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self)(),Fr={},Zt=[],ei=Ce({\u0275cmp:Ce}),cn=Ce({\u0275dir:Ce}),pi=Ce({\u0275pipe:Ce}),Sn=Ce({\u0275mod:Ce}),Q=Ce({\u0275fac:Ce}),$=Ce({__NG_ELEMENT_ID__:Ce});let B=0;function Z(i){return Qn(()=>{const a=!0===i.standalone,c={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===ir.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||Zt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Rt.Emulated,id:"c"+B++,styles:i.styles||Zt,_:null,setInput:null,schemas:i.schemas||null,tView:null},f=i.dependencies,y=i.features;return l.inputs=$n(i.inputs,c),l.outputs=$n(i.outputs),y&&y.forEach(w=>w(l)),l.directiveDefs=f?()=>("function"==typeof f?f():f).map(Be).filter(st):null,l.pipeDefs=f?()=>("function"==typeof f?f():f).map(xe).filter(st):null,l})}function Be(i){return j(i)||H(i)}function st(i){return null!==i}function Pt(i){return Qn(()=>({type:i.type,bootstrap:i.bootstrap||Zt,declarations:i.declarations||Zt,imports:i.imports||Zt,exports:i.exports||Zt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function $n(i,s){if(null==i)return Fr;const a={};for(const c in i)if(i.hasOwnProperty(c)){let l=i[c],f=l;Array.isArray(l)&&(f=l[1],l=l[0]),a[l]=c,s&&(s[l]=f)}return a}const pr=Z;function ie(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function j(i){return i[ei]||null}function H(i){return i[cn]||null}function xe(i){return i[pi]||null}function R(i){const s=j(i)||H(i)||xe(i);return null!==s&&s.standalone}function L(i,s){const a=i[Sn]||null;if(!a&&!0===s)throw new Error(`Type ${_e(i)} does not have '\u0275mod' property.`);return a}function fn(i){return Array.isArray(i)&&"object"==typeof i[1]}function xn(i){return Array.isArray(i)&&!0===i[1]}function it(i){return 0!=(8&i.flags)}function he(i){return 2==(2&i.flags)}function pe(i){return 1==(1&i.flags)}function be(i){return null!==i.template}function Ht(i){return 0!=(256&i[2])}function Lr(i,s){return i.hasOwnProperty(Q)?i[Q]:null}class Ci{constructor(s,a,c){this.previousValue=s,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function os(){return mo}function mo(i){return i.type.prototype.ngOnChanges&&(i.setInput=Vo),yo}function yo(){const i=mi(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===Fr)i.previous=s;else for(let c in s)a[c]=s[c];i.current=null,this.ngOnChanges(s)}}function Vo(i,s,a,c){const l=mi(i)||function cp(i,s){return i[Xs]=s}(i,{previous:Fr,current:null}),f=l.current||(l.current={}),y=l.previous,w=this.declaredInputs[a],I=y[w];f[w]=new Ci(I&&I.currentValue,s,y===Fr),i[c]=s}os.ngInherit=!0;const Xs="__ngSimpleChanges__";function mi(i){return i[Xs]||null}function Er(i){for(;Array.isArray(i);)i=i[0];return i}function us(i,s){return Er(s[i])}function si(i,s){return Er(s[i.index])}function Bo(i,s){return i.data[s]}function ms(i,s){return i[s]}function Zn(i,s){const a=s[i];return fn(a)?a:a[0]}function eo(i){return 64==(64&i[2])}function Qi(i,s){return null==s?null:i[s]}function Sa(i){i[18]=0}function Ar(i,s){i[5]+=s;let a=i,c=i[3];for(;null!==c&&(1===s&&1===a[5]||-1===s&&0===a[5]);)c[5]+=s,a=c,c=c[3]}const ln={lFrame:La(null),bindingsEnabled:!0};function _o(){return ln.bindingsEnabled}function We(){return ln.lFrame.lView}function Pn(){return ln.lFrame.tView}function ih(i){return ln.lFrame.contextLView=i,i[8]}function $o(i){return ln.lFrame.contextLView=null,i}function Vr(){let i=Ho();for(;null!==i&&64===i.type;)i=i.parent;return i}function Ho(){return ln.lFrame.currentTNode}function Di(i,s){const a=ln.lFrame;a.currentTNode=i,a.isParent=s}function _u(){return ln.lFrame.isParent}function Ur(){const i=ln.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}function Na(){return ln.lFrame.bindingIndex++}function xs(i){const s=ln.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}function Sl(i,s){const a=ln.lFrame;a.bindingIndex=a.bindingRootIndex=i,zo(s)}function zo(i){ln.lFrame.currentDirectiveIndex=i}function ka(){return ln.lFrame.currentQueryIndex}function vc(i){ln.lFrame.currentQueryIndex=i}function Fa(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function Al(i,s,a){if(a&vt.SkipSelf){let l=s,f=i;for(;!(l=l.parent,null!==l||a&vt.Host||(l=Fa(f),null===l||(f=f[15],10&l.type))););if(null===l)return!1;s=l,i=f}const c=ln.lFrame=ah();return c.currentTNode=s,c.lView=i,!0}function Wo(i){const s=ah(),a=i[1];ln.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function ah(){const i=ln.lFrame,s=null===i?null:i.child;return null===s?La(i):s}function La(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function uh(){const i=ln.lFrame;return ln.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Ml=uh;function to(){const i=uh();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function yr(){return ln.lFrame.selectedIndex}function Os(i){ln.lFrame.selectedIndex=i}function vr(){const i=ln.lFrame;return Bo(i.tView,i.selectedIndex)}function Ic(i,s){for(let a=s.directiveStart,c=s.directiveEnd;a<c;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:w,ngAfterViewInit:I,ngAfterViewChecked:T,ngOnDestroy:x}=f;y&&(i.contentHooks||(i.contentHooks=[])).push(-a,y),w&&((i.contentHooks||(i.contentHooks=[])).push(a,w),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,w)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=x&&(i.destroyHooks||(i.destroyHooks=[])).push(a,x)}}function qo(i,s,a){Ko(i,s,3,a)}function Zo(i,s,a,c){(3&i[2])===a&&Ko(i,s,a,c)}function Pl(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function Ko(i,s,a,c){const f=null!=c?c:-1,y=s.length-1;let w=0;for(let I=void 0!==c?65535&i[18]:0;I<y;I++)if("number"==typeof s[I+1]){if(w=s[I],null!=c&&w>=c)break}else s[I]<0&&(i[18]+=65536),(w<f||-1==f)&&(Nl(i,a,s,I),i[18]=(4294901760&i[18])+I+2),I++}function Nl(i,s,a,c){const l=a[c]<0,f=a[c+1],w=i[l?-a[c]:a[c]];if(l){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{f.call(w)}finally{}}}else try{f.call(w)}finally{}}class Ji{constructor(s,a,c){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function Rs(i,s,a){let c=0;for(;c<a.length;){const l=a[c];if("number"==typeof l){if(0!==l)break;c++;const f=a[c++],y=a[c++],w=a[c++];i.setAttribute(s,y,w,f)}else{const f=l,y=a[++c];Cc(f)?i.setProperty(s,f,y):i.setAttribute(s,f,y),c++}}return c}function Va(i){return 3===i||4===i||6===i}function Cc(i){return 64===i.charCodeAt(0)}function Ua(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let c=0;c<s.length;c++){const l=s[c];"number"==typeof l?a=l:0===a||Fl(i,a,l,null,-1===a||2===a?s[++c]:null)}}return i}function Fl(i,s,a,c,l){let f=0,y=i.length;if(-1===s)y=-1;else for(;f<i.length;){const w=i[f++];if("number"==typeof w){if(w===s){y=-1;break}if(w>s){y=f-1;break}}}for(;f<i.length;){const w=i[f];if("number"==typeof w)break;if(w===a){if(null===c)return void(null!==l&&(i[f+1]=l));if(c===i[f+1])return void(i[f+2]=l)}f++,null!==c&&f++,null!==l&&f++}-1!==y&&(i.splice(y,0,s),f=y+1),i.splice(f++,0,a),null!==c&&i.splice(f++,0,c),null!==l&&i.splice(f++,0,l)}function dh(i){return-1!==i}function Br(i){return 32767&i}function ro(i,s){let a=function hh(i){return i>>16}(i),c=s;for(;a>0;)c=c[15],a--;return c}let Dc=!0;function Ba(i){const s=Dc;return Dc=i,s}let Ll=0;const Ui={};function Ps(i,s){const a=Cu(i,s);if(-1!==a)return a;const c=s[1];c.firstCreatePass&&(i.injectorIndex=s.length,Tc(c.data,i),Tc(s,null),Tc(c.blueprint,null));const l=ja(i,s),f=i.injectorIndex;if(dh(l)){const y=Br(l),w=ro(l,s),I=w[1].data;for(let T=0;T<8;T++)s[f+T]=w[y+T]|I[y+T]}return s[f+8]=l,f}function Tc(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Cu(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function ja(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,l=s;for(;null!==l;){if(c=ra(l),null===c)return-1;if(a++,l=l[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function Eo(i,s,a){!function Vl(i,s,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty($)&&(c=a[$]),null==c&&(c=a[$]=Ll++);const l=255&c;s.data[i+(l>>5)]|=1<<l}(i,s,a)}function Qo(i,s,a){if(a&vt.Optional||void 0!==i)return i;Ge()}function Jo(i,s,a,c){if(a&vt.Optional&&void 0===c&&(c=null),0==(a&(vt.Self|vt.Host))){const l=i[9],f=zn(void 0);try{return l?l.get(s,c,a&vt.Optional):Wr(s,c,a&vt.Optional)}finally{zn(f)}}return Qo(c,0,a)}function Xo(i,s,a,c=vt.Default,l){if(null!==i){if(1024&s[2]){const y=function gh(i,s,a,c,l){let f=i,y=s;for(;null!==f&&null!==y&&1024&y[2]&&!(256&y[2]);){const w=Ul(f,y,a,c|vt.Self,Ui);if(w!==Ui)return w;let I=f.parent;if(!I){const T=y[21];if(T){const x=T.get(a,Ui,c);if(x!==Ui)return x}I=ra(y),y=y[15]}f=I}return l}(i,s,a,c,Ui);if(y!==Ui)return y}const f=Ul(i,s,a,c,Ui);if(f!==Ui)return f}return Jo(s,a,c,l)}function Ul(i,s,a,c,l){const f=function ph(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty($)?i[$]:void 0;return"number"==typeof s?s>=0?255&s:Sc:s}(a);if("function"==typeof f){if(!Al(s,i,c))return c&vt.Host?Qo(l,0,c):Jo(s,a,c,l);try{const y=f(c);if(null!=y||c&vt.Optional)return y;Ge()}finally{Ml()}}else if("number"==typeof f){let y=null,w=Cu(i,s),I=-1,T=c&vt.Host?s[16][6]:null;for((-1===w||c&vt.SkipSelf)&&(I=-1===w?ja(i,s):s[w+8],-1!==I&&Tu(c,!1)?(y=s[1],w=Br(I),s=ro(I,s)):w=-1);-1!==w;){const x=s[1];if(ea(f,w,x.data)){const F=Du(w,s,a,y,c,T);if(F!==Ui)return F}I=s[w+8],-1!==I&&Tu(c,s[1].data[w+8]===T)&&ea(f,w,s)?(y=x,w=Br(I),s=ro(I,s)):w=-1}}return l}function Du(i,s,a,c,l,f){const y=s[1],w=y.data[i+8],x=Ha(w,y,a,null==c?he(w)&&Dc:c!=y&&0!=(3&w.type),l&vt.Host&&f===w);return null!==x?vs(s,y,x,w):Ui}function Ha(i,s,a,c,l){const f=i.providerIndexes,y=s.data,w=1048575&f,I=i.directiveStart,x=f>>20,Y=l?w+x:i.directiveEnd;for(let ce=c?w:w+x;ce<Y;ce++){const Fe=y[ce];if(ce<I&&a===Fe||ce>=I&&Fe.type===a)return ce}if(l){const ce=y[I];if(ce&&be(ce)&&ce.type===a)return I}return null}function vs(i,s,a,c){let l=i[a];const f=s.data;if(function bc(i){return i instanceof Ji}(l)){const y=l;y.resolving&&function gt(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new Re(-200,`Circular dependency in DI detected for ${i}${a}`)}(function ae(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():Me(i)}(f[a]));const w=Ba(y.canSeeViewProviders);y.resolving=!0;const I=y.injectImpl?zn(y.injectImpl):null;Al(i,c,vt.Default);try{l=i[a]=y.factory(void 0,f,i,c),s.firstCreatePass&&a>=c.directiveStart&&function Rl(i,s,a){const{ngOnChanges:c,ngOnInit:l,ngDoCheck:f}=s.type.prototype;if(c){const y=mo(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,y),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,y)}l&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,l),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],s)}finally{null!==I&&zn(I),Ba(w),y.resolving=!1,Ml()}}return l}function ea(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function Tu(i,s){return!(i&vt.Self||i&vt.Host&&s)}class ta{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,c){return Xo(this._tNode,this._lView,s,c,a)}}function Sc(){return new ta(Vr(),We())}function io(i){return Qn(()=>{const s=i.prototype.constructor,a=s[Q]||na(s),c=Object.prototype;let l=Object.getPrototypeOf(i.prototype).constructor;for(;l&&l!==c;){const f=l[Q]||na(l);if(f&&f!==a)return f;l=Object.getPrototypeOf(l)}return f=>new f})}function na(i){return Xe(i)?()=>{const s=na(te(i));return s&&s()}:Lr(i)}function ra(i){const s=i[1],a=s.type;return 2===a?s.declTNode:1===a?i[6]:null}function Su(i){return function $a(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const c=a.length;let l=0;for(;l<c;){const f=a[l];if(Va(f))break;if(0===f)l+=2;else if("number"==typeof f)for(l++;l<c&&"string"==typeof a[l];)l++;else{if(f===s)return a[l+1];l+=2}}}return null}(Vr(),i)}const ia="__parameters__";function oa(i,s,a){return Qn(()=>{const c=function Ac(i){return function(...a){if(i){const c=i(...a);for(const l in c)this[l]=c[l]}}}(s);function l(...f){if(this instanceof l)return c.apply(this,f),this;const y=new l(...f);return w.annotation=y,w;function w(I,T,x){const F=I.hasOwnProperty(ia)?I[ia]:Object.defineProperty(I,ia,{value:[]})[ia];for(;F.length<=x;)F.push(null);return(F[x]=F[x]||[]).push(y),I}}return a&&(l.prototype=Object.create(a.prototype)),l.prototype.ngMetadataName=i,l.annotationCls=l,l})}class lr{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Un({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function vi(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let c=i[a];Array.isArray(c)?(s===i&&(s=i.slice(0,a)),vi(c,s)):s!==i&&s.push(c)}return s}function Ns(i,s){i.forEach(a=>Array.isArray(a)?Ns(a,s):s(a))}function xu(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function so(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function _i(i,s,a){let c=ws(i,s);return c>=0?i[1|c]=a:(c=~c,function oi(i,s,a,c){let l=i.length;if(l==s)i.push(a,c);else if(1===l)i.push(c,i[0]),i[0]=a;else{for(l--,i.push(i[l-1],i[l]);l>s;)i[l]=i[l-2],l--;i[s]=a,i[s+1]=c}}(i,c,s,a)),c}function Ou(i,s){const a=ws(i,s);if(a>=0)return i[1|a]}function ws(i,s){return function Es(i,s,a){let c=0,l=i.length>>a;for(;l!==c;){const f=c+(l-c>>1),y=i[f<<a];if(s===y)return f<<a;y>s?l=f:c=f+1}return~(l<<a)}(i,s,1)}const hs={},jr="__NG_DI_FLAG__",Bi="ngTempTokenPath",oo=/\n/gm,Is="__source";let aa;function Do(i){const s=aa;return aa=i,s}function Oc(i,s=vt.Default){if(void 0===aa)throw new Re(-203,!1);return null===aa?Wr(i,void 0,s):aa.get(i,s&vt.Optional?null:void 0,s)}function Or(i,s=vt.Default){return(function fr(){return kr}()||Oc)(te(i),s)}function Rc(i,s=vt.Default){return"number"!=typeof s&&(s=0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)),Or(i,s)}function b(i){const s=[];for(let a=0;a<i.length;a++){const c=te(i[a]);if(Array.isArray(c)){if(0===c.length)throw new Re(900,!1);let l,f=vt.Default;for(let y=0;y<c.length;y++){const w=c[y],I=M(w);"number"==typeof I?-1===I?l=w.token:f|=I:l=w}s.push(Or(l,f))}else s.push(Or(c))}return s}function D(i,s){return i[jr]=s,i.prototype[jr]=s,i}function M(i){return i[jr]}const He=D(oa("Optional"),8),Ot=D(oa("SkipSelf"),4);let mp;function Q_(i){mp=i}class Vu{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Mo(i){return i instanceof Vu?i.changingThisBreaksApplicationSecurity:i}const k=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var ni=(()=>((ni=ni||{})[ni.NONE=0]="NONE",ni[ni.HTML=1]="HTML",ni[ni.STYLE=2]="STYLE",ni[ni.SCRIPT=3]="SCRIPT",ni[ni.URL=4]="URL",ni[ni.RESOURCE_URL=5]="RESOURCE_URL",ni))();function Dp(i){const s=function Ya(){const i=We();return i&&i[12]}();return s?s.sanitize(ni.URL,i)||"":function Za(i,s){const a=function wh(i){return i instanceof Vu&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?Mo(i):function oe(i){return(i=String(i)).match(k)?i:"unsafe:"+i}(Me(i))}const Lm=new lr("ENVIRONMENT_INITIALIZER"),t0=new lr("INJECTOR",-1),Vm=new lr("INJECTOR_DEF_TYPES");class n0{get(s,a=hs){if(a===hs){const c=new Error(`NullInjectorError: No provider for ${_e(s)}!`);throw c.name="NullInjectorError",c}return a}}function BS(...i){return{\u0275providers:Um(0,i)}}function Um(i,...s){const a=[],c=new Set;let l;return Ns(s,f=>{const y=f;Tp(y,a,[],c)&&(l||(l=[]),l.push(y))}),void 0!==l&&r0(l,a),a}function r0(i,s){for(let a=0;a<i.length;a++){const{providers:l}=i[a];Ns(l,f=>{s.push(f)})}}function Tp(i,s,a,c){if(!(i=te(i)))return!1;let l=null,f=ki(i);const y=!f&&j(i);if(f||y){if(y&&!y.standalone)return!1;l=i}else{const I=i.ngModule;if(f=ki(I),!f)return!1;l=I}const w=c.has(l);if(y){if(w)return!1;if(c.add(l),y.dependencies){const I="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const T of I)Tp(T,s,a,c)}}else{if(!f)return!1;{if(null!=f.imports&&!w){let T;c.add(l);try{Ns(f.imports,x=>{Tp(x,s,a,c)&&(T||(T=[]),T.push(x))})}finally{}void 0!==T&&r0(T,s)}if(!w){const T=Lr(l)||(()=>new l);s.push({provide:l,useFactory:T,deps:Zt},{provide:Vm,useValue:l,multi:!0},{provide:Lm,useValue:()=>Or(l),multi:!0})}const I=f.providers;null==I||w||Ns(I,x=>{s.push(x)})}}return l!==i&&void 0!==i.providers}const s0=Ce({provide:String,useValue:Ce});function Sp(i){return null!==i&&"object"==typeof i&&s0 in i}function Vc(i){return"function"==typeof i}const $m=new lr("Set Injector scope."),Ql={},nb={};let Dh;function Th(){return void 0===Dh&&(Dh=new n0),Dh}class Uc{}class Hm extends Uc{constructor(s,a,c,l){super(),this.parent=a,this.source=c,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Sh(s,y=>this.processProvider(y)),this.records.set(t0,Jl(void 0,this)),l.has("environment")&&this.records.set(Uc,Jl(void 0,this));const f=this.records.get($m);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(Vm.multi,Zt,vt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const a=Do(this),c=zn(void 0);try{return s()}finally{Do(a),zn(c)}}get(s,a=hs,c=vt.Default){this.assertNotDestroyed();const l=Do(this),f=zn(void 0);try{if(!(c&vt.SkipSelf)){let w=this.records.get(s);if(void 0===w){const I=function sb(i){return"function"==typeof i||"object"==typeof i&&i instanceof lr}(s)&&Dr(s);w=I&&this.injectableDefInScope(I)?Jl(Gm(s),Ql):null,this.records.set(s,w)}if(null!=w)return this.hydrate(s,w)}return(c&vt.Self?Th():this.parent).get(s,a=c&vt.Optional&&a===hs?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[Bi]=y[Bi]||[]).unshift(_e(s)),l)throw y;return function V(i,s,a,c){const l=i[Bi];throw s[Is]&&l.unshift(s[Is]),i.message=function ne(i,s,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let l=_e(s);if(Array.isArray(s))l=s.map(_e).join(" -> ");else if("object"==typeof s){let f=[];for(let y in s)if(s.hasOwnProperty(y)){let w=s[y];f.push(y+":"+("string"==typeof w?JSON.stringify(w):_e(w)))}l=`{${f.join(", ")}}`}return`${a}${c?"("+c+")":""}[${l}]: ${i.replace(oo,"\n  ")}`}("\n"+i.message,l,a,c),i.ngTokenPath=l,i[Bi]=null,i}(y,s,"R3InjectorError",this.source)}throw y}finally{zn(f),Do(l)}}resolveInjectorInitializers(){const s=Do(this),a=zn(void 0);try{const c=this.get(Lm.multi,Zt,vt.Self);for(const l of c)l()}finally{Do(s),zn(a)}}toString(){const s=[],a=this.records;for(const c of a.keys())s.push(_e(c));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Re(205,!1)}processProvider(s){let a=Vc(s=te(s))?s:te(s&&s.provide);const c=function rb(i){return Sp(i)?Jl(void 0,i.useValue):Jl(Ap(i),Ql)}(s);if(Vc(s)||!0!==s.multi)this.records.get(a);else{let l=this.records.get(a);l||(l=Jl(void 0,Ql,!0),l.factory=()=>b(l.multi),this.records.set(a,l)),a=s,l.multi.push(s)}this.records.set(a,c)}hydrate(s,a){return a.value===Ql&&(a.value=nb,a.value=a.factory()),"object"==typeof a.value&&a.value&&function u0(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=te(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function Gm(i){const s=Dr(i),a=null!==s?s.factory:Lr(i);if(null!==a)return a;if(i instanceof lr)throw new Re(204,!1);if(i instanceof Function)return function a0(i){const s=i.length;if(s>0)throw function bo(i,s){const a=[];for(let c=0;c<i;c++)a.push(s);return a}(s,"?"),new Re(204,!1);const a=function ar(i){const s=i&&(i[ri]||i[Fi]);if(s){const a=function qi(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Re(204,!1)}function Ap(i,s,a){let c;if(Vc(i)){const l=te(i);return Lr(l)||Gm(l)}if(Sp(i))c=()=>te(i.useValue);else if(function Bm(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...b(i.deps||[]));else if(function o0(i){return!(!i||!i.useExisting)}(i))c=()=>Or(te(i.useExisting));else{const l=te(i&&(i.useClass||i.provide));if(!function ib(i){return!!i.deps}(i))return Lr(l)||Gm(l);c=()=>new l(...b(i.deps))}return c}function Jl(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function $S(i){return!!i.\u0275providers}function Sh(i,s){for(const a of i)Array.isArray(a)?Sh(a,s):$S(a)?Sh(a.\u0275providers,s):s(a)}class zm{}class l0{resolveComponentFactory(s){throw function c0(i){const s=Error(`No component factory found for ${_e(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let Ah=(()=>{class i{}return i.NULL=new l0,i})();function d0(){return Xl(Vr(),We())}function Xl(i,s){return new Mh(si(i,s))}let Mh=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=d0,i})();function Wm(i){return i instanceof Mh?i.nativeElement:i}class h0{}let f0=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function ub(){const i=We(),a=Zn(Vr().index,i);return(fn(a)?a:i)[11]}(),i})(),p0=(()=>{class i{}return i.\u0275prov=Un({token:i,providedIn:"root",factory:()=>null}),i})();class g0{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const qm=new g0("14.2.2"),Zm={};function ed(i){return i.ngOriginalError}class Qa{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&ed(s);for(;a&&ed(a);)a=ed(a);return a||null}}const Jm=new Map;let Xm=0;const nd="__ngContext__";function br(i,s){fn(s)?(i[nd]=s[20],function Bc(i){Jm.set(i[20],i)}(s)):i[nd]=s}function yn(i){return i instanceof Function?i():i}var xo=(()=>((xo=xo||{})[xo.Important=1]="Important",xo[xo.DashCase=2]="DashCase",xo))();function xp(i,s){return undefined(i,s)}function $c(i){const s=i[3];return xn(s)?s[3]:s}function Op(i){return D0(i[13])}function Rp(i){return D0(i[4])}function D0(i){for(;null!==i&&!xn(i);)i=i[4];return i}function rd(i,s,a,c,l){if(null!=c){let f,y=!1;xn(c)?f=c:fn(c)&&(y=!0,c=c[0]);const w=Er(c);0===i&&null!==a?null==l?sy(s,a,w):la(s,a,w,l||null,!0):1===i&&null!==a?la(s,a,w,l||null,!0):2===i?function Bp(i,s,a){const c=Vp(i,s);c&&function Cb(i,s,a,c){i.removeChild(s,a,c)}(i,c,s,a)}(s,w,y):3===i&&s.destroyNode(w),null!=f&&function Uh(i,s,a,c,l){const f=a[7];f!==Er(a)&&rd(s,i,c,f,l);for(let w=10;w<a.length;w++){const I=a[w];Vh(I[1],I,i,s,c,f)}}(s,i,f,a,l)}}function Xa(i,s,a){return i.createElement(s,a)}function kp(i,s){const a=i[9],c=a.indexOf(s),l=s[3];512&s[2]&&(s[2]&=-513,Ar(l,-1)),a.splice(c,1)}function iy(i,s){if(i.length<=10)return;const a=10+s,c=i[a];if(c){const l=c[17];null!==l&&l!==i&&kp(l,c),s>0&&(i[a-1][4]=c[4]);const f=so(i,10+s);!function jn(i,s){Vh(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(c[1],c);const y=f[19];null!==y&&y.detachView(f[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function Lh(i,s){if(!(128&s[2])){const a=s[11];a.destroyNode&&Vh(i,s,a,3,null,null),function Hc(i){let s=i[13];if(!s)return Gc(i[1],i);for(;s;){let a=null;if(fn(s))a=s[13];else{const c=s[10];c&&(a=c)}if(!a){for(;s&&!s[4]&&s!==i;)fn(s)&&Gc(s[1],s),s=s[3];null===s&&(s=i),fn(s)&&Gc(s[1],s),a=s&&s[4]}s=a}}(s)}}function Gc(i,s){if(!(128&s[2])){s[2]&=-65,s[2]|=128,function Fp(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const l=s[a[c]];if(!(l instanceof Ji)){const f=a[c+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const w=l[f[y]],I=f[y+1];try{I.call(w)}finally{}}else try{f.call(l)}finally{}}}}(i,s),function S0(i,s){const a=i.cleanup,c=s[7];let l=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const y=a[f+1],w="function"==typeof y?y(s):Er(s[y]),I=c[l=a[f+2]],T=a[f+3];"boolean"==typeof T?w.removeEventListener(a[f],I,T):T>=0?c[l=T]():c[l=-T].unsubscribe(),f+=2}else{const y=c[l=a[f+1]];a[f].call(y)}if(null!==c){for(let f=l+1;f<c.length;f++)(0,c[f])();s[7]=null}}(i,s),1===s[1].type&&s[11].destroy();const a=s[17];if(null!==a&&xn(s[3])){a!==s[3]&&kp(a,s);const c=s[19];null!==c&&c.detachView(i)}!function ps(i){Jm.delete(i[20])}(s)}}function A0(i,s,a){return function Lp(i,s,a){let c=s;for(;null!==c&&40&c.type;)c=(s=c).parent;if(null===c)return a[0];if(2&c.flags){const l=i.data[c.directiveStart].encapsulation;if(l===Rt.None||l===Rt.Emulated)return null}return si(c,a)}(i,s.parent,a)}function la(i,s,a,c,l){i.insertBefore(s,a,c,l)}function sy(i,s,a){i.appendChild(s,a)}function oy(i,s,a,c,l){null!==c?la(i,s,a,c,l):sy(i,s,a)}function Vp(i,s){return i.parentNode(s)}let O0=function x0(i,s,a){return 40&i.type?si(i,a):null};function id(i,s,a,c){const l=A0(i,c,s),f=s[11],w=function M0(i,s,a){return O0(i,s,a)}(c.parent||s[6],c,s);if(null!=l)if(Array.isArray(a))for(let I=0;I<a.length;I++)oy(f,l,a[I],w,!1);else oy(f,l,a,w,!1)}function zc(i,s){if(null!==s){const a=s.type;if(3&a)return si(s,i);if(4&a)return eu(-1,i[s.index]);if(8&a){const c=s.child;if(null!==c)return zc(i,c);{const l=i[s.index];return xn(l)?eu(-1,l):Er(l)}}if(32&a)return xp(s,i)()||Er(i[s.index]);{const c=P0(i,s);return null!==c?Array.isArray(c)?c[0]:zc($c(i[16]),c):zc(i,s.next)}}return null}function P0(i,s){return null!==s?i[16][6].projection[s.projection]:null}function eu(i,s){const a=10+i+1;if(a<s.length){const c=s[a],l=c[1].firstChild;if(null!==l)return zc(c,l)}return s[7]}function N0(i,s,a,c,l,f,y){for(;null!=a;){const w=c[a.index],I=a.type;if(y&&0===s&&(w&&br(Er(w),c),a.flags|=4),64!=(64&a.flags))if(8&I)N0(i,s,a.child,c,l,f,!1),rd(s,i,l,w,f);else if(32&I){const T=xp(a,c);let x;for(;x=T();)rd(s,i,l,x,f);rd(s,i,l,w,f)}else 16&I?k0(i,s,c,a,l,f):rd(s,i,l,w,f);a=y?a.projectionNext:a.next}}function Vh(i,s,a,c,l,f){N0(a,c,i.firstChild,s,l,f,!1)}function k0(i,s,a,c,l,f){const y=a[16],I=y[6].projection[c.projection];if(Array.isArray(I))for(let T=0;T<I.length;T++)rd(s,i,l,I[T],f);else N0(i,s,I,y[3],l,f,!0)}function Wc(i,s,a){i.setAttribute(s,"style",a)}function jp(i,s,a){""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a)}function uy(i,s,a){let c=i.length;for(;;){const l=i.indexOf(s,a);if(-1===l)return l;if(0===l||i.charCodeAt(l-1)<=32){const f=s.length;if(l+f===c||i.charCodeAt(l+f)<=32)return l}a=l+1}}const qc="ng-template";function Sb(i,s,a){let c=0;for(;c<i.length;){let l=i[c++];if(a&&"class"===l){if(l=i[c],-1!==uy(l.toLowerCase(),s,0))return!0}else if(1===l){for(;c<i.length&&"string"==typeof(l=i[c++]);)if(l.toLowerCase()===s)return!0;return!1}}return!1}function F0(i){return 4===i.type&&i.value!==qc}function L0(i,s,a){return s===(4!==i.type||a?i.value:qc)}function Ab(i,s,a){let c=4;const l=i.attrs||[],f=function Mb(i){for(let s=0;s<i.length;s++)if(Va(i[s]))return s;return i.length}(l);let y=!1;for(let w=0;w<s.length;w++){const I=s[w];if("number"!=typeof I){if(!y)if(4&c){if(c=2|1&c,""!==I&&!L0(i,I,a)||""===I&&1===s.length){if(Vs(c))return!1;y=!0}}else{const T=8&c?I:s[++w];if(8&c&&null!==i.attrs){if(!Sb(i.attrs,T,a)){if(Vs(c))return!1;y=!0}continue}const F=jh(8&c?"class":I,l,F0(i),a);if(-1===F){if(Vs(c))return!1;y=!0;continue}if(""!==T){let Y;Y=F>f?"":l[F+1].toLowerCase();const ce=8&c?Y:null;if(ce&&-1!==uy(ce,T,0)||2&c&&T!==Y){if(Vs(c))return!1;y=!0}}}}else{if(!y&&!Vs(c)&&!Vs(I))return!1;if(y&&Vs(I))continue;y=!1,c=I|1&c}}return Vs(c)||y}function Vs(i){return 0==(1&i)}function jh(i,s,a,c){if(null===s)return-1;let l=0;if(c||!a){let f=!1;for(;l<s.length;){const y=s[l];if(y===i)return l;if(3===y||6===y)f=!0;else{if(1===y||2===y){let w=s[++l];for(;"string"==typeof w;)w=s[++l];continue}if(4===y)break;if(0===y){l+=4;continue}}l+=f?1:2}return-1}return function U0(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===s)return a;a++}return-1}(s,i)}function V0(i,s,a=!1){for(let c=0;c<s.length;c++)if(Ab(i,s[c],a))return!0;return!1}function da(i,s){return i?":not("+s.trim()+")":s}function ly(i){let s=i[0],a=1,c=2,l="",f=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&c){const w=i[++a];l+="["+y+(w.length>0?'="'+w+'"':"")+"]"}else 8&c?l+="."+y:4&c&&(l+=" "+y);else""!==l&&!Vs(y)&&(s+=da(f,l),l=""),c=y,f=f||!Vs(c);a++}return""!==l&&(s+=da(f,l)),s}const En={};function j0(i){$0(Pn(),We(),yr()+i,!1)}function $0(i,s,a,c){if(!c)if(3==(3&s[2])){const f=i.preOrderCheckHooks;null!==f&&qo(s,f,a)}else{const f=i.preOrderHooks;null!==f&&Zo(s,f,0,a)}Os(a)}function dy(i,s=null,a=null,c){const l=W0(i,s,a,c);return l.resolveInjectorInitializers(),l}function W0(i,s=null,a=null,c,l=new Set){const f=[a||Zt,BS(i)];return c=c||("object"==typeof i?void 0:_e(i)),new Hm(f,s||Th(),c||null,l)}let zu=(()=>{class i{static create(a,c){var l;if(Array.isArray(a))return dy({name:""},c,a,"");{const f=null!==(l=a.name)&&void 0!==l?l:"";return dy({name:f},a.parent,a.providers,f)}}}return i.THROW_IF_NOT_FOUND=hs,i.NULL=new n0,i.\u0275prov=Un({token:i,providedIn:"any",factory:()=>Or(t0)}),i.__NG_ELEMENT_ID__=-1,i})();function Wu(i,s=vt.Default){const a=We();return null===a?Or(i,s):Xo(Vr(),a,te(i),s)}function Ey(){throw new Error("invalid")}function Iy(i,s){return i<<17|s<<2}function ha(i){return i>>17&32767}function Cy(i){return 2|i}function tu(i){return(131068&i)>>2}function Dy(i,s){return-131069&i|s<<2}function bs(i){return 1|i}function nw(i,s){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const l=a[c],f=a[c+1];if(-1!==f){const y=i.data[f];vc(l),y.contentQueries(2,s[f],f)}}}function Yh(i,s,a,c,l,f,y,w,I,T,x){const F=s.blueprint.slice();return F[0]=l,F[2]=76|c,(null!==x||i&&1024&i[2])&&(F[2]|=1024),Sa(F),F[3]=F[15]=i,F[8]=a,F[10]=y||i&&i[10],F[11]=w||i&&i[11],F[12]=I||i&&i[12]||null,F[9]=T||i&&i[9]||null,F[6]=f,F[20]=function Oh(){return Xm++}(),F[21]=x,F[16]=2==s.type?i[16]:F,F}function nu(i,s,a,c,l){let f=i.data[s];if(null===f)f=function ld(i,s,a,c,l){const f=Ho(),y=_u(),I=i.data[s]=function Jb(i,s,a,c,l,f){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,a,s,c,l);return null===i.firstChild&&(i.firstChild=I),null!==f&&(y?null==f.child&&null!==I.parent&&(f.child=I):null===f.next&&(f.next=I)),I}(i,s,a,c,l),function Tl(){return ln.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=c,f.attrs=l;const y=function vu(){const i=ln.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return Di(f,!0),f}function Jc(i,s,a,c){if(0===a)return-1;const l=s.length;for(let f=0;f<a;f++)s.push(c),i.blueprint.push(c),i.data.push(null);return l}function Xc(i,s,a){Wo(s);try{const c=i.viewQuery;null!==c&&$r(1,c,a);const l=i.template;null!==l&&iw(i,s,l,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&nw(i,s),i.staticViewQueries&&$r(2,i.viewQuery,a);const f=i.components;null!==f&&function rw(i,s){for(let a=0;a<s.length;a++)lC(i,s[a])}(s,f)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{s[2]&=-5,to()}}function Qh(i,s,a,c){const l=s[2];if(128!=(128&l)){Wo(s);try{Sa(s),function Pa(i){return ln.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&iw(i,s,a,2,c);const y=3==(3&l);if(y){const T=i.preOrderCheckHooks;null!==T&&qo(s,T,null)}else{const T=i.preOrderHooks;null!==T&&Zo(s,T,0,null),Pl(s,0)}if(function uC(i){for(let s=Op(i);null!==s;s=Rp(s)){if(!s[2])continue;const a=s[9];for(let c=0;c<a.length;c++){const l=a[c],f=l[3];0==(512&l[2])&&Ar(f,1),l[2]|=512}}}(s),function By(i){for(let s=Op(i);null!==s;s=Rp(s))for(let a=10;a<s.length;a++){const c=s[a],l=c[1];eo(c)&&Qh(l,c,l.template,c[8])}}(s),null!==i.contentQueries&&nw(i,s),y){const T=i.contentCheckHooks;null!==T&&qo(s,T)}else{const T=i.contentHooks;null!==T&&Zo(s,T,1),Pl(s,1)}!function Kb(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const l=a[c];if(l<0)Os(~l);else{const f=l,y=a[++c],w=a[++c];Sl(y,f),w(2,s[f])}}}finally{Os(-1)}}(i,s);const w=i.components;null!==w&&function Zp(i,s){for(let a=0;a<s.length;a++)cC(i,s[a])}(s,w);const I=i.viewQuery;if(null!==I&&$r(2,I,c),y){const T=i.viewCheckHooks;null!==T&&qo(s,T)}else{const T=i.viewHooks;null!==T&&Zo(s,T,2),Pl(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-41,512&s[2]&&(s[2]&=-513,Ar(s[3],-1))}finally{to()}}}function iw(i,s,a,c,l){const f=yr(),y=2&c;try{Os(-1),y&&s.length>22&&$0(i,s,22,!1),a(c,l)}finally{Os(f)}}function Py(i,s,a){!_o()||(function tC(i,s,a,c){const l=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||Ps(a,s),br(c,s);const y=a.initialInputs;for(let w=l;w<f;w++){const I=i.data[w],T=be(I);T&&sC(s,a,I);const x=vs(s,i,w,a);br(x,s),null!==y&&oC(0,w-l,x,I,0,y),T&&(Zn(a.index,s)[8]=x)}}(i,s,a,si(a,s)),128==(128&a.flags)&&function nC(i,s,a){const c=a.directiveStart,l=a.directiveEnd,f=a.index,y=function oh(){return ln.lFrame.currentDirectiveIndex}();try{Os(f);for(let w=c;w<l;w++){const I=i.data[w],T=s[w];zo(w),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&pw(I,T)}}finally{Os(-1),zo(y)}}(i,s,a))}function Ny(i,s,a=si){const c=s.localNames;if(null!==c){let l=s.index+1;for(let f=0;f<c.length;f+=2){const y=c[f+1],w=-1===y?a(s,i):i[y];i[l++]=w}}}function ow(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=dd(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function dd(i,s,a,c,l,f,y,w,I,T){const x=22+c,F=x+l,Y=function Yb(i,s){const a=[];for(let c=0;c<s;c++)a.push(c<i?null:En);return a}(x,F),ce="function"==typeof T?T():T;return Y[1]={type:i,blueprint:Y,template:a,queries:null,viewQuery:w,declTNode:s,data:Y.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:I,consts:ce,incompleteFirstPass:!1}}function aw(i,s,a,c){const l=$y(s);null===a?l.push(c):(l.push(a),i.firstCreatePass&&eg(i).push(c,l.length-1))}function uw(i,s,a){for(let c in i)if(i.hasOwnProperty(c)){const l=i[c];(a=null===a?{}:a).hasOwnProperty(c)?a[c].push(s,l):a[c]=[s,l]}return a}function cw(i,s){const c=s.directiveEnd,l=i.data,f=s.attrs,y=[];let w=null,I=null;for(let T=s.directiveStart;T<c;T++){const x=l[T],F=x.inputs,Y=null===f||F0(s)?null:Yp(F,f);y.push(Y),w=uw(F,T,w),I=uw(x.outputs,T,I)}null!==w&&(w.hasOwnProperty("class")&&(s.flags|=16),w.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=y,s.inputs=w,s.outputs=I}function ky(i,s){const a=Zn(s,i);16&a[2]||(a[2]|=32)}function Kp(i,s,a,c){let l=!1;if(_o()){const f=function rC(i,s,a){const c=i.directiveRegistry;let l=null;if(c)for(let f=0;f<c.length;f++){const y=c[f];V0(a,y.selectors,!1)&&(l||(l=[]),Eo(Ps(a,s),i,y.type),be(y)?(Fy(i,a),l.unshift(y)):l.push(y))}return l}(i,s,a),y=null===c?null:{"":-1};if(null!==f){l=!0,Vy(a,i.data.length,f.length);for(let x=0;x<f.length;x++){const F=f[x];F.providersResolver&&F.providersResolver(F)}let w=!1,I=!1,T=Jc(i,s,f.length,null);for(let x=0;x<f.length;x++){const F=f[x];a.mergedAttrs=Ua(a.mergedAttrs,F.hostAttrs),iC(i,a,s,T,F),gw(T,F,y),null!==F.contentQueries&&(a.flags|=8),(null!==F.hostBindings||null!==F.hostAttrs||0!==F.hostVars)&&(a.flags|=128);const Y=F.type.prototype;!w&&(Y.ngOnChanges||Y.ngOnInit||Y.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),w=!0),!I&&(Y.ngOnChanges||Y.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),T++}cw(i,a)}y&&function Ly(i,s,a){if(s){const c=i.localNames=[];for(let l=0;l<s.length;l+=2){const f=a[s[l+1]];if(null==f)throw new Re(-301,!1);c.push(s[l],f)}}}(a,c,y)}return a.mergedAttrs=Ua(a.mergedAttrs,a.attrs),l}function fw(i,s,a,c,l,f){const y=f.hostBindings;if(y){let w=i.hostBindingOpCodes;null===w&&(w=i.hostBindingOpCodes=[]);const I=~s.index;(function eC(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(w)!=I&&w.push(I),w.push(c,l,y)}}function pw(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function Fy(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function gw(i,s,a){if(a){if(s.exportAs)for(let c=0;c<s.exportAs.length;c++)a[s.exportAs[c]]=i;be(s)&&(a[""]=i)}}function Vy(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function iC(i,s,a,c,l){i.data[c]=l;const f=l.factory||(l.factory=Lr(l.type)),y=new Ji(f,be(l),Wu);i.blueprint[c]=y,a[c]=y,fw(i,s,0,c,Jc(i,a,l.hostVars,En),l)}function sC(i,s,a){const c=si(s,i),l=ow(a),f=i[10],y=Jp(i,Yh(i,l,null,a.onPush?32:16,c,s,f,f.createRenderer(c,a),null,null,null));i[s.index]=y}function fa(i,s,a,c,l,f){const y=si(i,s);!function Uy(i,s,a,c,l,f,y){if(null==f)i.removeAttribute(s,l,a);else{const w=null==y?Me(f):y(f,c||"",l);i.setAttribute(s,l,w,a)}}(s[11],y,f,i.value,a,c,l)}function oC(i,s,a,c,l,f){const y=f[s];if(null!==y){const w=c.setInput;for(let I=0;I<y.length;){const T=y[I++],x=y[I++],F=y[I++];null!==w?c.setInput(a,F,T,x):a[x]=F}}}function Yp(i,s){let a=null,c=0;for(;c<s.length;){const l=s[c];if(0!==l)if(5!==l){if("number"==typeof l)break;i.hasOwnProperty(l)&&(null===a&&(a=[]),a.push(l,i[l],s[c+1])),c+=2}else c+=2;else c+=4}return a}function Qp(i,s,a,c){return new Array(i,!0,!1,s,null,0,c,a,null,null)}function cC(i,s){const a=Zn(s,i);if(eo(a)){const c=a[1];48&a[2]?Qh(c,a,c.template,a[8]):a[5]>0&&hd(a)}}function hd(i){for(let c=Op(i);null!==c;c=Rp(c))for(let l=10;l<c.length;l++){const f=c[l];if(eo(f))if(512&f[2]){const y=f[1];Qh(y,f,y.template,f[8])}else f[5]>0&&hd(f)}const a=i[1].components;if(null!==a)for(let c=0;c<a.length;c++){const l=Zn(a[c],i);eo(l)&&l[5]>0&&hd(l)}}function lC(i,s){const a=Zn(s,i),c=a[1];(function dC(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(c,a),Xc(c,a,a[8])}function Jp(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function jy(i){for(;i;){i[2]|=32;const s=$c(i);if(Ht(i)&&!s)return i;i=s}return null}function Xp(i,s,a,c=!0){const l=s[10];l.begin&&l.begin();try{Qh(i,s,i.template,a)}catch(y){throw c&&Hy(s,y),y}finally{l.end&&l.end()}}function $r(i,s,a){vc(0),s(i,a)}function $y(i){return i[7]||(i[7]=[])}function eg(i){return i.cleanup||(i.cleanup=[])}function Hy(i,s){const a=i[9],c=a?a.get(Qa,null):null;c&&c.handleError(s)}function Gy(i,s,a,c,l){for(let f=0;f<a.length;){const y=a[f++],w=a[f++],I=s[y],T=i.data[y];null!==T.setInput?T.setInput(I,l,c,w):I[w]=l}}function pa(i,s,a){const c=us(s,i);!function ry(i,s,a){i.setValue(s,a)}(i[11],c,a)}function zy(i,s,a){let c=a?i.styles:null,l=a?i.classes:null,f=0;if(null!==s)for(let y=0;y<s.length;y++){const w=s[y];"number"==typeof w?f=w:1==f?l=Te(l,w):2==f&&(c=Te(c,w+": "+s[++y]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=l:i.classesWithoutHost=l}function Wy(i,s,a,c,l=!1){for(;null!==a;){const f=s[a.index];if(null!==f&&c.push(Er(f)),xn(f))for(let w=10;w<f.length;w++){const I=f[w],T=I[1].firstChild;null!==T&&Wy(I[1],I,T,c)}const y=a.type;if(8&y)Wy(i,s,a.child,c);else if(32&y){const w=xp(a,s);let I;for(;I=w();)c.push(I)}else if(16&y){const w=P0(s,a);if(Array.isArray(w))c.push(...w);else{const I=$c(s[16]);Wy(I[1],I,w,c,!0)}}a=l?a.projectionNext:a.next}return c}class Jh{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return Wy(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(xn(s)){const a=s[8],c=a?a.indexOf(this):-1;c>-1&&(iy(s,c),so(a,c))}this._attachedToViewContainer=!1}Lh(this._lView[1],this._lView)}onDestroy(s){aw(this._lView[1],this._lView,null,s)}markForCheck(){jy(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Xp(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Re(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Ib(i,s){Vh(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Re(902,!1);this._appRef=s}}class qy extends Jh{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;Xp(s[1],s,s[8],!1)}checkNoChanges(){}get context(){return null}}class ng extends Ah{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=j(s);return new ga(a,this.ngModule)}}function Xh(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class mw{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,c){const l=this.injector.get(s,Zm,c);return l!==Zm||a===Zm?l:this.parentInjector.get(s,a,c)}}class ga extends zm{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function Zc(i){return i.map(ly).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Xh(this.componentDef.inputs)}get outputs(){return Xh(this.componentDef.outputs)}create(s,a,c,l){let f=(l=l||this.ngModule)instanceof Uc?l:null==l?void 0:l.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const y=f?new mw(s,f):s,w=y.get(h0,null);if(null===w)throw new Re(407,!1);const I=y.get(p0,null),T=w.createRenderer(null,this.componentDef),x=this.componentDef.selectors[0][0]||"div",F=c?function Qb(i,s,a){return i.selectRootElement(s,a===Rt.ShadowDom)}(T,c,this.componentDef.encapsulation):Xa(w.createRenderer(null,this.componentDef),x,function fA(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(x)),Y=this.componentDef.onPush?288:272,ce=dd(0,null,null,1,0,null,null,null,null,null),Fe=Yh(null,ce,null,Y,null,null,w,T,I,y,null);let rt,ft;Wo(Fe);try{const xt=function Ky(i,s,a,c,l,f){const y=a[1];a[22]=i;const I=nu(y,22,2,"#host",null),T=I.mergedAttrs=s.hostAttrs;null!==T&&(zy(I,T,!0),null!==i&&(Rs(l,i,T),null!==I.classes&&jp(l,i,I.classes),null!==I.styles&&Wc(l,i,I.styles)));const x=c.createRenderer(i,s),F=Yh(a,ow(s),null,s.onPush?32:16,a[22],I,c,x,f||null,null,null);return y.firstCreatePass&&(Eo(Ps(I,a),y,s.type),Fy(y,I),Vy(I,a.length,1)),Jp(a,F),a[22]=F}(F,this.componentDef,Fe,w,T);if(F)if(c)Rs(T,F,["ng-version",qm.full]);else{const{attrs:Yt,classes:Ue}=function $p(i){const s=[],a=[];let c=1,l=2;for(;c<i.length;){let f=i[c];if("string"==typeof f)2===l?""!==f&&s.push(f,i[++c]):8===l&&a.push(f);else{if(!Vs(l))break;l=f}c++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Yt&&Rs(T,F,Yt),Ue&&Ue.length>0&&jp(T,F,Ue.join(" "))}if(ft=Bo(ce,22),void 0!==a){const Yt=ft.projection=[];for(let Ue=0;Ue<this.ngContentSelectors.length;Ue++){const nn=a[Ue];Yt.push(null!=nn?Array.from(nn):null)}}rt=function pC(i,s,a,c){const l=a[1],f=function hw(i,s,a){const c=Vr();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),iC(i,c,s,Jc(i,s,1,null),a),cw(i,c));const l=vs(s,i,c.directiveStart,c);br(l,s);const f=si(c,s);return f&&br(f,s),l}(l,a,s);if(i[8]=a[8]=f,null!==c)for(const w of c)w(f,s);if(s.contentQueries){const w=Vr();s.contentQueries(1,f,w.directiveStart)}const y=Vr();return!l.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Os(y.index),fw(a[1],y,0,y.directiveStart,y.directiveEnd,s),pw(s,f)),f}(xt,this.componentDef,Fe,[gC]),Xc(ce,Fe,null)}finally{to()}return new yw(this.componentType,rt,Xl(ft,Fe),Fe,ft)}}class yw extends class ob{}{constructor(s,a,c,l,f){super(),this.location=c,this._rootLView=l,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new qy(l),this.componentType=s}setInput(s,a){const c=this._tNode.inputs;let l;if(null!==c&&(l=c[s])){const f=this._rootLView;Gy(f[1],f,l,s,a),ky(f,this._tNode.index)}}get injector(){return new ta(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function gC(){const i=Vr();Ic(We()[1],i)}function rg(i){let s=function vw(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;s;){let l;if(be(i))l=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Re(903,!1);l=s.\u0275dir}if(l){if(a){c.push(l);const y=i;y.inputs=_w(i.inputs),y.declaredInputs=_w(i.declaredInputs),y.outputs=_w(i.outputs);const w=l.hostBindings;w&&ww(i,w);const I=l.viewQuery,T=l.contentQueries;if(I&&ig(i,I),T&&pA(i,T),Ee(i.inputs,l.inputs),Ee(i.declaredInputs,l.declaredInputs),Ee(i.outputs,l.outputs),be(l)&&l.data.animation){const x=i.data;x.animation=(x.animation||[]).concat(l.data.animation)}}const f=l.features;if(f)for(let y=0;y<f.length;y++){const w=f[y];w&&w.ngInherit&&w(i),w===rg&&(a=!1)}}s=Object.getPrototypeOf(s)}!function mC(i){let s=0,a=null;for(let c=i.length-1;c>=0;c--){const l=i[c];l.hostVars=s+=l.hostVars,l.hostAttrs=Ua(l.hostAttrs,a=Ua(a,l.hostAttrs))}}(c)}function _w(i){return i===Fr?{}:i===Zt?[]:i}function ig(i,s){const a=i.viewQuery;i.viewQuery=a?(c,l)=>{s(c,l),a(c,l)}:s}function pA(i,s){const a=i.contentQueries;i.contentQueries=a?(c,l,f)=>{s(c,l,f),a(c,l,f)}:s}function ww(i,s){const a=i.hostBindings;i.hostBindings=a?(c,l)=>{s(c,l),a(c,l)}:s}let sg=null;function el(){if(!sg){const i=rn.Symbol;if(i&&i.iterator)sg=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const c=s[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(sg=c)}}}return sg}function ef(i){return!!Yy(i)&&(Array.isArray(i)||!(i instanceof Map)&&el()in i)}function Yy(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function ma(i,s,a){return i[s]=a}function Vn(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function ru(i,s,a,c){const l=Vn(i,s,a);return Vn(i,s+1,c)||l}function Bs(i,s,a,c){const l=We();return Vn(l,Na(),s)&&(Pn(),fa(vr(),l,i,s,a,c)),Bs}function Ne(i,s,a,c,l,f){const w=ru(i,function ys(){return ln.lFrame.bindingIndex}(),a,l);return xs(2),w?s+Me(a)+c+Me(l)+f:En}function Hi(i,s,a,c,l,f,y,w){const I=We(),T=Pn(),x=i+22,F=T.firstCreatePass?function EC(i,s,a,c,l,f,y,w,I){const T=s.consts,x=nu(s,i,4,y||null,Qi(T,w));Kp(s,a,x,Qi(T,I)),Ic(s,x);const F=x.tViews=dd(2,x,c,l,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T);return null!==s.queries&&(s.queries.template(s,x),F.queries=s.queries.embeddedTView(x)),x}(x,T,I,s,a,c,l,f,y):T.data[x];Di(F,!1);const Y=I[11].createComment("");id(T,I,Y,F),br(Y,I),Jp(I,I[x]=Qp(Y,I,Y,F)),pe(F)&&Py(T,I,F),null!=y&&Ny(I,F,w)}function Si(i){return ms(function Ra(){return ln.lFrame.contextLView}(),22+i)}function ya(i,s,a){const c=We();return Vn(c,Na(),s)&&function Us(i,s,a,c,l,f,y,w){const I=si(s,a);let x,T=s.inputs;!w&&null!=T&&(x=T[c])?(Gy(i,a,x,c,l),he(s)&&ky(a,s.index)):3&s.type&&(c=function lw(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),l=null!=y?y(l,s.value||"",c):l,f.setProperty(I,c,l))}(Pn(),vr(),c,i,s,c[11],a,!1),ya}function Qy(i,s,a,c,l){const y=l?"class":"style";Gy(i,a,s.inputs[y],y,c)}function af(i,s,a,c){const l=We(),f=Pn(),y=22+i,w=l[11],I=l[y]=Xa(w,s,function Ec(){return ln.lFrame.currentNamespace}()),T=f.firstCreatePass?function IC(i,s,a,c,l,f,y){const w=s.consts,T=nu(s,i,2,l,Qi(w,f));return Kp(s,a,T,Qi(w,y)),null!==T.attrs&&zy(T,T.attrs,!1),null!==T.mergedAttrs&&zy(T,T.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,T),T}(y,f,l,0,s,a,c):f.data[y];Di(T,!0);const x=T.mergedAttrs;null!==x&&Rs(w,I,x);const F=T.classes;null!==F&&jp(w,I,F);const Y=T.styles;return null!==Y&&Wc(w,I,Y),64!=(64&T.flags)&&id(f,l,I,T),0===function Ma(){return ln.lFrame.elementDepthCount}()&&br(I,l),function Dl(){ln.lFrame.elementDepthCount++}(),pe(T)&&(Py(f,l,T),function sw(i,s,a){if(it(s)){const l=s.directiveEnd;for(let f=s.directiveStart;f<l;f++){const y=i.data[f];y.contentQueries&&y.contentQueries(1,a[f],f)}}}(f,T,l)),null!==c&&Ny(l,T),af}function md(){let i=Vr();_u()?function Go(){ln.lFrame.isParent=!1}():(i=i.parent,Di(i,!1));const s=i;!function xa(){ln.lFrame.elementDepthCount--}();const a=Pn();return a.firstCreatePass&&(Ic(a,i),it(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Eu(i){return 0!=(16&i.flags)}(s)&&Qy(a,s,We(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Iu(i){return 0!=(32&i.flags)}(s)&&Qy(a,s,We(),s.stylesWithoutHost,!1),md}function lg(i,s,a,c){return af(i,s,a,c),md(),lg}function dg(){return We()}function vd(i){return!!i&&"function"==typeof i.then}function Po(i){return!!i&&"function"==typeof i.subscribe}const hg=Po;function ev(i,s,a,c){const l=We(),f=Pn(),y=Vr();return function tv(i,s,a,c,l,f,y,w){const I=pe(c),x=i.firstCreatePass&&eg(i),F=s[8],Y=$y(s);let ce=!0;if(3&c.type||w){const ft=si(c,s),xt=w?w(ft):ft,Yt=Y.length,Ue=w?Gn=>w(Er(Gn[c.index])):c.index;let nn=null;if(!w&&I&&(nn=function _d(i,s,a,c){const l=i.cleanup;if(null!=l)for(let f=0;f<l.length-1;f+=2){const y=l[f];if(y===a&&l[f+1]===c){const w=s[7],I=l[f+2];return w.length>I?w[I]:null}"string"==typeof y&&(f+=2)}return null}(i,s,l,c.index)),null!==nn)(nn.__ngLastListenerFn__||nn).__ngNextListenerFn__=f,nn.__ngLastListenerFn__=f,ce=!1;else{f=nv(c,s,F,f,!1);const Gn=a.listen(xt,l,f);Y.push(f,Gn),x&&x.push(l,Ue,Yt,Yt+1)}}else f=nv(c,s,F,f,!1);const Fe=c.outputs;let rt;if(ce&&null!==Fe&&(rt=Fe[l])){const ft=rt.length;if(ft)for(let xt=0;xt<ft;xt+=2){const wr=s[rt[xt]][rt[xt+1]].subscribe(f),uc=Y.length;Y.push(f,wr),x&&x.push(l,c.index,uc,-(uc+1))}}}(f,l,l[11],y,i,s,0,c),ev}function fg(i,s,a,c){try{return!1!==a(c)}catch(l){return Hy(i,l),!1}}function nv(i,s,a,c,l){return function f(y){if(y===Function)return c;jy(2&i.flags?Zn(i.index,s):s);let I=fg(s,0,c,y),T=f.__ngNextListenerFn__;for(;T;)I=fg(s,0,T,y)&&I,T=T.__ngNextListenerFn__;return l&&!1===I&&(y.preventDefault(),y.returnValue=!1),I}}function Tw(i=1){return function no(i){return(ln.lFrame.contextLView=function xl(i,s){for(;i>0;)s=s[15],i--;return s}(i,ln.lFrame.contextLView))[8]}(i)}function vg(i,s,a,c,l){const f=i[a+1],y=null===s;let w=c?ha(f):tu(f),I=!1;for(;0!==w&&(!1===I||y);){const x=i[w+1];Rw(i[w],s)&&(I=!0,i[w+1]=c?bs(x):Cy(x)),w=c?ha(x):tu(x)}I&&(i[a+1]=c?Cy(f):bs(f))}function Rw(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&ws(i,s)>=0}function cf(i,s){return function Hs(i,s,a,c){const l=We(),f=Pn(),y=xs(2);f.firstUpdatePass&&function hv(i,s,a,c){const l=i.data;if(null===l[a+1]){const f=l[yr()],y=function Nw(i,s){return s>=i.expandoStartIndex}(i,a);(function Id(i,s){return 0!=(i.flags&(s?16:32))})(f,c)&&null===s&&!y&&(s=!1),s=function DC(i,s,a,c){const l=function yc(i){const s=ln.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let f=c?s.residualClasses:s.residualStyles;if(null===l)0===(c?s.classBindings:s.styleBindings)&&(a=nl(a=pv(null,i,s,a,c),s.attrs,c),f=null);else{const y=s.directiveStylingLast;if(-1===y||i[y]!==l)if(a=pv(l,i,s,a,c),null===f){let I=function TC(i,s,a){const c=a?s.classBindings:s.styleBindings;if(0!==tu(c))return i[ha(c)]}(i,s,c);void 0!==I&&Array.isArray(I)&&(I=pv(null,i,s,I[1],c),I=nl(I,s.attrs,c),function kw(i,s,a,c){i[ha(a?s.classBindings:s.styleBindings)]=c}(i,s,c,I))}else f=function fv(i,s,a){let c;const l=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<l;f++)c=nl(c,i[f].hostAttrs,a);return nl(c,s.attrs,a)}(i,s,c)}return void 0!==f&&(c?s.residualClasses=f:s.residualStyles=f),a}(l,f,s,c),function bC(i,s,a,c,l,f){let y=f?s.classBindings:s.styleBindings,w=ha(y),I=tu(y);i[c]=a;let x,T=!1;if(Array.isArray(a)){const F=a;x=F[1],(null===x||ws(F,x)>0)&&(T=!0)}else x=a;if(l)if(0!==I){const Y=ha(i[w+1]);i[c+1]=Iy(Y,w),0!==Y&&(i[Y+1]=Dy(i[Y+1],c)),i[w+1]=function by(i,s){return 131071&i|s<<17}(i[w+1],c)}else i[c+1]=Iy(w,0),0!==w&&(i[w+1]=Dy(i[w+1],c)),w=c;else i[c+1]=Iy(I,0),0===w?w=c:i[I+1]=Dy(i[I+1],c),I=c;T&&(i[c+1]=Cy(i[c+1])),vg(i,x,c,!0),vg(i,x,c,!1),function yg(i,s,a,c,l){const f=l?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof s&&ws(f,s)>=0&&(a[c+1]=bs(a[c+1]))}(s,x,i,c,f),y=Iy(w,I),f?s.classBindings=y:s.styleBindings=y}(l,f,s,a,y,c)}}(f,i,y,c),s!==En&&Vn(l,y,s)&&function Cg(i,s,a,c,l,f,y,w){if(!(3&s.type))return;const I=i.data,T=I[w+1];lf(function Gp(i){return 1==(1&i)}(T)?Dg(I,s,a,l,tu(T),y):void 0)||(lf(f)||function jb(i){return 2==(2&i)}(T)&&(f=Dg(I,null,a,l,w,y)),function Bh(i,s,a,c,l){if(s)l?i.addClass(a,c):i.removeClass(a,c);else{let f=-1===c.indexOf("-")?void 0:xo.DashCase;null==l?i.removeStyle(a,c,f):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),f|=xo.Important),i.setStyle(a,c,l,f))}}(c,y,us(yr(),a),l,f))}(f,f.data[yr()],l,l[11],i,l[y+1]=function SC(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=_e(Mo(i)))),i}(s,a),c,y)}(i,s,null,!0),cf}function pv(i,s,a,c,l){let f=null;const y=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<y&&(f=s[w],c=nl(c,f.hostAttrs,l),f!==i);)w++;return null!==i&&(a.directiveStylingLast=w),c}function nl(i,s,a){const c=a?1:2;let l=-1;if(null!==s)for(let f=0;f<s.length;f++){const y=s[f];"number"==typeof y?l=y:l===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),_i(i,y,!!a||s[++f]))}return void 0===i?null:i}function Dg(i,s,a,c,l,f){const y=null===s;let w;for(;l>0;){const I=i[l],T=Array.isArray(I),x=T?I[1]:I,F=null===x;let Y=a[l+1];Y===En&&(Y=F?Zt:void 0);let ce=F?Ou(Y,c):x===c?Y:void 0;if(T&&!lf(ce)&&(ce=Ou(I,c)),lf(ce)&&(w=ce,y))return w;const Fe=i[l+1];l=y?ha(Fe):tu(Fe)}if(null!==s){let I=f?s.residualClasses:s.residualStyles;null!=I&&(w=Ou(I,c))}return w}function lf(i){return void 0!==i}function gv(i,s=""){const a=We(),c=Pn(),l=i+22,f=c.firstCreatePass?nu(c,l,1,s,null):c.data[l],y=a[l]=function Pp(i,s){return i.createText(s)}(a[11],s);id(c,a,y,f),Di(f,!1)}function Tg(i){return df("",i,""),Tg}function df(i,s,a){const c=We(),l=function fd(i,s,a,c){return Vn(i,Na(),a)?s+Me(a)+c:En}(c,i,s,a);return l!==En&&pa(c,yr(),l),df}function bd(i,s,a,c,l){const f=We(),y=Ne(f,i,s,a,c,l);return y!==En&&pa(f,yr(),y),bd}const va=void 0;var il=["en",[["a","p"],["AM","PM"],va],[["AM","PM"],va,va],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],va,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],va,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",va,"{1} 'at' {0}",va],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function yf(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let Ku={};function Tv(i){const s=function Rg(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Yw(s);if(a)return a;const c=s.split("-")[0];if(a=Yw(c),a)return a;if("en"===c)return il;throw new Re(701,!1)}function Sv(i){return Tv(i)[Lt.PluralCase]}function Yw(i){return i in Ku||(Ku[i]=rn.ng&&rn.ng.common&&rn.ng.common.locales&&rn.ng.common.locales[i]),Ku[i]}var Lt=(()=>((Lt=Lt||{})[Lt.LocaleId=0]="LocaleId",Lt[Lt.DayPeriodsFormat=1]="DayPeriodsFormat",Lt[Lt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Lt[Lt.DaysFormat=3]="DaysFormat",Lt[Lt.DaysStandalone=4]="DaysStandalone",Lt[Lt.MonthsFormat=5]="MonthsFormat",Lt[Lt.MonthsStandalone=6]="MonthsStandalone",Lt[Lt.Eras=7]="Eras",Lt[Lt.FirstDayOfWeek=8]="FirstDayOfWeek",Lt[Lt.WeekendRange=9]="WeekendRange",Lt[Lt.DateFormat=10]="DateFormat",Lt[Lt.TimeFormat=11]="TimeFormat",Lt[Lt.DateTimeFormat=12]="DateTimeFormat",Lt[Lt.NumberSymbols=13]="NumberSymbols",Lt[Lt.NumberFormats=14]="NumberFormats",Lt[Lt.CurrencyCode=15]="CurrencyCode",Lt[Lt.CurrencySymbol=16]="CurrencySymbol",Lt[Lt.CurrencyName=17]="CurrencyName",Lt[Lt.Currencies=18]="Currencies",Lt[Lt.Directionality=19]="Directionality",Lt[Lt.PluralCase=20]="PluralCase",Lt[Lt.ExtraData=21]="ExtraData",Lt))();const dr="en-US";let Jw=dr;function li(i,s,a,c,l){if(i=te(i),Array.isArray(i))for(let f=0;f<i.length;f++)li(i[f],s,a,c,l);else{const f=Pn(),y=We();let w=Vc(i)?i:te(i.provide),I=Ap(i);const T=Vr(),x=1048575&T.providerIndexes,F=T.directiveStart,Y=T.providerIndexes>>20;if(Vc(i)||!i.multi){const ce=new Ji(I,l,Wu),Fe=Af(w,s,l?x:x+Y,F);-1===Fe?(Eo(Ps(T,y),f,w),ec(f,i,s.length),s.push(w),T.directiveStart++,T.directiveEnd++,l&&(T.providerIndexes+=1048576),a.push(ce),y.push(ce)):(a[Fe]=ce,y[Fe]=ce)}else{const ce=Af(w,s,x+Y,F),Fe=Af(w,s,x,x+Y),rt=ce>=0&&a[ce],ft=Fe>=0&&a[Fe];if(l&&!ft||!l&&!rt){Eo(Ps(T,y),f,w);const xt=function al(i,s,a,c,l){const f=new Ji(i,a,Wu);return f.multi=[],f.index=s,f.componentProviders=0,au(f,l,c&&!a),f}(l?tt:$C,a.length,l,c,I);!l&&ft&&(a[Fe].providerFactory=xt),ec(f,i,s.length,0),s.push(w),T.directiveStart++,T.directiveEnd++,l&&(T.providerIndexes+=1048576),a.push(xt),y.push(xt)}else ec(f,i,ce>-1?ce:Fe,au(a[l?Fe:ce],I,!l&&c));!l&&c&&ft&&a[Fe].componentProviders++}}}function ec(i,s,a,c){const l=Vc(s),f=function jm(i){return!!i.useClass}(s);if(l||f){const I=(f?te(s.useClass):s).prototype.ngOnDestroy;if(I){const T=i.destroyHooks||(i.destroyHooks=[]);if(!l&&s.multi){const x=T.indexOf(a);-1===x?T.push(a,[c,I]):T[x+1].push(c,I)}else T.push(a,I)}}}function au(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function Af(i,s,a,c){for(let l=a;l<c;l++)if(s[l]===i)return l;return-1}function $C(i,s,a,c){return Hr(this.multi,[])}function tt(i,s,a,c){const l=this.multi;let f;if(this.providerFactory){const y=this.providerFactory.componentProviders,w=vs(a,a[1],this.providerFactory.index,c);f=w.slice(0,y),Hr(l,f);for(let I=y;I<w.length;I++)f.push(w[I])}else f=[],Hr(l,f);return f}function Hr(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function $g(i,s=[]){return a=>{a.providersResolver=(c,l)=>function bE(i,s,a){const c=Pn();if(c.firstCreatePass){const l=be(i);li(a,c.data,c.blueprint,l,!0),li(s,c.data,c.blueprint,l,!1)}}(c,l?l(i):i,s)}}class St{}class dn{}function HC(i,s){return new Se(i,null!=s?s:null)}class Se extends St{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ng(this);const c=L(s);this._bootstrapComponents=yn(c.bootstrap),this._r3Injector=W0(s,a,[{provide:St,useValue:this},{provide:Ah,useValue:this.componentFactoryResolver}],_e(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class Ke extends dn{constructor(s){super(),this.moduleType=s}create(s){return new Se(this.moduleType,s)}}class Mi extends St{constructor(s,a,c){super(),this.componentFactoryResolver=new ng(this),this.instance=null;const l=new Hm([...s,{provide:St,useValue:this},{provide:Ah,useValue:this.componentFactoryResolver}],a||Th(),c,new Set(["environment"]));this.injector=l,l.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function Hg(i,s,a=null){return new Mi(i,s,a).injector}let GC=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=Um(0,a.type),l=c.length>0?Hg([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,l)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=Un({token:i,providedIn:"environment",factory:()=>new i(Or(Uc))}),i})();function CE(i){i.getStandaloneInjector=s=>s.get(GC).getOrCreateStandaloneInjector(i)}function xf(i,s,a){const c=Ur()+i,l=We();return l[c]===En?ma(l,c,a?s.call(a):s()):function tf(i,s){return i[s]}(l,c)}function Gg(i,s,a,c){return $v(We(),Ur(),i,s,a,c)}function tc(i,s,a,c,l){return Hv(We(),Ur(),i,s,a,c,l)}function cl(i,s){const a=i[s];return a===En?void 0:a}function $v(i,s,a,c,l,f){const y=s+a;return Vn(i,y,l)?ma(i,y+1,f?c.call(f,l):c(l)):cl(i,y+1)}function Hv(i,s,a,c,l,f,y){const w=s+a;return ru(i,w,l,f)?ma(i,w+2,y?c.call(y,l,f):c(l,f)):cl(i,w+2)}function Rf(i,s){const a=Pn();let c;const l=i+22;a.firstCreatePass?(c=function ko(i,s){if(s)for(let a=s.length-1;a>=0;a--){const c=s[a];if(i===c.name)return c}}(s,a.pipeRegistry),a.data[l]=c,c.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(l,c.onDestroy)):c=a.data[l];const f=c.factory||(c.factory=Lr(c.type)),y=zn(Wu);try{const w=Ba(!1),I=f();return Ba(w),function cg(i,s,a,c){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),s[a]=c}(a,We(),l,I),I}finally{zn(y)}}function Rd(i,s,a){const c=i+22,l=We(),f=ms(l,c);return dl(l,c)?$v(l,Ur(),s,f.transform,a,f):f.transform(a)}function cu(i,s,a,c){const l=i+22,f=We(),y=ms(f,l);return dl(f,l)?Hv(f,Ur(),s,y.transform,a,c,y):y.transform(a,c)}function dl(i,s){return i[1].data[s].pure}function Gv(i){return s=>{setTimeout(i,void 0,s)}}const Gr=class YC extends h.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,c){var l,f,y;let w=s,I=a||(()=>null),T=c;if(s&&"object"==typeof s){const F=s;w=null===(l=F.next)||void 0===l?void 0:l.bind(F),I=null===(f=F.error)||void 0===f?void 0:f.bind(F),T=null===(y=F.complete)||void 0===y?void 0:y.bind(F)}this.__isAsync&&(I=Gv(I),w&&(w=Gv(w)),T&&(T=Gv(T)));const x=super.subscribe({next:w,error:I,complete:T});return s instanceof U.w0&&s.add(x),x}};function RE(){return this._results[el()]()}class lu{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=el(),c=lu.prototype;c[a]||(c[a]=RE)}get changes(){return this._changes||(this._changes=new Gr)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const c=this;c.dirty=!1;const l=vi(s);(this._changesDetected=!function jl(i,s,a){if(i.length!==s.length)return!1;for(let c=0;c<i.length;c++){let l=i[c],f=s[c];if(a&&(l=a(l),f=a(f)),f!==l)return!1}return!0}(c._results,l,a))&&(c._results=l,c.length=l.length,c.last=l[this.length-1],c.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Pd=(()=>{class i{}return i.__NG_ELEMENT_ID__=zi,i})();const Yr=Pd,qg=class extends Yr{constructor(s,a,c){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(s,a){const c=this._declarationTContainer.tViews,l=Yh(this._declarationLView,c,s,16,null,c.declTNode,null,null,null,null,a||null);l[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(l[19]=y.createEmbeddedView(c)),Xc(c,l,s),new Jh(l)}};function zi(){return or(Vr(),We())}function or(i,s){return 4&i.type?new qg(s,i,Xl(i,s)):null}let Pf=(()=>{class i{}return i.__NG_ELEMENT_ID__=Nd,i})();function Nd(){return du(Vr(),We())}const Ws=Pf,PE=class extends Ws{constructor(s,a,c){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=c}get element(){return Xl(this._hostTNode,this._hostLView)}get injector(){return new ta(this._hostTNode,this._hostLView)}get parentInjector(){const s=ja(this._hostTNode,this._hostLView);if(dh(s)){const a=ro(s,this._hostLView),c=Br(s);return new ta(a[1].data[c+8],a)}return new ta(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=di(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,c){let l,f;"number"==typeof c?l=c:null!=c&&(l=c.index,f=c.injector);const y=s.createEmbeddedView(a||{},f);return this.insert(y,l),y}createComponent(s,a,c,l,f){const y=s&&!function rr(i){return"function"==typeof i}(s);let w;if(y)w=a;else{const F=a||{};w=F.index,c=F.injector,l=F.projectableNodes,f=F.environmentInjector||F.ngModuleRef}const I=y?s:new ga(j(s)),T=c||this.parentInjector;if(!f&&null==I.ngModule){const Y=(y?T:this.parentInjector).get(Uc,null);Y&&(f=Y)}const x=I.create(T,l,void 0,f);return this.insert(x.hostView,w),x}insert(s,a){const c=s._lView,l=c[1];if(function gc(i){return xn(i[3])}(c)){const x=this.indexOf(s);if(-1!==x)this.detach(x);else{const F=c[3],Y=new PE(F,F[6],F[3]);Y.detach(Y.indexOf(s))}}const f=this._adjustIndex(a),y=this._lContainer;!function bb(i,s,a,c){const l=10+c,f=a.length;c>0&&(a[l-1][4]=s),c<f-10?(s[4]=a[l],xu(a,10+c,s)):(a.push(s),s[4]=null),s[3]=a;const y=s[17];null!==y&&a!==y&&function T0(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(y,s);const w=s[19];null!==w&&w.insertView(i),s[2]|=64}(l,c,y,f);const w=eu(f,y),I=c[11],T=Vp(I,y[7]);return null!==T&&function Fh(i,s,a,c,l,f){c[0]=l,c[6]=s,Vh(i,c,a,1,l,f)}(l,y[6],I,c,T,w),s.attachToViewContainerRef(),xu(zv(y),f,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=di(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),c=iy(this._lContainer,a);c&&(so(zv(this._lContainer),a),Lh(c[1],c))}detach(s){const a=this._adjustIndex(s,-1),c=iy(this._lContainer,a);return c&&null!=so(zv(this._lContainer),a)?new Jh(c):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function di(i){return i[8]}function zv(i){return i[8]||(i[8]=[])}function du(i,s){let a;const c=s[i.index];if(xn(c))a=c;else{let l;if(8&i.type)l=Er(c);else{const f=s[11];l=f.createComment("");const y=si(i,s);la(f,Vp(f,y),l,function Up(i,s){return i.nextSibling(s)}(f,y),!1)}s[i.index]=a=Qp(c,s,l,i),Jp(s,a)}return new PE(a,i,s)}class Zg{constructor(s){this.queryList=s,this.matches=null}clone(){return new Zg(this.queryList)}setDirty(){this.queryList.setDirty()}}class fl{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const c=null!==s.contentQueries?s.contentQueries[0]:a.length,l=[];for(let f=0;f<c;f++){const y=a.getByIndex(f);l.push(this.queries[y.indexInDeclarationView].clone())}return new fl(l)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==Zv(s,a).matches&&this.queries[a].setDirty()}}class kE{constructor(s,a,c=null){this.predicate=s,this.flags=a,this.read=c}}class _a{constructor(s=[]){this.queries=s}elementStart(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let c=0;c<this.length;c++){const l=null!==a?a.length:0,f=this.getByIndex(c).embeddedTView(s,l);f&&(f.indexInDeclarationView=c,null!==a?a.push(f):a=[f])}return null!==a?new _a(a):null}template(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class pl{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new pl(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=s.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let l=0;l<c.length;l++){const f=c[l];this.matchTNodeWithReadOption(s,a,Nf(a,f)),this.matchTNodeWithReadOption(s,a,Ha(a,s,f,!1,!1))}else c===Pd?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Ha(a,s,c,!1,!1))}matchTNodeWithReadOption(s,a,c){if(null!==c){const l=this.metadata.read;if(null!==l)if(l===Mh||l===Pf||l===Pd&&4&a.type)this.addMatch(a.index,-2);else{const f=Ha(a,s,l,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,c)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function Nf(i,s){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===s)return a[c+1];return null}function nc(i,s,a,c){return-1===a?function FE(i,s){return 11&i.type?Xl(i,s):4&i.type?or(i,s):null}(s,i):-2===a?function Kg(i,s,a){return a===Mh?Xl(s,i):a===Pd?or(s,i):a===Pf?du(s,i):void 0}(i,s,c):vs(i,i[1],a,s)}function rc(i,s,a,c){const l=s[19].queries[c];if(null===l.matches){const f=i.data,y=a.matches,w=[];for(let I=0;I<y.length;I+=2){const T=y[I];w.push(T<0?null:nc(s,f[T],y[I+1],a.metadata.read))}l.matches=w}return l.matches}function po(i,s,a,c){const l=i.queries.getByIndex(a),f=l.matches;if(null!==f){const y=rc(i,s,l,a);for(let w=0;w<f.length;w+=2){const I=f[w];if(I>0)c.push(y[w/2]);else{const T=f[w+1],x=s[-I];for(let F=10;F<x.length;F++){const Y=x[F];Y[17]===Y[3]&&po(Y[1],Y,T,c)}if(null!==x[9]){const F=x[9];for(let Y=0;Y<F.length;Y++){const ce=F[Y];po(ce[1],ce,T,c)}}}}}return c}function kd(i){const s=We(),a=Pn(),c=ka();vc(c+1);const l=Zv(a,c);if(i.dirty&&function pc(i){return 4==(4&i[2])}(s)===(2==(2&l.metadata.flags))){if(null===l.matches)i.reset([]);else{const f=l.crossesNgTemplate?po(a,s,c,[]):rc(a,s,l,c);i.reset(f,Wm),i.notifyOnChanges()}return!0}return!1}function hu(i,s,a){const c=Pn();c.firstCreatePass&&(Yg(c,new kE(i,s,a),-1),2==(2&s)&&(c.staticViewQueries=!0)),ic(c,We(),s)}function Wv(i,s,a,c){const l=Pn();if(l.firstCreatePass){const f=Vr();Yg(l,new kE(s,a,c),f.index),function kf(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(l,i),2==(2&a)&&(l.staticContentQueries=!0)}ic(l,We(),a)}function gl(){return function qv(i,s){return i[19].queries[s].queryList}(We(),ka())}function ic(i,s,a){const c=new lu(4==(4&a));aw(i,s,c,c.destroy),null===s[19]&&(s[19]=new fl),s[19].queries.push(new Zg(c))}function Yg(i,s,a){null===i.queries&&(i.queries=new _a),i.queries.track(new pl(s,a))}function Zv(i,s){return i.queries.getByIndex(s)}function Kv(i,s){return or(i,s)}function Ia(...i){}const yl=new lr("Application Initializer");let jf=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Ia,this.reject=Ia,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,l)=>{this.resolve=c,this.reject=l})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const f=this.appInits[l]();if(vd(f))a.push(f);else if(hg(f)){const y=new Promise((w,I)=>{f.subscribe({complete:w,error:I})});a.push(y)}}Promise.all(a).then(()=>{c()}).catch(l=>{this.reject(l)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Or(yl,8))},i.\u0275prov=Un({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const a_=new lr("AppId",{providedIn:"root",factory:function jd(){return`${u_()}${u_()}${u_()}`}});function u_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Nr=new lr("Platform Initializer"),nm=new lr("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),$f=new lr("appBootstrapListener");let Hf=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Un({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Gf=new lr("LocaleId",{providedIn:"root",factory:()=>Rc(Gf,vt.Optional|vt.SkipSelf)||function lD(){return"undefined"!=typeof $localize&&$localize.locale||dr}()}),$d=new lr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class WE{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let Hd=(()=>{class i{compileModuleSync(a){return new Ke(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),f=yn(L(a).declarations).reduce((y,w)=>{const I=j(w);return I&&y.push(new ga(I)),y},[]);return new WE(c,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Un({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const pD=(()=>Promise.resolve(0))();function ns(i){"undefined"==typeof Zone?pD.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class rs{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Gr(!1),this.onMicrotaskEmpty=new Gr(!1),this.onStable=new Gr(!1),this.onError=new Gr(!1),"undefined"==typeof Zone)throw new Re(908,!1);Zone.assertZonePatched();const l=this;if(l._nesting=0,l._outer=l._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const f=Zone.AsyncStackTaggingZoneSpec;l._inner=l._inner.fork(new f("Angular"))}Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!c&&a,l.shouldCoalesceRunChangeDetection=c,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function qE(){let i=rn.requestAnimationFrame,s=rn.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function zf(i){const s=()=>{!function KE(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(rn,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,d_(i),i.isCheckStableRunning=!0,go(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),d_(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,l,f,y,w)=>{try{return YE(i),a.invokeTask(l,f,y,w)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),Mn(i)}},onInvoke:(a,c,l,f,y,w,I)=>{try{return YE(i),a.invoke(l,f,y,w,I)}finally{i.shouldCoalesceRunChangeDetection&&s(),Mn(i)}},onHasTask:(a,c,l,f)=>{a.hasTask(l,f),c===l&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,d_(i),go(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,c,l,f)=>(a.handleError(l,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(l)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!rs.isInAngularZone())throw new Re(909,!1)}static assertNotInAngularZone(){if(rs.isInAngularZone())throw new Re(909,!1)}run(s,a,c){return this._inner.run(s,a,c)}runTask(s,a,c,l){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+l,s,ZE,Ia,Ia);try{return f.runTask(y,a,c)}finally{f.cancelTask(y)}}runGuarded(s,a,c){return this._inner.runGuarded(s,a,c)}runOutsideAngular(s){return this._outer.run(s)}}const ZE={};function go(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function d_(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function YE(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Mn(i){i._nesting--,go(i)}class gD{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Gr,this.onMicrotaskEmpty=new Gr,this.onStable=new Gr,this.onError=new Gr}run(s,a,c){return s.apply(a,c)}runGuarded(s,a,c){return s.apply(a,c)}runOutsideAngular(s){return s()}runTask(s,a,c,l){return s.apply(a,c)}}const Wf=new lr(""),Gd=new lr("");let zd,qf=(()=>{class i{constructor(a,c,l){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,zd||(function QE(i){zd=i}(l),l.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{rs.assertNotInAngularZone(),ns(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ns(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,l){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:l})}whenStable(a,c,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,l){return[]}}return i.\u0275fac=function(a){return new(a||i)(Or(rs),Or(Zf),Or(Gd))},i.\u0275prov=Un({token:i,factory:i.\u0275fac}),i})(),Zf=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){var l;return null!==(l=null==zd?void 0:zd.findTestabilityInTree(this,a,c))&&void 0!==l?l:null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Un({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),Fo=null;const JE=new lr("AllowMultipleToken"),rm=new lr("PlatformDestroyListeners");class Kf{constructor(s,a){this.name=s,this.token=a}}function h_(i,s,a=[]){const c=`Platform: ${s}`,l=new lr(c);return(f=[])=>{let y=im();if(!y||y.injector.get(JE,!1)){const w=[...a,...f,{provide:l,useValue:!0}];i?i(w):function XE(i){if(Fo&&!Fo.get(JE,!1))throw new Re(400,!1);Fo=i;const s=i.get(Wd);(function Ii(i){const s=i.get(Nr,null);s&&s.forEach(a=>a())})(i)}(function Lo(i=[],s){return zu.create({name:s,providers:[{provide:$m,useValue:"platform"},{provide:rm,useValue:new Set([()=>Fo=null])},...i]})}(w,c))}return function Yf(i){const s=im();if(!s)throw new Re(401,!1);return s}()}}function im(){var i;return null!==(i=null==Fo?void 0:Fo.get(Wd))&&void 0!==i?i:null}let Wd=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const l=function p_(i,s){let a;return a="noop"===i?new gD:("zone.js"===i?void 0:i)||new rs(s),a}(null==c?void 0:c.ngZone,function f_(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(c)),f=[{provide:rs,useValue:l}];return l.run(()=>{const y=zu.create({providers:f,parent:this.injector,name:a.moduleType.name}),w=a.create(y),I=w.injector.get(Qa,null);if(!I)throw new Re(402,!1);return l.runOutsideAngular(()=>{const T=l.onError.subscribe({next:x=>{I.handleError(x)}});w.onDestroy(()=>{ac(this._modules,w),T.unsubscribe()})}),function g_(i,s,a){try{const c=a();return vd(c)?c.catch(l=>{throw s.runOutsideAngular(()=>i.handleError(l)),l}):c}catch(c){throw s.runOutsideAngular(()=>i.handleError(c)),c}}(I,l,()=>{const T=w.injector.get(jf);return T.runInitializers(),T.donePromise.then(()=>(function Xw(i){en(i,"Expected localeId to be defined"),"string"==typeof i&&(Jw=i.toLowerCase().replace(/_/g,"-"))}(w.injector.get(Gf,dr)||dr),this._moduleDoBootstrap(w),w))})})}bootstrapModule(a,c=[]){const l=nI({},c);return function mD(i,s,a){const c=new Ke(a);return Promise.resolve(c)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,l))}_moduleDoBootstrap(a){const c=a.injector.get(sm);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(l=>c.bootstrap(l));else{if(!a.instance.ngDoBootstrap)throw new Re(403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Re(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(rm,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Or(zu))},i.\u0275prov=Un({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function nI(i,s){return Array.isArray(s)?s.reduce(nI,i):Object.assign(Object.assign({},i),s)}let sm=(()=>{class i{constructor(a,c,l){this._zone=a,this._injector=c,this._exceptionHandler=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new P.y(w=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{w.next(this._stable),w.complete()})}),y=new P.y(w=>{let I;this._zone.runOutsideAngular(()=>{I=this._zone.onStable.subscribe(()=>{rs.assertNotInAngularZone(),ns(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,w.next(!0))})})});const T=this._zone.onUnstable.subscribe(()=>{rs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{w.next(!1)}))});return()=>{I.unsubscribe(),T.unsubscribe()}});this.isStable=(0,se.T)(f,y.pipe((0,fe.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const l=a instanceof zm;if(!this._injector.get(jf).done)throw!l&&R(a),new Re(405,false);let y;y=l?a:this._injector.get(Ah).resolveComponentFactory(a),this.componentTypes.push(y.componentType);const w=function yD(i){return i.isBoundToModule}(y)?void 0:this._injector.get(St),T=y.create(zu.NULL,[],c||y.selector,w),x=T.location.nativeElement,F=T.injector.get(Wf,null);return null==F||F.registerApplication(x),T.onDestroy(()=>{this.detachView(T.hostView),ac(this.components,T),null==F||F.unregisterApplication(x)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new Re(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;ac(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get($f,[]).concat(this._bootstrapListeners).forEach(l=>l(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>ac(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new Re(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(Or(rs),Or(Uc),Or(Qa))},i.\u0275prov=Un({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function ac(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let y_=!1;function rI(){return y_=!0,true}let qd=(()=>{class i{}return i.__NG_ELEMENT_ID__=Zd,i})();function Zd(i){return function ED(i,s,a){if(he(i)&&!a){const c=Zn(i.index,s);return new Jh(c,c)}return 47&i.type?new Jh(s[16],s):null}(Vr(),We(),16==(16&i))}class uI{constructor(){}supports(s){return ef(s)}create(s){return new DD(s)}}const CD=(i,s)=>s;class DD{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||CD}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,c=this._removalsHead,l=0,f=null;for(;a||c;){const y=!c||a&&a.currentIndex<C_(c,l,f)?a:c,w=C_(y,l,f),I=y.currentIndex;if(y===c)l--,c=c._nextRemoved;else if(a=a._next,null==y.previousIndex)l++;else{f||(f=[]);const T=w-l,x=I-l;if(T!=x){for(let Y=0;Y<T;Y++){const ce=Y<f.length?f[Y]:f[Y]=0,Fe=ce+Y;x<=Fe&&Fe<T&&(f[Y]=ce+1)}f[y.previousIndex]=x-T}}w!==I&&s(y,w,I)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!ef(s))throw new Re(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let l,f,y,a=this._itHead,c=!1;if(Array.isArray(s)){this.length=s.length;for(let w=0;w<this.length;w++)f=s[w],y=this._trackByFn(w,f),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,f,y,w)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,y,w),c=!0),a=a._next}else l=0,function Iw(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[el()]();let c;for(;!(c=a.next()).done;)s(c.value)}}(s,w=>{y=this._trackByFn(l,w),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,w,y,l)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,y,l),c=!0),a=a._next,l++}),this.length=l;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,c,l){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,l)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(c,l))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,l)):s=this._addAfter(new cI(a,c),f,l),s}_verifyReinsertion(s,a,c,l){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?s=this._reinsertAfter(f,s._prev,l):s.currentIndex!=l&&(s.currentIndex=l,this._addToMoves(s,l)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const l=s._prevRemoved,f=s._nextRemoved;return null===l?this._removalsHead=f:l._nextRemoved=f,null===f?this._removalsTail=l:f._prevRemoved=l,this._insertAfter(s,a,c),this._addToMoves(s,c),s}_moveAfter(s,a,c){return this._unlink(s),this._insertAfter(s,a,c),this._addToMoves(s,c),s}_addAfter(s,a,c){return this._insertAfter(s,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,c){const l=null===a?this._itHead:a._next;return s._next=l,s._prev=a,null===l?this._itTail=s:l._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new b_),this._linkedRecords.put(s),s.currentIndex=c,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,c=s._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new b_),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class cI{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class TD{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,s))return c;return null}remove(s){const a=s._prevDup,c=s._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class b_{constructor(){this.map=new Map}put(s){const a=s.trackById;let c=this.map.get(a);c||(c=new TD,this.map.set(a,c)),c.add(s)}get(s,a){const l=this.map.get(s);return l?l.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function C_(i,s,a){const c=i.previousIndex;if(null===c)return c;let l=0;return a&&c<a.length&&(l=a[c]),c+s+l}class lI{constructor(){}supports(s){return s instanceof Map||Yy(s)}create(){return new D_}}class D_{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Yy(s)))throw new Re(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(c,l)=>{if(a&&a.key===l)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(l,c);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const c=s._prev;return a._next=s,a._prev=c,s._prev=a,c&&(c._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const l=this._records.get(s);this._maybeAddToChanges(l,a);const f=l._prev,y=l._next;return f&&(f._next=y),y&&(y._prev=f),l._next=null,l._prev=null,l}const c=new Pi(s);return this._records.set(s,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(c=>a(s[c],c))}}class Pi{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function cm(){return new Qf([new uI])}let Qf=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const l=c.factories.slice();a=a.concat(l)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||cm()),deps:[[i,new Ot,new He]]}}find(a){const c=this.factories.find(l=>l.supports(a));if(null!=c)return c;throw new Re(901,!1)}}return i.\u0275prov=Un({token:i,providedIn:"root",factory:cm}),i})();function pu(){return new lm([new lI])}let lm=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const l=c.factories.slice();a=a.concat(l)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||pu()),deps:[[i,new Ot,new He]]}}find(a){const c=this.factories.find(l=>l.supports(a));if(c)return c;throw new Re(901,!1)}}return i.\u0275prov=Un({token:i,providedIn:"root",factory:pu}),i})();const _l=h_(null,"core",[]);let wl=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Or(sm))},i.\u0275mod=Pt({type:i}),i.\u0275inj=tn({}),i})();function Jf(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(bt,Pe,N)=>{N.d(Pe,{Z:()=>Re});var h=N(2090),U=N(4859),P=N(9681),se=N(1877);class fe{constructor(Me,ae){this._delegate=Me,this.firebase=ae,(0,P._addComponent)(Me,new U.wA("app-compat",()=>this,"PUBLIC")),this.container=Me.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Me){this._delegate.automaticDataCollectionEnabled=Me}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Me=>{this._delegate.checkDestroyed(),Me()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(Me,ae=P._DEFAULT_ENTRY_NAME){var gt;this._delegate.checkDestroyed();const pt=this._delegate.container.getProvider(Me);return!pt.isInitialized()&&"EXPLICIT"===(null===(gt=pt.getComponent())||void 0===gt?void 0:gt.instantiationMode)&&pt.initialize(),pt.getImmediate({identifier:ae})}_removeServiceInstance(Me,ae=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Me).clearInstance(ae)}_addComponent(Me){(0,P._addComponent)(this._delegate,Me)}_addOrOverwriteComponent(Me){(0,P._addOrOverwriteComponent)(this._delegate,Me)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ee=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),W=function Te(){const Et=function _e(Et){const Me={},ae={__esModule:!0,initializeApp:function Ve(ue,me={}){const Ae=P.initializeApp(ue,me);if((0,h.r3)(Me,Ae.name))return Me[Ae.name];const X=new Et(Ae,ae);return Me[Ae.name]=X,X},app:pt,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function ke(ue){const me=ue.name,Ae=me.replace("-compat","");if(P._registerComponent(ue)&&"PUBLIC"===ue.type){const X=(re=pt())=>{if("function"!=typeof re[Ae])throw Ee.create("invalid-app-argument",{appName:me});return re[Ae]()};void 0!==ue.serviceProps&&(0,h.ZB)(X,ue.serviceProps),ae[Ae]=X,Et.prototype[Ae]=function(...re){return this._getService.bind(this,me).apply(this,ue.multipleInstances?re:[])}}return"PUBLIC"===ue.type?ae[Ae]:null},removeApp:function gt(ue){delete Me[ue]},useAsService:function ut(ue,me){return"serverAuth"===me?null:me},modularAPIs:P}};function pt(ue){if(!(0,h.r3)(Me,ue=ue||P._DEFAULT_ENTRY_NAME))throw Ee.create("no-app",{appName:ue});return Me[ue]}return ae.default=ae,Object.defineProperty(ae,"apps",{get:function Ge(){return Object.keys(Me).map(ue=>Me[ue])}}),pt.App=Et,ae}(fe);return Et.INTERNAL=Object.assign(Object.assign({},Et.INTERNAL),{createFirebaseNamespace:Te,extendNamespace:function Me(ae){(0,h.ZB)(Et,ae)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),Et}(),q=new se.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Et=self.firebase.SDK_VERSION;Et&&Et.indexOf("LITE")>=0&&q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Re=W;!function je(Et){(0,P.registerVersion)("@firebase/app-compat","0.1.34",Et)}()},9681:(bt,Pe,N)=>{N.r(Pe),N.d(Pe,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>ki,_DEFAULT_ENTRY_NAME:()=>en,_addComponent:()=>Fn,_addOrOverwriteComponent:()=>Un,_apps:()=>On,_clearComponents:()=>Qs,_components:()=>hr,_getProvider:()=>tn,_registerComponent:()=>Cn,_removeServiceInstance:()=>Dr,deleteApp:()=>Zi,getApp:()=>mr,getApps:()=>Fi,initializeApp:()=>ri,onLog:()=>fr,registerVersion:()=>kr,setLogLevel:()=>zn});var h=N(5861),U=N(4859),P=N(1877),se=N(2090),fe=N(8766);class Ce{constructor(Z){this.container=Z}getPlatformInfoString(){return this.container.getProviders().map(K=>{if(function Ee(B){const Z=B.getComponent();return"VERSION"===(null==Z?void 0:Z.type)}(K)){const Be=K.getImmediate();return`${Be.library}/${Be.version}`}return null}).filter(K=>K).join(" ")}}const _e="@firebase/app",W=new P.Yd("@firebase/app"),en="[DEFAULT]",ct={[_e]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},On=new Map,hr=new Map;function Fn(B,Z){try{B.container.addComponent(Z)}catch(K){W.debug(`Component ${Z.name} failed to register with FirebaseApp ${B.name}`,K)}}function Un(B,Z){B.container.addOrOverwriteComponent(Z)}function Cn(B){const Z=B.name;if(hr.has(Z))return W.debug(`There were multiple attempts to register component ${Z}.`),!1;hr.set(Z,B);for(const K of On.values())Fn(K,B);return!0}function tn(B,Z){const K=B.container.getProvider("heartbeat").getImmediate({optional:!0});return K&&K.triggerHeartbeat(),B.container.getProvider(Z)}function Dr(B,Z,K=en){tn(B,Z).clearInstance(K)}function Qs(){hr.clear()}const ar=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class qi{constructor(Z,K,Be){this._isDeleted=!1,this._options=Object.assign({},Z),this._config=Object.assign({},K),this._name=K.name,this._automaticDataCollectionEnabled=K.automaticDataCollectionEnabled,this._container=Be,this.container.addComponent(new U.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Z){this.checkDestroyed(),this._automaticDataCollectionEnabled=Z}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Z){this._isDeleted=Z}checkDestroyed(){if(this.isDeleted)throw ar.create("app-deleted",{appName:this._name})}}const ki="9.10.0";function ri(B,Z={}){"object"!=typeof Z&&(Z={name:Z});const K=Object.assign({name:en,automaticDataCollectionEnabled:!1},Z),Be=K.name;if("string"!=typeof Be||!Be)throw ar.create("bad-app-name",{appName:String(Be)});const st=On.get(Be);if(st){if((0,se.vZ)(B,st.options)&&(0,se.vZ)(K,st.config))return st;throw ar.create("duplicate-app",{appName:Be})}const Pt=new U.H0(Be);for(const $n of hr.values())Pt.addComponent($n);const Wn=new qi(B,K,Pt);return On.set(Be,Wn),Wn}function mr(B=en){const Z=On.get(B);if(!Z)throw ar.create("no-app",{appName:B});return Z}function Fi(){return Array.from(On.values())}function Zi(B){return vt.apply(this,arguments)}function vt(){return(vt=(0,h.Z)(function*(B){const Z=B.name;On.has(Z)&&(On.delete(Z),yield Promise.all(B.container.getProviders().map(K=>K.delete())),B.isDeleted=!0)})).apply(this,arguments)}function kr(B,Z,K){var Be;let st=null!==(Be=ct[B])&&void 0!==Be?Be:B;K&&(st+=`-${K}`);const Pt=st.match(/\s|\//),Wn=Z.match(/\s|\//);if(Pt||Wn){const $n=[`Unable to register library "${st}" with version "${Z}":`];return Pt&&$n.push(`library name "${st}" contains illegal characters (whitespace or "/")`),Pt&&Wn&&$n.push("and"),Wn&&$n.push(`version name "${Z}" contains illegal characters (whitespace or "/")`),void W.warn($n.join(" "))}Cn(new U.wA(`${st}-version`,()=>({library:st,version:Z}),"VERSION"))}function fr(B,Z){if(null!==B&&"function"!=typeof B)throw ar.create("invalid-log-argument");(0,P.Am)(B,Z)}function zn(B){(0,P.Ub)(B)}const Qn="firebase-heartbeat-store";let ir=null;function er(){return ir||(ir=(0,fe.X3)("firebase-heartbeat-database",1,{upgrade:(B,Z)=>{0===Z&&B.createObjectStore(Qn)}}).catch(B=>{throw ar.create("idb-open",{originalErrorMessage:B.message})})),ir}function Rt(){return(Rt=(0,h.Z)(function*(B){var Z;try{return(yield er()).transaction(Qn).objectStore(Qn).get(Tr(B))}catch(K){if(K instanceof se.ZR)W.warn(K.message);else{const Be=ar.create("idb-get",{originalErrorMessage:null===(Z=K)||void 0===Z?void 0:Z.message});W.warn(Be.message)}}})).apply(this,arguments)}function rn(B,Z){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,h.Z)(function*(B,Z){var K;try{const st=(yield er()).transaction(Qn,"readwrite");return yield st.objectStore(Qn).put(Z,Tr(B)),st.done}catch(Be){if(Be instanceof se.ZR)W.warn(Be.message);else{const st=ar.create("idb-set",{originalErrorMessage:null===(K=Be)||void 0===K?void 0:K.message});W.warn(st.message)}}})).apply(this,arguments)}function Tr(B){return`${B.name}!${B.options.appId}`}class ei{constructor(Z){this.container=Z,this._heartbeatsCache=null;const K=this.container.getProvider("app").getImmediate();this._storage=new Sn(K),this._heartbeatsCachePromise=this._storage.read().then(Be=>(this._heartbeatsCache=Be,Be))}triggerHeartbeat(){var Z=this;return(0,h.Z)(function*(){const Be=Z.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),st=cn();if(null===Z._heartbeatsCache&&(Z._heartbeatsCache=yield Z._heartbeatsCachePromise),Z._heartbeatsCache.lastSentHeartbeatDate!==st&&!Z._heartbeatsCache.heartbeats.some(Pt=>Pt.date===st))return Z._heartbeatsCache.heartbeats.push({date:st,agent:Be}),Z._heartbeatsCache.heartbeats=Z._heartbeatsCache.heartbeats.filter(Pt=>{const Wn=new Date(Pt.date).valueOf();return Date.now()-Wn<=2592e6}),Z._storage.overwrite(Z._heartbeatsCache)})()}getHeartbeatsHeader(){var Z=this;return(0,h.Z)(function*(){if(null===Z._heartbeatsCache&&(yield Z._heartbeatsCachePromise),null===Z._heartbeatsCache||0===Z._heartbeatsCache.heartbeats.length)return"";const K=cn(),{heartbeatsToSend:Be,unsentEntries:st}=function pi(B,Z=1024){const K=[];let Be=B.slice();for(const st of B){const Pt=K.find(Wn=>Wn.agent===st.agent);if(Pt){if(Pt.dates.push(st.date),Q(K)>Z){Pt.dates.pop();break}}else if(K.push({agent:st.agent,dates:[st.date]}),Q(K)>Z){K.pop();break}Be=Be.slice(1)}return{heartbeatsToSend:K,unsentEntries:Be}}(Z._heartbeatsCache.heartbeats),Pt=(0,se.L)(JSON.stringify({version:2,heartbeats:Be}));return Z._heartbeatsCache.lastSentHeartbeatDate=K,st.length>0?(Z._heartbeatsCache.heartbeats=st,yield Z._storage.overwrite(Z._heartbeatsCache)):(Z._heartbeatsCache.heartbeats=[],Z._storage.overwrite(Z._heartbeatsCache)),Pt})()}}function cn(){return(new Date).toISOString().substring(0,10)}class Sn{constructor(Z){this.app=Z,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Z=this;return(0,h.Z)(function*(){return(yield Z._canUseIndexedDBPromise)&&(yield function At(B){return Rt.apply(this,arguments)}(Z.app))||{heartbeats:[]}})()}overwrite(Z){var K=this;return(0,h.Z)(function*(){var Be;if(yield K._canUseIndexedDBPromise){const Pt=yield K.read();return rn(K.app,{lastSentHeartbeatDate:null!==(Be=Z.lastSentHeartbeatDate)&&void 0!==Be?Be:Pt.lastSentHeartbeatDate,heartbeats:Z.heartbeats})}})()}add(Z){var K=this;return(0,h.Z)(function*(){var Be;if(yield K._canUseIndexedDBPromise){const Pt=yield K.read();return rn(K.app,{lastSentHeartbeatDate:null!==(Be=Z.lastSentHeartbeatDate)&&void 0!==Be?Be:Pt.lastSentHeartbeatDate,heartbeats:[...Pt.heartbeats,...Z.heartbeats]})}})()}}function Q(B){return(0,se.L)(JSON.stringify({version:2,heartbeats:B})).length}!function $(B){Cn(new U.wA("platform-logger",Z=>new Ce(Z),"PRIVATE")),Cn(new U.wA("heartbeat",Z=>new ei(Z),"PRIVATE")),kr(_e,"0.7.33",B),kr(_e,"0.7.33","esm2017"),kr("fire-js","")}("")},4859:(bt,Pe,N)=>{N.d(Pe,{H0:()=>_e,wA:()=>P});var h=N(5861),U=N(2090);class P{constructor(W,q,te){this.name=W,this.instanceFactory=q,this.type=te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(W){return this.instantiationMode=W,this}setMultipleInstances(W){return this.multipleInstances=W,this}setServiceProps(W){return this.serviceProps=W,this}setInstanceCreatedCallback(W){return this.onInstanceCreated=W,this}}const se="[DEFAULT]";class fe{constructor(W,q){this.name=W,this.container=q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(W){const q=this.normalizeInstanceIdentifier(W);if(!this.instancesDeferred.has(q)){const te=new U.BH;if(this.instancesDeferred.set(q,te),this.isInitialized(q)||this.shouldAutoInitialize())try{const Xe=this.getOrInitializeService({instanceIdentifier:q});Xe&&te.resolve(Xe)}catch(Xe){}}return this.instancesDeferred.get(q).promise}getImmediate(W){var q;const te=this.normalizeInstanceIdentifier(null==W?void 0:W.identifier),Xe=null!==(q=null==W?void 0:W.optional)&&void 0!==q&&q;if(!this.isInitialized(te)&&!this.shouldAutoInitialize()){if(Xe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:te})}catch(je){if(Xe)return null;throw je}}getComponent(){return this.component}setComponent(W){if(W.name!==this.name)throw Error(`Mismatching Component ${W.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=W,this.shouldAutoInitialize()){if(function Ee(Te){return"EAGER"===Te.instantiationMode}(W))try{this.getOrInitializeService({instanceIdentifier:se})}catch(q){}for(const[q,te]of this.instancesDeferred.entries()){const Xe=this.normalizeInstanceIdentifier(q);try{const je=this.getOrInitializeService({instanceIdentifier:Xe});te.resolve(je)}catch(je){}}}}clearInstance(W=se){this.instancesDeferred.delete(W),this.instancesOptions.delete(W),this.instances.delete(W)}delete(){var W=this;return(0,h.Z)(function*(){const q=Array.from(W.instances.values());yield Promise.all([...q.filter(te=>"INTERNAL"in te).map(te=>te.INTERNAL.delete()),...q.filter(te=>"_delete"in te).map(te=>te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(W=se){return this.instances.has(W)}getOptions(W=se){return this.instancesOptions.get(W)||{}}initialize(W={}){const{options:q={}}=W,te=this.normalizeInstanceIdentifier(W.instanceIdentifier);if(this.isInitialized(te))throw Error(`${this.name}(${te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Xe=this.getOrInitializeService({instanceIdentifier:te,options:q});for(const[je,Re]of this.instancesDeferred.entries())te===this.normalizeInstanceIdentifier(je)&&Re.resolve(Xe);return Xe}onInit(W,q){var te;const Xe=this.normalizeInstanceIdentifier(q),je=null!==(te=this.onInitCallbacks.get(Xe))&&void 0!==te?te:new Set;je.add(W),this.onInitCallbacks.set(Xe,je);const Re=this.instances.get(Xe);return Re&&W(Re,Xe),()=>{je.delete(W)}}invokeOnInitCallbacks(W,q){const te=this.onInitCallbacks.get(q);if(te)for(const Xe of te)try{Xe(W,q)}catch(je){}}getOrInitializeService({instanceIdentifier:W,options:q={}}){let te=this.instances.get(W);if(!te&&this.component&&(te=this.component.instanceFactory(this.container,{instanceIdentifier:(Te=W,Te===se?void 0:Te),options:q}),this.instances.set(W,te),this.instancesOptions.set(W,q),this.invokeOnInitCallbacks(te,W),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,W,te)}catch(Xe){}var Te;return te||null}normalizeInstanceIdentifier(W=se){return this.component?this.component.multipleInstances?W:se:W}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class _e{constructor(W){this.name=W,this.providers=new Map}addComponent(W){const q=this.getProvider(W.name);if(q.isComponentSet())throw new Error(`Component ${W.name} has already been registered with ${this.name}`);q.setComponent(W)}addOrOverwriteComponent(W){this.getProvider(W.name).isComponentSet()&&this.providers.delete(W.name),this.addComponent(W)}getProvider(W){if(this.providers.has(W))return this.providers.get(W);const q=new fe(W,this);return this.providers.set(W,q),q}getProviders(){return Array.from(this.providers.values())}}},1877:(bt,Pe,N)=>{N.d(Pe,{Am:()=>Te,Ub:()=>_e,Yd:()=>Ee,in:()=>U});const h=[];var U=(()=>{return(W=U||(U={}))[W.DEBUG=0]="DEBUG",W[W.VERBOSE=1]="VERBOSE",W[W.INFO=2]="INFO",W[W.WARN=3]="WARN",W[W.ERROR=4]="ERROR",W[W.SILENT=5]="SILENT",U;var W})();const P={debug:U.DEBUG,verbose:U.VERBOSE,info:U.INFO,warn:U.WARN,error:U.ERROR,silent:U.SILENT},se=U.INFO,fe={[U.DEBUG]:"log",[U.VERBOSE]:"log",[U.INFO]:"info",[U.WARN]:"warn",[U.ERROR]:"error"},Ce=(W,q,...te)=>{if(q<W.logLevel)return;const Xe=(new Date).toISOString(),je=fe[q];if(!je)throw new Error(`Attempted to log a message with an invalid logType (value: ${q})`);console[je](`[${Xe}]  ${W.name}:`,...te)};class Ee{constructor(q){this.name=q,this._logLevel=se,this._logHandler=Ce,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(q){if(!(q in U))throw new TypeError(`Invalid value "${q}" assigned to \`logLevel\``);this._logLevel=q}setLogLevel(q){this._logLevel="string"==typeof q?P[q]:q}get logHandler(){return this._logHandler}set logHandler(q){if("function"!=typeof q)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=q}get userLogHandler(){return this._userLogHandler}set userLogHandler(q){this._userLogHandler=q}debug(...q){this._userLogHandler&&this._userLogHandler(this,U.DEBUG,...q),this._logHandler(this,U.DEBUG,...q)}log(...q){this._userLogHandler&&this._userLogHandler(this,U.VERBOSE,...q),this._logHandler(this,U.VERBOSE,...q)}info(...q){this._userLogHandler&&this._userLogHandler(this,U.INFO,...q),this._logHandler(this,U.INFO,...q)}warn(...q){this._userLogHandler&&this._userLogHandler(this,U.WARN,...q),this._logHandler(this,U.WARN,...q)}error(...q){this._userLogHandler&&this._userLogHandler(this,U.ERROR,...q),this._logHandler(this,U.ERROR,...q)}}function _e(W){h.forEach(q=>{q.setLogLevel(W)})}function Te(W,q){for(const te of h){let Xe=null;q&&q.level&&(Xe=P[q.level]),te.userLogHandler=null===W?null:(je,Re,...Et)=>{const Me=Et.map(ae=>{if(null==ae)return null;if("string"==typeof ae)return ae;if("number"==typeof ae||"boolean"==typeof ae)return ae.toString();if(ae instanceof Error)return ae.message;try{return JSON.stringify(ae)}catch(gt){return null}}).filter(ae=>ae).join(" ");Re>=(null!=Xe?Xe:je.logLevel)&&W({level:U[Re].toLowerCase(),message:Me,args:Et,type:je.name})}}}},8766:(bt,Pe,N)=>{N.d(Pe,{Lj:()=>Ve,X3:()=>pt});var h=N(5861);let P,se;const Ee=new WeakMap,_e=new WeakMap,Te=new WeakMap,W=new WeakMap,q=new WeakMap;let je={get(me,Ae,X){if(me instanceof IDBTransaction){if("done"===Ae)return _e.get(me);if("objectStoreNames"===Ae)return me.objectStoreNames||Te.get(me);if("store"===Ae)return X.objectStoreNames[1]?void 0:X.objectStore(X.objectStoreNames[0])}return ae(me[Ae])},set:(me,Ae,X)=>(me[Ae]=X,!0),has:(me,Ae)=>me instanceof IDBTransaction&&("done"===Ae||"store"===Ae)||Ae in me};function Me(me){return"function"==typeof me?function Et(me){return me!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ce(){return se||(se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(me)?function(...Ae){return me.apply(gt(this),Ae),ae(Ee.get(this))}:function(...Ae){return ae(me.apply(gt(this),Ae))}:function(Ae,...X){const re=me.call(gt(this),Ae,...X);return Te.set(re,Ae.sort?Ae.sort():[Ae]),ae(re)}}(me):(me instanceof IDBTransaction&&function Xe(me){if(_e.has(me))return;const Ae=new Promise((X,re)=>{const Ie=()=>{me.removeEventListener("complete",de),me.removeEventListener("error",Qe),me.removeEventListener("abort",Qe)},de=()=>{X(),Ie()},Qe=()=>{re(me.error||new DOMException("AbortError","AbortError")),Ie()};me.addEventListener("complete",de),me.addEventListener("error",Qe),me.addEventListener("abort",Qe)});_e.set(me,Ae)}(me),((me,Ae)=>Ae.some(X=>me instanceof X))(me,function fe(){return P||(P=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(me,je):me)}function ae(me){if(me instanceof IDBRequest)return function te(me){const Ae=new Promise((X,re)=>{const Ie=()=>{me.removeEventListener("success",de),me.removeEventListener("error",Qe)},de=()=>{X(ae(me.result)),Ie()},Qe=()=>{re(me.error),Ie()};me.addEventListener("success",de),me.addEventListener("error",Qe)});return Ae.then(X=>{X instanceof IDBCursor&&Ee.set(X,me)}).catch(()=>{}),q.set(Ae,me),Ae}(me);if(W.has(me))return W.get(me);const Ae=Me(me);return Ae!==me&&(W.set(me,Ae),q.set(Ae,me)),Ae}const gt=me=>q.get(me);function pt(me,Ae,{blocked:X,upgrade:re,blocking:Ie,terminated:de}={}){const Qe=indexedDB.open(me,Ae),et=ae(Qe);return re&&Qe.addEventListener("upgradeneeded",Tt=>{re(ae(Qe.result),Tt.oldVersion,Tt.newVersion,ae(Qe.transaction))}),X&&Qe.addEventListener("blocked",()=>X()),et.then(Tt=>{de&&Tt.addEventListener("close",()=>de()),Ie&&Tt.addEventListener("versionchange",()=>Ie())}).catch(()=>{}),et}function Ve(me,{blocked:Ae}={}){const X=indexedDB.deleteDatabase(me);return Ae&&X.addEventListener("blocked",()=>Ae()),ae(X).then(()=>{})}const Ge=["get","getKey","getAll","getAllKeys","count"],ke=["put","add","delete","clear"],ut=new Map;function ue(me,Ae){if(!(me instanceof IDBDatabase)||Ae in me||"string"!=typeof Ae)return;if(ut.get(Ae))return ut.get(Ae);const X=Ae.replace(/FromIndex$/,""),re=Ae!==X,Ie=ke.includes(X);if(!(X in(re?IDBIndex:IDBObjectStore).prototype)||!Ie&&!Ge.includes(X))return;const de=function(){var Qe=(0,h.Z)(function*(et,...Tt){const Tn=this.transaction(et,Ie?"readwrite":"readonly");let en=Tn.store;return re&&(en=en.index(Tt.shift())),(yield Promise.all([en[X](...Tt),Ie&&Tn.done]))[0]});return function(Tt){return Qe.apply(this,arguments)}}();return ut.set(Ae,de),de}!function Re(me){je=me(je)}(me=>vO(yO({},me),{get:(Ae,X,re)=>ue(Ae,X)||me.get(Ae,X,re),has:(Ae,X)=>!!ue(Ae,X)||me.has(Ae,X)}))},5861:(bt,Pe,N)=>{function h(P,se,fe,Ce,Ee,_e,Te){try{var W=P[_e](Te),q=W.value}catch(te){return void fe(te)}W.done?se(q):Promise.resolve(q).then(Ce,Ee)}function U(P){return function(){var se=this,fe=arguments;return new Promise(function(Ce,Ee){var _e=P.apply(se,fe);function Te(q){h(_e,Ce,Ee,Te,W,"next",q)}function W(q){h(_e,Ce,Ee,Te,W,"throw",q)}Te(void 0)})}}N.d(Pe,{Z:()=>U})}},bt=>{bt(bt.s=2354)}]);